<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"nigelkeel.gitee.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="9æœˆ16æ—¥ï¼ˆday 0ï¼‰# 0 å¼€å‘æ‰€éœ€# 12345# node.js# vuenpm uninstall vue-cli -g # å…ˆå…¨å±€å¸è½½è„šæ‰‹æ¶2npm install @vue&#x2F;cli -g  # å®‰è£…è„šæ‰‹æ¶4vue -V                   # æ£€æŸ¥ç‰ˆæœ¬ 1 æ–°å»ºé¡¹ç›®å¹¶å®‰è£…é¡¹ç›®ä¾èµ–# 123456vue create gshop_clientcd gshop_clie">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue å•†åŸé¡¹ç›®">
<meta property="og:url" content="http://nigelkeel.gitee.io/252001/index.html">
<meta property="og:site_name" content="æ°¸è¿œçš„ä¼Šå°”ç“¦">
<meta property="og:description" content="9æœˆ16æ—¥ï¼ˆday 0ï¼‰# 0 å¼€å‘æ‰€éœ€# 12345# node.js# vuenpm uninstall vue-cli -g # å…ˆå…¨å±€å¸è½½è„šæ‰‹æ¶2npm install @vue&#x2F;cli -g  # å®‰è£…è„šæ‰‹æ¶4vue -V                   # æ£€æŸ¥ç‰ˆæœ¬ 1 æ–°å»ºé¡¹ç›®å¹¶å®‰è£…é¡¹ç›®ä¾èµ–# 123456vue create gshop_clientcd gshop_clie">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-02-02T08:49:16.316Z">
<meta property="article:modified_time" content="2021-02-02T17:42:29.064Z">
<meta property="article:author" content="KEEL">
<meta property="article:tag" content="Vue">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://nigelkeel.gitee.io/252001/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>
  <title>Vue å•†åŸé¡¹ç›® | æ°¸è¿œçš„ä¼Šå°”ç“¦</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="stylesheet" href="/css/prism-material-oceanic.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">æ°¸è¿œçš„ä¼Šå°”ç“¦</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">ä¸ªäººçŸ¥è¯†åº“</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/random" rel="section"><i class="fa fa-sitemap fa-fw"></i>éšæœº</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/252001/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="è¿™ä¸ªäººå¾ˆæ‡’ï¼Œä»€ä¹ˆéƒ½æ²¡ç•™ä¸‹ã€‚ ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æ°¸è¿œçš„ä¼Šå°”ç“¦">
    </span>
      <header class="post-header">
        <!-- è‡ªå®šä¹‰id -->
        <span style="color:#ddd; font-size:20px; font-weight: 888; ">252001</span>
        <h1 class="post-title" itemprop="name headline">
          Vue å•†åŸé¡¹ç›®
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-02-02 16:49:16" itemprop="dateCreated datePublished" datetime="2021-02-02T16:49:16+08:00">2021-02-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-02-03 01:42:29" itemprop="dateModified" datetime="2021-02-03T01:42:29+08:00">2021-02-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2520%EF%BC%9AVue%E5%95%86%E5%9F%8E%E9%A1%B9%E7%9B%AE/" itemprop="url" rel="index"><span itemprop="name">2520ï¼šVueå•†åŸé¡¹ç›®</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>125k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <a id="more"></a>
<h1><span id="9-yue-16-ri-day-0">9æœˆ16æ—¥ï¼ˆday 0ï¼‰</span><a href="#9-yue-16-ri-day-0" class="header-anchor">#</a></h1>
<h2><span id="p0-kai-fa-suo-xu">0 å¼€å‘æ‰€éœ€</span><a href="#p0-kai-fa-suo-xu" class="header-anchor">#</a></h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># node.js</span></span><br><span class="line"><span class="comment"># vue</span></span><br><span class="line">npm uninstall vue-cli -g <span class="comment"># å…ˆå…¨å±€å¸è½½è„šæ‰‹æ¶2</span></span><br><span class="line">npm install @vue/cli -g  <span class="comment"># å®‰è£…è„šæ‰‹æ¶4</span></span><br><span class="line">vue -V                   <span class="comment"># æ£€æŸ¥ç‰ˆæœ¬</span></span><br></pre></td></tr></table></figure>
<h2><span id="p1-xin-jian-xiang-mu-bing-an-zhuang-xiang-mu-yi-lai">1 æ–°å»ºé¡¹ç›®å¹¶å®‰è£…é¡¹ç›®ä¾èµ–</span><a href="#p1-xin-jian-xiang-mu-bing-an-zhuang-xiang-mu-yi-lai" class="header-anchor">#</a></h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vue create gshop_client</span><br><span class="line"><span class="built_in">cd</span> gshop_client</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…é¡¹ç›®æ‰€éœ€ä¾èµ– --&gt; å»ºè®®ä¸€ä¸ªä¸€ä¸ªè£…</span></span><br><span class="line">npm install vuex vue-router axios less less-loader</span><br><span class="line">npm install nprogress</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½¿ç”¨çš„æ˜¯ stylus ï¼Œæ¢æˆ <code>stylus stylus-loader</code></p>
<h2><span id="p2-xiang-mu-mu-lu-pei-zhi">2 é¡¹ç›®ç›®å½•é…ç½®</span><a href="#p2-xiang-mu-mu-lu-pei-zhi" class="header-anchor">#</a></h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é¡¹ç›®ç›®å½•ï¼ˆéƒ¨åˆ†ï¼‰</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">â”œâ”€â”€ jsconfig.json         <span class="comment"># VSCode è·¯å¾„é…ç½®æ–‡ä»¶</span></span><br><span class="line">â”œâ”€â”€ vue.config.json       <span class="comment"># Vue é…ç½®æ–‡ä»¶ï¼Œè®¾ç½®ä»£ç†ï¼Œè®¾ç½®è¯­æ³•æ£€æŸ¥å¼€å…³</span></span><br><span class="line">â”œâ”€â”€ public</span><br><span class="line">â”‚   â”œâ”€â”€ css              </span><br><span class="line">â”‚   â”œâ”€â”€ font</span><br><span class="line">â”‚   â”œâ”€â”€ images</span><br><span class="line">â”‚   â””â”€â”€ index.html</span><br><span class="line">â””â”€â”€ src                </span><br><span class="line">    â”œâ”€â”€ api               <span class="comment"># --&gt; å­˜å‚¨å°è£…åçš„apiæ¥å£å‡½æ•°åŠäºŒæ¬¡å°è£…çš„axios</span></span><br><span class="line">    â”œâ”€â”€ components        <span class="comment"># --&gt; æ™®é€šç»„ä»¶ç›®å½•</span></span><br><span class="line">    â”‚   â”œâ”€â”€ Footer        </span><br><span class="line">    â”‚   â”‚   â””â”€â”€ index.vue</span><br><span class="line">    â”‚   â””â”€â”€ Header</span><br><span class="line">    â”‚       â””â”€â”€ index.vue</span><br><span class="line">    â”œâ”€â”€ pages             <span class="comment"># --&gt; è·¯ç”±ç»„ä»¶ç›®å½•</span></span><br><span class="line">    â”‚   â”œâ”€â”€ Home</span><br><span class="line">    â”‚   â”‚   â””â”€â”€ index.vue</span><br><span class="line">    â”‚   â”œâ”€â”€ Login</span><br><span class="line">    â”‚   â”‚   â””â”€â”€ index.vue</span><br><span class="line">    â”‚   â”œâ”€â”€ Register</span><br><span class="line">    â”‚   â”‚   â””â”€â”€ index.vue</span><br><span class="line">    â”‚   â””â”€â”€ Search</span><br><span class="line">    â”‚       â””â”€â”€ index.vue</span><br><span class="line">    â”œâ”€â”€ router            <span class="comment"># --&gt; è·¯ç”±å™¨é…ç½®</span></span><br><span class="line">    â”‚   â”œâ”€â”€ index.js</span><br><span class="line">    â”‚   â””â”€â”€ routes.js</span><br><span class="line">    â”œâ”€â”€ store             <span class="comment"># --&gt; Vuex é…ç½®</span></span><br><span class="line">    â”‚   â”œâ”€â”€ modules       <span class="comment"># Vue æ¨¡å—åŒ–</span></span><br><span class="line">    â”‚   â”œâ”€â”€ index.js</span><br><span class="line">    â”‚   â”œâ”€â”€ state.js</span><br><span class="line">    â”‚   â”œâ”€â”€ mutations.js</span><br><span class="line">    â”‚   â”œâ”€â”€ actions.js</span><br><span class="line">    â”‚   â””â”€â”€ getters.js</span><br><span class="line">    â”œâ”€â”€ mock              <span class="comment"># --&gt; æ¨¡æ‹Ÿåå°æ•°æ®</span></span><br><span class="line">    â”œâ”€â”€ utils             <span class="comment"># --&gt; å·¥å…·</span></span><br><span class="line">    â”œâ”€â”€ App.vue           <span class="comment"># --&gt; æ ¹ç»„ä»¶</span></span><br><span class="line">    â””â”€â”€ main.js           <span class="comment"># --&gt; ä¸»å…¥å£</span></span><br></pre></td></tr></table></figure>
<p>é…ç½® <code>jsconfig.json</code> æ–‡ä»¶</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;baseUrl&quot;</span>: <span class="string">&quot;./&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;paths&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;@/*&quot;</span>: [<span class="string">&quot;src/*&quot;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;exclude&quot;</span>: [<span class="string">&quot;node_modules&quot;</span>, <span class="string">&quot;dist&quot;</span>] </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2><span id="p3-pei-zhi-zhu-ru-kou-wen-jian">3 é…ç½®ä¸»å…¥å£æ–‡ä»¶</span><a href="#p3-pei-zhi-zhu-ru-kou-wen-jian" class="header-anchor">#</a></h2>
<p>main.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App),     <span class="comment">// æ¸²æŸ“ç»„ä»¶</span></span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>) </span><br></pre></td></tr></table></figure>
<h2><span id="p4-pei-zhi-gen-zu-jian">4 é…ç½®æ ¹ç»„ä»¶</span><a href="#p4-pei-zhi-gen-zu-jian" class="header-anchor">#</a></h2>
<p>å¼•å…¥æ™®é€šç»„ä»¶</p>
<p>æ³¨å†Œç»„ä»¶</p>
<p>App.vue</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">   &lt;Header&#x2F;&gt;</span><br><span class="line">   &lt;Footer&#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">&#x2F;&#x2F; å¼•å…¥ç»„ä»¶</span><br><span class="line">import Header from &#39;.&#x2F;components&#x2F;Header&#39;</span><br><span class="line">import Footer from &#39;.&#x2F;components&#x2F;Footer&#39;</span><br><span class="line">    </span><br><span class="line">export default &#123;</span><br><span class="line">  name:&#39;App&#39;,</span><br><span class="line">  &#x2F;&#x2F; æ³¨å†Œç»„ä»¶</span><br><span class="line">  components: &#123;</span><br><span class="line">    Header,</span><br><span class="line">    Footer</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style rel&#x3D;&quot;stylesheet&#x2F;less&quot; scoped&gt;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
<h2><span id="p5-xin-jian-zu-jian">5 æ–°å»ºç»„ä»¶</span><a href="#p5-xin-jian-zu-jian" class="header-anchor">#</a></h2>
<p>æ–°å»º <code>Header</code> <code>Footer</code> <code>Home</code> <code>Login</code> <code>Register</code> <code>Search</code> ç›®å½•ä¸‹çš„ <code>index.vue</code></p>
<p>æ¨¡æ¿å¦‚ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    Footer</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name:&#39;Footer&#39; &#x2F;&#x2F; è¿™é‡Œæ”¹æˆå„ç»„ä»¶åå­—</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot; rel&#x3D;&quot;stylesheet&#x2F;less&quot; scoped&gt;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
<h2><span id="p6-pei-zhi-lu-you">6 é…ç½®è·¯ç”±</span><a href="#p6-pei-zhi-lu-you" class="header-anchor">#</a></h2>
<p><code>router/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> routes <span class="keyword">from</span> <span class="string">&#x27;./routes&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜ä½¿ç”¨è·¯ç”±æ’ä»¶</span></span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ä¾‹åŒ–è·¯ç”±å¯¹è±¡å¹¶æš´éœ²å‡ºå»</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  mode: <span class="string">&#x27;history&#x27;</span>,</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>router/routes.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥ç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">&#x27;@/pages/Home&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Search <span class="keyword">from</span> <span class="string">&#x27;@/pages/Search&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Login <span class="keyword">from</span> <span class="string">&#x27;@/pages/Login&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Register <span class="keyword">from</span> <span class="string">&#x27;@/pages/Register&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘å¤–æš´éœ²æ‰€æœ‰ç»„ä»¶å¯¹è±¡çš„æ•°ç»„</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> [</span><br><span class="line">  <span class="comment">// æ³¨å†Œç»„ä»¶å¯¹è±¡</span></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    component: Home</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    path: <span class="string">&#x27;/search&#x27;</span>,</span><br><span class="line">    component: Search</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    path: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    component: Login</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    path: <span class="string">&#x27;/register&#x27;</span>,</span><br><span class="line">    component: Register</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// é‡å®šå‘</span></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    redirect: <span class="string">&#x27;/&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h2><span id="p7-zhu-ce-lu-you-qi">7 æ³¨å†Œè·¯ç”±å™¨</span><a href="#p7-zhu-ce-lu-you-qi" class="header-anchor">#</a></h2>
<p>main.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼•å…¥è·¯ç”±å™¨</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="comment">// æ³¨å†Œè·¯ç”±å™¨</span></span><br><span class="line">  router,</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App),</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h1><span id="9-yue-18-ri-day-1">9æœˆ18æ—¥ï¼ˆday 1ï¼‰</span><a href="#9-yue-18-ri-day-1" class="header-anchor">#</a></h1>
<h2><span id="p8-jia-zai-lu-you-shi-tu">8 åŠ è½½è·¯ç”±è§†å›¾</span><a href="#p8-jia-zai-lu-you-shi-tu" class="header-anchor">#</a></h2>
<p>App.vue</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// App.vue</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Header</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åŠ è½½è·¯ç”±è§†å›¾ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Footer</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p9-lu-you-zhong-tian-jia-can-shu-shu-ju-geng-xin-shi-tu">9 è·¯ç”±ä¸­æ·»åŠ å‚æ•°æ•°æ®ï¼Œæ›´æ–°è§†å›¾</span><a href="#p9-lu-you-zhong-tian-jia-can-shu-shu-ju-geng-xin-shi-tu" class="header-anchor">#</a></h2>
<p>è·¯ç”±ä¸­åŠ å…¥å‚æ•°æ•°æ®</p>
<p>routes.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#125;, &#123;</span><br><span class="line">  path: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">  component: Login,</span><br><span class="line">  <span class="comment">// åŠ å…¥å‚æ•°æ•°æ®</span></span><br><span class="line">  meta: &#123;</span><br><span class="line">    isHideFooter: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  path: <span class="string">&#x27;/register&#x27;</span>,</span><br><span class="line">  component: Register,</span><br><span class="line">  <span class="comment">// åŠ å…¥å‚æ•°æ•°æ®</span></span><br><span class="line">  meta: &#123;</span><br><span class="line">    isHideFooter: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>æ›´æ–°è§†å›¾</p>
<p>App.vue</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; App.vue</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;Header &#x2F;&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;&#x2F;router-view&gt;</span><br><span class="line">    &lt;!-- åŠ ä¸Š v-if æŒ‡ä»¤ --&gt;</span><br><span class="line">    &lt;Footer v-if&#x3D;&quot;!$route.meta.isHideFooter&quot; &#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure>
<p>å®ç°åœ¨ <code>Login</code> é¡µé¢ å’Œ <code>Resister</code> é¡µé¢ä¸æ˜¾ç¤º <code>Footer</code> ç»„ä»¶</p>
<h2><span id="p10-index-html-jia-ru-yang-shi-wen-jian">10 index.html åŠ å…¥æ ·å¼æ–‡ä»¶</span><a href="#p10-index-html-jia-ru-yang-shi-wen-jian" class="header-anchor">#</a></h2>
<p>æ‹·è´è¾‰é¸¿çš„ <code>iconfont.css</code>   <code>reset.css</code> æ”¾åœ¨ <code>/public/css</code>ä¸­</p>
<p>åŠ å…¥æ ·å¼æ–‡ä»¶ï¼ˆğŸ› ç”¨ç»å¯¹è·¯å¾„ï¼‰</p>
<p>public/index.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width,initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- æ ·å¼é‡ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/css/reset.css&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å›¾æ ‡å­—ä½“æ–‡ä»¶ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/css/iconfont.css&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">htmlWebpackPlugin.options.title</span> %&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p11-chai-fen-jing-tai-ye-mian-zhi-yi">11 æ‹†åˆ†é™æ€é¡µé¢ä¹‹ä¸€</span><a href="#p11-chai-fen-jing-tai-ye-mian-zhi-yi" class="header-anchor">#</a></h2>
<p>ï¼ˆåœ¨å®é™…å¼€å‘ä¸­ï¼Œé™æ€é¡µé¢è‡ªå·±å†™ï¼‰</p>
<p>è¾‰é¸¿çš„ home/index.html   <code>&lt;header class=&quot;header&quot;&gt;</code> å†…å®¹å¤åˆ¶åˆ°</p>
<p>components/Header/index.vue <code>&lt;template&gt;</code> å†…</p>
<p>è¾‰é¸¿çš„ home/css/home.less  <code>.header</code> å¤åˆ¶åˆ°</p>
<p>components/Header/index.vue <code>&lt;style lang=&quot;less&quot; rel=&quot;stylesheet/less&quot; scoped&gt;</code> å†…</p>
<p>åœ¨è¿™ä¸ªç›®å½•æ–°å»º images ç›®å½•ï¼ŒæŠŠ  Logo.png  å¤åˆ¶è¿‡æ¥</p>
<p>è¾‰é¸¿çš„ home/index.html    <code>&lt;header class=&quot;footer&quot;&gt;</code> å†…å®¹å¤åˆ¶åˆ°</p>
<p>components/Footer/index.vue <code>&lt;template&gt;</code> å†…</p>
<p>è¾‰é¸¿çš„ home/css/home.less  <code>.footer</code> å¤åˆ¶åˆ°</p>
<p>components/Footer/index.vue <code>&lt;style lang=&quot;less&quot; rel=&quot;stylesheet/less&quot; scoped&gt;</code> å†…</p>
<p>åœ¨è¿™ä¸ªç›®å½•æ–°å»º images ç›®å½•ï¼ŒæŠŠ  wz_cz.jpg  å¤åˆ¶è¿‡æ¥</p>
<p>å¦‚æœå‡ºç°é”™è¯¯å¯ä»¥<strong>é‡å¯</strong>ä¸€ä¸‹ï¼ˆ <code>npm run serve</code>ï¼‰æ’æŸ¥é—®é¢˜</p>
<h2><span id="p12-chai-fen-jing-tai-ye-mian-zhi-er">12 æ‹†åˆ†é™æ€é¡µé¢ä¹‹äºŒ</span><a href="#p12-chai-fen-jing-tai-ye-mian-zhi-er" class="header-anchor">#</a></h2>
<p>è¾‰é¸¿çš„ home/index.html   <code>&lt;header class=&quot;header&quot;&gt;</code> åˆ° <code>&lt;header class=&quot;footer&quot;&gt;</code> ä¹‹é—´çš„ å†…å®¹å¤åˆ¶åˆ° <code>pages/Home/index.vue</code>  çš„ <code>&lt;template&gt; &lt;div&gt;</code> å†…</p>
<p>æ‹·è´å¯¹åº”çš„ less æ ·å¼</p>
<p>æ‹·è´å¯¹åº”å›¾ç‰‡å¹¶ä¿®æ­£å›¾ç‰‡è·¯å¾„</p>
<ul>
<li><code>./images/home</code> æ›¿æ¢æˆ <code>./images</code></li>
<li><code>../images</code> æ›¿æ¢æˆ <code>./images</code></li>
</ul>
<p>æ³¨é‡Šéƒ¨åˆ†è½®æ’­å›¾ï¼šæŸ¥æ‰¾ swiper å¹¶æ³¨é‡Šï¼ˆæœ‰ä¸‰ä¸ªåœ°æ–¹ï¼‰ï¼Œå°±æ˜¯æœ‰å¤šå¼ å›¾ç•™ä¸€å¼ å°±è¡Œï¼Œå‰©ä¸‹çš„æ³¨é‡Š</p>
<h2><span id="p13-xin-jian-typenav-zu-jian-bing-zhu-ce-wei-gong-gong-zu-jian">13 æ–°å»º TypeNav ç»„ä»¶ å¹¶æ³¨å†Œä¸ºå…¬å…±ç»„ä»¶</span><a href="#p13-xin-jian-typenav-zu-jian-bing-zhu-ce-wei-gong-gong-zu-jian" class="header-anchor">#</a></h2>
<p>åœ¨ <code>componets</code> ä¸­æ–°å»º <code>TyperNav</code> ï¼Œå†åœ¨é‡Œé¢æ–°å»º <code>index.vue</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#39;TypeNav&#39;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot; rel&#x3D;&quot;stylesheet&#x2F;less&quot; scoped&gt;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
<p>ä» Homeç»„ä»¶ ä¸­å‰ªåˆ‡å¯¹åº”çš„ ç»“æ„+æ ·å¼  é»è´´åœ¨è¿™ä¸ªæ–‡ä»¶</p>
<p><strong>åœ¨ main.js ä¸­æ³¨å†Œä¸ºå…¬å…±ç»„ä»¶</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼•å…¥çš„å…¬å…±ç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> TypeNav <span class="keyword">from</span> <span class="string">&#x27;@/components/TypeNav&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®ä¸ºå…¨å±€çš„å…¬å…±ç»„ä»¶</span></span><br><span class="line">Vue.component(<span class="string">&#x27;TypeNav&#x27;</span>, TypeNav)</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>pages/Home/index.vue</code>  ä½¿ç”¨è¿™ä¸ªç»„ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- åœ¨è¿™é‡Œä½¿ç”¨ --&gt;</span><br><span class="line">    &lt;TypeNav &#x2F;&gt;</span><br><span class="line">    </span><br><span class="line"> ...</span><br></pre></td></tr></table></figure>
<h2><span id="p14-chai-fen-jing-tai-ye-mian-zhi-san">14 æ‹†åˆ†é™æ€é¡µé¢ä¹‹ä¸‰</span><a href="#p14-chai-fen-jing-tai-ye-mian-zhi-san" class="header-anchor">#</a></h2>
<p>åœ¨ <code>pages/Home</code> ä¸­æ–°å»º  <code>ListContainer</code> <code>TodayRecommend</code> <code>Rank</code> <code>Floor</code> <code>Brand</code> <code>Like</code></p>
<p>æ–°å»º index.vue æ‹·è´å¯¹åº”çš„ html+css+imagesï¼ˆæ³¨æ„ä¿®æ­£è·¯å¾„ï¼‰</p>
<p>åœ¨Homeç»„ä»¶ä¸­å¼•å…¥å¹¶æ³¨å†Œè¿™å…­ä¸ªç»„ä»¶ï¼Œç„¶åä½¿ç”¨è¿™äº›ç»„ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- @&#x2F;pages&#x2F;Home&#x2F;index.vue--&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- å¯¼èˆª --&gt;</span><br><span class="line">    &lt;TypeNav &#x2F;&gt;</span><br><span class="line">    &lt;!-- åˆ—è¡¨ --&gt;</span><br><span class="line">    &lt;ListContainer &#x2F;&gt;</span><br><span class="line">    &lt;!-- ä»Šæ—¥æ¨è --&gt;</span><br><span class="line">    &lt;TodayRecommend &#x2F;&gt;</span><br><span class="line">    &lt;!-- å•†å“æ’è¡Œ --&gt;</span><br><span class="line">    &lt;Rank &#x2F;&gt;</span><br><span class="line">    &lt;!-- çŒœä½ å–œæ¬¢ --&gt;</span><br><span class="line">    &lt;Like &#x2F;&gt;</span><br><span class="line">    &lt;!-- æ¥¼å±‚ --&gt;</span><br><span class="line">    &lt;Floor &#x2F;&gt;</span><br><span class="line">    &lt;Floor &#x2F;&gt;</span><br><span class="line">    &lt;!-- å•†æ ‡--&gt;</span><br><span class="line">    &lt;Brand &#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  &#x2F;&#x2F; å¼•å…¥ç»„ä»¶</span><br><span class="line">  import Brand from &#39;.&#x2F;Brand&#39;</span><br><span class="line">  import Floor from &#39;.&#x2F;Floor&#39;</span><br><span class="line">  import ListContainer from &#39;.&#x2F;ListContainer&#39;</span><br><span class="line">  import Like from &#39;.&#x2F;Like&#39;</span><br><span class="line">  import Rank from &#39;.&#x2F;Rank&#39;</span><br><span class="line">  import TodayRecommend from &#39;.&#x2F;TodayRecommend&#39;</span><br><span class="line">  </span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#39;Home&#39;,</span><br><span class="line">    &#x2F;&#x2F; æ³¨å†Œç»„ä»¶</span><br><span class="line">    components: &#123;</span><br><span class="line">      Brand,</span><br><span class="line">      Floor,</span><br><span class="line">      ListContainer,</span><br><span class="line">      Like,</span><br><span class="line">      Rank,</span><br><span class="line">      TodayRecommend</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot; rel&#x3D;&quot;stylesheet&#x2F;less&quot; scoped&gt;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
<h2><span id="p15-chai-fen-jing-tai-ye-mian-zhi-si">15 æ‹†åˆ†é™æ€é¡µé¢ä¹‹å››</span><a href="#p15-chai-fen-jing-tai-ye-mian-zhi-si" class="header-anchor">#</a></h2>
<p>å¿—è¿œçš„é¡µé¢ï¼ˆä»…å¤åˆ¶ç™»å½•å’Œæ³¨å†Œ div ä»¥åŠ lessï¼‰</p>
<p>ç™»å½• html + less + images ï¼ˆğŸ› ä¿®æ­£å›¾ç‰‡è·¯å¾„ï¼‰ <code>images/ --&gt; ./images</code></p>
<p>æ³¨å†Œ html + less + images</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Loginç»„ä»¶</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- ç™»å½• --&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;login-wrap&quot;&gt;</span><br><span class="line">...</span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot; rel&#x3D;&quot;stylesheet&#x2F;less&quot; scoped&gt;</span><br><span class="line">  .login-wrap </span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Registerç»„ä»¶</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- æ³¨å†Œ --&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;register&quot;&gt;</span><br><span class="line">...</span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot; rel&#x3D;&quot;stylesheet&#x2F;less&quot; scoped&gt;</span><br><span class="line">  .register</span><br></pre></td></tr></table></figure>
<h2><span id="p16-jia-ji-ge-lu-you-lian-jie-sheng-ming-shi-lu-you-tiao-zhuan">16 åŠ å‡ ä¸ªè·¯ç”±é“¾æ¥ï¼ˆå£°æ˜å¼è·¯ç”±è·³è½¬ï¼‰</span><a href="#p16-jia-ji-ge-lu-you-lian-jie-sheng-ming-shi-lu-you-tiao-zhuan" class="header-anchor">#</a></h2>
<p>ç‚¹å‡»å¤´éƒ¨çš„ <code>ç™»é™†</code> <code>å…è´¹æ³¨å†Œ</code> <code>logo</code> å’Œ ç™»å½•é¡µçš„ <code>ç«‹å³è·³è½¬</code> å’Œ æ³¨å†Œé¡µçš„ <code>ç™»å½•</code> å‡ä¼šè·³è½¬åˆ°ç›¸åº”çš„é¡µé¢</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Header  10 line</span><br><span class="line"></span><br><span class="line">&lt;!-- &lt;a href&#x3D;&quot;###&quot;&gt;ç™»å½•&lt;&#x2F;a&gt;</span><br><span class="line">&lt;a href&#x3D;&quot;###&quot; class&#x3D;&quot;register&quot;&gt;å…è´¹æ³¨å†Œ&lt;&#x2F;a&gt; --&gt;</span><br><span class="line">&lt;router-link to&#x3D;&quot;&#x2F;login&quot;&gt;ç™»å½•&lt;&#x2F;router-link&gt;</span><br><span class="line">&lt;router-link to&#x3D;&quot;&#x2F;register&quot; class&#x3D;&quot;register&quot;&gt;å…è´¹æ³¨å†Œ&lt;&#x2F;router-link&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 31 line</span><br><span class="line"></span><br><span class="line">&lt;!-- &lt;a class&#x3D;&quot;logo&quot; title&#x3D;&quot;å°šå“æ±‡&quot; href&#x3D;&quot;###&quot; target&#x3D;&quot;_blank&quot;&gt;</span><br><span class="line">  &lt;img src&#x3D;&quot;.&#x2F;images&#x2F;Logo.png&quot; alt&#x3D;&quot;&quot;&gt;</span><br><span class="line">&lt;&#x2F;a&gt; --&gt;</span><br><span class="line">&lt;router-link class&#x3D;&quot;logo&quot; title&#x3D;&quot;å°šå“æ±‡&quot; to&#x3D;&quot;&#x2F;&quot;&gt;</span><br><span class="line">  &lt;img src&#x3D;&quot;.&#x2F;images&#x2F;Logo.png&quot; alt&#x3D;&quot;&quot;&gt;</span><br><span class="line">&lt;&#x2F;router-link&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Register  6 line</span><br><span class="line"></span><br><span class="line">&lt;!-- &lt;a href&#x3D;&quot;login.html&quot; target&#x3D;&quot;_blank&quot;&gt;ç™»é™†&lt;&#x2F;a&gt; --&gt;</span><br><span class="line">&lt;router-link to&#x3D;&quot;&#x2F;login&quot;&gt;ç™»é™†&lt;&#x2F;router-link&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Login  42 line</span><br><span class="line"></span><br><span class="line">&lt;!-- &lt;a href&#x3D;&quot;##&quot; class&#x3D;&quot;register&quot;&gt;ç«‹å³æ³¨å†Œ&lt;&#x2F;a&gt; --&gt;</span><br><span class="line">&lt;router-link to&#x3D;&quot;&#x2F;register&quot; class&#x3D;&quot;register&quot;&gt;ç«‹å³æ³¨å†Œ&lt;&#x2F;router-link&gt;</span><br></pre></td></tr></table></figure>
<h2><span id="p17-dian-ji-sou-suo-hou-tiao-zhuan-search-bian-cheng-shi-lu-you-tiao-zhuan">17 ç‚¹å‡»æœç´¢åè·³è½¬ searchï¼ˆç¼–ç¨‹å¼è·¯ç”±è·³è½¬ï¼‰  â–³</span><a href="#p17-dian-ji-sou-suo-hou-tiao-zhuan-search-bian-cheng-shi-lu-you-tiao-zhuan" class="header-anchor">#</a></h2>
<p>ç»‘å®šäº‹ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Header 42 line</span><br><span class="line"></span><br><span class="line">&lt;button class&#x3D;&quot;sui-btn btn-xlarge btn-danger&quot; type&#x3D;&quot;button&quot; @click&#x3D;&quot;toSearch&quot;&gt;æœç´¢&lt;&#x2F;button&gt;</span><br></pre></td></tr></table></figure>
<p>å¯¹åº”çš„å›è°ƒå‡½æ•°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Header 50 line</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;Header&#x27;</span>,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="comment">// ç‚¹å‡»æŒ‰é’®è·³è½¬åˆ°Searché¡µé¢</span></span><br><span class="line">    toSearch() &#123;</span><br><span class="line">      <span class="comment">// æ­¤æ—¶å¤šæ¬¡ç‚¹å‡»æŒ‰é’®ä¼šæŠ¥é”™ï¼Œæ˜¯ vue-router ä¸­çš„ä¸€ä¸ª bug</span></span><br><span class="line">      <span class="built_in">this</span>.$router.push(<span class="string">&#x27;/search&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç‚¹å‡»æœç´¢æŒ‰é’®å åœ°å€å˜ä¸º<code>/search</code></p>
<p>æ­¤å¤„æœ‰ä¸€ä¸ª ğŸ› ï¼Œ<code>this.$router.push</code> ä¸Šé¢é‚£ç§æ–¹æ³•ä½¿ç”¨ï¼Œå¤šæ¬¡ç‚¹å‡»ä¼šæŠ¥é”™ï¼Œéœ€ä¼ å…¥æˆåŠŸå’Œå¤±è´¥å›è°ƒã€‚</p>
<p><code>replace</code> ä¹Ÿæœ‰è¿™ä¸ªé—®é¢˜ï¼Œè€ƒè™‘åˆ°å¤šæ¬¡ä½¿ç”¨ï¼Œè¦ä»æ ¹æœ¬ä¸Šè§£å†³å°±åªèƒ½é‡å†™</p>
<h2><span id="p18-chong-xie-push-he-replace">18 é‡å†™ push å’Œ replace</span><a href="#p18-chong-xie-push-he-replace" class="header-anchor">#</a></h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// router/index.js 11 line</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡å†™ push å’Œ replace</span></span><br><span class="line"><span class="keyword">const</span> pushOrigin = VueRouter.prototype.push</span><br><span class="line">VueRouter.prototype.push = <span class="function"><span class="keyword">function</span> (<span class="params">location, onComplete = () =&gt; &#123;&#125;, onAbort</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> pushOrigin.call(<span class="built_in">this</span>, location, onComplete, onAbort)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> replaceOrigin = VueRouter.prototype.replace</span><br><span class="line">VueRouter.prototype.replace = <span class="function"><span class="keyword">function</span> (<span class="params">location, onComplete, onAbort = () =&gt; &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> replaceOrigin.call(<span class="built_in">this</span>, location, onComplete, onAbort)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶å‡ºç°æŠ¥é”™å°± <code>npm install --save core-js</code></p>
<h2><span id="p19-lu-you-chuan-can-params">19 è·¯ç”±ä¼ å‚ï¼ˆparamsï¼‰ â–³</span><a href="#p19-lu-you-chuan-can-params" class="header-anchor">#</a></h2>
<p>ğŸ’¡  è·¯ç”±ä¼ å‚æ–¹å¼</p>
<p>è·å–æœç´¢æ¡†è¾“å…¥å†…å®¹ï¼Œç‚¹å‡»è·³è½¬ï¼Œæ¯”å¦‚è¾“å…¥ <code>123</code> åˆ™è·³è½¬åˆ° <code>search/123</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  Header 41 line</span></span><br><span class="line"></span><br><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> id=<span class="string">&quot;autocomplete&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;input-error input-xxlarge&quot;</span> v-model=<span class="string">&quot;keyword&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Header 51 line</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•°æ®å¯¹è±¡</span></span><br><span class="line">data() &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    keyword: <span class="string">&#x27;&#x27;</span> <span class="comment">// ç”¨æ¥æ”¶é›†æœç´¢æ¡†ä¸­çš„å…³é”®å­—</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">  <span class="comment">// ç‚¹å‡»æŒ‰é’®è·³è½¬åˆ°Searché¡µé¢</span></span><br><span class="line">  toSearch() &#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ–‡æœ¬æ¡†æ˜¯å¦è¾“å…¥å†…å®¹</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.keyword) &#123;</span><br><span class="line">      <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">        name: <span class="string">&#x27;search&#x27;</span>,</span><br><span class="line">        params: &#123;</span><br><span class="line">          keyword: <span class="built_in">this</span>.keyword</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">        name: <span class="string">&#x27;search&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// routes.js 14 line</span></span><br><span class="line"></span><br><span class="line">path: <span class="string">&#x27;/search/:keyword?&#x27;</span>, <span class="comment">// ? è¡¨ç¤ºå‚æ•°å¯ä¼ å¯ä¸ä¼ </span></span><br><span class="line">component: Search,</span><br><span class="line">name: <span class="string">&#x27;search&#x27;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p20-er-ci-feng-zhuang-axios">20 äºŒæ¬¡å°è£… axios â–³</span><a href="#p20-er-ci-feng-zhuang-axios" class="header-anchor">#</a></h2>
<p>å®‰è£… Nprogress</p>
<p><code>npm install --save nprogress </code></p>
<p>æ–°å»º <code>api/ajax.js</code> æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// äºŒæ¬¡å°è£… axios</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="comment">// å¼•å…¥Nprogressæ’ä»¶å’Œæ’ä»¶çš„æ ·å¼æ–‡ä»¶</span></span><br><span class="line"><span class="comment">// å¯ä»¥åœ¨å‘é€è¯·æ±‚æˆ–è€…ä½œå‡ºå“åº”çš„æ—¶å€™æœ‰è¿›åº¦æ¡çš„æ•ˆæœ</span></span><br><span class="line"><span class="keyword">import</span> Nprogress <span class="keyword">from</span> <span class="string">&#x27;nprogress&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;nprogress/nprogress.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®è¯·æ±‚æ—¶çš„æ ¹è·¯å¾„å’ŒåŠè¯·æ±‚è¶…æ—¶æ—¶é—´ </span></span><br><span class="line"><span class="keyword">const</span> ajax = axios.create(&#123;</span><br><span class="line">  baseURL: <span class="string">&#x27;/api&#x27;</span>, <span class="comment">// è®¾ç½®æ ¹è·¯å¾„</span></span><br><span class="line">  timeOut: <span class="number">20000</span> <span class="comment">// è®¾ç½®è¶…æ—¶æ—¶é—´</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">ajax.interceptors.request.use(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">  Nprogress.start() <span class="comment">// æ˜¾ç¤ºè¿›åº¦æ¡</span></span><br><span class="line">  <span class="keyword">return</span> config</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">ajax.interceptors.response.use(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">  Nprogress.done() <span class="comment">// éšè—è¿›åº¦æ¡</span></span><br><span class="line">  <span class="keyword">return</span> response.data</span><br><span class="line">&#125;), <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">  Nprogress.done() <span class="comment">// éšè—è¿›åº¦æ¡</span></span><br><span class="line">  alert(error.message)</span><br><span class="line">  <span class="comment">// è¿”å›é”™è¯¯ä¿¡æ¯ï¼Œå¤–éƒ¨å¯ä»¥å¤„ç†</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> ajax</span><br></pre></td></tr></table></figure>
<p>æ–°å»º <code>api/index.js</code> æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// api/index.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å°è£…æ¯ä¸ªæ¥å£çš„apiå‡½æ•°</span></span><br><span class="line"><span class="keyword">import</span> ajax <span class="keyword">from</span> <span class="string">&#x27;./ajax&#x27;</span></span><br><span class="line"><span class="comment">// è·å–é¦–é¡µä¸‰çº§åˆ†ç±»ä¿¡æ¯çš„apiæ¥å£å‡½æ•°</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqBaseCategoryList = <span class="function">() =&gt;</span> ajax.get(<span class="string">`/product/getBaseCategoryList`</span>)</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹ <code>App.vue </code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">--&gt; <span class="string">&quot;App.vue&quot;</span> <span class="number">15</span> line</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼•å…¥ api æ¥å£å‡½æ•°</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  reqBaseCategoryList</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br><span class="line"></span><br><span class="line">--&gt; <span class="number">27</span> line</span><br><span class="line"><span class="keyword">async</span> mounted() &#123;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> reqBaseCategoryList()</span><br><span class="line">  <span class="built_in">console</span>.log(result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p21-vue-config-js-eslint-she-zhi-kua-yu-dai-li-she-zhi">21 vue.config.js / eslint è®¾ç½® / è·¨åŸŸä»£ç†è®¾ç½®</span><a href="#p21-vue-config-js-eslint-she-zhi-kua-yu-dai-li-she-zhi" class="header-anchor">#</a></h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">--&gt; <span class="string">&quot;vue.config.js&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  lintOnSave: <span class="literal">true</span>, <span class="comment">// eslint è¯­æ³•æ£€æŸ¥å¼€å…³</span></span><br><span class="line">  devServer: &#123;</span><br><span class="line">    proxy: &#123;</span><br><span class="line">      <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">        target: <span class="string">&#x27;http://182.92.128.115&#x27;</span>,</span><br><span class="line">        changeOrigin: <span class="literal">true</span>  <span class="comment">// å¼€å¯è·¨åŸŸ</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1><span id="9-yue-19-ri-day-2">9æœˆ19æ—¥ï¼ˆday 2ï¼‰</span><a href="#9-yue-19-ri-day-2" class="header-anchor">#</a></h1>
<h2><span id="p22-store-da-jian-he-zhu-ce">22 store æ­å»ºå’Œæ³¨å†Œ</span><a href="#p22-store-da-jian-he-zhu-ce" class="header-anchor">#</a></h2>
<p>åˆ›å»º <code>store/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼•å…¥æ ¸å¿ƒå¯¹è±¡</span></span><br><span class="line"><span class="keyword">import</span> state <span class="keyword">from</span> <span class="string">&#x27;./state&#x27;</span></span><br><span class="line"><span class="keyword">import</span> mutations <span class="keyword">from</span> <span class="string">&#x27;./mutations&#x27;</span></span><br><span class="line"><span class="keyword">import</span> actions <span class="keyword">from</span> <span class="string">&#x27;./actions&#x27;</span></span><br><span class="line"><span class="keyword">import</span> getters <span class="keyword">from</span> <span class="string">&#x27;./getters&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜ä½¿ç”¨æ’ä»¶</span></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ä¾‹åŒ– + æš´éœ²</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state,</span><br><span class="line">  mutations,</span><br><span class="line">  actions,</span><br><span class="line">  getters</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>åˆ›å»º <code>store/state.js</code>  <code>store/mutations.js</code> <code>store/actions.js</code> <code>store/getters.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ›´æ–° <code>main.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">--&gt; <span class="string">&quot;main.js&quot;</span></span><br><span class="line">--&gt; <span class="number">7</span> line</span><br><span class="line"><span class="comment">// å¼•å…¥store</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"></span><br><span class="line">--&gt; <span class="number">20</span> line</span><br><span class="line"><span class="comment">// æ³¨å†Œstore</span></span><br><span class="line">store,</span><br></pre></td></tr></table></figure>
<h2><span id="p23-vuex-zhi-modules">23 Vuex ä¹‹ modules</span><a href="#p23-vuex-zhi-modules" class="header-anchor">#</a></h2>
<p>ğŸ’¡ Vuex çš„ modules çŸ¥è¯†</p>
<p><code>store</code> æ–°å»º ç›®å½• <code>modules</code></p>
<p>é‡Œé¢æ–°å»ºæ–‡ä»¶ <code>home.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  state:&#123;&#125;,</span><br><span class="line">  mutations:&#123;&#125;,</span><br><span class="line">  actions:&#123;&#125;,</span><br><span class="line">  getters:&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ–°å»ºæ–‡ä»¶ <code>index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> home <span class="keyword">from</span> <span class="string">&#x27;./home&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  home</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹ <code>store/index.js</code> æ–‡ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> modules <span class="keyword">from</span> <span class="string">&#x27;./modules&#x27;</span></span><br><span class="line"></span><br><span class="line">getters,</span><br><span class="line"><span class="comment">// ç®¡ç†æ¨¡å—</span></span><br><span class="line">modules</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç»„ä»¶ä¸­è·å–çŠ¶æ€æ•°æ®æ–¹å¼</p>
<p><code>this.$store.state.xxxx</code> / <code>...mapState/(['xxx'])</code></p>
<p><code>this.store.state.æ¨¡å—åå­—.xxx</code> / <code>..mapState(&#123; xxx:&#125;)</code></p>
<p>å°½é‡ä¸èƒ½è®©æ–¹æ³•é‡åï¼Œå¦‚æœæ€»actionsæœ‰ä¸€ä¸ªaæ–¹æ³•ï¼ŒæŸæ¨¡å—ä¸­ä¹Ÿæœ‰aæ–¹æ³•ï¼Œæœ€ç»ˆè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½ä¼šæ‰§è¡Œ</p>
</blockquote>
<h2><span id="p24-home-zu-jian-xiang-guan-de-store">24 Homeç»„ä»¶ç›¸å…³çš„ store</span><a href="#p24-home-zu-jian-xiang-guan-de-store" class="header-anchor">#</a></h2>
<p>ä¿®æ”¹ <code>store</code> ä¸­çš„ <code>home.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥APIæ¥å£å‡½æ•°</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  reqBaseCategoryList</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;@/api&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®¡ç†é¦–é¡µä¸­çš„æ•°æ®</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    <span class="comment">// ä¸‰çº§åˆ†ç±»ä¿¡æ¯æ•°æ®æ•°ç»„</span></span><br><span class="line">    baseCategoryList: []</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    <span class="comment">// ç›´æ¥ä¿®æ”¹ä¸‰çº§åˆ†ç±»ä¿¡æ¯æ•°æ® </span></span><br><span class="line">    RECEIVE_BASE_CATEGORY_LIST(state, baseCategoryList) &#123;</span><br><span class="line">      state.baseCategoryList = baseCategoryList;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    <span class="comment">// å¼‚æ­¥è¯·æ±‚ï¼Œè·å–ä¸‰çº§åˆ†ç±»ä¿¡æ¯æ•°æ®</span></span><br><span class="line">    <span class="keyword">async</span> getBaseCategoryList(&#123;</span><br><span class="line">      commit</span><br><span class="line">    &#125;) &#123;</span><br><span class="line">      <span class="comment">// è°ƒç”¨æ¥å£å‘é€å¼‚æ­¥è¯·æ±‚</span></span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqBaseCategoryList()</span><br><span class="line">      <span class="comment">// åˆ¤æ–­</span></span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="comment">// æäº¤</span></span><br><span class="line">        commit(<span class="string">&#x27;RECEIVE_BASE_CATEGORY_LIST&#x27;</span>, result.data)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ é™¤ <code>App.vue</code> 15è¡Œçš„å¼•å…¥apiæ¥å£è¯­å¥</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ é™¤è¿™ä¸ª</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  reqGetBaseCategoryList</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹22è¡Œçš„ <code>async mounted()&#123;&#125;</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> mounted() &#123;</span><br><span class="line">   <span class="comment">// åˆ†å‘</span></span><br><span class="line">   <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;getBaseCategoryList&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p25-bian-li-typenav-san-ji-fen-lei-shu-ju-bing-xian-shi">25 éå† TypeNav ä¸‰çº§åˆ†ç±»æ•°æ®å¹¶æ˜¾ç¤º</span><a href="#p25-bian-li-typenav-san-ji-fen-lei-shu-ju-bing-xian-shi" class="header-anchor">#</a></h2>
<p>åˆ é™¤ TypeNav ç»„ä»¶ <code>&lt;div class=&quot;item&quot;&gt;</code> 46 - 1688è¡Œ</p>
<p>è§†å›¾éƒ¨åˆ†æ›´æ–°å¦‚ä¸‹</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// &quot;TypeNav&quot; 6 line</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sort&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;all-sort-list2&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- éå†ç¬¬ä¸€å±‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(c1, index) in baseCategoryList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;c1.categoryId&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>&#123;&#123;c1.categoryName&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item-list clearfix&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;subitem&quot;</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- éå†ç¬¬äºŒå±‚ --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">dl</span> <span class="attr">class</span>=<span class="string">&quot;fore&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(c2) in c1.categoryChild&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;c2.categoryId&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dt</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>&#123;&#123;c2.categoryName&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dd</span>&gt;</span></span><br><span class="line">              <span class="comment">&lt;!-- éå†ç¬¬ä¸‰å±‚ --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">em</span> <span class="attr">v-for</span>=<span class="string">&quot;(c3) in c2.categoryChild&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;c3.categoryId&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>&#123;&#123;c3.categoryName&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- è¿™ä¸ªç§»åŠ¨åˆ°è¿™é‡Œ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è„šæœ¬æ›´æ–°å¦‚ä¸‹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &quot;TypeNav&quot;</span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">import</span> &#123;</span><br><span class="line">    mapState</span><br><span class="line">  &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    name: <span class="string">&#x27;TypeNav&#x27;</span>,</span><br><span class="line">    computed: &#123;</span><br><span class="line">      <span class="comment">// è·å–çŠ¶æ€æ•°æ®</span></span><br><span class="line">      ...mapState(&#123;</span><br><span class="line">        baseCategoryList: <span class="function">(<span class="params">state</span>) =&gt;</span> state.home.baseCategoryList</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2><span id="p26-shu-biao-yi-ru-yi-chu-xiao-guo">26 é¼ æ ‡ç§»å…¥ç§»å‡ºæ•ˆæœ</span><a href="#p26-shu-biao-yi-ru-yi-chu-xiao-guo" class="header-anchor">#</a></h2>
<p>TypeNav  æ·»åŠ äº‹ä»¶å’Œç»‘å®šæ ·å¼å±æ€§ å¦‚ä¸‹ä¸­çš„ 1 å’Œ 2</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">// TypeNav ç¬¬4è¡Œ</span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 1 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> @<span class="attr">mouseleave</span>=<span class="string">&quot;currentIndex=-2&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;all&quot;</span>&gt;</span>å…¨éƒ¨å•†å“åˆ†ç±»<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sort&quot;</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- éå†æ˜¾ç¤ºå¯¼èˆªæ•°æ® --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;all-sort-list2&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- éå†ç¬¬ä¸€å±‚ --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 2 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(c1,index) in baseCategoryList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;c1.categoryId&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">:class</span>=<span class="string">&quot;&#123;item_on:currentIndex===index&#125;&quot;</span> @<span class="attr">mouseenter</span>=<span class="string">&quot;showSubCategory(index)&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>&#123;&#123;c1.categoryName&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item-list clearfix&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;subitem&quot;</span>&gt;</span></span><br><span class="line">                  <span class="comment">&lt;!-- éå†ç¬¬äºŒå±‚ --&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">dl</span> <span class="attr">class</span>=<span class="string">&quot;fore&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(c2) in c1.categoryChild&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;c2.categoryId&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">dt</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>&#123;&#123;c2.categoryName&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">dd</span>&gt;</span></span><br><span class="line">                      <span class="comment">&lt;!-- éå†ç¬¬ä¸‰å±‚ --&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">em</span> <span class="attr">v-for</span>=<span class="string">&quot;(c3) in c2.categoryChild&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;c3.categoryId&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>&#123;&#123;c3.categoryName&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- @mouseleave äº‹ä»¶é‚£ä¸ªdivåˆ°è¿™é‡Œç»“æŸ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>dataæ›´æ–°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    currentIndex: <span class="number">-2</span> <span class="comment">// ç”¨æ¥å‚¨å­˜é¼ æ ‡è¿›å…¥æŸä¸€é¡¹çš„æ—¶å€™çš„ç´¢å¼•</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>methodsæ›´æ–°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  <span class="comment">// é¼ æ ‡è¿›å…¥äº‹ä»¶</span></span><br><span class="line">  showSubCategory(index) &#123;</span><br><span class="line">    <span class="comment">// é¼ æ ‡è¿›å…¥çš„æ—¶å€™æŠŠå½“å‰è¿™ä¸ªé¡¹çš„ç´¢å¼•ä¿å­˜èµ·æ¥</span></span><br><span class="line">    <span class="built_in">this</span>.currentIndex = index</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ ·å¼æ›´æ–° <code>&amp;:hover </code> æ”¹æˆ <code>&amp;.item_on</code></p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 187è¡Œ</span></span><br><span class="line">            <span class="selector-tag">&amp;</span><span class="selector-class">.item_on</span> &#123;</span><br><span class="line">              <span class="attribute">background-color</span>: <span class="number">#02a774</span>;</span><br><span class="line"></span><br><span class="line">              <span class="selector-class">.item-list</span> &#123;</span><br><span class="line">                <span class="attribute">display</span>: block;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>
<p>å‘ˆç°é¼ æ ‡ç§»å…¥æ ‡è®°æ•ˆæœ</p>
<h2><span id="p27-an-xu-yin-ru-lodash-zhong-jie-liu-han-shu">27 æŒ‰éœ€å¼•å…¥lodashä¸­èŠ‚æµå‡½æ•°</span><a href="#p27-an-xu-yin-ru-lodash-zhong-jie-liu-han-shu" class="header-anchor">#</a></h2>
<p>ğŸ’¡ èŠ‚æµ / é˜²æŠ–å‡½æ•°</p>
<p>å®‰è£… lodash</p>
<p><code>npm install lodash</code></p>
<p>å¼•å…¥ lodash</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TypeNav 55è¡Œ</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// æŒ‰éœ€å¼•å…¥ lodash ä¸­çš„ èŠ‚æµå‡½æ•°</span></span><br><span class="line">  <span class="keyword">import</span> throttle <span class="keyword">from</span> <span class="string">&#x27;lodash/throttle&#x27;</span></span><br></pre></td></tr></table></figure>
<p>æ›´æ–° methods</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é¼ æ ‡è¿›å…¥äº‹ä»¶</span></span><br><span class="line">showSubCategory: throttle( <span class="function"><span class="keyword">function</span> (<span class="params">index</span>)</span>&#123;</span><br><span class="line">   <span class="comment">// é¼ æ ‡è¿›å…¥çš„æ—¶å€™æŠŠå½“å‰è¿™ä¸ªé¡¹çš„ç´¢å¼•ä¿å­˜èµ·æ¥</span></span><br><span class="line">  <span class="built_in">this</span>.currentIndex = index</span><br><span class="line">&#125;, <span class="number">333</span>)</span><br></pre></td></tr></table></figure>
<h2><span id="p28-query-fang-shi-lu-you-chuan-can-shi-jian-wei-tuo-mou-pao">28 queryæ–¹å¼è·¯ç”±ä¼ å‚ + äº‹ä»¶å§”æ‰˜ï¼ˆå†’æ³¡ï¼‰ â–³</span><a href="#p28-query-fang-shi-lu-you-chuan-can-shi-jian-wei-tuo-mou-pao" class="header-anchor">#</a></h2>
<p>è¿™é‡Œä¸å®œé‡‡ç”¨ä¸‰å±‚ <code>v-for</code> åµŒå¥—çš„è·¯ç”±è§†å›¾æˆ–è€…æ˜¯äº‹ä»¶ï¼Œåº”è¯¥é‡‡ç”¨äº‹ä»¶å§”æ‰˜çš„æ–¹å¼</p>
<p>é€šè¿‡äº‹ä»¶ç»‘å®šå§”æ‰˜ç»‘å®šç‚¹å‡»äº‹ä»¶å¦‚ 1 æ‰€ç¤º</p>
<p>ç»™aæ ‡ç­¾æ·»åŠ è‡ªå®šä¹‰å±æ€§å¦‚ 2 3 4 æ‰€ç¤º</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">// TypeNav 7è¡Œ</span><br><span class="line">       <span class="comment">&lt;!-- 1 è¿™é‡ŒåŠ äº†ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼ˆäº‹ä»¶å§”æ‰˜ï¼‰ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sort&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;toSearch&quot;</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- éå†æ˜¾ç¤ºå¯¼èˆªæ•°æ® --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;all-sort-list2&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- éå†ç¬¬ä¸€å±‚ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(c1,index) in baseCategoryList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;c1.categoryId&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">:class</span>=<span class="string">&quot;&#123; item_on:currentIndex===index&#125;&quot;</span> @<span class="attr">mouseenter</span>=<span class="string">&quot;showSubCategory(index)&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 2 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">:data-categoryName</span>=<span class="string">&quot;c1.categoryName&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">:data-category1Id</span>=<span class="string">&quot;c1.categoryId&quot;</span>&gt;</span>&#123;&#123;c1.categoryName&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item-list clearfix&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;subitem&quot;</span>&gt;</span></span><br><span class="line">                  <span class="comment">&lt;!-- éå†ç¬¬äºŒå±‚ --&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">dl</span> <span class="attr">class</span>=<span class="string">&quot;fore&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(c2) in c1.categoryChild&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;c2.categoryId&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">dt</span>&gt;</span></span><br><span class="line">                      <span class="comment">&lt;!-- 3 --&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">:data-categoryName</span>=<span class="string">&quot;c2.categoryName&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:data-category2Id</span>=<span class="string">&quot;c2.categoryId&quot;</span>&gt;</span>&#123;&#123;c2.categoryName&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">dd</span>&gt;</span></span><br><span class="line">                      <span class="comment">&lt;!-- éå†ç¬¬ä¸‰å±‚ --&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">em</span> <span class="attr">v-for</span>=<span class="string">&quot;(c3) in c2.categoryChild&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;c3.categoryId&quot;</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- 4 --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">:data-categoryName</span>=<span class="string">&quot;c3.categoryName&quot;</span></span></span><br><span class="line"><span class="tag">                          <span class="attr">:data-category3Id</span>=<span class="string">&quot;c3.categoryId&quot;</span>&gt;</span>&#123;&#123;c3.categoryName&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ›´æ–°å¯¹åº”çš„ç‚¹å‡»äº‹ä»¶ <code>toSearch</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TypeNav 73è¡Œ</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">      ...</span><br><span class="line">      <span class="comment">// ç‚¹å‡»è·³è½¬äº‹ä»¶ï¼ˆç‚¹å‡»å¤–å±‚divï¼Œå®ç°è·¯ç”±è·³è½¬ï¼‰</span></span><br><span class="line">      toSearch(e) &#123;</span><br><span class="line">        <span class="comment">// äº‹ä»¶å§”æ‰˜</span></span><br><span class="line">        <span class="keyword">const</span> nodeTarget = e.target</span><br><span class="line">        <span class="comment">// åˆ¤æ–­æ˜¯ä¸æ˜¯aæ ‡ç­¾</span></span><br><span class="line">        <span class="keyword">if</span> (nodeTarget.nodeName === <span class="string">&#x27;A&#x27;</span>) &#123;</span><br><span class="line">          <span class="comment">// è§£æ„</span></span><br><span class="line">          <span class="keyword">const</span> &#123;</span><br><span class="line">            categoryname,</span><br><span class="line">            category1id,</span><br><span class="line">            category2id,</span><br><span class="line">            category3id</span><br><span class="line">          &#125; = nodeTarget.dataset</span><br><span class="line">          <span class="keyword">const</span> query = &#123;</span><br><span class="line">            categoryName: categoryname</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">// åˆ¤æ–­</span></span><br><span class="line">          <span class="keyword">if</span> (category1id) &#123;</span><br><span class="line">            query.category1Id = category1id</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (category2id) &#123;</span><br><span class="line">            query.category2Id = category2id</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (category3id) &#123;</span><br><span class="line">            query.category3Id = category3id</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">// è·¯ç”±è·³è½¬</span></span><br><span class="line">          <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">            path: <span class="string">&#x27;/search&#x27;</span>,</span><br><span class="line">            query</span><br><span class="line">          &#125;)</span><br><span class="line">          <span class="comment">// éšè—é«˜äº®æ•ˆæœ</span></span><br><span class="line">          <span class="built_in">this</span>.currentIndex = <span class="number">-2</span></span><br><span class="line">          </span><br><span class="line">          <span class="built_in">this</span>.isShowFirst = <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šå¯ä»¥å®ç°ç‚¹å‡» TypeNav ä¸­çš„ä¸€çº§äºŒçº§ä¸‰çº§é“¾æ¥è·³è½¬ Search</p>
<p>URL ä¸º <code>search?categoryName=ç”µè„‘åŠå…¬&amp;categoryId=6</code>  ä¹‹ç±»çš„æ•ˆæœ</p>
<h2><span id="p29-search-ye-mian-tian-jia-typenav">29 Search é¡µé¢æ·»åŠ  TypeNav</span><a href="#p29-search-ye-mian-tian-jia-typenav" class="header-anchor">#</a></h2>
<p>Search æ·»åŠ  TypeNav æ ‡ç­¾</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TypeNav</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>TypeNav ç¬¬8è¡Œæ·»åŠ ä¸€ä¸ª <code>v-if</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sort&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;toSearch&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;isShowFirst&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>data æ·»åŠ ä¸€ä¸ª isShowFirst  æ•°æ®</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    currentIndex: <span class="number">-2</span>, <span class="comment">// ç”¨æ¥å‚¨å­˜é¼ æ ‡è¿›å…¥æŸä¸€é¡¹çš„æ—¶å€™çš„ç´¢å¼•</span></span><br><span class="line">    isShowFirst: <span class="literal">true</span> <span class="comment">// é»˜è®¤ true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>ç¬¬5è¡Œ æ›´æ–°</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> @<span class="attr">mouseleave</span>=<span class="string">&quot;hideFirst&quot;</span> @<span class="attr">mouseenter</span>=<span class="string">&quot;showFirst&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬114è¡Œ æ·»åŠ </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯¥ç»„ä»¶åŠ è½½å®Œæ¯•çš„æ—¶å€™é‡Œé¢çš„èœå•æ˜¯å¦éšè—å–å†³äºå½“å‰çš„åœ°å€ï¼ˆè·¯ç”±åœ°å€/è·¯å¾„ï¼‰</span></span><br><span class="line">mounted() &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">this</span>.$route.path !== <span class="string">&#x27;/&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœä¸æ˜¯é¦–é¡µ å°±éšè—èœå•</span></span><br><span class="line">    <span class="built_in">this</span>.isShowFirst = <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>methods ä¸­æ·»åŠ ä¸¤ä¸ªæ–¹æ³•</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// é¼ æ ‡è¿›å…¥</span></span><br><span class="line">  showFirst() &#123;</span><br><span class="line">    <span class="built_in">this</span>.isShowFirst = <span class="literal">true</span></span><br><span class="line">    <span class="built_in">this</span>.currentIndex = <span class="number">-1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// é¼ æ ‡ç¦»å¼€</span></span><br><span class="line">  hideFirst() &#123;</span><br><span class="line">    <span class="built_in">this</span>.currentIndex = <span class="number">-2</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.$route.path != <span class="string">&#x27;/&#x27;</span>) &#123;</span><br><span class="line">      <span class="built_in">this</span>.isShowFirst = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹ showSubCategory</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">showSubCategory: throttle(<span class="function"><span class="keyword">function</span> (<span class="params">index</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// é¼ æ ‡è¿›å…¥çš„æ—¶å€™æŠŠå½“å‰è¿™ä¸ªé¡¹çš„ç´¢å¼•ä¿å­˜èµ·æ¥</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">this</span>.currentIndex !== <span class="number">-2</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.currentIndex = index</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="number">300</span>),</span><br></pre></td></tr></table></figure>
<h2><span id="p30-yin-ru-mockjs">30 å¼•å…¥ mockJS</span><a href="#p30-yin-ru-mockjs" class="header-anchor">#</a></h2>
<p>ç”Ÿæˆéšæœºæ•°æ®ï¼Œæ‹¦æˆªajaxè¯·æ±‚</p>
<p>å®‰è£… <code>npm install mockjs</code></p>
<p>mock ç›®å½•æ–°å»º <code>banners.json</code> ï¼ˆç›´æ¥æ‹·è´ä»£ç ï¼‰</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;id|1-10&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;imgUrl&quot;</span>: <span class="string">&quot;/images/banner1.jpg&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;imgUrl&quot;</span>: <span class="string">&quot;/images/banner2.jpg&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;3&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;imgUrl&quot;</span>: <span class="string">&quot;/images/banner3.jpg&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;4&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;imgUrl&quot;</span>: <span class="string">&quot;/images/banner4.jpg&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>mock ç›®å½•æ–°å»º <code>floors.json</code> ï¼ˆç›´æ¥æ‹·è´ä»£ç ï¼‰</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;001&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;å®¶ç”¨ç”µå™¨&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;keywords&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;èŠ‚èƒ½è¡¥è´´&quot;</span>,</span><br><span class="line">      <span class="string">&quot;4Kç”µè§†&quot;</span>,</span><br><span class="line">      <span class="string">&quot;ç©ºæ°”å‡€åŒ–å™¨&quot;</span>,</span><br><span class="line">      <span class="string">&quot;IHç”µé¥­ç…²&quot;</span>,</span><br><span class="line">      <span class="string">&quot;æ»šç­’æ´—è¡£æœº&quot;</span>,</span><br><span class="line">      <span class="string">&quot;ç”µçƒ­æ°´å™¨&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;imgUrl&quot;</span>: <span class="string">&quot;/images/floor-1-1.png&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;navList&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;çƒ­é—¨&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;å¤§å®¶ç”µ&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;ç”Ÿæ´»ç”µå™¨&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;å¨æˆ¿ç”µå™¨&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;åº”å­£ç”µå™¨&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;ç©ºæ°”/å‡€æ°´&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;é«˜ç«¯ç”µå™¨&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;carouselList&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;0011&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;imgUrl&quot;</span>: <span class="string">&quot;/images/floor-1-b01.png&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;0012&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;imgUrl&quot;</span>: <span class="string">&quot;/images/floor-1-b02.png&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;0013&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;imgUrl&quot;</span>: <span class="string">&quot;/images/floor-1-b03.png&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;recommendList&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;/images/floor-1-2.png&quot;</span>,</span><br><span class="line">      <span class="string">&quot;/images/floor-1-3.png&quot;</span>,</span><br><span class="line">      <span class="string">&quot;/images/floor-1-5.png&quot;</span>,</span><br><span class="line">      <span class="string">&quot;/images/floor-1-6.png&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;bigImg&quot;</span>: <span class="string">&quot;/images/floor-1-4.png&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;002&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;æ‰‹æœºé€šè®¯&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;keywords&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;èŠ‚èƒ½è¡¥è´´2&quot;</span>,</span><br><span class="line">      <span class="string">&quot;4Kç”µè§†2&quot;</span>,</span><br><span class="line">      <span class="string">&quot;ç©ºæ°”å‡€åŒ–å™¨2&quot;</span>,</span><br><span class="line">      <span class="string">&quot;IHç”µé¥­ç…²2&quot;</span>,</span><br><span class="line">      <span class="string">&quot;æ»šç­’æ´—è¡£æœº2&quot;</span>,</span><br><span class="line">      <span class="string">&quot;ç”µçƒ­æ°´å™¨2&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;imgUrl&quot;</span>: <span class="string">&quot;/images/floor-1-1.png&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;navList&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;çƒ­é—¨2&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;å¤§å®¶ç”µ2&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;ç”Ÿæ´»ç”µå™¨2&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;å¨æˆ¿ç”µå™¨2&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;åº”å­£ç”µå™¨2&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;ç©ºæ°”/å‡€æ°´2&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;é«˜ç«¯ç”µå™¨2&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;carouselList&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;0011&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;imgUrl&quot;</span>: <span class="string">&quot;/images/floor-1-b01.png&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;0012&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;imgUrl&quot;</span>: <span class="string">&quot;/images/floor-1-b02.png&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;0013&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;imgUrl&quot;</span>: <span class="string">&quot;/images/floor-1-b03.png&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;recommendList&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;/images/floor-1-2.png&quot;</span>,</span><br><span class="line">      <span class="string">&quot;/images/floor-1-3.png&quot;</span>,</span><br><span class="line">      <span class="string">&quot;/images/floor-1-5.png&quot;</span>,</span><br><span class="line">      <span class="string">&quot;/images/floor-1-6.png&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;bigImg&quot;</span>: <span class="string">&quot;/images/floor-1-4.png&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>mock ç›®å½•æ–°å»º <code>index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥ Mock</span></span><br><span class="line"><span class="keyword">import</span> Mock <span class="keyword">from</span> <span class="string">&#x27;mockjs&#x27;</span></span><br><span class="line"><span class="comment">// å¼•å…¥æ¨¡ç‰ˆæ•°æ®</span></span><br><span class="line"><span class="keyword">import</span> banners <span class="keyword">from</span> <span class="string">&#x27;./banners.json&#x27;</span></span><br><span class="line"><span class="keyword">import</span> floors <span class="keyword">from</span> <span class="string">&#x27;./floors.json&#x27;</span></span><br><span class="line"><span class="comment">// æ ¹æ®æŒ‡å®šçš„åœ°å€ç”Ÿæˆéšæœºçš„æ•°æ®</span></span><br><span class="line">Mock.mock(<span class="string">&#x27;/mock/banners&#x27;</span>, &#123;</span><br><span class="line">  code: <span class="number">200</span>,</span><br><span class="line">  message: <span class="string">&#x27;æˆåŠŸ&#x27;</span>,</span><br><span class="line">  data: banners</span><br><span class="line">&#125;)</span><br><span class="line">Mock.mock(<span class="string">&#x27;/mock/floors&#x27;</span>, &#123;</span><br><span class="line">  code: <span class="number">200</span>,</span><br><span class="line">  message: <span class="string">&#x27;æˆåŠŸ&#x27;</span>,</span><br><span class="line">  data: floors</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>å¤åˆ¶ä¸€ä»½ <code>api/ajax.js</code> æ”¹å <code>ajaxMock.js</code></p>
<p>æŠŠå…¶ä¸­æ ¹è·¯å¾„ï¼ˆç¬¬11è¡Œï¼‰<code>baseURL:'/api'</code> æ”¹æˆ <code>baseURL:'/mock'</code></p>
<p><code>api/index.js</code> å¼•å…¥ ajaxMock</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ajaxMock <span class="keyword">from</span> <span class="string">&#x27;./ajaxMock&#x27;</span></span><br></pre></td></tr></table></figure>
<p>æœ«å°¾ åŠ </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½® mock ç›¸å…³çš„æ¥å£å‡½æ•°</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqBanners = <span class="function">() =&gt;</span> ajaxMock.get(<span class="string">&#x27;/mock/banners&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqFloors = <span class="function">() =&gt;</span> ajaxMock.get(<span class="string">&#x27;/mock/floors&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p><code>main.js</code> åŠ </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;./mock&quot;</span></span><br></pre></td></tr></table></figure>
<p>Home ç»„ä»¶å¼•å…¥æµ‹è¯•</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    reqBanners,</span><br><span class="line">    reqFloors</span><br><span class="line">  &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">async</span> mounted() &#123;</span><br><span class="line">      <span class="keyword">const</span> r1 = <span class="keyword">await</span> reqBanners()</span><br><span class="line">      <span class="keyword">const</span> r2 = <span class="keyword">await</span> reqFloors()</span><br><span class="line">      <span class="built_in">console</span>.log(r1, r2)</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>
<h2><span id="p31-mock-xiang-guan-shu-ju-jia-ru-store-zhong">31 mockç›¸å…³æ•°æ®åŠ å…¥ store ä¸­</span><a href="#p31-mock-xiang-guan-shu-ju-jia-ru-store-zhong" class="header-anchor">#</a></h2>
<p><code>store/modules/home.js</code></p>
<p>ä¿®æ”¹å¼•å…¥</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  reqBaseCategoryList,</span><br><span class="line">  reqBanners,</span><br><span class="line">  reqFloors</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br></pre></td></tr></table></figure>
<p>state åŠ å…¥</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¤§è½®æ’­å›¾æ•°æ®</span></span><br><span class="line">banners: [],</span><br><span class="line"><span class="comment">// æ¥¼å±‚æ•°æ®</span></span><br><span class="line">floors: []</span><br></pre></td></tr></table></figure>
<p>mutations åŠ å…¥</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›´æ¥ä¿®æ”¹å¤§è½®æ’­å›¾çš„æ•°æ®</span></span><br><span class="line">RECEIVE_BANNERS(state, banners) &#123;</span><br><span class="line">  state.banners = banners</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// ç›´æ¥ä¿®æ”¹æ¥¼å±‚çš„æ•°æ®</span></span><br><span class="line">RECEIVE_FLOORS(state, floors) &#123;</span><br><span class="line">  state.floors = floors</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>actions åŠ å…¥</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼‚æ­¥è·å–å¤§è½®æ’­å›¾çš„æ•°æ®</span></span><br><span class="line"><span class="keyword">async</span> getBanners (&#123; commit &#125;) &#123;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> reqBanners()</span><br><span class="line">  <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">    commit(<span class="string">&#x27;RECEIVE_BANNERS&#x27;</span>, result.data)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// å¼‚æ­¥è·å–æ¥¼å±‚çš„æ•°æ®</span></span><br><span class="line"><span class="keyword">async</span> getFloors (&#123; commit &#125;) &#123;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> reqFloors()</span><br><span class="line">  <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">    commit(<span class="string">&#x27;RECEIVE_FLOORS&#x27;</span>, result.data)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Home ç»„ä»¶å¼•å…¥æµ‹è¯•</p>
<p>åˆ é™¤å‰é¢çš„</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    reqBanners,</span><br><span class="line">    reqFloors</span><br><span class="line">  &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> mounted() &#123;</span><br><span class="line">  <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;getBanners&#x27;</span>)</span><br><span class="line">  <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;getFloors&#x27;</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>Home-&gt;ListContainer ç»„ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;ListContainer&#x27;</span>,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    ...mapState(&#123;</span><br><span class="line">      banners:<span class="function"><span class="params">state</span>=&gt;</span>state.home.banners</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p32-swiper-shi-xian-lun-bo-tu">32 Swiper å®ç°è½®æ’­å›¾</span><a href="#p32-swiper-shi-xian-lun-bo-tu" class="header-anchor">#</a></h2>
<p>å®‰è£… Swiper <code>npm install swiper@5.4.2</code></p>
<p>ListContainer è½®æ’­å›¾ ç¬¬5è¡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--bannerè½®æ’­--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-wrapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/banner1.jpg&quot;</span> <span class="attr">alt</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/banner2.jpg&quot;</span> <span class="attr">alt</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/banner3.jpg&quot;</span> <span class="attr">alt</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/banner4.jpg&quot;</span> <span class="attr">alt</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å¦‚æœéœ€è¦åˆ†é¡µå™¨ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-pagination&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å¦‚æœéœ€è¦å¯¼èˆªæŒ‰é’® --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-button-prev&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-button-next&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>115è¡Œ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥swiperå¯¹è±¡</span></span><br><span class="line"><span class="keyword">import</span> Swiper <span class="keyword">from</span> <span class="string">&#x27;swiper&#x27;</span></span><br><span class="line"><span class="comment">// å¼•å…¥swiperçš„æ ·å¼</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;swiper/css/swiper.css&#x27;</span></span><br></pre></td></tr></table></figure>
<p>126è¡Œ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#125;,</span><br><span class="line"><span class="comment">// å½“å‰ç»„ä»¶æ¸²æŸ“å®Œæ¯•çš„ç”Ÿå‘½å‘¨æœŸå›è°ƒ</span></span><br><span class="line">mounted() &#123;</span><br><span class="line">  <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span><br><span class="line">    loop: <span class="literal">true</span>, <span class="comment">// å¾ªç¯æ¨¡å¼é€‰é¡¹</span></span><br><span class="line">    <span class="comment">// å¦‚æœéœ€è¦åˆ†é¡µå™¨</span></span><br><span class="line">    pagination: &#123;</span><br><span class="line">      el: <span class="string">&#x27;.swiper-pagination&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// å¦‚æœéœ€è¦å‰è¿›åé€€æŒ‰é’®</span></span><br><span class="line">    navigation: &#123;</span><br><span class="line">      nextEl: <span class="string">&#x27;.swiper-button-next&#x27;</span>,</span><br><span class="line">      prevEl: <span class="string">&#x27;.swiper-button-prev&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>å®ç°è½®æ’­å›¾æ•ˆæœ</p>
<h1><span id="9-yue-21-ri-day-3">9æœˆ21æ—¥ï¼ˆday 3ï¼‰</span><a href="#9-yue-21-ri-day-3" class="header-anchor">#</a></h1>
<h2><span id="p33-xiang-mu-you-hua">33 é¡¹ç›®ä¼˜åŒ–</span><a href="#p33-xiang-mu-you-hua" class="header-anchor">#</a></h2>
<p>store/modules/home.js 20è¡Œ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RECEIVE_BASE_CATEGORY_LIST(state, baseCategoryList) &#123;</span><br><span class="line">  state.baseCategoryList = baseCategoryList.splice(<span class="number">0</span>, baseCategoryList.length - <span class="number">2</span>);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>ListContainer <code>  import 'swiper/css/swiper.css'</code> å»æ‰ï¼Œæ”¹ä¸ºåœ¨ <code>main.js</code> ä¸­å¼•å…¥</p>
<h2><span id="p34-lun-bo-tu-yu-shu-ju-jia-zai-yu-xuan-ran-swiper-dui-xiang-chuang-jian-shi-ji">34 è½®æ’­å›¾ä¸æ•°æ®åŠ è½½ä¸æ¸²æŸ“ï¼ŒSwiperå¯¹è±¡åˆ›å»ºæ—¶æœº</span><a href="#p34-lun-bo-tu-yu-shu-ju-jia-zai-yu-xuan-ran-swiper-dui-xiang-chuang-jian-shi-ji" class="header-anchor">#</a></h2>
<p>public/image é‡Œé¢è¦æœ‰è½®æ’­ä½¿ç”¨çš„å›¾</p>
<p>ListContainer 5è¡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--bannerè½®æ’­--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-container&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sw&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-wrapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(carousel) in banners&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;carousel.id&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;carousel.imgUrl&quot;</span> <span class="attr">alt</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å¦‚æœéœ€è¦åˆ†é¡µå™¨ --&gt;</span></span><br></pre></td></tr></table></figure>
<p>scriptéƒ¨åˆ†æ›´æ–°ä¸º</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">  computed: &#123;</span><br><span class="line">    ...mapState(&#123;</span><br><span class="line">      banners: <span class="function"><span class="params">state</span> =&gt;</span> state.home.banners</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    banners() &#123;</span><br><span class="line">      <span class="built_in">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span><br><span class="line">          loop: <span class="literal">true</span>, <span class="comment">// å¾ªç¯æ¨¡å¼é€‰é¡¹</span></span><br><span class="line">          <span class="comment">// å¦‚æœéœ€è¦åˆ†é¡µå™¨</span></span><br><span class="line">          pagination: &#123;</span><br><span class="line">            el: <span class="string">&#x27;.swiper-pagination&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="comment">// å¦‚æœéœ€è¦å‰è¿›åé€€æŒ‰é’®</span></span><br><span class="line">          navigation: &#123;</span><br><span class="line">            nextEl: <span class="string">&#x27;.swiper-button-next&#x27;</span>,</span><br><span class="line">            prevEl: <span class="string">&#x27;.swiper-button-prev&#x27;</span>,</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œåº”è¯¥å¯ä»¥çœ‹åˆ°è½®æ’­å›¾æ•ˆæœï¼ˆbannerï¼‰</p>
<h2><span id="p35-floor-shi-tu-sheng-cheng">35 Floor è§†å›¾ç”Ÿæˆ</span><a href="#p35-floor-shi-tu-sheng-cheng" class="header-anchor">#</a></h2>
<p>Home ç»„ä»¶ä¸­</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥è¾…åŠ©å‡½æ•°</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  mapState</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–æ•°æ®</span></span><br><span class="line">computed: &#123;</span><br><span class="line">  ...mapState(&#123;</span><br><span class="line">    floors: <span class="function"><span class="params">state</span> =&gt;</span> state.home.floors</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// åˆ†å‘ actions</span></span><br><span class="line"><span class="keyword">async</span> mounted() &#123;</span><br><span class="line">  <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;getBanners&#x27;</span>)</span><br><span class="line">  <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;getFloors&#x27;</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>14è¡Œï¼Œåˆ é™¤ä¸€ä¸ªç•™ä¸€ä¸ª</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ¥¼å±‚ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Floor</span> <span class="attr">v-for</span>=<span class="string">&quot;(floor) in floors&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;floor.id&quot;</span> <span class="attr">:floor</span>=<span class="string">&quot;floor&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>Floorä¸­</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–å‚æ•°</span></span><br><span class="line">props: &#123;</span><br><span class="line">  floor: <span class="built_in">Object</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¬¬6è¡Œä¿®æ”¹</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;fl&quot;</span>&gt;</span>&#123;&#123;floor.name&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬8è¡Œä¿®æ”¹</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav-tabs clearfix&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;active:index===0&#125;&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(nav,index) in floor.navList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;tab&quot;</span>&gt;</span>&#123;&#123;nav.text&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬19è¡Œä¿®æ”¹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;jd-list&quot;</span>&gt;</span><br><span class="line">  &lt;li v-<span class="keyword">for</span>=<span class="string">&quot;(keyword,index) in floor.keywords&quot;</span> :key=<span class="string">&quot;index&quot;</span>&gt;</span><br><span class="line">    &#123;&#123;keyword&#125;&#125;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
<p>ç¬¬51è¡Œä¿®æ”¹</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;floor-conver-pit&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;floor.recommendList[0]&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;floor-conver-pit&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;floor.recommendList[1]&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;split center&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;floor.bigImg&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;split&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;floor-x-line&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;floor-conver-pit&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;floor.recommendList[2]&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;floor-conver-pit&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;floor.recommendList[3]&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p36-lun-bo-tu-feng-zhuang-wei-gong-gong-zu-jian">36 è½®æ’­å›¾å°è£…ä¸ºå…¬å…±ç»„ä»¶</span><a href="#p36-lun-bo-tu-feng-zhuang-wei-gong-gong-zu-jian" class="header-anchor">#</a></h2>
<p>åœ¨ components æ–°å»º Carousel æ–°å»º index.vue</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;swiper-container&quot;</span> id=<span class="string">&quot;swL&quot;</span> ref=<span class="string">&quot;sw&quot;</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;swiper-wrapper&quot;</span>&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;swiper-slide&quot;</span> v-<span class="keyword">for</span>=<span class="string">&quot;(carousel,index) in carouselList&quot;</span> :key=<span class="string">&quot;carousel.id&quot;</span>&gt;</span><br><span class="line">        &lt;img :src=<span class="string">&quot;carousel.imgUrl&quot;</span> alt /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- å¦‚æœéœ€è¦åˆ†é¡µå™¨ --&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;swiper-pagination&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">    &lt;!-- å¦‚æœéœ€è¦å¯¼èˆªæŒ‰é’® --&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;swiper-button-prev&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;swiper-button-next&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="comment">// å¼•å…¥swiperå¯¹è±¡</span></span><br><span class="line"><span class="keyword">import</span> Swiper <span class="keyword">from</span> <span class="string">&#x27;swiper&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;Carousel&#x27;</span>,</span><br><span class="line">  props:&#123;</span><br><span class="line">    carouselList:<span class="built_in">Array</span></span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    carouselList() &#123;</span><br><span class="line">      <span class="comment">// å°†å›è°ƒå»¶è¿Ÿåˆ°ä¸‹æ¬¡ DOM æ›´æ–°å¾ªç¯ä¹‹åæ‰§è¡Œã€‚åœ¨ä¿®æ”¹æ•°æ®ä¹‹åç«‹å³ä½¿ç”¨å®ƒï¼Œç„¶åç­‰å¾… DOM æ›´æ–°ã€‚</span></span><br><span class="line">      <span class="built_in">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="built_in">this</span>.$refs.sw, &#123;</span><br><span class="line">          loop: <span class="literal">true</span>, <span class="comment">// å¾ªç¯æ¨¡å¼é€‰é¡¹</span></span><br><span class="line">          <span class="comment">// å¦‚æœéœ€è¦åˆ†é¡µå™¨</span></span><br><span class="line">          pagination: &#123;</span><br><span class="line">            el: <span class="string">&#x27;.swiper-pagination&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="comment">// å¦‚æœéœ€è¦å‰è¿›åé€€æŒ‰é’®</span></span><br><span class="line">          navigation: &#123;</span><br><span class="line">            nextEl: <span class="string">&#x27;.swiper-button-next&#x27;</span>,</span><br><span class="line">            prevEl: <span class="string">&#x27;.swiper-button-prev&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>åœ¨ main.js æ³¨å†Œ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥Carouselç»„ä»¶---è½®æ’­å›¾ç»„ä»¶(ListContainerå’ŒFloorç»„ä»¶ä¸­ä½¿ç”¨)</span></span><br><span class="line"><span class="keyword">import</span> Carousel <span class="keyword">from</span> <span class="string">&#x27;@/components/Carousel&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å‚æ•°1:ç»„ä»¶çš„åå­—,å‚æ•°2:ç»„ä»¶å¯¹è±¡</span></span><br><span class="line">Vue.component(<span class="string">&#x27;Carousel&#x27;</span>,Carousel)</span><br></pre></td></tr></table></figure>
<p>Floor 26è¡Œæ›´æ–°</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è½®æ’­å›¾ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;floorBanner&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">Carousel</span> <span class="attr">:carouselList</span>=<span class="string">&quot;floor.carouselList&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ListContainer 4è¡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--bannerè½®æ’­--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Carousel</span> <span class="attr">:carouselList</span>=<span class="string">&quot;banners&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ¸…ç† ListContainer ç»„ä»¶è½®æ’­å›¾ç›¸å…³çš„æ•°æ®</p>
<p>æ­¤æ—¶å¤§è½®æ’­å›¾å¯ä»¥ï¼Œå°è½®æ’­å›¾ä¸èƒ½è½®æ’­ï¼Œæ¥ä¸‹å»åˆ†æ ğŸ›</p>
<h2><span id="p37-xiu-fu-lun-bo-tu-wen-ti">37 ä¿®å¤è½®æ’­å›¾é—®é¢˜</span><a href="#p37-xiu-fu-lun-bo-tu-wen-ti" class="header-anchor">#</a></h2>
<p>Carousel ä¸­ watch ä¿®æ”¹ä¸º</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">  carouselList: &#123;</span><br><span class="line">    <span class="comment">// è¯¥å›è°ƒä¼šåœ¨ç›‘å¬å¼€å§‹è¢«ç«‹å³è°ƒç”¨</span></span><br><span class="line">    handler: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.carouselList.length === <span class="number">0</span>) <span class="keyword">return</span></span><br><span class="line">      <span class="built_in">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">         ....</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    immediate: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p38-search-zu-jian">38 Search ç»„ä»¶</span><a href="#p38-search-zu-jian" class="header-anchor">#</a></h2>
<p>å°è£…apiæ¥å£å‡½æ•° api/index.js åŠ </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–å•†å“ä¿¡æ¯æ•°æ®å¯¹è±¡</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqProductList = <span class="function">(<span class="params">searchParams</span>) =&gt;</span> ajax.post(<span class="string">&#x27;list&#x27;</span>, searchParams)</span><br></pre></td></tr></table></figure>
<p>å»é™æ€ç»„ä»¶æ–‡ä»¶å¤¹æ‹¿Search</p>
<p>å°è£…Vuex modules/æ–°å»º search.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥APIæ¥å£å‡½æ•°</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  reqProductList</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®¡ç†Searchç»„ä»¶ä¸­çš„æ•°æ®</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    <span class="comment">// å•†å“ä¿¡æ¯æ•°æ®å¯¹è±¡</span></span><br><span class="line">    productList: &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    <span class="comment">// ç›´æ¥æ›´æ–°å•†å“ä¿¡æ¯æ•°æ®å¯¹è±¡</span></span><br><span class="line">    RECEIVE_PRODUCT_LIST(state, productList) &#123;</span><br><span class="line">      state.productList = productList</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    <span class="comment">// è·å–å•†å“ä¿¡æ¯æ•°æ®å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">async</span> getProductList(&#123;</span><br><span class="line">      commit</span><br><span class="line">    &#125;, searchParams) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqProductList(searchParams)</span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        commit(<span class="string">&#x27;RECEIVE_PRODUCT_LIST&#x27;</span>, result.data)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;</span><br><span class="line">    trademarkList(state) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.productList.trademarkList || []</span><br><span class="line">    &#125;,</span><br><span class="line">    attrsList(state) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.productList.attrsList || []</span><br><span class="line">    &#125;,</span><br><span class="line">    goodsList(state) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.productList.goodsList || []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ›´æ–° index.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> home <span class="keyword">from</span> <span class="string">&#x27;./home&#x27;</span></span><br><span class="line"><span class="keyword">import</span> search <span class="keyword">from</span> <span class="string">&#x27;./search&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  home,</span><br><span class="line">  search</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Search å»åˆ†å‘ Vuex</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    options: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">mounted() &#123;</span><br><span class="line">  <span class="comment">// åˆ†å‘ actions</span></span><br><span class="line">  <span class="built_in">this</span>.getProductList()</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">  <span class="comment">// è·å–å•†å“ä¿¡æ¯æ•°æ®å¯¹è±¡</span></span><br><span class="line">  getProductList() &#123;</span><br><span class="line">    <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;getProductList&#x27;</span>, <span class="built_in">this</span>.options)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p39-bian-li-shang-pin-fen-lei-xin-xi">39 éå†å•†å“åˆ†ç±»ä¿¡æ¯</span><a href="#p39-bian-li-shang-pin-fen-lei-xin-xi" class="header-anchor">#</a></h2>
<p>Search ä¸‹é¢ SearchSelector å‰é¢éƒ¨åˆ†ä¿®æ”¹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;clearfix selector&quot;</span>&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;type-wrap logo&quot;</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;fl key brand&quot;</span>&gt;å“ç‰Œ&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;value logos&quot;</span>&gt;</span><br><span class="line">      &lt;ul <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;logo-list&quot;</span>&gt;</span><br><span class="line">        &lt;li v-<span class="keyword">for</span>=<span class="string">&quot;(tm) in trademarkList&quot;</span> :key=<span class="string">&quot;tm.tmId&quot;</span>&gt;&#123;&#123;tm.tmName&#125;&#125;&lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;type-wrap&quot;</span> v-<span class="keyword">for</span>=<span class="string">&quot;(attr) in attrsList&quot;</span> :key=<span class="string">&quot;attr.attrId&quot;</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;fl key&quot;</span>&gt;&#123;&#123;attr.attrName&#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;fl value&quot;</span>&gt;</span><br><span class="line">      &lt;ul <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;type-list&quot;</span>&gt;</span><br><span class="line">        &lt;li v-<span class="keyword">for</span>=<span class="string">&quot;(value,index) in attr.attrValueList&quot;</span> :key=<span class="string">&quot;index&quot;</span>&gt;</span><br><span class="line">          &lt;a&gt;&#123;&#123;value&#125;&#125;&lt;/a&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;fl ext&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>script éƒ¨åˆ†ä¿®æ”¹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥è¾…åŠ©å‡½æ•°</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  mapGetters</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;SearchSelector&#x27;</span>,</span><br><span class="line">  <span class="comment">// è·å–æ•°æ®</span></span><br><span class="line">  computed: &#123;</span><br><span class="line">    ...mapGetters([<span class="string">&#x27;trademarkList&#x27;</span>, <span class="string">&#x27;attrsList&#x27;</span>])</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1><span id="9-yue-22-ri-day-4">9æœˆ22æ—¥ï¼ˆday 4ï¼‰</span><a href="#9-yue-22-ri-day-4" class="header-anchor">#</a></h1>
<h2><span id="p40-search-zu-jian-xian-shi-shang-pin-xin-xi">40 Search ç»„ä»¶æ˜¾ç¤ºå•†å“ä¿¡æ¯</span><a href="#p40-search-zu-jian-xian-shi-shang-pin-xin-xi" class="header-anchor">#</a></h2>
<p>Search æ›´æ–°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  mapState,</span><br><span class="line">  mapGetters</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  <span class="comment">// è·å–å•†å“ä¿¡æ¯æ•°æ®å¯¹è±¡</span></span><br><span class="line">  ...mapState(&#123;</span><br><span class="line">    productList: <span class="function"><span class="params">state</span> =&gt;</span> state.search.productList</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="comment">// è·å–å½“å‰è¿™ä¸€é¡µçš„å•†å“ä¿¡æ¯æ•°æ®</span></span><br><span class="line">  ...mapGetters([<span class="string">&#x27;goodsList&#x27;</span>])</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p><code>&lt;li class=&quot;yui3-u-1-5&quot;&gt;</code> åˆ é™¤ç•™ä¸€ä¸ªï¼Œè¿›è¡Œä»¥ä¸‹æ›´æ–°</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;goods-list&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;yui3-g&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;yui3-u-1-5&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(goods, index) in goodsList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;goods.id&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list-wrap&quot;</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;p-img&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;item.html&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;goods.defaultImg&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;price&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">strong</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">em</span>&gt;</span>Â¥<span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">i</span>&gt;</span>&#123;&#123;goods.price&#125;&#125;<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;attr&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">href</span>=<span class="string">&quot;item.html&quot;</span> <span class="attr">:title</span>=<span class="string">&quot;goods.title&quot;</span>&gt;</span>&#123;&#123;goods.title&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;commit&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;command&quot;</span>&gt;</span>å·²æœ‰<span class="tag">&lt;<span class="name">span</span>&gt;</span>2000<span class="tag">&lt;/<span class="name">span</span>&gt;</span>äººè¯„ä»·<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;operate&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;success-cart.html&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">class</span>=<span class="string">&quot;sui-btn btn-bordered btn-danger&quot;</span>&gt;</span>åŠ å…¥è´­ç‰©è½¦<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0);&quot;</span> <span class="attr">class</span>=<span class="string">&quot;sui-btn btn-bordered&quot;</span>&gt;</span>æ”¶è—<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p41-jie-jue-yi-ge-tiao-zhuan-bug">41 è§£å†³ä¸€ä¸ªè·³è½¬bug</span><a href="#p41-jie-jue-yi-ge-tiao-zhuan-bug" class="header-anchor">#</a></h2>
<p>TypeNav 106è¡Œä¿®æ”¹ï¼ˆè·¯ç”±è·³è½¬ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·¯ç”±è·³è½¬</span></span><br><span class="line"><span class="comment">// å¦‚æœå½“å‰ç»„ä»¶è·¯ç”±è·³è½¬çš„æ—¶å€™ï¼Œåœ°å€æ æœ‰ params å‚æ•°ï¼Œé‚£ä¹ˆå’Œ query å‚æ•°åº”è¯¥ä¸€èµ·æºå¸¦ï¼Œå¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆæºå¸¦ queryå‚æ•°å³å¯</span></span><br><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">  path,</span><br><span class="line">  params</span><br><span class="line">&#125; = <span class="built_in">this</span>.$route</span><br><span class="line"><span class="comment">// åˆ¤æ–­å½“å‰çš„è·¯å¾„æœ‰æ²¡æœ‰ /search</span></span><br><span class="line"><span class="keyword">if</span> (path.indexOf(<span class="string">&#x27;/search&#x27;</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="built_in">this</span>.$router.replace(&#123;</span><br><span class="line">    path,</span><br><span class="line">    query,</span><br><span class="line">    params</span><br><span class="line">  &#125;)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.$router.replace(&#123;</span><br><span class="line">    path: <span class="string">&#x27;/search&#x27;</span>,</span><br><span class="line">    query</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>çŸ¥è¯†ç‚¹ï¼š</p>
<ul>
<li>è·¯ç”±ä¿¡æ¯å¯¹è±¡ <code>route</code></li>
<li>å­—ç¬¦ä¸²çš„<code>indexOf</code> æ–¹æ³•</li>
<li>è·¯ç”±çš„ <code>params</code> å’Œ <code>query</code> ä¼ å‚æ–¹å¼</li>
<li>è·¯ç”±çš„ç¼–ç¨‹å¼è·³è½¬ <code>push</code> <code>replace</code></li>
</ul>
<p>Header æ›´æ–° <code>toSearch</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">  toSearch() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">      path,</span><br><span class="line">      query</span><br><span class="line">    &#125; = <span class="built_in">this</span>.$route</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ–‡æœ¬æ¡†æ˜¯å¦è¾“å…¥å†…å®¹</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.keyword) &#123;</span><br><span class="line">      <span class="comment">// æ­¤æ—¶è¯´æ˜æ–‡æœ¬æ¡†ä¸­å·²ç»æœ‰å†…å®¹</span></span><br><span class="line">      <span class="keyword">if</span> (path.indexOf(<span class="string">&#x27;/search&#x27;</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// æ­¤æ—¶è¯´æ˜ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ï¼Œæ–‡æœ¬æ¡†ä¸­æœ‰æœç´¢å…³é”®å­—ï¼Œè€Œä¸”ä¹Ÿç‚¹å‡»äº†åˆ†ç±»ä¿¡æ¯</span></span><br><span class="line">        <span class="comment">// éœ€è¦æºå¸¦ params å’Œ query å‚æ•°</span></span><br><span class="line">        <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">          name: <span class="string">&#x27;search&#x27;</span>,</span><br><span class="line">          params: &#123;</span><br><span class="line">            keyword: <span class="built_in">this</span>.keyword</span><br><span class="line">          &#125;,</span><br><span class="line">          query</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// æ­¤æ—¶è¯´æ˜æ–‡æœ¬æ¡†æœ‰æœç´¢å…³é”®å­—ï¼Œä½†æ˜¯æ²¡æœ‰ search ç•Œé¢ä¸­ï¼Œæ‰€ä»¥ï¼Œä¹Ÿä¸éœ€è¦æºå¸¦ query å‚æ•°</span></span><br><span class="line">        <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">          name: <span class="string">&#x27;search&#x27;</span>,</span><br><span class="line">          params: &#123;</span><br><span class="line">            keyword: <span class="built_in">this</span>.keyword</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// æ­¤æ—¶æ–‡æœ¬æ¡†ä¸­æ²¡æœ‰æœç´¢å…³é”®å­—</span></span><br><span class="line">      <span class="keyword">if</span> (path.indexOf(<span class="string">&#x27;/search&#x27;</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// ç¡®å®åœ¨ search ä¸­ï¼Œæ‰€ä»¥è¦æºå¸¦ query å‚æ•°</span></span><br><span class="line">        <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">          name: <span class="string">&#x27;search&#x27;</span>,</span><br><span class="line">          query</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// æ²¡æœ‰æœç´¢å…³é”®å­—ï¼Œä¹Ÿæ²¡æœ‰åœ¨ /search ä¸­</span></span><br><span class="line">        <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">          name: <span class="string">&#x27;search&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>
<h2><span id="p42-search-fen-fa-shi-chuan-ru-can-shu">42 Search åˆ†å‘æ—¶ä¼ å…¥å‚æ•°</span><a href="#p42-search-fen-fa-shi-chuan-ru-can-shu" class="header-anchor">#</a></h2>
<p>Search æ›´æ–°dataæ•°æ®</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    options: &#123;</span><br><span class="line">      category1Id: <span class="string">&#x27;&#x27;</span>, <span class="comment">// å„çº§åˆ†ç±»çš„id</span></span><br><span class="line">      category2Id: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      category3Id: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      categoryName: <span class="string">&#x27;&#x27;</span>,  <span class="comment">// åˆ†çº§åå­—</span></span><br><span class="line">      props: [], <span class="comment">// [&#x27;2218:6.75-6.84è‹±å¯¸:å±å¹•å°ºå¯¸&#x27;]---&gt;[&#x27;å¹³å°å±æ€§çš„id:å±æ€§å€¼:å±æ€§åå­—&#x27;]</span></span><br><span class="line">      trademark: <span class="string">&#x27;&#x27;</span>, <span class="comment">// å“ç‰Œçš„åå­—  &#x27;å“ç‰Œçš„id:å“ç‰Œçš„åå­—&#x27;</span></span><br><span class="line">      order: <span class="string">&#x27;1:desc&#x27;</span>, <span class="comment">// æ’åºçš„æ–¹å¼ 1---&gt;æ’åºçš„æ ‡è¯†,desc---&gt;æ’åºçš„æ–¹å¼ ,1--ç»¼åˆ,2---ä»·æ ¼ ,desc---é™åº,asc---å‡åº</span></span><br><span class="line">      pageNo: <span class="number">1</span>, <span class="comment">// è·å–çš„æ˜¯ç¬¬ä¸€é¡µçš„æ•°æ®</span></span><br><span class="line">      pageSize: <span class="number">3</span>, <span class="comment">// é»˜è®¤æ¯é¡µä¸‰æ¡æ•°æ®</span></span><br><span class="line">      keyword: <span class="string">&#x27;&#x27;</span> <span class="comment">// æœç´¢å…³é”®å­—</span></span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>
<p>æ›´æ–°mountedæ•°æ®</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mounted() &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;</span><br><span class="line">    query,</span><br><span class="line">    params</span><br><span class="line">  &#125; = <span class="built_in">this</span>.$route</span><br><span class="line">  <span class="keyword">const</span> options = &#123;</span><br><span class="line">    ...this.options,</span><br><span class="line">    ...query,</span><br><span class="line">    ...params</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">this</span>.options = options</span><br><span class="line">  <span class="comment">// åˆ†å‘ actions</span></span><br><span class="line">  <span class="built_in">this</span>.getProductList()</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>æ›´æ–°watchæ•°æ®</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">  <span class="comment">// to æ¨¡ç‰ˆè·¯ç”±å™¨å¯¹è±¡</span></span><br><span class="line">  <span class="comment">// from ä»å“ªé‡Œæ¥çš„è·¯ç”±ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line">  $route(to, <span class="keyword">from</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">      query,</span><br><span class="line">      params</span><br><span class="line">    &#125; = to</span><br><span class="line">    <span class="keyword">const</span> options = &#123;</span><br><span class="line">      ...this.options,</span><br><span class="line">      <span class="comment">// é‡ç½®æ•°æ®</span></span><br><span class="line">      category1Id: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      category2Id: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      category3Id: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      categoryName: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      ...query,</span><br><span class="line">      ...params</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.options = options</span><br><span class="line">    <span class="comment">// åˆ†å‘ actions</span></span><br><span class="line">    <span class="built_in">this</span>.getProductList()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2><span id="p43-dian-ji-biao-qian-de-yi-chu-yi-ji-di-zhi-de-xiu-zheng">43 ç‚¹å‡»æ ‡ç­¾çš„ç§»é™¤ä»¥åŠåœ°å€çš„ä¿®æ­£</span><a href="#p43-dian-ji-biao-qian-de-yi-chu-yi-ji-di-zhi-de-xiu-zheng" class="header-anchor">#</a></h2>
<p>Search ç¬¬13è¡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;fl sui-tag&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- åˆ†ç±»ä¿¡æ¯çš„åå­— --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;with-x&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;options.categoryName&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;options.categoryName&#125;&#125;<span class="tag">&lt;<span class="name">i</span> @<span class="attr">click</span>=<span class="string">&quot;removeCategory&quot;</span>&gt;</span>Ã—<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- æœç´¢å…³é”®å­— --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;with-x&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;options.keyword&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;options.keyword&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> @<span class="attr">click</span>=<span class="string">&quot;removeKeyword&quot;</span>&gt;</span>Ã—<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ›´æ–° methods</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç§»é™¤åˆ†ç±»ä¿¡æ¯çš„åå­—</span></span><br><span class="line">removeCategory() &#123;</span><br><span class="line">  <span class="built_in">this</span>.options.category1Id = <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="built_in">this</span>.options.category2Id = <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="built_in">this</span>.options.category3Id = <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="built_in">this</span>.options.categoryName = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">this</span>.$router.replace(<span class="built_in">this</span>.$route.path)</span><br><span class="line">&#125;,</span><br><span class="line">  </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºäº‹ä»¶æ€»çº¿ main.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="comment">// æ³¨å†Œè·¯ç”±å™¨</span></span><br><span class="line">  router,</span><br><span class="line">  <span class="comment">// æ³¨å†Œstore</span></span><br><span class="line">  store,</span><br><span class="line">  <span class="comment">// æ•°æ®åˆå§‹åŒ–ä¹‹å‰</span></span><br><span class="line">  beforeCreate() &#123;</span><br><span class="line">    <span class="comment">// äº‹ä»¶æ€»çº¿</span></span><br><span class="line">    Vue.prototype.$bus = <span class="keyword">new</span> Vue()</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// æ¸²æŸ“ç»„ä»¶</span></span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App),</span><br></pre></td></tr></table></figure>
<p>Header ç»„ä»¶ä¸­</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mounted() &#123;</span><br><span class="line">  <span class="built_in">this</span>.$bus.$on(<span class="string">&#x27;removeKeyword&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.keyword = <span class="string">&#x27;&#x27;</span> <span class="comment">// æ¸…ç©ºæ–‡æœ¬æ¡†</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Search ç»„ä»¶ methods</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç§»é™¤æœç´¢å…³é”®å­—</span></span><br><span class="line">removeKeyword() &#123;</span><br><span class="line">  <span class="built_in">this</span>.options.keyword = <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="comment">// è·¯ç”±è·³è½¬</span></span><br><span class="line">  <span class="built_in">this</span>.$router.replace(&#123;</span><br><span class="line">    path: <span class="string">&#x27;/search&#x27;</span>,</span><br><span class="line">    query: <span class="built_in">this</span>.$route.query</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// æ¸…ç†Headerç»„ä»¶ä¸­çš„æœç´¢æ¡†æ•°æ®</span></span><br><span class="line">  <span class="built_in">this</span>.$bus.$emit(<span class="string">&#x27;removeKeyword&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p44-dian-ji-pin-pai-biao-qian-jin-xing-shai-xuan">44 ç‚¹å‡»å“ç‰Œæ ‡ç­¾è¿›è¡Œç­›é€‰</span><a href="#p44-dian-ji-pin-pai-biao-qian-jin-xing-shai-xuan" class="header-anchor">#</a></h2>
<p>Searchç»„ä»¶ä¸­ methods åŠ </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ›´æ–°å“ç‰Œçš„å‚æ•°æ•°æ®</span></span><br><span class="line">setTrademark(tmId, tmName) &#123;</span><br><span class="line">  <span class="built_in">this</span>.options.trademark = <span class="string">`<span class="subst">$&#123;tmId&#125;</span>:<span class="subst">$&#123;tmName&#125;</span>`</span></span><br><span class="line">  <span class="comment">// é‡æ–°å‘é€è¯·æ±‚ï¼Œè·å–å•†å“ä¿¡æ¯æ•°æ®</span></span><br><span class="line">  <span class="built_in">this</span>.getProductList()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>26è¡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--selector--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">SearchSelector</span> <span class="attr">:setTrademark</span>=<span class="string">&quot;setTrademark&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>SearchSelector</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">name: <span class="string">&#x27;SearchSelector&#x27;</span>,</span><br><span class="line">props: &#123;</span><br><span class="line">  setTrademark: <span class="built_in">Function</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>7è¡Œ åŠ ç‚¹å‡»äº‹ä»¶</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(tm) in trademarkList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;tm.tmId&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;setTrademark(tm.tmId, tm.tmName)&quot;</span>&gt;</span>&#123;&#123;tm.tmName&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Search 23è¡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å“ç‰Œå…³é”®å­— --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;with-x&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;options.trademark&quot;</span>&gt;</span></span><br><span class="line">  &#123;&#123;options.trademark&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">i</span> @<span class="attr">click</span>=<span class="string">&quot;removeTrademark&quot;</span>&gt;</span>Ã—<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>methods æ–°å¢</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç§»é™¤å“ç‰Œçš„åå­—</span></span><br><span class="line">removeTrademark()&#123;</span><br><span class="line">  <span class="built_in">this</span>.options.trademark = <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="comment">// é‡æ–°å‘é€è¯·æ±‚ï¼Œè·å–å•†å“ä¿¡æ¯æ•°æ®</span></span><br><span class="line">  <span class="built_in">this</span>.getProductList()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p45-ping-tai-shu-xing-xiang-guan">45 å¹³å°å±æ€§ç›¸å…³</span><a href="#p45-ping-tai-shu-xing-xiang-guan" class="header-anchor">#</a></h2>
<p>Search methods æ–°å¢</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ›´æ–°å¹³å°å±æ€§æ•°ç»„çš„æ•°æ®</span></span><br><span class="line">addProps(propId, propVal, propName) &#123;</span><br><span class="line">  <span class="comment">// æ‹¼æ¥å¹³å°å±æ€§çš„å€¼</span></span><br><span class="line">  <span class="keyword">const</span> prop = <span class="string">`<span class="subst">$&#123;propId&#125;</span>:<span class="subst">$&#123;propVal&#125;</span>:<span class="subst">$&#123;propName&#125;</span>`</span></span><br><span class="line">  <span class="comment">// åˆ¤æ–­è¿™è¯¥æ•°ç»„ä¸­è¿™ä¸ªæ•°æ®æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨å°±åˆ™å¢åŠ </span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">this</span>.options.props.indexOf(prop) === <span class="number">-1</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.options.props.push(prop)</span><br><span class="line">    <span class="comment">// é‡æ–°è·å–æ•°æ®</span></span><br><span class="line">    <span class="built_in">this</span>.getProductList()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>30è¡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--selector--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">SearchSelector</span> <span class="attr">:setTrademark</span>=<span class="string">&quot;setTrademark&quot;</span> <span class="attr">:addProps</span>=<span class="string">&quot;addProps&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>SearchSelector æ›´æ–° props</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">props: &#123;</span><br><span class="line">  setTrademark: <span class="built_in">Function</span>,</span><br><span class="line">  addProps: <span class="built_in">Function</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>13è¡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fl key&quot;</span>&gt;</span>&#123;&#123;attr.attrName&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span>		</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fl value&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;type-list&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(value,index) in attr.attrValueList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;addProps(attr.attrId,value, attr.attrName)&quot;</span>&gt;</span>&#123;&#123;value&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Search 28è¡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¹³å°å±æ€§å…³é”®å­— --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;with-x&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(prop, index) in options.props&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;prop&quot;</span>&gt;</span></span><br><span class="line">  &#123;&#123;prop&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">i</span> @<span class="attr">click</span>=<span class="string">&quot;removeProp(index)&quot;</span>&gt;</span>Ã—<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>methods æ–°å¢</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç§»é™¤å¹³å°å±æ€§æ•°æ®</span></span><br><span class="line">removeProp(index) &#123;</span><br><span class="line">  <span class="built_in">this</span>.options.props.splice(index, <span class="number">1</span>)</span><br><span class="line">  <span class="comment">// é‡æ–°è·å–æ•°æ®</span></span><br><span class="line">  <span class="built_in">this</span>.getProductList()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p46-pai-xu">46 æ’åº</span><a href="#p46-pai-xu" class="header-anchor">#</a></h2>
<p>Search 40è¡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot; details clearfix&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sui-navbar&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;navbar-inner filter&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;sui-nav&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;active:isActive(&#x27;1&#x27;)&#125;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;setOrder(&#x27;1&#x27;)&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span>&gt;</span>ç»¼åˆ&#123;&#123;getOrderText(&#x27;1&#x27;)&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span>&gt;</span>é”€é‡<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span>&gt;</span>æ–°å“<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span>&gt;</span>è¯„ä»·<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;active:isActive(&#x27;2&#x27;)&#125;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> </span></span><br><span class="line"><span class="tag">            @<span class="attr">click</span>=<span class="string">&quot;setOrder(&#x27;2&#x27;)&quot;</span>&gt;</span>ä»·æ ¼&#123;&#123;getOrderText(&#x27;2&#x27;)&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>methods æ–°å¢</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®æ’åºçš„é€‰é¡¹ç±»æ ·å¼</span></span><br><span class="line">isActive(flag) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.options.order.indexOf(flag) === <span class="number">0</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// æ”¹å˜æ’åºçš„æ–¹å¼</span></span><br><span class="line">setOrder(flag) &#123;</span><br><span class="line">  <span class="comment">// è·å–æ’åºçš„æ ‡è¯†å’Œæ’åºæ–¹å¼</span></span><br><span class="line">  <span class="keyword">let</span> [</span><br><span class="line">    orderFlag,</span><br><span class="line">    orderType</span><br><span class="line">  ] = <span class="built_in">this</span>.options.order.split(<span class="string">&#x27;:&#x27;</span>)</span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ’åºçš„æ ‡è¯†æ˜¯å¦ä¸€è‡´</span></span><br><span class="line">  <span class="keyword">if</span> (orderFlag === flag) &#123;</span><br><span class="line">    orderType = orderType === <span class="string">&#x27;desc&#x27;</span> ? <span class="string">&#x27;asc&#x27;</span> : <span class="string">&#x27;desc&#x27;</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    orderFlag = flag <span class="comment">// æ ‡è¯†å·²ç»æ”¹å˜</span></span><br><span class="line">    orderType = <span class="string">&#x27;desc&#x27;</span> <span class="comment">// é»˜è®¤æ˜¯é™åº</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ›´æ–°å‚æ•°æ•°æ®</span></span><br><span class="line">  <span class="built_in">this</span>.options.order = orderFlag + <span class="string">&quot;:&quot;</span> + orderType</span><br><span class="line">  <span class="comment">// é‡æ–°è·å–æ•°æ®</span></span><br><span class="line">  <span class="built_in">this</span>.getProductList()</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// æ˜¾ç¤ºç®­å¤´</span></span><br><span class="line">getOrderText(flag) &#123;</span><br><span class="line">  <span class="comment">// è·å–æ’åºçš„æ ‡è¯†å’Œæ–¹å¼</span></span><br><span class="line">  <span class="keyword">let</span> [orderFlag, orderType] = <span class="built_in">this</span>.options.order.split(<span class="string">&#x27;:&#x27;</span>)</span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ ‡è¯†ç¬¦æ˜¯å¦ä¸€è‡´</span></span><br><span class="line">  <span class="keyword">if</span> (orderFlag === flag) &#123;</span><br><span class="line">    <span class="keyword">return</span> orderType === <span class="string">&#x27;desc&#x27;</span>? <span class="string">&quot;â†“&quot;</span>: <span class="string">&quot;â†‘&quot;</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2><span id="p47-qing-li-kong-shu-ju">47 æ¸…ç†ç©ºæ•°æ®</span><a href="#p47-qing-li-kong-shu-ju" class="header-anchor">#</a></h2>
<p>data ä¸­çš„æ•°æ®æ˜¯å“åº”å¼çš„ï¼Œä¼šè§¦å‘è§†å›¾æ›´æ–°</p>
<p>ä¸èƒ½ç”¨å¸¸è§„æ–¹æ³•å¢åŠ æˆ–è€…åˆ é™¤</p>
<p>ç”¨ <code>Vue.get</code> <code>Vue.delete</code></p>
<p>Search çš„ data ä¸­ æ³¨é‡Š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// trademark: &#x27;&#x27;, // å“ç‰Œçš„åå­—  &#x27;å“ç‰Œçš„id:å“ç‰Œçš„åå­—&#x27;</span></span><br></pre></td></tr></table></figure>
<p>setTrademark  å’Œ removeTrademark ä¿®æ”¹ä¸º</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">setTrademark(tmId, tmName) &#123;</span><br><span class="line">  <span class="comment">// è¿™ç§æ–¹å¼æ·»åŠ çš„å±æ€§å±äºéå“åº”å¼å±æ€§æ•°æ®,</span></span><br><span class="line">  <span class="comment">// å“åº”å¼æ•°æ®:åœ¨dataä¸­å®šä¹‰çš„æ•°æ®,è¯¥æ•°æ®å¦‚æœå‘ç”Ÿäº†å˜åŒ–,é¡µé¢ä¼šè‡ªåŠ¨çš„æ¸²æŸ“</span></span><br><span class="line">  <span class="comment">// this.options.trademark = `$&#123;tmId&#125;:$&#123;tmName&#125;`</span></span><br><span class="line">  <span class="built_in">this</span>.$set(<span class="built_in">this</span>.options, <span class="string">&#x27;trademark&#x27;</span>, <span class="string">`<span class="subst">$&#123;tmId&#125;</span>:<span class="subst">$&#123;tmName&#125;</span>`</span>)</span><br><span class="line">  <span class="comment">// é‡æ–°å‘é€è¯·æ±‚ï¼Œè·å–å•†å“ä¿¡æ¯æ•°æ®</span></span><br><span class="line">  <span class="built_in">this</span>.getProductList()</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// ç§»é™¤å“ç‰Œçš„åå­—</span></span><br><span class="line">removeTrademark() &#123;</span><br><span class="line">  <span class="comment">// æ˜¯æŠŠæ•°æ®æ¸…ç©º,å¹¶ä¸æ˜¯åˆ é™¤</span></span><br><span class="line">  <span class="comment">// this.options.trademark = &#x27;&#x27;</span></span><br><span class="line">  <span class="comment">// è¿™ç§æ–¹å¼ä¸æ˜¯ç§»é™¤å“åº”å¼æ•°æ®çš„æ“ä½œ</span></span><br><span class="line">  <span class="comment">// delete this.options.trademark</span></span><br><span class="line">  <span class="comment">// åˆ é™¤å¯¹è±¡çš„ propertyã€‚å¦‚æœå¯¹è±¡æ˜¯å“åº”å¼çš„ï¼Œç¡®ä¿åˆ é™¤èƒ½è§¦å‘æ›´æ–°è§†å›¾</span></span><br><span class="line">  <span class="built_in">this</span>.$delete(<span class="built_in">this</span>.options, <span class="string">&#x27;trademark&#x27;</span>)</span><br><span class="line">  <span class="comment">// é‡æ–°å‘é€è¯·æ±‚ï¼Œè·å–å•†å“ä¿¡æ¯æ•°æ®</span></span><br><span class="line">  <span class="built_in">this</span>.getProductList()</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>store ä¸­çš„ search.js çš„ actions è¿›è¡Œå¦‚ä¸‹æ›´æ–°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">actions: &#123;</span><br><span class="line">  <span class="comment">// è·å–å•†å“ä¿¡æ¯æ•°æ®å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">async</span> getProductList(&#123;</span><br><span class="line">    commit</span><br><span class="line">  &#125;, searchParams) &#123;</span><br><span class="line">    <span class="comment">// æ¸…ç†æ— ç”¨çš„å‚æ•°æ•°æ®</span></span><br><span class="line">    <span class="comment">// æµ…æ‹·è´</span></span><br><span class="line">    searchParams = &#123;</span><br><span class="line">      ...searchParams</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ä¼˜åŒ–å‚æ•°å¤„ç†</span></span><br><span class="line">    <span class="built_in">Object</span>.keys(searchParams).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­è¿™é‡Œçš„æ•°æ®æ˜¯ä¸æ˜¯ç©ºçš„æ•°æ®ï¼Œæˆ–è€…æ˜¯è¿™é‡Œçš„æ•°æ®</span></span><br><span class="line">        <span class="keyword">if</span> (searchParams[key] === <span class="string">&#x27;&#x27;</span> || searchParams[key] <span class="keyword">instanceof</span> <span class="built_in">Array</span> &amp;&amp; searchParams[key].length === <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">delete</span> searchParams[key]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqProductList(searchParams)</span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        commit(<span class="string">&#x27;RECEIVE_PRODUCT_LIST&#x27;</span>, result.data)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<h1><span id="9-yue-23-ri-day-5">9æœˆ23æ—¥ï¼ˆday 5ï¼‰</span><a href="#9-yue-23-ri-day-5" class="header-anchor">#</a></h1>
<h2><span id="p48-fen-ye-zu-jian">48 åˆ†é¡µç»„ä»¶</span><a href="#p48-fen-ye-zu-jian" class="header-anchor">#</a></h2>
<p>æ€è·¯ï¼šåˆ†é¡µç»„ä»¶ï¼ˆPaginationï¼‰è¦æ³¨å†Œä¸ºå…¬å…±ç»„ä»¶ï¼ˆå¤šæ¬¡ä½¿ç”¨ï¼‰</p>
<p>components  ä¸­æ–°å»º Pagination ç›®å½• æ–°å»º index.vue ï¼ˆç›´æ¥æ‹·è´ä»¥ä¸‹ä»£ç ï¼‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!--åˆ†é¡µç»„ä»¶--&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;pagination&quot; v-if&#x3D;&quot;pageConfig.total&gt;0&quot;&gt;</span><br><span class="line">    &lt;!--ä¸Šä¸€é¡µ--&gt;</span><br><span class="line">    &lt;button :disabled&#x3D;&quot;currentPage&#x3D;&#x3D;&#x3D;1&quot; @click&#x3D;&quot;changeCurrentPage(currentPage-1)&quot;&gt;ä¸Šä¸€é¡µ&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- ç¬¬1é¡µ --&gt;</span><br><span class="line">    &lt;button v-if&#x3D;&quot;startEnd.start&gt;1&quot; @click&#x3D;&quot;changeCurrentPage(1)&quot;&gt;1&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- çœç•¥å· start&gt;2æ‰æ˜¾ç¤º --&gt;</span><br><span class="line">    &lt;button disabled v-if&#x3D;&quot;startEnd.start&gt;2&quot;&gt;Â·Â·Â·&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- è¿ç»­é¡µç  --&gt;</span><br><span class="line">    &lt;button v-for&#x3D;&quot;no in startEnd.end&quot; :key&#x3D;&quot;no&quot; v-if&#x3D;&quot;no&gt;&#x3D;startEnd.start&quot; :class&#x3D;&quot;&#123;active: currentPage&#x3D;&#x3D;&#x3D;no&#125;&quot;</span><br><span class="line">      @click&#x3D;&quot;changeCurrentPage(no)&quot;&gt;&#123;&#123;no&#125;&#125;&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- 34567 --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- çœç•¥å· end&lt;totalPages-1  --&gt;</span><br><span class="line">    &lt;button disabled v-if&#x3D;&quot;startEnd.end&lt;totalPages-1&quot;&gt;Â·Â·Â·&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- æœ€åä¸€é¡µ --&gt;</span><br><span class="line">    &lt;button v-if&#x3D;&quot;startEnd.end&lt;totalPages&quot; @click&#x3D;&quot;changeCurrentPage(totalPages)&quot;&gt;&#123;&#123;totalPages&#125;&#125;&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!--ä¸‹ä¸€é¡µ--&gt;</span><br><span class="line">    &lt;button :disabled&#x3D;&quot;currentPage&#x3D;&#x3D;&#x3D;totalPages&quot; @click&#x3D;&quot;changeCurrentPage(currentPage+1)&quot;&gt;ä¸‹ä¸€é¡µ&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- æ€»è®°å½•æ•° --&gt;</span><br><span class="line">    &lt;button disabled style&#x3D;&quot;margin-left: 30px&quot;&gt;å…± &#123;&#123;pageConfig.total&#125;&#125; æ¡&lt;&#x2F;button&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#39;Pagination&#39;,</span><br><span class="line"></span><br><span class="line">    props: &#123;</span><br><span class="line">      pageConfig: &#123;</span><br><span class="line">        type: Object,</span><br><span class="line">        default: &#123;</span><br><span class="line">          total: 0, &#x2F;&#x2F; æ€»æ•°æ®ä¸ªæ•°</span><br><span class="line">          showPageNo: 5, &#x2F;&#x2F; è¿ç»­æ˜¾ç¤ºçš„é¡µç æ•°</span><br><span class="line">          pageNo: 1, &#x2F;&#x2F; å½“å‰é¡µç </span><br><span class="line">          pageSize: 10 &#x2F;&#x2F; æ¯é¡µçš„æ•°æ®ä¸ªæ•°</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    data() &#123;</span><br><span class="line">      &#x2F;&#x2F; åœ¨dataä¸­å¯ä»¥è¯»å–propså’ŒVueåŸå‹å¯¹è±¡ä¸Šçš„å±æ€§</span><br><span class="line">      &#x2F;&#x2F; console.log(&#39;----&#39;, this.pageConfig, this.$bus)</span><br><span class="line">      &#x2F;&#x2F; åœ¨data()ä¸­ä¸å¯ä»¥ç›´æ¥è¯»å–dataå¯¹è±¡ä¸­çš„æ•°æ®</span><br><span class="line">      &#x2F;&#x2F; console.log(&#39;++++&#39;, this.currentPage)</span><br><span class="line"></span><br><span class="line">      return &#123;</span><br><span class="line">        currentPage: this.pageConfig.pageNo &#x2F;&#x2F; å½“å‰é¡µç </span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    computed: &#123;</span><br><span class="line">      &#x2F;* </span><br><span class="line">        æ€»é¡µç æ•°</span><br><span class="line">        *&#x2F;</span><br><span class="line">      totalPages() &#123;</span><br><span class="line">        &#x2F;&#x2F; å–å‡ºæ€»æ•°é‡å’Œæ¯é¡µè®°å½•æ•°     36 &#x2F; 5  &#x3D;&#x3D;&gt; 8é¡µ</span><br><span class="line">        const &#123;</span><br><span class="line">          total,</span><br><span class="line">          pageSize</span><br><span class="line">        &#125; &#x3D; this.pageConfig</span><br><span class="line">        if (total &lt;&#x3D; 0 || pageSize &lt;&#x3D; 0) return 0</span><br><span class="line"></span><br><span class="line">        return Math.ceil(total &#x2F; pageSize) &#x2F;&#x2F; éœ€è¦å‘ä¸Šå–æ•´</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#x2F;* </span><br><span class="line">        è®¡ç®—å¾—åˆ°è¿ç»­é¡µç çš„startå’Œend </span><br><span class="line">            è¿ç»­é¡µç æ•°: pageConfig.showPageNo   5</span><br><span class="line">            å½“å‰é¡µç : currentPage    4       23456</span><br><span class="line">            æ€»é¡µç æ•°: totalPages 10&#x2F;5</span><br><span class="line">        *&#x2F;</span><br><span class="line">      startEnd() &#123;</span><br><span class="line">        let start &#x3D; 0</span><br><span class="line">        let end &#x3D; 0</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; å–å‡ºç›¸å…³æ•°æ®</span><br><span class="line">        &#x2F;&#x2F; const &#123; showPageNo &#125; &#x3D; this.pageConfig</span><br><span class="line">        &#x2F;&#x2F; const &#123;totalPages, currentPage&#125; &#x3D; this</span><br><span class="line">        const &#123;</span><br><span class="line">          totalPages,</span><br><span class="line">          currentPage,</span><br><span class="line">          pageConfig: &#123;</span><br><span class="line">            showPageNo</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; &#x3D; this &#x2F;&#x2F; å¤šå±‚çº§å¯¹è±¡è§£æ„</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; è®¡ç®—åæ›´æ–°startå’Œend</span><br><span class="line">        &#x2F;* </span><br><span class="line">          currentPage  showPageNo  totalPages</span><br><span class="line">            4             5             10     23456</span><br><span class="line">            2             5             10     123445</span><br><span class="line">            9             5             10     6789 10</span><br><span class="line">          *&#x2F;</span><br><span class="line">        &#x2F;&#x2F; è®¡ç®—start</span><br><span class="line">        start &#x3D; currentPage - Math.floor(showPageNo &#x2F; 2)</span><br><span class="line">        &#x2F;&#x2F; å¦‚æœstarté¡µç å°äº1, å°±ä¸º1</span><br><span class="line">        if (start &lt; 1) &#123;</span><br><span class="line">          start &#x3D; 1</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; è®¡ç®—end</span><br><span class="line">        &#x2F;* </span><br><span class="line">          9             5             10     </span><br><span class="line">          start &#x3D; 7  &#x3D;&#x3D;&#x3D;&gt; 6</span><br><span class="line">          end &#x3D;7 + 4 &#x3D; 11  &#x3D;&#x3D;&gt; end &#x3D; 10</span><br><span class="line"></span><br><span class="line">          2             5               3</span><br><span class="line">          start &#x3D; 1 </span><br><span class="line">          end &#x3D; 3</span><br><span class="line">          start &#x3D; -1 </span><br><span class="line">          *&#x2F;</span><br><span class="line">        end &#x3D; start + showPageNo - 1</span><br><span class="line">        &#x2F;&#x2F; å¦‚æœendå¤§äºäº†æ€»é¡µç æ•°</span><br><span class="line">        if (end &gt; totalPages) &#123;</span><br><span class="line">          &#x2F;&#x2F; endå€¼ä¸ºæ€»é¡µç æ•°</span><br><span class="line">          end &#x3D; totalPages</span><br><span class="line">          &#x2F;&#x2F; ä¿®æ­£start: è®©startåˆ°endä¸ºshowPageNo</span><br><span class="line">          start &#x3D; end - showPageNo + 1</span><br><span class="line">          &#x2F;&#x2F; å¦‚æœstartå°äº1, æŒ‡å®šä¸º1</span><br><span class="line">          if (start &lt; 1) &#123;</span><br><span class="line">            start &#x3D; 1</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return &#123;</span><br><span class="line">          start,</span><br><span class="line">          end</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#x2F;* </span><br><span class="line">        è¦æ ¹æ®å·²æœ‰æ•°æ®è®¡ç®—å‡ºè¿ç»­é¡µç çš„startå’Œend</span><br><span class="line">        *&#x2F;</span><br><span class="line">      startEnd2() &#123;</span><br><span class="line">        &#x2F;&#x2F; å¾—åˆ°å·²æœ‰ä¾èµ–æ•°æ®</span><br><span class="line">        &#x2F;&#x2F; å½“å‰é¡µç  &#x2F; è¿ç»­æ•°ç æ•° &#x2F; æ€»é¡µç æ•°</span><br><span class="line">        const currentPage &#x3D; this.currentPage</span><br><span class="line">        const showPageNo &#x3D; this.pageConfig.showPageNo</span><br><span class="line">        const totalPages &#x3D; this.totalPages</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; è®¡ç®—äº§ç”Ÿéœ€è¦çš„æ•°æ®</span><br><span class="line">        let start &#x3D; 0</span><br><span class="line">        let end &#x3D; 0</span><br><span class="line">        &#x2F;* </span><br><span class="line">          currentPage  showPageNo  totalPages</span><br><span class="line">            4             5             10     &#x3D;&#x3D;&gt; start &#x3D; 4 - 2</span><br><span class="line">          *&#x2F;</span><br><span class="line">        start &#x3D; currentPage - Math.floor(showPageNo &#x2F; 2)</span><br><span class="line"></span><br><span class="line">        &#x2F;* </span><br><span class="line">          currentPage  showPageNo  totalPages</span><br><span class="line">            2             5             10     &#x3D;&#x3D;&gt; start &#x3D; 2 - 2 ä¸å¯¹  åº”è¯¥æ˜¯1</span><br><span class="line">          *&#x2F;</span><br><span class="line">        if (start &lt; 1) &#123;</span><br><span class="line">          start &#x3D; 1</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;* </span><br><span class="line">          currentPage  showPageNo  totalPages</span><br><span class="line">            4             5             10     &#x3D;&#x3D;&gt;   start + 5 -1</span><br><span class="line">         *&#x2F;</span><br><span class="line">        &#x2F;&#x2F; end &#x3D; currentPage + Math.floor(showPageNo&#x2F;2)</span><br><span class="line">        &#x2F;&#x2F; start&#x3D;1 &#x3D;&#x3D;&gt; 1 + 5 -1   5</span><br><span class="line">        &#x2F;&#x2F; start&#x3D;4 &#x3D;&#x3D;&#x3D;&gt; 4 + 5 -1  8</span><br><span class="line">        end &#x3D; start + showPageNo - 1</span><br><span class="line">        &#x2F;* </span><br><span class="line">          currentPage  showPageNo  totalPages</span><br><span class="line">            9             5             10     &#x3D;&#x3D;&gt; end &#x3D; 11   9 + 2  è¶…è¿‡äº†æœ€å¤§é¡µç </span><br><span class="line">         *&#x2F;</span><br><span class="line">        if (end &gt; totalPages) &#123;</span><br><span class="line">          end &#x3D; totalPages &#x2F;&#x2F; å¦‚æœendè¶…è¿‡äº†æœ€å¤§é¡µç , ä¿®æ­£ä¸ºæœ€å¤§é¡µç </span><br><span class="line"></span><br><span class="line">          &#x2F;* </span><br><span class="line">             currentPage  showPageNo  totalPages</span><br><span class="line">              9             5             10</span><br><span class="line">              start &#x3D; 9 - 2  åº”è¯¥æ˜¯6</span><br><span class="line">              end &#x3D; 10</span><br><span class="line">            *&#x2F;</span><br><span class="line">          start &#x3D; end - showPageNo + 1 &#x2F;&#x2F; 10 - 5 + 1</span><br><span class="line"></span><br><span class="line">          &#x2F;&#x2F; å¦‚æœstartå°äº1, æŒ‡å®šä¸º1</span><br><span class="line">          if (start &lt; 1) &#123;</span><br><span class="line">            start &#x3D; 1</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; è¿”å›æ•°æ®</span><br><span class="line">        return &#123;</span><br><span class="line">          start,</span><br><span class="line">          end</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    watch: &#123;</span><br><span class="line">      &#x2F;*</span><br><span class="line">        å½“æ¥æ”¶çš„pageConfigä¸­çš„pageNoå‘ç”Ÿæ”¹å˜è°ƒç”¨ </span><br><span class="line">         *&#x2F;</span><br><span class="line">      &#39;pageConfig.pageNo&#39;(value) &#123;</span><br><span class="line">        &#x2F;&#x2F; å°†å½“å‰é¡µç æŒ‡å®šä¸ºå¤–éƒ¨ä¼ å…¥çš„å€¼</span><br><span class="line">        this.currentPage &#x3D; value</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    methods: &#123;</span><br><span class="line">      &#x2F;* </span><br><span class="line">        å°†å½“å‰é¡µç æ”¹ä¸ºæŒ‡å®šé¡µç </span><br><span class="line">        *&#x2F;</span><br><span class="line">      changeCurrentPage(page) &#123;</span><br><span class="line">        &#x2F;&#x2F; ä¿®æ”¹å½“å‰é¡µç </span><br><span class="line">        this.currentPage &#x3D; page</span><br><span class="line">        &#x2F;&#x2F; é€šçŸ¥å¤–éƒ¨çˆ¶ç»„ä»¶</span><br><span class="line">        this.$emit(&#39;changeCurrentPage&#39;, page)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    beforeCreate() &#123;</span><br><span class="line">      &#x2F;&#x2F; beforeCreate()åœ¨data()ä¹‹å‰æ‰§è¡Œ</span><br><span class="line">      &#x2F;&#x2F; console.log(&#39;beforeCreate()&#39;, this.currentPage) &#x2F;&#x2F; undefined</span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line">      &#x2F;&#x2F; created()åœ¨data()ä¹‹åæ‰§è¡Œ</span><br><span class="line">      &#x2F;&#x2F; console.log(&#39;created()&#39;, this.currentPage) &#x2F;&#x2F; æœ‰å€¼</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot; scoped&gt;</span><br><span class="line">  .pagination &#123;</span><br><span class="line">    button &#123;</span><br><span class="line">      margin: 0 5px;</span><br><span class="line">      background-color: #f4f4f5;</span><br><span class="line">      color: #606266;</span><br><span class="line">      outline: none;</span><br><span class="line">      border-radius: 2px;</span><br><span class="line">      padding: 0 4px;</span><br><span class="line">      vertical-align: top;</span><br><span class="line">      display: inline-block;</span><br><span class="line">      font-size: 13px;</span><br><span class="line">      min-width: 35.5px;</span><br><span class="line">      height: 28px;</span><br><span class="line">      line-height: 28px;</span><br><span class="line">      cursor: pointer;</span><br><span class="line">      box-sizing: border-box;</span><br><span class="line">      text-align: center;</span><br><span class="line">      border: 0;</span><br><span class="line"></span><br><span class="line">      &amp;[disabled] &#123;</span><br><span class="line">        color: #c0c4cc;</span><br><span class="line">        cursor: not-allowed;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;.active &#123;</span><br><span class="line">        cursor: not-allowed;</span><br><span class="line">        background-color: #409eff;</span><br><span class="line">        color: #fff;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
<p>main.js ä¸­æ³¨å†Œä¸ºå…¬å…±ç»„ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥åˆ†é¡µç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> Pagination <span class="keyword">from</span> <span class="string">&#x27;@/components/Pagination&#x27;</span></span><br><span class="line">Vue.component(<span class="string">&#x27;Pagination&#x27;</span>, Pagination)</span><br></pre></td></tr></table></figure>
<p>Search ç»„ä»¶ä¸­ä½¿ç”¨ Pagination éœ€è¦ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ pageConfig</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 89è¡Œ</span><br><span class="line">          <span class="comment">&lt;!-- åˆ†é¡µ --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fr page&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Pagination</span></span></span><br><span class="line"><span class="tag">              <span class="attr">:pageConfig</span>=<span class="string">&quot;&#123;total:productList.total, pageNo:options.pageNo, pageSize:options.pageSize, showPageNo:5&#125;&quot;</span></span></span><br><span class="line"><span class="tag">              @<span class="attr">changeCurrentPage</span>=<span class="string">&quot;changeCurrentPage&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>methods ä¸­æ–°å¢ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªå®šä¹‰äº‹ä»¶</span></span><br><span class="line">changeCurrentPage(pageNo) &#123;</span><br><span class="line">  <span class="built_in">this</span>.options.pageNo = pageNo</span><br><span class="line">  <span class="built_in">this</span>.getProductList()</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶å¯ä»¥å®ç°åˆ†é¡µæ•ˆæœã€‚</p>
<h2><span id="p49-zi-ji-shi-xian-fen-ye-zu-jian">49 è‡ªå·±å®ç°åˆ†é¡µç»„ä»¶</span><a href="#p49-zi-ji-shi-xian-fen-ye-zu-jian" class="header-anchor">#</a></h2>
<p>å¼€å‘é€šç”¨ç»„ä»¶çš„æ€è·¯æµç¨‹</p>
<ol>
<li>æ­å»ºç»“æ„å’Œæ ·å¼ï¼ˆhtml + cssï¼‰</li>
<li>åˆå§‹åŒ–æ•°æ®ï¼ˆdataï¼‰</li>
<li>æ¥æ”¶è°ƒç”¨è¯¥ç»„ä»¶çš„æ—¶å€™ä¼ å…¥çš„æ•°æ®ï¼ˆpropsï¼‰ - è€ƒè™‘å¥å£®æ€§ï¼Œè¦æœ‰é»˜è®¤å€¼</li>
<li>è€ƒè™‘æ¥æ”¶ä»€ä¹ˆæ ·çš„äº‹ä»¶æˆ–è€…å‡½æ•°</li>
<li>åˆ¶ä½œç»„ä»¶</li>
<li>åˆ¶ä½œç»„ä»¶ä½¿ç”¨çš„æ–‡æ¡£</li>
</ol>
<p>åˆ†é¡µç»„ä»¶ï¼Œæœ‰æ•°æ®æ‰èƒ½ä½¿ç”¨ï¼Œæ²¡æœ‰æ•°æ®ä¹Ÿä¸èƒ½æŠ¥é”™</p>
<p>å¯ä»¥åˆ†æˆå…«å—ï¼ˆä¸Šä¸€é¡µï¼Œç¬¬ä¸€é¡µï¼Œçœç•¥å·ï¼Œè¿ç»­é¡µç ï¼Œçœç•¥å·ï¼Œæœ€åä¸€é¡µï¼Œä¸‹ä¸€é¡µï¼Œå…±å¤šå°‘æ¡ï¼‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!--åˆ†é¡µç»„ä»¶ æœ‰æ•°æ®æ‰èƒ½ä½¿ç”¨ï¼Œæ²¡æœ‰æ•°æ®ï¼Œä¹Ÿä¸èƒ½æŠ¥é”™--&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;pagination&quot;&gt;</span><br><span class="line">    &lt;!-- ä¸Šä¸€é¡µ --&gt;</span><br><span class="line">    &lt;button disabled&gt;ä¸Šä¸€é¡µ&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- ç¬¬ä¸€é¡µ --&gt;</span><br><span class="line">    &lt;button&gt;1&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- çœç•¥å· --&gt;</span><br><span class="line">    &lt;button disabled&gt;Â·Â·Â·&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- è¿ç»­é¡µç  --&gt;</span><br><span class="line">    &lt;button&gt;è¿ç»­é¡µç &lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- çœç•¥å· --&gt;</span><br><span class="line">    &lt;button disabled&gt;Â·Â·Â·&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- æœ€åä¸€é¡µ --&gt;</span><br><span class="line">    &lt;button&gt;200&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- ä¸‹ä¸€é¡µ --&gt;</span><br><span class="line">    &lt;button disabled&gt;ä¸‹ä¸€é¡µ&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- å…±å¤šå°‘æ¡ --&gt;</span><br><span class="line">    &lt;button disabled key&#x3D;&quot;&quot; style&#x3D;&quot;margin-left: 30px&quot;&gt;å…± 1000 æ¡&lt;&#x2F;button&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure>
<p>ä¼ å…¥çš„æ•°æ®</p>
<ul>
<li>æ€»æ¡æ•° total</li>
<li>é»˜è®¤é€‰ä¸­çš„é¡µç  pageNo</li>
<li>æ¯é¡µæ˜¾ç¤ºçš„æ¡æ•° pageSize</li>
<li>è¿ç»­çš„é¡µç  showPageNo</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">props: &#123;</span><br><span class="line">  pageConfig: &#123;</span><br><span class="line">    type: <span class="built_in">Object</span>, <span class="comment">// é™åˆ¶ä¼ å…¥çš„æ•°æ®çš„ç±»å‹</span></span><br><span class="line">    <span class="keyword">default</span>: &#123; <span class="comment">// è®¾ç½®é»˜è®¤çš„å€¼</span></span><br><span class="line">      total: <span class="number">0</span>, <span class="comment">// æ€»æ¡æ•°</span></span><br><span class="line">      pageNo: <span class="number">1</span>, <span class="comment">// é»˜è®¤çš„ç¬¬ä¸€é¡µ</span></span><br><span class="line">      pageSize: <span class="number">5</span>, <span class="comment">// æ¯é¡µæ˜¾ç¤ºå¤šå°‘æ¡</span></span><br><span class="line">      showPageNo: <span class="number">5</span> <span class="comment">// è¿ç»­æ˜¾ç¤ºçš„é¡µç æ•°</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">data() &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">// é€‰ä¸­çš„é¡µé¢ --&gt; é¡µç ä¼šéšæ—¶å˜åŒ–</span></span><br><span class="line">    currentPage: <span class="built_in">this</span>.pageConfig.pageNo</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>è®¡ç®—æ€»çš„é¡µç æ•°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  <span class="comment">// è®¡ç®—æ€»çš„é¡µç æ•°</span></span><br><span class="line">  totalPage() &#123;</span><br><span class="line">    <span class="comment">// è·å–æ€»æ¡æ•°å’Œæ¯é¡µçš„æ•°æ®æ¡æ•°</span></span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">      total,</span><br><span class="line">      pageSize</span><br><span class="line">    &#125; = <span class="built_in">this</span>.pageConfig</span><br><span class="line">    <span class="comment">// åˆ¤æ–­</span></span><br><span class="line">    <span class="keyword">if</span> (total &lt; <span class="number">0</span> || pageSize &lt; <span class="number">0</span>) <span class="keyword">return</span></span><br><span class="line">    <span class="comment">// è®¡ç®—æ€»çš„é¡µç æ•°</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.ceil(total / pageSize)</span><br><span class="line">  &#125;, </span><br><span class="line">  <span class="comment">// è®¡ç®—è¿ç»­é¡µç çš„å¼€å§‹é¡µç å’Œç»“æŸé¡µç </span></span><br><span class="line">  startEnd() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">      currentPage,</span><br><span class="line">      totalPage,</span><br><span class="line">      pageConfig: &#123;</span><br><span class="line">        showPageNo</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; = <span class="built_in">this</span></span><br><span class="line">    <span class="comment">// å¼€å§‹é¡µç </span></span><br><span class="line">    <span class="keyword">let</span> start = <span class="number">0</span></span><br><span class="line">    <span class="comment">// ç»“æŸé¡µç </span></span><br><span class="line">    <span class="keyword">let</span> end = <span class="number">0</span></span><br><span class="line">    <span class="comment">// è®¡ç®—å¼€å§‹é¡µç  å½“å‰é¡µç  - å‘ä¸‹å–æ•´ï¼ˆè¿ç»­é¡µç /2ï¼‰</span></span><br><span class="line">    start = currentPage - <span class="built_in">Math</span>.floor(showPageNo / <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">if</span> (start &lt; <span class="number">1</span>) start = <span class="number">1</span></span><br><span class="line">    <span class="comment">// è®¡ç®—ç»“æŸé¡µç  å½“å‰é¡µç  + å‘ä¸‹å–æ•´ï¼ˆè¿ç»­é¡µç /2ï¼‰</span></span><br><span class="line">    <span class="comment">//             å¼€å§‹é¡µç  + è¿ç»­é¡µç  -1</span></span><br><span class="line">    <span class="comment">// end = currentPage + Math.floor(showPageNo / 2)</span></span><br><span class="line">    end = start + showPageNo - <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> (end &gt; totalPage) &#123;</span><br><span class="line">      end = totalPage</span><br><span class="line">      <span class="comment">// ä¿®æ­£ä¸€ä¸‹å¼€å§‹é¡µç </span></span><br><span class="line">      start = totalPage - showPageNo + <span class="number">1</span></span><br><span class="line">      <span class="keyword">if</span> (start &lt; <span class="number">1</span>) start = <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      start,</span><br><span class="line">      end</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<p>ä¸Šä¸€é¡µ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ä¸Šä¸€é¡µ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">:disabled</span>=<span class="string">&quot;currentPage===1&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeCurrentPage(currentPage-1)&quot;</span>&gt;</span>ä¸Šä¸€é¡µ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  changeCurrentPage(pageNo) &#123;</span><br><span class="line">    <span class="comment">// æ›´æ–°å½“å‰çš„é¡µç </span></span><br><span class="line">    <span class="built_in">this</span>.currentPage = pageNo</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€é¡µ</p>
<p>çœç•¥å·</p>
<p>ä¸‹ä¸€é¡µ</p>
<p>ç­‰ç­‰</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--åˆ†é¡µç»„ä»¶ æœ‰æ•°æ®æ‰èƒ½ä½¿ç”¨ï¼Œæ²¡æœ‰æ•°æ®ï¼Œä¹Ÿä¸èƒ½æŠ¥é”™--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;pagination&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--ä¸Šä¸€é¡µ--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">:disabled</span>=<span class="string">&quot;currentPage===1&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeCurrentPage(currentPage-1)&quot;</span>&gt;</span>ä¸Šä¸€é¡µ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--ç¬¬ä¸€é¡µ--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-if</span>=<span class="string">&quot;startEnd.start&gt;1&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeCurrentPage(1)&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--ç¬¬ä¸€ä¸ªçœç•¥å·--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">disabled</span> <span class="attr">v-if</span>=<span class="string">&quot;startEnd.start&gt;2&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--è¿ç»­é¡µç --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-if</span>=<span class="string">&quot;no&gt;=startEnd.start&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;no in startEnd.end&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;no&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeCurrentPage(no)&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:class</span>=<span class="string">&quot;&#123;active:currentPage===no&#125;&quot;</span>&gt;</span>&#123;&#123;no&#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--ç¬¬äºŒä¸ªçœç•¥å·--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">disabled</span> <span class="attr">v-if</span>=<span class="string">&quot;startEnd.end&lt;totalPage-1&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--æœ€åä¸€é¡µ--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-if</span>=<span class="string">&quot;startEnd.end&lt;totalPage&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeCurrentPage(totalPage)&quot;</span>&gt;</span>&#123;&#123;totalPage&#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--ä¸‹ä¸€é¡µ--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">:disabled</span>=<span class="string">&quot;currentPage===totalPage&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeCurrentPage(currentPage+1)&quot;</span>&gt;</span>ä¸‹ä¸€é¡µ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--å…±å¤šå°‘æ¡--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">disabled</span> <span class="attr">style</span>=<span class="string">&quot;margin-left:30px&quot;</span>&gt;</span>å…±&#123;&#123;pageConfig.total&#125;&#125;æ¡<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ›´æ–°methods</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  changeCurrentPage(pageNo) &#123;</span><br><span class="line">    <span class="comment">// æ›´æ–°å½“å‰çš„é¡µé¢</span></span><br><span class="line">    <span class="built_in">this</span>.currentPage = pageNo</span><br><span class="line">    <span class="comment">// é€šçŸ¥çˆ¶çº§ç»„ä»¶ï¼Œé¡µç æ”¹å˜äº†ï¼Œçˆ¶çº§ç»„ä»¶éœ€é‡æ–°è·å–æ•°æ®</span></span><br><span class="line">    <span class="built_in">this</span>.$emit(<span class="string">&#x27;changeCurrentPage&#x27;</span>, pageNo)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>Search ç»„ä»¶ä¸­ method</p>
<p>æ›´æ–°è¿™ä¸ªæ–¹æ³•</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  <span class="comment">// è·å–å•†å“ä¿¡æ¯æ•°æ®å¯¹è±¡</span></span><br><span class="line">  getProductList(pageNo = <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.options.pageNo = pageNo</span><br><span class="line">    <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;getProductList&#x27;</span>, <span class="built_in">this</span>.options)</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>åˆ é™¤è¿™ä¸ªæ–¹æ³•</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªå®šä¹‰äº‹ä»¶</span></span><br><span class="line">changeCurrentPage(pageNo) &#123;</span><br><span class="line">  <span class="built_in">this</span>.options.pageNo = pageNo</span><br><span class="line">  <span class="built_in">this</span>.getProductList()</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>æ›´æ–°è¿™é‡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åˆ†é¡µ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fr page&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Pagination</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:pageConfig</span>=<span class="string">&quot;&#123;total:productList.total, pageNo:options.pageNo, pageSize:options.pageSize, showPageNo:5&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">changeCurrentPage</span>=<span class="string">&quot;getProductList&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Pagination ä¸­æ–°å¢ä¸€ä¸ª watch</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">watch:&#123;</span><br><span class="line">  <span class="comment">// ç›‘è§†çš„æ˜¯ä¼ å…¥çš„é¡µç å€¼ï¼Œå¦‚æœå˜åŒ–äº†ï¼Œç«‹å³æ›´æ–°å½“å‰çš„é¡µç </span></span><br><span class="line">  <span class="string">&#x27;pageConfig.pageNo&#x27;</span>(val)&#123;</span><br><span class="line">    <span class="comment">// ç«‹å³æ›´æ–°å½“å‰çš„é¡µç </span></span><br><span class="line">    <span class="built_in">this</span>.currentPage = val</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2><span id="p50-mei-you-shu-ju-de-shi-hou-fen-ye-zu-jian-de-xiang-guan-chu-li">50 æ²¡æœ‰æ•°æ®çš„æ—¶å€™ï¼Œåˆ†é¡µç»„ä»¶çš„ç›¸å…³å¤„ç†</span><a href="#p50-mei-you-shu-ju-de-shi-hou-fen-ye-zu-jian-de-xiang-guan-chu-li" class="header-anchor">#</a></h2>
<p>åŠ ä¸ª v-if</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--åˆ†é¡µç»„ä»¶,æœ‰æ•°æ®æ‰èƒ½ä½¿ç”¨,æ²¡æœ‰æ•°æ®,ä¹Ÿä¸èƒ½æŠ¥é”™--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;pagination&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;pageConfig.total&gt;0&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p51-shang-pin-xiang-qing-ye">51 å•†å“è¯¦æƒ…é¡µ</span><a href="#p51-shang-pin-xiang-qing-ye" class="header-anchor">#</a></h2>
<p>åˆ¶ä½œè·¯ç”±ç»„ä»¶ Detail ï¼ˆç›´æ¥æ¬è¿åˆ°pagesï¼‰</p>
<p>routes.js ä¸­æ³¨å†Œ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Detail <span class="keyword">from</span> <span class="string">&#x27;@/pages/Detail&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 33è¡Œ</span></span><br><span class="line">  <span class="comment">// Detailç»„ä»¶ -- è¯¦æƒ…é¡µ -- params</span></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/detail/:skuId&#x27;</span>,</span><br><span class="line">    component: Detail,</span><br><span class="line">    name: <span class="string">&#x27;detail&#x27;</span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>Search ç»„ä»¶ä¸­è®¾ç½® å›¾ç‰‡å’Œåç§° çš„è·¯ç”±é“¾æ¥è·³è½¬</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">// 63è¡Œ</span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;goods-list&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;yui3-g&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;yui3-u-1-5&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;goods in goodsList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;goods.id&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list-wrap&quot;</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;p-img&quot;</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- äº§å“çš„å›¾ç‰‡ --&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- &lt;a href=&quot;item.html&quot; target=&quot;_blank&quot;&gt;</span></span><br><span class="line"><span class="comment">                      &lt;img :src=&quot;goods.defaultImg&quot; /&gt;</span></span><br><span class="line"><span class="comment">                    &lt;/a&gt; --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;`/detail/$&#123;goods.id&#125;`&quot;</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;goods.defaultImg&quot;</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;price&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">strong</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">em</span>&gt;</span>Â¥<span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">i</span>&gt;</span>&#123;&#123;goods.price&#125;&#125;<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;attr&quot;</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- äº§å“çš„åå­— --&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- &lt;a target=&quot;_blank&quot; href=&quot;item.html&quot; :title=&quot;goods.title&quot; v-html=&quot;goods.title&quot;&gt;&lt;/a&gt; --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;`/detail/$&#123;goods.id&#125;`&quot;</span> <span class="attr">:title</span>=<span class="string">&quot;goods.title&quot;</span> <span class="attr">v-html</span>=<span class="string">&quot;goods.title&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç‚¹å‡»è·³è½¬åï¼Œå¹¶ä¸èƒ½åœ¨æœ€ä¸Šé¢ï¼Œæ­¤æ—¶ scrollBehavior æ¥æ§åˆ¶</p>
<p>æ›´æ–° router/index ä¸­è¿™ä¸ªéƒ¨åˆ†</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®ä¾‹åŒ–è·¯ç”±å™¨å¯¹è±¡,å¹¶æš´éœ²å‡ºå»</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  mode: <span class="string">&#x27;history&#x27;</span>, <span class="comment">// åœ°å€æ ä¸­ä¸å¸¦#</span></span><br><span class="line">  routes,</span><br><span class="line">  <span class="comment">// è§£å†³è·¯ç”±å™¨è·³è½¬åˆ°æ»šåŠ¨çš„ä½ç½®çš„é—®é¢˜</span></span><br><span class="line">  scrollBehavior(to, <span class="keyword">from</span>, savedPosition) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      x: <span class="number">0</span>,</span><br><span class="line">      y: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2><span id="p52-shang-pin-xiang-qing-ye-jie-kou">52 å•†å“è¯¦æƒ…é¡µ-æ¥å£</span><a href="#p52-shang-pin-xiang-qing-ye-jie-kou" class="header-anchor">#</a></h2>
<p>æµ‹è¯•æ¥å£ï¼Œåœ¨api/index.js æ–°å¢</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å•†å“è¯¦æƒ…é¡µæ¥å£</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqDetailInfo = <span class="function">(<span class="params">skuId</span>) =&gt;</span> ajax.get(<span class="string">`/item/<span class="subst">$&#123;skuId&#125;</span>`</span>)</span><br></pre></td></tr></table></figure>
<h2><span id="p53-feng-zhuang-vuex">53 å°è£… Vuex</span><a href="#p53-feng-zhuang-vuex" class="header-anchor">#</a></h2>
<p>store/modules/detail.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥api</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  reqDetailInfo</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    <span class="comment">// å•†å“çš„è¯¦æƒ…ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line">    detailInfo: &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    <span class="comment">// ç›´æ¥ä¿®æ”¹å•†å“è¯¦æƒ…ä¿¡æ¯å¯¹è±¡æ•°æ®</span></span><br><span class="line">    RECEIVE_DETAIL_INFO(state, detailInfo) &#123;</span><br><span class="line">      state.detailInfo = detailInfo</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    <span class="comment">// å¼‚æ­¥è¯·æ±‚è·å–</span></span><br><span class="line">    <span class="keyword">async</span> getDetailInfo(&#123;</span><br><span class="line">      commit</span><br><span class="line">    &#125;, skuId) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqDetailInfo(skuId)</span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        commit(<span class="string">&#x27;RECEIVE_DETAIL_INFO&#x27;</span>, result.data)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;</span><br><span class="line">    <span class="comment">// åˆ†ç±»ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line">    categoryView(state) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.detailInfo.categoryView || []</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// é”€å”®å±æ€§æ•°ç»„</span></span><br><span class="line">    spuSaleAttrList(state) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.detailInfo.spuSaleAttrList || []</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// å•ä¸ªäº§å“çš„ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line">    skuInfo(state) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.detailInfo.skuInfo || []</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// å›¾ç‰‡è½®æ’­å›¾æ•°ç»„</span></span><br><span class="line">    skuImageList(state) &#123;</span><br><span class="line">      <span class="keyword">const</span> skuInfo = state.detailInfo.skuInfo</span><br><span class="line">      <span class="keyword">return</span> skuInfo ? skuInfo.skuImageList : []</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>index.js å¼•å…¥</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> home <span class="keyword">from</span> <span class="string">&#x27;./home&#x27;</span></span><br><span class="line"><span class="keyword">import</span> search <span class="keyword">from</span> <span class="string">&#x27;./search&#x27;</span></span><br><span class="line"><span class="keyword">import</span> detail <span class="keyword">from</span> <span class="string">&#x27;./detail&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  home,</span><br><span class="line">  search,</span><br><span class="line">  detail</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p54-xian-shi-ji-ben-xin-xi">54 æ˜¾ç¤ºåŸºæœ¬ä¿¡æ¯</span><a href="#p54-xian-shi-ji-ben-xin-xi" class="header-anchor">#</a></h2>
<p>Detail å½“è¯¦æƒ…é¡µåŠ è½½å®Œæ¯•æ ¹æ®idè¦è·å–å½“å‰å•†å“ä¿¡æ¯æ•°æ®å¯¹è±¡</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="comment">// å¼•å…¥å›¾ç‰‡è½®æ’­å›¾ç»„ä»¶</span></span><br><span class="line">  <span class="keyword">import</span> ImageList <span class="keyword">from</span> <span class="string">&#x27;./ImageList/ImageList&#x27;</span></span><br><span class="line">  <span class="comment">// å¼•å…¥æ”¾å¤§é•œç»„ä»¶</span></span><br><span class="line">  <span class="keyword">import</span> Zoom <span class="keyword">from</span> <span class="string">&#x27;./Zoom/Zoom&#x27;</span></span><br><span class="line">  <span class="comment">// å¼•å…¥ Vuex è¾…åŠ©å‡½æ•°</span></span><br><span class="line">  <span class="keyword">import</span> &#123;</span><br><span class="line">    mapGetters</span><br><span class="line">  &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    name: <span class="string">&#x27;Detail&#x27;</span>,</span><br><span class="line">    components: &#123;</span><br><span class="line">      ImageList,</span><br><span class="line">      Zoom</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ç»„ä»¶ç•Œé¢æ¸²æŸ“å®Œæ¯•åçš„ç”Ÿå‘½å‘¨æœŸå›è°ƒ</span></span><br><span class="line">    <span class="keyword">async</span> mounted() &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123;</span><br><span class="line">        skuId</span><br><span class="line">      &#125; = <span class="built_in">this</span>.$route.params</span><br><span class="line">      <span class="comment">// è°ƒç”¨æ¥å£ -- åˆ†å‘actions</span></span><br><span class="line">      <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;getDetailInfo&#x27;</span>, skuId)</span><br><span class="line">    &#125;,</span><br><span class="line">    computed: &#123;</span><br><span class="line">      ...mapGetters([<span class="string">&#x27;categoryView&#x27;</span>, <span class="string">&#x27;spuSaleAttrList&#x27;</span>, <span class="string">&#x27;skuInfo&#x27;</span>])</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 8</span><br><span class="line">      &lt;!-- å¯¼èˆªè·¯å¾„åŒºåŸŸ --&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;conPoin&quot;&gt;</span><br><span class="line">        &lt;span&gt;&#123;&#123;categoryView.category1Name&#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">        &lt;span&gt;&#123;&#123;categoryView.category2Name&#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">        &lt;span&gt;&#123;&#123;categoryView.category3Name&#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 23</span><br><span class="line">        &lt;!-- å³ä¾§é€‰æ‹©åŒºåŸŸå¸ƒå±€ --&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;InfoWrap&quot;&gt;</span><br><span class="line">          &lt;div class&#x3D;&quot;goodsDetail&quot;&gt;</span><br><span class="line">            &lt;h3 class&#x3D;&quot;InfoName&quot;&gt;&#123;&#123;skuInfo.skuName&#125;&#125;&lt;&#x2F;h3&gt;</span><br><span class="line">            &lt;p class&#x3D;&quot;news&quot;&gt;&#123;&#123;skuInfo.skuDesc&#125;&#125;&lt;&#x2F;p&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;priceArea&quot;&gt;</span><br><span class="line">              &lt;div class&#x3D;&quot;priceArea1&quot;&gt;</span><br><span class="line">                &lt;div class&#x3D;&quot;title&quot;&gt;ä»·&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;æ ¼&lt;&#x2F;div&gt;</span><br><span class="line">                &lt;div class&#x3D;&quot;price&quot;&gt;</span><br><span class="line">                  &lt;i&gt;Â¥&lt;&#x2F;i&gt;</span><br><span class="line">                  &lt;em&gt;&#123;&#123;skuInfo.price&#125;&#125;&lt;&#x2F;em&gt;</span><br></pre></td></tr></table></figure>
<h2><span id="p55-bian-li-xiao-shou-shu-xing">55 éå†é”€å”®å±æ€§</span><a href="#p55-bian-li-xiao-shou-shu-xing" class="header-anchor">#</a></h2>
<p>Detail 63</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é”€å”®å±æ€§ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;choose&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;chooseArea&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;choosed&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dl</span> <span class="attr">v-for</span>=<span class="string">&quot;(attr,index) in spuSaleAttrList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;attr.id&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dt</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>&#123;&#123;attr.saleAttrName&#125;&#125;<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span> <span class="attr">changepirce</span>=<span class="string">&quot;0&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;active:spuVal.isChecked===`1`&#125;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-for</span>=<span class="string">&quot;(spuVal, index) in attr.spuSaleAttrValueList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;spuVal.id&quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">click</span>=<span class="string">&quot;setChecked(spuVal, attr.spuSaleAttrValueList)&quot;</span>&gt;</span>&#123;&#123;spuVal.saleAttrValueName&#125;&#125;<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ·»åŠ  methods åŠæ–¹æ³•</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  setChecked(spuVal, valueList) &#123;</span><br><span class="line">    <span class="comment">// æ’ä»–æ•ˆæœï¼Œå…ˆæŠŠæ•°ç»„ä¸­æ¯ä¸ªé”€å”®å±æ€§å€¼å¯¹è±¡ç½®0</span></span><br><span class="line">    valueList.forEach(<span class="function"><span class="params">v</span> =&gt;</span> v.isChecked = <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">    <span class="comment">// åªæœ‰å½“å‰ç‚¹å‡»çš„è¿™ä¸ªå±æ€§å€¼ä¸º1</span></span><br><span class="line">    spuVal.isChecked = <span class="string">&quot;1&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1><span id="9-yue-24-ri-day-6">9æœˆ24æ—¥ï¼ˆday 6ï¼‰</span><a href="#9-yue-24-ri-day-6" class="header-anchor">#</a></h1>
<h2><span id="p56-shu-liang-de-zeng-jia-he-jian-shao-cao-zuo">56 æ•°é‡çš„å¢åŠ å’Œå‡å°‘æ“ä½œ</span><a href="#p56-shu-liang-de-zeng-jia-he-jian-shao-cao-zuo" class="header-anchor">#</a></h2>
<p>é»˜è®¤å€¼è®¾ä¸º1ï¼Œä¸èƒ½è®¾ç½®ä¸º0ï¼ˆå‡å°‘ç”¨æˆ·çš„æ“ä½œï¼Œæ›´å¥½çš„ä½“éªŒï¼‰</p>
<p>åœ¨ Detail  çš„ data ä¸­åˆ›å»º skuNum</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    skuNum: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>ç¬¬75è¡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 75</span><br><span class="line">              <span class="comment">&lt;!-- æ•°é‡çš„å¢åŠ å’Œå‡å°‘æ“ä½œ --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;controls&quot;</span>&gt;</span></span><br><span class="line">                                                       <span class="comment">&lt;!-- è¿™é‡Œ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">class</span>=<span class="string">&quot;itxt&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;skuNum&quot;</span> /&gt;</span></span><br><span class="line">                                                   <span class="comment">&lt;!-- è¿™é‡Œ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:&quot;</span> <span class="attr">class</span>=<span class="string">&quot;plus&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;skuNum++&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:&quot;</span> <span class="attr">class</span>=<span class="string">&quot;mins&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;skuNum&gt;1?skuNum--:</span></span></span><br><span class="line"><span class="tag"><span class="string">                  &#x27;&#x27;&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p57-xian-shi-xiang-qing-tu-pian-lun-bo">57 æ˜¾ç¤ºè¯¦æƒ…å›¾ç‰‡ï¼ˆè½®æ’­ï¼‰</span><a href="#p57-xian-shi-xiang-qing-tu-pian-lun-bo" class="header-anchor">#</a></h2>
<p>ImageList ä¸­æ›´æ–°</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-wrapper&quot;</span>&gt;</span></span><br><span class="line">                              <span class="comment">&lt;!-- è¿™é‡Œ --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(skuImg, index) in skuImageList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;skuImg.id&quot;</span>&gt;</span></span><br><span class="line">              <span class="comment">&lt;!-- è¿™é‡Œ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;skuImg.imgUrl&quot;</span> <span class="attr">:class:</span>=<span class="string">&quot;&#123;active:currentIndex===index&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å‰©ä¸‹çš„imgéƒ½åˆ é™¤ --&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line">    <span class="keyword">import</span> Swiper <span class="keyword">from</span> <span class="string">&#x27;swiper&#x27;</span></span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">        name: <span class="string">&quot;ImageList&quot;</span>,</span><br><span class="line">        data() &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                currentIndex: <span class="number">0</span>, <span class="comment">// å‚¨å­˜æŸä¸ªå›¾ç‰‡ç´¢å¼•</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        computed:&#123;</span><br><span class="line">          ...mapGetters([<span class="string">&#x27;skuImageList&#x27;</span>])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2><span id="p58-yin-ru-lun-bo-tu-zu-jian">58 å¼•å…¥è½®æ’­å›¾ç»„ä»¶</span><a href="#p58-yin-ru-lun-bo-tu-zu-jian" class="header-anchor">#</a></h2>
<p>ImageList æ›´æ–°ï¼ˆç›´æ¥CVï¼‰</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-container&quot;</span> <span class="attr">id</span>=<span class="string">&quot;swL&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sw4&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è½®æ’­å›¾ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-wrapper&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(carousel,index) in skuImageList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;carousel.id&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;carousel.imgUrl&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;active:currentIndex===index&#125;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;currentIndex=index&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-button-next&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-button-prev&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Swiper <span class="keyword">from</span> <span class="string">&#x27;swiper&#x27;</span></span><br></pre></td></tr></table></figure>
<p>å¢åŠ  watch</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">  skuImageList: &#123;</span><br><span class="line">    <span class="comment">// è¯¥å›è°ƒä¼šåœ¨ç›‘å¬å¼€å§‹è¢«ç«‹å³è°ƒç”¨</span></span><br><span class="line">    handler: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.skuImageList.length === <span class="number">0</span>) <span class="keyword">return</span></span><br><span class="line">      <span class="built_in">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="built_in">this</span>.$refs.sw4, &#123;</span><br><span class="line">          <span class="comment">// æ¯ä¸€å±ä¸­æ˜¾ç¤ºå›¾ç‰‡çš„æ•°é‡</span></span><br><span class="line">          slidesPerView: <span class="number">5</span>,</span><br><span class="line">          <span class="comment">// æ¯æ¬¡ç§»åŠ¨å›¾ç‰‡çš„æ•°é‡</span></span><br><span class="line">          slidesPerGroup: <span class="number">2</span>,</span><br><span class="line">          <span class="comment">// å¦‚æœéœ€è¦åˆ†é¡µå™¨</span></span><br><span class="line">          pagination: &#123;</span><br><span class="line">            el: <span class="string">&#x27;.swiper-pagination&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="comment">// å¦‚æœéœ€è¦å‰è¿›åé€€æŒ‰é’®</span></span><br><span class="line">          navigation: &#123;</span><br><span class="line">            nextEl: <span class="string">&#x27;.swiper-button-next&#x27;</span>,</span><br><span class="line">            prevEl: <span class="string">&#x27;.swiper-button-prev&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// immediate</span></span><br><span class="line">    immediate: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2><span id="p59-fang-da-jing-1">59 æ”¾å¤§é•œ1</span><a href="#p59-fang-da-jing-1" class="header-anchor">#</a></h2>
<p>ImageList</p>
<p>æ›´æ–°ç‚¹å‡»äº‹ä»¶</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-container&quot;</span> <span class="attr">id</span>=<span class="string">&quot;swL&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sw4&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è½®æ’­å›¾ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-wrapper&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(carousel,index) in skuImageList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;carousel.id&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ›´æ–°ç‚¹å‡»äº‹ä»¶ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;carousel.imgUrl&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;active:currentIndex===index&#125;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeCurrentIndex(index)&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-button-next&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-button-prev&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>methods æ›´æ–°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">  changeCurrentIndex(index)&#123;</span><br><span class="line">    <span class="comment">// ä¿®æ”¹å½“å‰å›¾ç‰‡çš„é€‰ä¸­çš„ç´¢å¼•</span></span><br><span class="line">    <span class="built_in">this</span>.currentIndex = index</span><br><span class="line">    <span class="comment">// åˆ†å‘çˆ¶çº§ç»„ä»¶çš„äº‹ä»¶</span></span><br><span class="line">    <span class="built_in">this</span>.$emit(<span class="string">&#x27;changeCurrentIndex&#x27;</span>, index)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>Detail 15è¡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å·¦ä¾§æ”¾å¤§é•œåŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;previewWrap&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--æ”¾å¤§é•œæ•ˆæœ--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Zoom</span> <span class="attr">v-if</span>=<span class="string">&quot;skuImageList.length&gt;0&quot;</span> <span class="attr">:imgUrl</span>=<span class="string">&quot;skuImageList[currentImageIndex].imgUrl&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:bigImgUrl</span>=<span class="string">&quot;skuImageList[currentImageIndex].imgUrl&quot;</span> /&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å°å›¾åˆ—è¡¨ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ImageList</span> @<span class="attr">changeCurrentIndex</span>=<span class="string">&quot;changeCurrentIndex&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ›´æ–°data</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    skuNum: <span class="number">1</span>, <span class="comment">// è¯¥äº§å“é»˜è®¤çš„æ•°é‡</span></span><br><span class="line">    currentImageIndex: <span class="number">0</span> <span class="comment">// å‚¨å­˜è½®æ’­å›¾é€‰æ‹©ç´¢å¼•</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>æ›´æ–°computed</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  ...mapGetters([<span class="string">&#x27;categoryView&#x27;</span>, <span class="string">&#x27;spuSaleAttrList&#x27;</span>, <span class="string">&#x27;skuInfo&#x27;</span>, <span class="string">&#x27;skuImageList&#x27;</span>])</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>methods æ–°å¢</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­çº§ç»„ä»¶ imageListä¸­ç‚¹å‡»æŸä¸ªå°å›¾ è¯¥å›¾çš„ç´¢å¼• ä¼ é€’è¿‡æ¥</span></span><br><span class="line">changeCurrentIndex(index) &#123;</span><br><span class="line">  <span class="built_in">this</span>.currentImageIndex = index</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>Zoom ä¸­æ›´æ–°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;spec-preview&quot;&gt;</span><br><span class="line">    &lt;img :src&#x3D;&quot;imgUrl&quot; &#x2F;&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;mask&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;big&quot;&gt;</span><br><span class="line">      &lt;img src&#x3D;&quot;bigImgUrl&quot; &#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;small&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &quot;Zoom&quot;,</span><br><span class="line">    props: &#123;</span><br><span class="line">      imgUrl: String,</span><br><span class="line">      bigImgUrl: String</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<h2><span id="p60-fang-da-jing-2">60 æ”¾å¤§é•œ2</span><a href="#p60-fang-da-jing-2" class="header-anchor">#</a></h2>
<p>Zoom æ›¿æ¢</p>
<ul>
<li>mask --&gt; event</li>
<li>small --&gt; mask</li>
</ul>
<p>åŠ  ref å’Œç‚¹å‡»äº‹ä»¶</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;spec-preview&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;imgUrl&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;event&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;event&quot;</span> @<span class="attr">mousemove</span>=<span class="string">&quot;handleMove&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;big&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;bigImgUrl&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bigImg&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mask&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;mask&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>mounted å’Œ methods æ›´æ–°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    <span class="comment">// è·å–å½“å‰é®æŒ¡å±‚çš„å®½åº¦</span></span><br><span class="line">    <span class="built_in">this</span>.maskWidth = <span class="built_in">this</span>.$refs.event.clientWidth / <span class="number">2</span></span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="comment">// é¼ æ ‡ç§»åŠ¨äº‹ä»¶</span></span><br><span class="line">    handleMove(e) &#123;</span><br><span class="line">      <span class="comment">// è·å–é¼ æ ‡ç§»åŠ¨çš„æ¨ªçºµåæ ‡</span></span><br><span class="line">      <span class="keyword">const</span> &#123;</span><br><span class="line">        offsetX,</span><br><span class="line">        offsetY</span><br><span class="line">      &#125; = e</span><br><span class="line">      <span class="comment">// è·å–å½“å‰é®æŒ¡å±‚çš„å®½åº¦</span></span><br><span class="line">      <span class="keyword">const</span> maskWidth = <span class="built_in">this</span>.maskWidth</span><br><span class="line">      <span class="comment">// è·å–é®æŒ¡å±‚å¯¹è±¡</span></span><br><span class="line">      <span class="keyword">const</span> maskDiv = <span class="built_in">this</span>.$refs.mask</span><br><span class="line">      <span class="comment">// è·å–å¤§å›¾</span></span><br><span class="line">      <span class="keyword">const</span> bigImg = <span class="built_in">this</span>.$refs.bigImg</span><br><span class="line">      <span class="comment">// æ¨ªçºµåæ ‡</span></span><br><span class="line">      <span class="keyword">let</span> left = <span class="number">0</span></span><br><span class="line">      <span class="keyword">let</span> top = <span class="number">0</span></span><br><span class="line">      <span class="comment">// è®¡ç®—é¼ æ ‡çš„é®æŒ¡å±‚ä¸­é—´çš„ä½ç½®</span></span><br><span class="line">      left = offsetX - maskWidth / <span class="number">2</span></span><br><span class="line">      top = offsetY - maskWidth / <span class="number">2</span></span><br><span class="line">      <span class="comment">// é™åˆ¶</span></span><br><span class="line">      left: left &lt; <span class="number">0</span> ? <span class="number">0</span> : left &gt; maskWidth ? maskWidth : left</span><br><span class="line">      top: top &lt; <span class="number">0</span> ? <span class="number">0</span> : top &gt; maskWidth ? maskWidth : top</span><br><span class="line">      <span class="comment">// è®¾ç½®é®æŒ¡å±‚çš„ç§»åŠ¨çš„ä½ç½®</span></span><br><span class="line">      maskDiv.style.left = left + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">      maskDiv.style.top = top + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">      <span class="comment">// è®¾ç½®å¤§å›¾çš„ç§»åŠ¨</span></span><br><span class="line">      bigImg.style.left = -left * <span class="number">2</span> + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">      bigImg.style.top = -top * <span class="number">2</span> + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>less ä¸­ .big åŠ </p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background</span>: <span class="number">#fff</span>;</span><br></pre></td></tr></table></figure>
<h2><span id="p61-tian-jia-gou-wu-che-cheng-gong">61 æ·»åŠ è´­ç‰©è½¦æˆåŠŸ</span><a href="#p61-tian-jia-gou-wu-che-cheng-gong" class="header-anchor">#</a></h2>
<p>AddCartSuccess æ‹·è´åˆ° pages</p>
<p>routes.js æ³¨å†Œè·¯ç”±ç»„ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> AddCartSuccess <span class="keyword">from</span> <span class="string">&#x27;@/pages/AddCartSuccess&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 40</span></span><br><span class="line">  <span class="comment">// AddCartSuccess -- query</span></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/addcartsuccess&#x27;</span>,</span><br><span class="line">    component: AddCartSuccess</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>åœ¨ Detail è¯¦æƒ…é¡µä¸­ æ‰¾åˆ° åŠ å…¥è´­ç‰©è½¦ 84</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;addToCart&quot;</span>&gt;</span>åŠ å…¥è´­ç‰©è½¦<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>methods æ–°å¢</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å‡»åŠ å…¥è´­ç‰©è½¦ï¼Œè·³è½¬åˆ°æ·»åŠ è´­ç‰©è½¦æˆåŠŸç•Œé¢</span></span><br><span class="line">addToCart() &#123;</span><br><span class="line">  <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">    path: <span class="string">&#x27;/addcartsuccess&#x27;</span>,</span><br><span class="line">    query: &#123;</span><br><span class="line">      skuId: <span class="built_in">this</span>.skuInfo.id,</span><br><span class="line">      skuNum: <span class="built_in">this</span>.skuNum</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>AddCartSuccess 8 å¯¹åº”çš„å›¾ç‰‡</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/s3.png&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p62-feng-zhuang-api-jie-kou-han-shu">62 å°è£…apiæ¥å£å‡½æ•°</span><a href="#p62-feng-zhuang-api-jie-kou-han-shu" class="header-anchor">#</a></h2>
<p>æ·»åŠ  api æ¥å£å‡½æ•°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ è´­ç‰©è½¦æ¥å£å‡½æ•°</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqAddToCart = <span class="function">(<span class="params">skuId, skuNum</span>) =&gt;</span> ajax.post(<span class="string">`/cart/addToCart/<span class="subst">$&#123;skuId&#125;</span>/<span class="subst">$&#123;skuNum&#125;</span>`</span>)</span><br></pre></td></tr></table></figure>
<p>store/modules/ æ–°å»º shopcart.js åœ¨ index.js æ³¨å†Œ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> home <span class="keyword">from</span> <span class="string">&#x27;./home&#x27;</span></span><br><span class="line"><span class="keyword">import</span> search <span class="keyword">from</span> <span class="string">&#x27;./search&#x27;</span></span><br><span class="line"><span class="keyword">import</span> detail <span class="keyword">from</span> <span class="string">&#x27;./detail&#x27;</span></span><br><span class="line"><span class="keyword">import</span> shopcart <span class="keyword">from</span> <span class="string">&#x27;./shopcart&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  home,</span><br><span class="line">  search,</span><br><span class="line">  detail,</span><br><span class="line">  shopcart</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥api</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  reqAddToCart</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    shopList: [] <span class="comment">// è´­ç‰©è½¦ä¸­çš„å•†å“ä¿¡æ¯æŒ‰é’®</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;&#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    <span class="comment">// æ·»åŠ è´­ç‰©è½¦æ“ä½œ</span></span><br><span class="line">    <span class="keyword">async</span> addToCart1(&#123;</span><br><span class="line">      commit</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      skuId,</span><br><span class="line">      skuNum</span><br><span class="line">    &#125;) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqAddToCart(skuId, skuNum)</span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;æ·»åŠ æˆåŠŸ&quot;</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;æ·»åŠ å¤±è´¥&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Detail</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// ç‚¹å‡»åŠ å…¥è´­ç‰©è½¦ï¼Œè·³è½¬åˆ°æ·»åŠ è´­ç‰©è½¦æˆåŠŸç•Œé¢</span></span><br><span class="line">  addToCart() &#123;</span><br><span class="line">    <span class="keyword">const</span> query = &#123;</span><br><span class="line">      skuId: <span class="built_in">this</span>.skuInfo.id,</span><br><span class="line">      skuNum: <span class="built_in">this</span>.skuNum</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;addToCart1&#x27;</span>, query)</span><br><span class="line">    <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">        path: <span class="string">&#x27;/addcartsuccess&#x27;</span>,</span><br><span class="line">        query</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2><span id="p63-hui-diao-han-shu">63 å›è°ƒå‡½æ•°</span><a href="#p63-hui-diao-han-shu" class="header-anchor">#</a></h2>
<p>shopcart.js æ›´æ–°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">actions: &#123;</span><br><span class="line">  <span class="comment">// æ·»åŠ è´­ç‰©è½¦æ“ä½œ</span></span><br><span class="line">  <span class="keyword">async</span> addToCart1(&#123;</span><br><span class="line">    commit</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    skuId,</span><br><span class="line">    skuNum,</span><br><span class="line">    callback</span><br><span class="line">  &#125;) &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> reqAddToCart(skuId, skuNum, callback)</span><br><span class="line">    <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">      callback(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      callback(result.message || <span class="string">&#x27;æ·»åŠ å¤±è´¥&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>Detail æ›´æ–°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å‡»åŠ å…¥è´­ç‰©è½¦ï¼Œè·³è½¬åˆ°æ·»åŠ è´­ç‰©è½¦æˆåŠŸç•Œé¢</span></span><br><span class="line">addToCart() &#123;</span><br><span class="line">  <span class="keyword">const</span> query = &#123;</span><br><span class="line">    skuId: <span class="built_in">this</span>.skuInfo.id,</span><br><span class="line">    skuNum: <span class="built_in">this</span>.skuNum</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// åˆ†å‘ æœ‰å¯èƒ½ä¸æˆåŠŸ</span></span><br><span class="line">  <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;addToCart1&#x27;</span>, &#123;</span><br><span class="line">    ...query,</span><br><span class="line">    callback: <span class="built_in">this</span>.callback</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// å›è°ƒå‡½æ•°</span></span><br><span class="line">callback(error) &#123;</span><br><span class="line">  <span class="comment">// æˆåŠŸ</span></span><br><span class="line">  <span class="keyword">if</span> (!error) &#123;</span><br><span class="line">    <span class="keyword">const</span> query = &#123;</span><br><span class="line">      skuId: <span class="built_in">this</span>.skuInfo.id,</span><br><span class="line">      skuNum: <span class="built_in">this</span>.skuNum</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">      path: <span class="string">&#x27;/addcartsuccess&#x27;</span>,</span><br><span class="line">      query</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// å¤±è´¥</span></span><br><span class="line">    alert(error)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2><span id="p64-dispatch-fan-hui-promise">64 dispatch è¿”å› Promise</span><a href="#p64-dispatch-fan-hui-promise" class="header-anchor">#</a></h2>
<p>shopcart.js æ›´æ–° actions</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> addToCart2(&#123;</span><br><span class="line">    commit</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    skuId,</span><br><span class="line">    skuNum</span><br><span class="line">  &#125;) &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> reqAddToCart(skuId, skuNum)</span><br><span class="line">    <span class="keyword">return</span> result.code === <span class="number">200</span> ? <span class="string">&#x27;&#x27;</span> : result.message || <span class="string">&#x27;æ·»åŠ å¤±è´¥&#x27;</span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>Detail æ›´æ–° addToCart åˆ é™¤callback</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// ç‚¹å‡»åŠ å…¥è´­ç‰©è½¦ï¼Œè·³è½¬åˆ°æ·»åŠ è´­ç‰©è½¦æˆåŠŸç•Œé¢</span></span><br><span class="line">  <span class="comment">// + async</span></span><br><span class="line">  <span class="keyword">async</span> addToCart() &#123;</span><br><span class="line">    <span class="keyword">const</span> query = &#123;</span><br><span class="line">      skuId: <span class="built_in">this</span>.$route.params.skuId,</span><br><span class="line">      skuNum: <span class="built_in">this</span>.skuNum</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ†å‘ æœ‰å¯èƒ½ä¸æˆåŠŸ</span></span><br><span class="line">    <span class="keyword">const</span> errorMsg = <span class="keyword">await</span> <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;addToCart2&#x27;</span>, &#123;</span><br><span class="line">      ...query</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// æˆåŠŸ</span></span><br><span class="line">    <span class="keyword">if</span> (!errorMsg) &#123;</span><br><span class="line">      <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">        path: <span class="string">&#x27;/addcartsuccess&#x27;</span>,</span><br><span class="line">        query</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// å¤±è´¥</span></span><br><span class="line">      alert(errorMsg)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>AddCartSuccess æ›´æ–° 16è¡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">class</span>=<span class="string">&quot;sui-btn btn-xlarge&quot;</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;name:&#x27;detail&#x27;, params:&#123;skuId:this.$route.query.skuId&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">  æŸ¥çœ‹å•†å“è¯¦æƒ…</span><br><span class="line"><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p65-addcartsuccess-geng-xin">65 AddCartSuccess æ›´æ–°</span><a href="#p65-addcartsuccess-geng-xin" class="header-anchor">#</a></h2>
<p>Detail æ›´æ–° addToCart</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!errorMsg) &#123;</span><br><span class="line">  <span class="comment">// é€šè¿‡æµè§ˆå™¨ç¼“å­˜å½“å‰å•†å“ä¿¡æ¯æ•°æ®å¯¹è±¡</span></span><br><span class="line">  <span class="built_in">window</span>.localStorage.setItem(<span class="string">&#x27;SKU_INFO&#x27;</span>, <span class="built_in">JSON</span>.stringify(<span class="built_in">this</span>.skuInfo))</span><br><span class="line">  <span class="comment">// è·¯ç”±è·³è½¬</span></span><br></pre></td></tr></table></figure>
<p>AddCartSuccess æ›´æ–° 8è¡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">&lt;!-- 1 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;skuInfo.skuDefaultImg&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right-info&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>&#123;&#123;skuInfo.skuName&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;attr&quot;</span>&gt;</span>é¢œè‰²ï¼š24Ké‡‘ æ•°é‡ï¼š&#123;&#123;this.$route.query.skuNum&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    skuInfo: &#123;&#125; <span class="comment">// å“åº”å¼æ•°æ®å¯¹è±¡</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">mounted() &#123;</span><br><span class="line">  <span class="comment">// æµè§ˆå™¨çš„ç¼“å­˜è¯»å–</span></span><br><span class="line">  <span class="built_in">this</span>.skuInfo = <span class="built_in">JSON</span>.parse(<span class="built_in">window</span>.localStorage.getItem(<span class="string">&#x27;SKU_INFO&#x27;</span>) || &#123;&#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2><span id="p66-gou-wu-che">66 è´­ç‰©è½¦</span><a href="#p66-gou-wu-che" class="header-anchor">#</a></h2>
<p>æ–°å»ºè´­ç‰©è½¦ç»„ä»¶ ShopCart åœ¨ pagesé‡Œé¢ï¼ˆç›´æ¥æ‹·è´ï¼‰</p>
<p>routes.js æ³¨å†Œä¸ºè·¯ç”±ç»„ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ShopCart <span class="keyword">from</span> <span class="string">&#x27;@/pages/ShopCart&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 46</span></span><br><span class="line">  <span class="comment">// ShopCart</span></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/shopcart&#x27;</span>,</span><br><span class="line">    component: ShopCart</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>AddCartSuccess 21è¡Œ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- <span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:&quot;</span>&gt;</span>å»è´­ç‰©è½¦ç»“ç®— &gt; <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span> --&gt;</span><br><span class="line">&lt;router-link to=<span class="string">&quot;/shopcart&quot;</span>&gt;å»è´­ç‰©è½¦ç»“ç®—&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>
<h2><span id="p67-sheng-cheng-lin-shi-yong-hu-id">67 ç”Ÿæˆä¸´æ—¶ç”¨æˆ·id</span><a href="#p67-sheng-cheng-lin-shi-yong-hu-id" class="header-anchor">#</a></h2>
<p>ç”Ÿæˆä¸´æ—¶ç”¨æˆ·id</p>
<p>uuidjs <code>npm i uuidjs</code></p>
<p>utils ä¸­æ–°å»º storageUtils.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æš´éœ²å‡ºå»ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æˆ·ç”Ÿæˆç”¨æˆ·çš„ä¸´æ—¶idå‡­è¯</span></span><br><span class="line"><span class="comment">// å¼•å…¥ uuid</span></span><br><span class="line"><span class="keyword">import</span> UUID <span class="keyword">from</span> <span class="string">&#x27;uuidjs&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getUUID</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å…ˆä»æµè§ˆå™¨çš„ç¼“å­˜ä¸­è¯»å–ç”¨æˆ·çš„ä¸´æ—¶å‡­è¯</span></span><br><span class="line">  <span class="keyword">let</span> uuid = <span class="built_in">localStorage</span>.getItem(<span class="string">&#x27;UUID_KEY&#x27;</span>)</span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">  <span class="keyword">if</span> (!uuid) &#123;</span><br><span class="line">    <span class="comment">// äº§ç”Ÿä¸´æ—¶ç”¨æˆ·id</span></span><br><span class="line">    uuid = UUID.generate()</span><br><span class="line">    <span class="comment">// ä¿å­˜åˆ°æµè§ˆå™¨</span></span><br><span class="line">    <span class="built_in">localStorage</span>.setItem(<span class="string">&#x27;UUID_KEY&#x27;</span>, uuid)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// è¿”å›</span></span><br><span class="line">  <span class="keyword">return</span> uuid</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>store/modules ä¸­æ–°å»ºä¸€ä¸ª user.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”¨æˆ·æ¨¡å—</span></span><br><span class="line"><span class="comment">// å¼•å…¥ ç”Ÿæˆuuid å·¥å…·</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  getUUID</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/storageUtils&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    userInfo: &#123;&#125;, <span class="comment">// ç”¨æˆ·ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line">    userTempId: getUUID() <span class="comment">// ç”¨æˆ·çš„ä¸´æ—¶id</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;&#125;,</span><br><span class="line">  actions: &#123;&#125;,</span><br><span class="line">  getters: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨index.jsä¸­æ³¨å†Œ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> home <span class="keyword">from</span> <span class="string">&#x27;./home&#x27;</span></span><br><span class="line"><span class="keyword">import</span> search <span class="keyword">from</span> <span class="string">&#x27;./search&#x27;</span></span><br><span class="line"><span class="keyword">import</span> detail <span class="keyword">from</span> <span class="string">&#x27;./detail&#x27;</span></span><br><span class="line"><span class="keyword">import</span> shopcart <span class="keyword">from</span> <span class="string">&#x27;./shopcart&#x27;</span></span><br><span class="line"><span class="keyword">import</span> user <span class="keyword">from</span> <span class="string">&#x27;./user&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  home,</span><br><span class="line">  search,</span><br><span class="line">  detail,</span><br><span class="line">  shopcart,</span><br><span class="line">  user</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>api/ajax.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span></span><br></pre></td></tr></table></figure>
<p>æ›´æ–°è¯·æ±‚æ‹¦æˆªå™¨</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">ajax.interceptors.request.use(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">  Nprogress.start() <span class="comment">// æ˜¾ç¤ºè¿›åº¦æ¡</span></span><br><span class="line">  <span class="comment">// åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ç”¨æˆ·çš„ä¸´æ—¶å‡­è¯id</span></span><br><span class="line">  config.headers[<span class="string">&#x27;userTempId&#x27;</span>] = store.state.user.userTempId</span><br><span class="line">  <span class="keyword">return</span> config</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨æ¥å£å‘è¯·æ±‚çš„æ—¶å€™ï¼Œåœ¨è¯·æ±‚å¤´æºå¸¦ç”¨æˆ·ä¸´æ—¶id</p>
<h1><span id="9-yue-25-ri-day-7">9æœˆ25æ—¥ï¼ˆday 7ï¼‰</span><a href="#9-yue-25-ri-day-7" class="header-anchor">#</a></h1>
<h2><span id="p68-huo-qu-gou-wu-che-shu-ju-feng-zhuang-api-vuex">68 è·å–è´­ç‰©è½¦æ•°æ®ï¼ˆå°è£…api + vuexï¼‰</span><a href="#p68-huo-qu-gou-wu-che-shu-ju-feng-zhuang-api-vuex" class="header-anchor">#</a></h2>
<p>api +</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–è´­ç‰©è½¦ä¸­çš„å•†å“ä¿¡æ¯åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqShopCartList = <span class="function">() =&gt;</span> ajax.get(<span class="string">&#x27;/cart/cartList&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>store/modules/shopcart.js +</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥api</span></span><br><span class="line"><span class="keyword">import</span> &#123; reqAddToCart, reqShopCartList &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mutations: &#123;</span><br><span class="line">  <span class="comment">// ç›´æ¥ä¿®æ”¹ shopList æ•°æ®</span></span><br><span class="line">  RECEIVE_SHOP_LIST(state, shopList) &#123;</span><br><span class="line">    state.shopList = shopList</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>actions ä¸­ +</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–è´­ç‰©è½¦ä¸­çš„å•†å“ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line"><span class="keyword">async</span> getShopList(&#123; commit &#125;) &#123;</span><br><span class="line">  <span class="comment">// è°ƒç”¨ api æ¥å£ï¼Œå‘é€å¼‚æ­¥è¯·æ±‚</span></span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> reqShopCartList()</span><br><span class="line">  <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="comment">// æ›´æ–°æ•°æ®</span></span><br><span class="line">    commit(<span class="string">&#x27;RECEIVE_SHOP_LIST&#x27;</span>, result.data)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>ShopCart æ›´æ–°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;ShopCart&#x27;</span>,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    <span class="comment">// è·å–è´­ç‰©è½¦ä¸­çš„å•†å“æ•°æ®</span></span><br><span class="line">    <span class="built_in">this</span>.getShopCartList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    getShopCartList() &#123;</span><br><span class="line">      <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;getShopList&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2><span id="p69-xuan-ran-gou-wu-che-nei-rong">69 æ¸²æŸ“è´­ç‰©è½¦å†…å®¹</span><a href="#p69-xuan-ran-gou-wu-che-nei-rong" class="header-anchor">#</a></h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  ...mapState(&#123; <span class="attr">shopList</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.shopcart.shopList &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>14è¡Œ <code>&lt;ul class=&quot;cart-list&quot;&gt;</code> åˆ æ‰ç•™ä¸€ä¸ª</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é€‰ä¸­ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;cart-list-con1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;chk_list&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å›¾ç‰‡å’Œåå­— --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;cart-list-con2&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;item.imgUrl&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item-msg&quot;</span>&gt;</span>&#123;&#123; item.skuName &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;cart-list-con3&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item-txt&quot;</span>&gt;</span>ç»ç‰ˆ<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä»·æ ¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;cart-list-con4&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;price&quot;</span>&gt;</span>&#123;&#123; item.skuPrice &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- åŠ å‡ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;cart-list-con5&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span> <span class="attr">class</span>=<span class="string">&quot;mins&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">    <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">minnum</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;itxt&quot;</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span> <span class="attr">class</span>=<span class="string">&quot;plus&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ€»ä»· --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;cart-list-con6&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sum&quot;</span>&gt;</span>&#123;&#123; item.skuPrice * item.skuNum &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- åˆ é™¤ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;cart-list-con7&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p69-xuan-ran-gou-wu-che-jie-mian-2">69 æ¸²æŸ“è´­ç‰©è½¦ç•Œé¢2</span><a href="#p69-xuan-ran-gou-wu-che-jie-mian-2" class="header-anchor">#</a></h2>
<p>store æ›´æ–° shopcart ä¸­çš„ getters</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ€»æ•°é‡</span></span><br><span class="line">totalCount(state) &#123;</span><br><span class="line">  <span class="keyword">return</span> state.shopList.reduce(<span class="function">(<span class="params">pre, item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> item.isChecked === <span class="number">1</span> ? pre + item.skuNum : pre</span><br><span class="line">  &#125;, <span class="number">0</span>)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// æ€»ä»·æ ¼</span></span><br><span class="line">totalPrice(state) &#123;</span><br><span class="line">  <span class="keyword">return</span> state.shopList.reduce(<span class="function">(<span class="params">pre, item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> item.isChecked === <span class="number">1</span> ? pre + item.skuNum * item.skuPrice : pre</span><br><span class="line">  &#125;, <span class="number">0</span>)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// æ˜¯å¦å…¨éƒ¨é€‰ä¸­</span></span><br><span class="line">isCheckAll(state) &#123;</span><br><span class="line">  <span class="comment">// æ•°ç»„ä¸­è¦æœ‰æ•°æ®,å¹¶ä¸”æ¯ä¸ªæ•°æ®éƒ½æ˜¯é€‰ä¸­çš„,æ‰æœ‰æ„ä¹‰</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    state.shopList.length &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">    state.shopList.every(<span class="function"><span class="params">item</span> =&gt;</span> item.isChecked === <span class="number">1</span>)</span><br><span class="line">  )</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>ShopCart</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapState, mapGetters &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  ...mapState(&#123; <span class="attr">shopList</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.shopcart.shopList &#125;),</span><br><span class="line">  ...mapGetters([<span class="string">&#x27;totalCount&#x27;</span>, <span class="string">&#x27;totalPrice&#x27;</span>, <span class="string">&#x27;isChecked&#x27;</span>])</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>61è¡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;money-box&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;chosed&quot;</span>&gt;</span></span><br><span class="line">    å·²é€‰æ‹© <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; totalCount &#125;&#125;<span class="tag">&lt;/<span class="name">span</span></span></span><br><span class="line"><span class="tag">    &gt;</span>ä»¶å•†å“</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sumprice&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">em</span>&gt;</span>æ€»ä»·ï¼ˆä¸å«è¿è´¹ï¼‰ ï¼š<span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">    &lt;i class=&quot;summoney&quot;&#123;&#123; totalPrice &#125;&#125;&lt;/i&gt;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sumbtn&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p70-gou-wu-che-shan-chu">70 è´­ç‰©è½¦åˆ é™¤</span><a href="#p70-gou-wu-che-shan-chu" class="header-anchor">#</a></h2>
<p>api +</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è´­ç‰©è½¦åˆ é™¤æ“ä½œ</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqDeleteCartItem = <span class="function">(<span class="params">skuId</span>) =&gt;</span> ajax.delete(<span class="string">`/cart/deleteCart/<span class="subst">$&#123;skuId&#125;</span>`</span>)</span><br></pre></td></tr></table></figure>
<p>shopcart.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reqAddToCart, reqShopCartList,reqDeleteCartItem &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br></pre></td></tr></table></figure>
<p>actions+</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ é™¤è´­ç‰©è½¦çš„å•†å“ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line"><span class="keyword">async</span> deleteCartItem1(&#123; commit &#125;, skuId) &#123;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> reqDeleteCartItem(skuId)</span><br><span class="line">  <span class="keyword">return</span> result.code === <span class="number">200</span> ? <span class="string">&#x27;&#x27;</span> : result.message || <span class="string">&#x27;åˆ é™¤å¤±è´¥&#x27;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>ShopCart  methods+</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ é™¤</span></span><br><span class="line"><span class="keyword">async</span> deleteCartItem(skuId) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.confirm(<span class="string">&#x27;ä½ ç¡®å®šè¦åˆ é™¤å—ï¼Ÿ&#x27;</span>)) &#123;</span><br><span class="line">    <span class="keyword">const</span> error = <span class="keyword">await</span> <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;deleteCartItem1&#x27;</span>, skuId)</span><br><span class="line">    <span class="comment">// åˆ é™¤æˆåŠŸ</span></span><br><span class="line">    <span class="keyword">if</span> (!error) &#123;</span><br><span class="line">      <span class="built_in">this</span>.getShopCartList()</span><br><span class="line">      <span class="comment">// åˆ é™¤å¤±è´¥</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      alert(error)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>ShopCart</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åˆ é™¤ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;cart-list-con7&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;sindelet&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;deleteCartItem(item.skuId)&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">a</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>ç§»åˆ°æ”¶è—<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p71-qing-kong-gou-wu-che">71 æ¸…ç©ºè´­ç‰©è½¦</span><a href="#p71-qing-kong-gou-wu-che" class="header-anchor">#</a></h2>
<p>shopcart.js ä¸­ getters +</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–æ‰€æœ‰é€‰ä¸­çš„è´­ç‰©é¡¹</span></span><br><span class="line">selectedCartItems(state) &#123;</span><br><span class="line">  <span class="keyword">return</span> state.shopList.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.isChecked === <span class="number">1</span>)</span><br><span class="line">  <span class="comment">// return state.shopList.reduce((pre, item) =&gt; &#123;</span></span><br><span class="line">  <span class="comment">//   åˆ¤æ–­æ˜¯å¦é€‰ä¸­</span></span><br><span class="line">  <span class="comment">//   if (item.isChecked === 1) &#123;</span></span><br><span class="line">  <span class="comment">//     pre.push(item)</span></span><br><span class="line">  <span class="comment">//   &#125;</span></span><br><span class="line">  <span class="comment">//   return pre</span></span><br><span class="line">  <span class="comment">// &#125;, [])</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>actions +</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> deleteCartItem2(&#123; commit &#125;, skuId) &#123;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> reqDeleteCartItem(skuId)</span><br><span class="line">  <span class="keyword">if</span> (result.code !== <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="comment">// æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸</span></span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(result.message)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>ShopCart 64è¡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;option&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;deleteCartItems&quot;</span>&gt;</span>åˆ é™¤é€‰ä¸­çš„å•†å“<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>computed æ›´æ–°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  ...mapState(&#123; <span class="attr">shopList</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.shopcart.shopList &#125;),</span><br><span class="line">  ...mapGetters([</span><br><span class="line">    <span class="string">&#x27;totalCount&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;totalPrice&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;isCheckAll&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;selectedCartItems&#x27;</span>  <span class="comment">// æ–°å¢</span></span><br><span class="line">  ])</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>methods +</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ é™¤æ‰€æœ‰é€‰ä¸­çš„è´­ç‰©é¡¹</span></span><br><span class="line"><span class="keyword">async</span> deleteCartItems(skuId) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; selectedCartItems &#125; = <span class="built_in">this</span></span><br><span class="line">  <span class="comment">// å¦‚æœè¯¥æ•°ç»„ä¸­çš„æ•°æ®æ˜¯æ²¡æœ‰çš„ï¼Œé‚£ä¹ˆä¹Ÿæ²¡æœ‰å¿…è¦åˆ é™¤</span></span><br><span class="line">  <span class="keyword">if</span> (selectedCartItems.length === <span class="number">0</span>) <span class="keyword">return</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.confirm(<span class="string">&#x27;ä½ ç¡®å®šè¦åˆ é™¤æ‰€æœ‰é€‰ä¸­çš„è´­ç‰©é¡¹å—&#x27;</span>)) &#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰ä¸€ä¸ªå‚¨å­˜Promiseçš„æ•°ç»„</span></span><br><span class="line">    <span class="keyword">const</span> promises = []</span><br><span class="line">    <span class="comment">// éå†æ•°ç»„ï¼Œä¸€ä¸ªä¸€ä¸ªåˆ é™¤</span></span><br><span class="line">    selectedCartItems.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// åˆ†å‘action</span></span><br><span class="line">      <span class="keyword">const</span> promise = <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;deleteCartItem2&#x27;</span>, item.skuId)</span><br><span class="line">      promises.push(promise)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// ç»Ÿä¸€çš„å¤„ç† Promise</span></span><br><span class="line">    <span class="built_in">Promise</span>.all(promises).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// æˆåŠŸäº†</span></span><br><span class="line">      <span class="built_in">this</span>.getShopCartList()</span><br><span class="line">    &#125;),</span><br><span class="line">      error =&gt; &#123;</span><br><span class="line">        <span class="comment">// å¤±è´¥äº†</span></span><br><span class="line">        alert(error.message)</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2><span id="p72-qie-huan-xuan-zhong-zhuang-tai">72 åˆ‡æ¢é€‰ä¸­çŠ¶æ€</span><a href="#p72-qie-huan-xuan-zhong-zhuang-tai" class="header-anchor">#</a></h2>
<p>api +</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ‡æ¢å•†å“é€‰ä¸­çŠ¶æ€</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqCheckCartItem = <span class="function">(<span class="params">skuId, isChecked</span>) =&gt;</span></span><br><span class="line">  ajax.get(<span class="string">`/cart/checkCart/<span class="subst">$&#123;skuId&#125;</span>/<span class="subst">$&#123;isChecked&#125;</span>`</span>)</span><br></pre></td></tr></table></figure>
<p>store shopcart.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥api</span></span><br><span class="line"><span class="keyword">import</span> &#123; reqAddToCart, reqShopCartList, reqDeleteCartItem,reqCheckCartItem &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ‡æ¢è´­ç‰©é€‰ä¸­çŠ¶æ€</span></span><br><span class="line"><span class="keyword">async</span> checkCartItem1(&#123; commit &#125;, &#123; skuId, isChecked &#125;) &#123;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> reqCheckCartItem(skuId, isChecked)</span><br><span class="line">  <span class="comment">// å¤±è´¥çš„é—®é¢˜</span></span><br><span class="line">  <span class="keyword">if</span> (result.code !== <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(result.message || <span class="string">&#x27;åˆ‡æ¢å‹¾é€‰çŠ¶æ€å¤±è´¥&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ShopCart methods +</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®è´­ç‰©é¡¹å•†å“çš„é€‰ä¸­çŠ¶æ€</span></span><br><span class="line"><span class="keyword">async</span> checkCartItem(item) &#123;</span><br><span class="line">  <span class="keyword">const</span> isChecked = item.isChecked === <span class="number">1</span> ? <span class="number">0</span> : <span class="number">1</span></span><br><span class="line">  <span class="comment">// åˆ†å‘</span></span><br><span class="line">  <span class="built_in">this</span>.$store</span><br><span class="line">    .dispatch(<span class="string">&#x27;checkCartItem1&#x27;</span>, &#123; <span class="attr">skuId</span>: item.skuId, isChecked &#125;)</span><br><span class="line">    .then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// æˆåŠŸäº†ï¼Œé‡æ–°è·å–è´­ç‰©è½¦çš„æ•°æ®</span></span><br><span class="line">      <span class="built_in">this</span>.getShopCartList()</span><br><span class="line">    &#125;),</span><br><span class="line">    error =&gt; &#123;</span><br><span class="line">      <span class="comment">// å¤±è´¥äº†</span></span><br><span class="line">      alert(error.message)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>æ›´æ–°html 15è¡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ˜¯å¦é€‰ä¸­ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;cart-list-con1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">    <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">name</span>=<span class="string">&quot;chk_list&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:checked</span>=<span class="string">&quot;item.isChecked&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">change</span>=<span class="string">&quot;checkCartItem(item)&quot;</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p73-quan-xuan-quan-bu-xuan">73 å…¨é€‰/å…¨ä¸é€‰</span><a href="#p73-quan-xuan-quan-bu-xuan" class="header-anchor">#</a></h2>
<p>shopcart.js actions+</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ‡æ¢è´­ç‰©é€‰ä¸­çŠ¶æ€</span></span><br><span class="line"> <span class="keyword">async</span> checkCartItem1(&#123; commit &#125;, &#123; skuId, isChecked &#125;) &#123;</span><br><span class="line">   <span class="keyword">const</span> result = <span class="keyword">await</span> reqCheckCartItem(skuId, isChecked)</span><br><span class="line">   <span class="comment">// å¤±è´¥çš„é—®é¢˜</span></span><br><span class="line">   <span class="keyword">if</span> (result.code !== <span class="number">200</span>) &#123;</span><br><span class="line">     <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(result.message || <span class="string">&#x27;åˆ‡æ¢å‹¾é€‰çŠ¶æ€å¤±è´¥&#x27;</span>)</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>ShopCart methods+</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ‡æ¢å…¨é€‰/å…¨ä¸é€‰æ‹©æ“ä½œ</span></span><br><span class="line"><span class="keyword">async</span> checkCartItems(e) &#123;</span><br><span class="line">  <span class="comment">// è·å–å½“å‰å¤é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€</span></span><br><span class="line">  <span class="keyword">const</span> isChecked = e.target.checked * <span class="number">1</span></span><br><span class="line">  <span class="comment">// const promises = []</span></span><br><span class="line">  <span class="comment">// éå†è´­ç‰©è½¦ä¸­æ‰€æœ‰çš„è´­ç‰©é¡¹,ç»Ÿä¸€ä¿®æ”¹é€‰ä¸­çŠ¶æ€</span></span><br><span class="line">  <span class="comment">// this.shopList.forEach((item) =&gt; &#123;</span></span><br><span class="line">  <span class="comment">//   // åˆ†å‘action</span></span><br><span class="line">  <span class="comment">//   const promise = this.$store.dispatch(&#x27;checkCartItem1&#x27;, &#123;</span></span><br><span class="line">  <span class="comment">//     skuId: item.skuId,</span></span><br><span class="line">  <span class="comment">//     isChecked,</span></span><br><span class="line">  <span class="comment">//   &#125;)</span></span><br><span class="line">  <span class="comment">//   // æ”¾åœ¨promisesæ•°ç»„ä¸­</span></span><br><span class="line">  <span class="comment">//   promises.push(promise)</span></span><br><span class="line">  <span class="comment">// &#125;)</span></span><br><span class="line">  <span class="comment">// ä½¿ç”¨reduce</span></span><br><span class="line">  <span class="comment">// const promises = this.shopList.reduce((pre, item) =&gt; &#123;</span></span><br><span class="line">  <span class="comment">//   const promise = this.$store.dispatch(&#x27;checkCartItem1&#x27;, &#123;</span></span><br><span class="line">  <span class="comment">//     skuId: item.skuId,</span></span><br><span class="line">  <span class="comment">//     isChecked,</span></span><br><span class="line">  <span class="comment">//   &#125;)</span></span><br><span class="line">  <span class="comment">//   pre.push(promise)</span></span><br><span class="line">  <span class="comment">//   return pre</span></span><br><span class="line">  <span class="comment">// &#125;, [])</span></span><br><span class="line">  <span class="comment">// ä½¿ç”¨map</span></span><br><span class="line">  <span class="keyword">const</span> promises = <span class="built_in">this</span>.shopList.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;checkCartItem1&#x27;</span>, &#123;</span><br><span class="line">      skuId: item.skuId,</span><br><span class="line">      isChecked</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// ç»Ÿä¸€å¤„ç†</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="built_in">Promise</span>.all(promises)</span><br><span class="line">    <span class="comment">// æˆåŠŸäº†,é‡æ–°è·å–æ•°æ®</span></span><br><span class="line">    <span class="built_in">this</span>.getShopCartList()</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    alert(error.message)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>79è¡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å…¨é€‰ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;select-all&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;chooseAll&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:checked</span>=<span class="string">&quot;isCheckAll&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">change</span>=<span class="string">&quot;checkCartItems&quot;</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>å…¨é€‰<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p74-shu-liang-cao-zuo">74 æ•°é‡æ“ä½œ</span><a href="#p74-shu-liang-cao-zuo" class="header-anchor">#</a></h2>
<p>shopcart.js actions+</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> addToCart3(&#123; commit, dispatch &#125;, &#123; skuId, skuNum &#125;) &#123;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> reqAddToCart(skuId, skuNum)</span><br><span class="line">  <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="comment">// æˆåŠŸäº†</span></span><br><span class="line">    dispatch(<span class="string">&#x27;getShopList&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// å¤±è´¥äº†</span></span><br><span class="line">    alert(result.message)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>ShopCart methods+</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¿®æ”¹å•†å“è´­ç‰©é¡¹çš„æ•°é‡</span></span><br><span class="line"><span class="keyword">async</span> changeCount(item, changeNum) &#123;</span><br><span class="line">  <span class="comment">// è·å–skuId</span></span><br><span class="line">  <span class="keyword">const</span> &#123; skuId &#125; = item</span><br><span class="line">  <span class="comment">// åˆ¤æ–­å½“å‰å•†å“çš„æ•°é‡å’Œä¼ å…¥è¿›æ¥çš„ä¿®æ”¹çš„æ•°é‡ç›¸åŠ ,è¦å¤§äº0</span></span><br><span class="line">  <span class="keyword">if</span> (item.skuNum + changeNum &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// åˆ†å‘action</span></span><br><span class="line">    <span class="keyword">const</span> errorMsg = <span class="keyword">await</span> <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;addToCart2&#x27;</span>, &#123;</span><br><span class="line">      skuId,</span><br><span class="line">      skuNum: changeNum</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">if</span> (!errorMsg) &#123;</span><br><span class="line">      <span class="comment">// æˆåŠŸäº†</span></span><br><span class="line">      <span class="built_in">this</span>.getShopCartList()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// å¤±è´¥äº†</span></span><br><span class="line">      alert(errorMsg)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">changeCount2(item, changeNum) &#123;</span><br><span class="line">  <span class="comment">// è·å–skuId</span></span><br><span class="line">  <span class="keyword">const</span> &#123; skuId &#125; = item</span><br><span class="line">  <span class="comment">// åˆ¤æ–­å½“å‰å•†å“çš„æ•°é‡å’Œä¼ å…¥è¿›æ¥çš„ä¿®æ”¹çš„æ•°é‡ç›¸åŠ ,è¦å¤§äº0</span></span><br><span class="line">  <span class="keyword">if</span> (item.skuNum + changeNum &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// åˆ†å‘action</span></span><br><span class="line">    <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;addToCart3&#x27;</span>, &#123;</span><br><span class="line">      skuId,</span><br><span class="line">      skuNum: changeNum</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">/</span><br></pre></td></tr></table></figure>
<p>37è¡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ•°é‡æ“ä½œ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;cart-list-con5&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å‡ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span></span></span><br><span class="line"><span class="tag">    <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;mins&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">click</span>=<span class="string">&quot;changeCount2(item, -1)&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span>-<span class="tag">&lt;/<span class="name">a</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ç›´æ¥è¾“å…¥ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">    <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">minnum</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;itxt&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:value</span>=<span class="string">&quot;item.skuNum&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">change</span>=<span class="string">&quot;changeCount2(item, $event.target.value * 1 - item.skuNum)&quot;</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- åŠ  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span></span></span><br><span class="line"><span class="tag">    <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;plus&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">click</span>=<span class="string">&quot;changeCount2(item, 1)&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span>+<span class="tag">&lt;/<span class="name">a</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è‡³æ­¤</p>
<p>ShopCart</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;cart&quot;&gt;</span><br><span class="line">    &lt;h4&gt;å…¨éƒ¨å•†å“&lt;&#x2F;h4&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;cart-main&quot;&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;cart-th&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;cart-th1&quot;&gt;å…¨éƒ¨&lt;&#x2F;div&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;cart-th2&quot;&gt;å•†å“&lt;&#x2F;div&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;cart-th3&quot;&gt;å•ä»·ï¼ˆå…ƒï¼‰&lt;&#x2F;div&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;cart-th4&quot;&gt;æ•°é‡&lt;&#x2F;div&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;cart-th5&quot;&gt;å°è®¡ï¼ˆå…ƒï¼‰&lt;&#x2F;div&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;cart-th6&quot;&gt;æ“ä½œ&lt;&#x2F;div&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;cart-body&quot;&gt;</span><br><span class="line">        &lt;ul class&#x3D;&quot;cart-list&quot; v-for&#x3D;&quot;item in shopList&quot; :key&#x3D;&quot;item.id&quot;&gt;</span><br><span class="line">          &lt;!-- æ˜¯å¦é€‰ä¸­ --&gt;</span><br><span class="line">          &lt;li class&#x3D;&quot;cart-list-con1&quot;&gt;</span><br><span class="line">            &lt;input</span><br><span class="line">              type&#x3D;&quot;checkbox&quot;</span><br><span class="line">              name&#x3D;&quot;chk_list&quot;</span><br><span class="line">              :checked&#x3D;&quot;item.isChecked&quot;</span><br><span class="line">              @change&#x3D;&quot;checkCartItem(item)&quot;</span><br><span class="line">            &#x2F;&gt;</span><br><span class="line">          &lt;&#x2F;li&gt;</span><br><span class="line">          &lt;!-- å›¾ç‰‡å’Œåå­— --&gt;</span><br><span class="line">          &lt;li class&#x3D;&quot;cart-list-con2&quot;&gt;</span><br><span class="line">            &lt;img :src&#x3D;&quot;item.imgUrl&quot; &#x2F;&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;item-msg&quot;&gt;&#123;&#123; item.skuName &#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">          &lt;&#x2F;li&gt;</span><br><span class="line">          &lt;!-- æ— ç”¨ --&gt;</span><br><span class="line">          &lt;li class&#x3D;&quot;cart-list-con3&quot;&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;item-txt&quot;&gt;ç»ç‰ˆ&lt;&#x2F;div&gt;</span><br><span class="line">          &lt;&#x2F;li&gt;</span><br><span class="line">          &lt;!-- å•ä»· --&gt;</span><br><span class="line">          &lt;li class&#x3D;&quot;cart-list-con4&quot;&gt;</span><br><span class="line">            &lt;span class&#x3D;&quot;price&quot;&gt;&#123;&#123; item.skuPrice &#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">          &lt;&#x2F;li&gt;</span><br><span class="line">          &lt;!-- æ•°é‡æ“ä½œ --&gt;</span><br><span class="line">          &lt;li class&#x3D;&quot;cart-list-con5&quot;&gt;</span><br><span class="line">            &lt;!-- å‡ --&gt;</span><br><span class="line">            &lt;a</span><br><span class="line">              href&#x3D;&quot;javascript:void(0)&quot;</span><br><span class="line">              class&#x3D;&quot;mins&quot;</span><br><span class="line">              @click&#x3D;&quot;changeCount2(item, -1)&quot;</span><br><span class="line">              &gt;-&lt;&#x2F;a</span><br><span class="line">            &gt;</span><br><span class="line">            &lt;!-- ç›´æ¥è¾“å…¥ --&gt;</span><br><span class="line">            &lt;input</span><br><span class="line">              autocomplete&#x3D;&quot;off&quot;</span><br><span class="line">              type&#x3D;&quot;text&quot;</span><br><span class="line">              minnum&#x3D;&quot;1&quot;</span><br><span class="line">              class&#x3D;&quot;itxt&quot;</span><br><span class="line">              :value&#x3D;&quot;item.skuNum&quot;</span><br><span class="line">              @change&#x3D;&quot;changeCount2(item, $event.target.value * 1 - item.skuNum)&quot;</span><br><span class="line">            &#x2F;&gt;</span><br><span class="line">            &lt;!-- åŠ  --&gt;</span><br><span class="line">            &lt;a</span><br><span class="line">              href&#x3D;&quot;javascript:void(0)&quot;</span><br><span class="line">              class&#x3D;&quot;plus&quot;</span><br><span class="line">              @click&#x3D;&quot;changeCount2(item, 1)&quot;</span><br><span class="line">              &gt;+&lt;&#x2F;a</span><br><span class="line">            &gt;</span><br><span class="line">          &lt;&#x2F;li&gt;</span><br><span class="line">          &lt;!-- æ€»ä»· --&gt;</span><br><span class="line">          &lt;li class&#x3D;&quot;cart-list-con6&quot;&gt;</span><br><span class="line">            &lt;span class&#x3D;&quot;sum&quot;&gt;&#123;&#123; item.skuPrice * item.skuNum &#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">          &lt;&#x2F;li&gt;</span><br><span class="line">          &lt;!-- åˆ é™¤ --&gt;</span><br><span class="line">          &lt;li class&#x3D;&quot;cart-list-con7&quot;&gt;</span><br><span class="line">            &lt;a href&#x3D;&quot;#&quot; class&#x3D;&quot;sindelet&quot; @click&#x3D;&quot;deleteCartItem(item.skuId)&quot;</span><br><span class="line">              &gt;åˆ é™¤&lt;&#x2F;a</span><br><span class="line">            &gt;</span><br><span class="line">            &lt;br &#x2F;&gt;</span><br><span class="line">            &lt;a href&#x3D;&quot;#&quot;&gt;ç§»åˆ°æ”¶è—&lt;&#x2F;a&gt;</span><br><span class="line">          &lt;&#x2F;li&gt;</span><br><span class="line">        &lt;&#x2F;ul&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;cart-tool&quot;&gt;</span><br><span class="line">      &lt;!-- å…¨é€‰ --&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;select-all&quot;&gt;</span><br><span class="line">        &lt;input</span><br><span class="line">          class&#x3D;&quot;chooseAll&quot;</span><br><span class="line">          type&#x3D;&quot;checkbox&quot;</span><br><span class="line">          :checked&#x3D;&quot;isCheckAll&quot;</span><br><span class="line">          @change&#x3D;&quot;checkCartItems&quot;</span><br><span class="line">        &#x2F;&gt;</span><br><span class="line">        &lt;span&gt;å…¨é€‰&lt;&#x2F;span&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;!-- åˆ é™¤é€‰æ‹©çš„å•†å“ --&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;option&quot;&gt;</span><br><span class="line">        &lt;a href&#x3D;&quot;javascript:;&quot; @click&#x3D;&quot;deleteCartItems&quot;&gt;åˆ é™¤é€‰ä¸­çš„å•†å“&lt;&#x2F;a&gt;</span><br><span class="line">        &lt;a href&#x3D;&quot;javascript:;&quot;&gt;ç§»åˆ°æˆ‘çš„å…³æ³¨&lt;&#x2F;a&gt;</span><br><span class="line">        &lt;a href&#x3D;&quot;javascript:;&quot;&gt;æ¸…é™¤ä¸‹æŸœå•†å“&lt;&#x2F;a&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;money-box&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;chosed&quot;&gt;</span><br><span class="line">          å·²é€‰æ‹© &lt;span&gt;&#123;&#123; totalCount &#125;&#125;&lt;&#x2F;span</span><br><span class="line">          &gt;ä»¶å•†å“</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;sumprice&quot;&gt;</span><br><span class="line">          &lt;em&gt;æ€»ä»·ï¼ˆä¸å«è¿è´¹ï¼‰ ï¼š&lt;&#x2F;em&gt;</span><br><span class="line">          &lt;i class&#x3D;&quot;summoney&quot;&gt;&#123;&#123; totalPrice &#125;&#125;&lt;&#x2F;i&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;sumbtn&quot;&gt;</span><br><span class="line">          &lt;a class&#x3D;&quot;sum-btn&quot; href&#x3D;&quot;###&quot; target&#x3D;&quot;_blank&quot;&gt;ç»“ç®—&lt;&#x2F;a&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; mapState, mapGetters &#125; from &#39;vuex&#39;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#39;ShopCart&#39;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    &#x2F;&#x2F; è·å–è´­ç‰©è½¦ä¸­çš„å•†å“æ•°æ®</span><br><span class="line">    this.getShopCartList()</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    ...mapState(&#123; shopList: state &#x3D;&gt; state.shopcart.shopList &#125;),</span><br><span class="line">    ...mapGetters([</span><br><span class="line">      &#39;totalCount&#39;,</span><br><span class="line">      &#39;totalPrice&#39;,</span><br><span class="line">      &#39;isCheckAll&#39;,</span><br><span class="line">      &#39;selectedCartItems&#39;</span><br><span class="line">    ])</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    &#x2F;&#x2F; è·å–è´­ç‰©è½¦</span><br><span class="line">    getShopCartList() &#123;</span><br><span class="line">      this.$store.dispatch(&#39;getShopList&#39;)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; åˆ é™¤</span><br><span class="line">    async deleteCartItem(skuId) &#123;</span><br><span class="line">      if (window.confirm(&#39;ä½ ç¡®å®šè¦åˆ é™¤å—ï¼Ÿ&#39;)) &#123;</span><br><span class="line">        const error &#x3D; await this.$store.dispatch(&#39;deleteCartItem1&#39;, skuId)</span><br><span class="line">        &#x2F;&#x2F; åˆ é™¤æˆåŠŸ</span><br><span class="line">        if (!error) &#123;</span><br><span class="line">          this.getShopCartList()</span><br><span class="line">          &#x2F;&#x2F; åˆ é™¤å¤±è´¥</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          alert(error)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; åˆ é™¤æ‰€æœ‰é€‰ä¸­çš„è´­ç‰©é¡¹</span><br><span class="line">    async deleteCartItems(skuId) &#123;</span><br><span class="line">      const &#123; selectedCartItems &#125; &#x3D; this</span><br><span class="line">      &#x2F;&#x2F; å¦‚æœè¯¥æ•°ç»„ä¸­çš„æ•°æ®æ˜¯æ²¡æœ‰çš„ï¼Œé‚£ä¹ˆä¹Ÿæ²¡æœ‰å¿…è¦åˆ é™¤</span><br><span class="line">      if (selectedCartItems.length &#x3D;&#x3D;&#x3D; 0) return</span><br><span class="line">      if (window.confirm(&#39;ä½ ç¡®å®šè¦åˆ é™¤æ‰€æœ‰é€‰ä¸­çš„è´­ç‰©é¡¹å—&#39;)) &#123;</span><br><span class="line">        &#x2F;&#x2F; å®šä¹‰ä¸€ä¸ªå‚¨å­˜Promiseçš„æ•°ç»„</span><br><span class="line">        const promises &#x3D; []</span><br><span class="line">        &#x2F;&#x2F; éå†æ•°ç»„ï¼Œä¸€ä¸ªä¸€ä¸ªåˆ é™¤</span><br><span class="line">        selectedCartItems.forEach(item &#x3D;&gt; &#123;</span><br><span class="line">          &#x2F;&#x2F; åˆ†å‘action</span><br><span class="line">          const promise &#x3D; this.$store.dispatch(&#39;deleteCartItem2&#39;, item.skuId)</span><br><span class="line">          promises.push(promise)</span><br><span class="line">        &#125;)</span><br><span class="line">        &#x2F;&#x2F; ç»Ÿä¸€çš„å¤„ç† Promise</span><br><span class="line">        Promise.all(promises).then(() &#x3D;&gt; &#123;</span><br><span class="line">          &#x2F;&#x2F; æˆåŠŸäº†</span><br><span class="line">          this.getShopCartList()</span><br><span class="line">        &#125;),</span><br><span class="line">          error &#x3D;&gt; &#123;</span><br><span class="line">            &#x2F;&#x2F; å¤±è´¥äº†</span><br><span class="line">            alert(error.message)</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; è®¾ç½®è´­ç‰©é¡¹å•†å“çš„é€‰ä¸­çŠ¶æ€</span><br><span class="line">    async checkCartItem(item) &#123;</span><br><span class="line">      const isChecked &#x3D; item.isChecked &#x3D;&#x3D;&#x3D; 1 ? 0 : 1</span><br><span class="line">      &#x2F;&#x2F; åˆ†å‘</span><br><span class="line">      this.$store</span><br><span class="line">        .dispatch(&#39;checkCartItem1&#39;, &#123; skuId: item.skuId, isChecked &#125;)</span><br><span class="line">        .then(value &#x3D;&gt; &#123;</span><br><span class="line">          &#x2F;&#x2F; æˆåŠŸäº†ï¼Œé‡æ–°è·å–è´­ç‰©è½¦çš„æ•°æ®</span><br><span class="line">          this.getShopCartList()</span><br><span class="line">        &#125;),</span><br><span class="line">        error &#x3D;&gt; &#123;</span><br><span class="line">          &#x2F;&#x2F; å¤±è´¥äº†</span><br><span class="line">          alert(error.message)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; åˆ‡æ¢å…¨é€‰&#x2F;å…¨ä¸é€‰æ‹©æ“ä½œ</span><br><span class="line">    async checkCartItems(e) &#123;</span><br><span class="line">      &#x2F;&#x2F; è·å–å½“å‰å¤é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€</span><br><span class="line">      const isChecked &#x3D; e.target.checked * 1</span><br><span class="line">      &#x2F;&#x2F; const promises &#x3D; []</span><br><span class="line">      &#x2F;&#x2F; éå†è´­ç‰©è½¦ä¸­æ‰€æœ‰çš„è´­ç‰©é¡¹,ç»Ÿä¸€ä¿®æ”¹é€‰ä¸­çŠ¶æ€</span><br><span class="line">      &#x2F;&#x2F; this.shopList.forEach((item) &#x3D;&gt; &#123;</span><br><span class="line">      &#x2F;&#x2F;   &#x2F;&#x2F; åˆ†å‘action</span><br><span class="line">      &#x2F;&#x2F;   const promise &#x3D; this.$store.dispatch(&#39;checkCartItem1&#39;, &#123;</span><br><span class="line">      &#x2F;&#x2F;     skuId: item.skuId,</span><br><span class="line">      &#x2F;&#x2F;     isChecked,</span><br><span class="line">      &#x2F;&#x2F;   &#125;)</span><br><span class="line">      &#x2F;&#x2F;   &#x2F;&#x2F; æ”¾åœ¨promisesæ•°ç»„ä¸­</span><br><span class="line">      &#x2F;&#x2F;   promises.push(promise)</span><br><span class="line">      &#x2F;&#x2F; &#125;)</span><br><span class="line">      &#x2F;&#x2F; ä½¿ç”¨reduce</span><br><span class="line">      &#x2F;&#x2F; const promises &#x3D; this.shopList.reduce((pre, item) &#x3D;&gt; &#123;</span><br><span class="line">      &#x2F;&#x2F;   const promise &#x3D; this.$store.dispatch(&#39;checkCartItem1&#39;, &#123;</span><br><span class="line">      &#x2F;&#x2F;     skuId: item.skuId,</span><br><span class="line">      &#x2F;&#x2F;     isChecked,</span><br><span class="line">      &#x2F;&#x2F;   &#125;)</span><br><span class="line">      &#x2F;&#x2F;   pre.push(promise)</span><br><span class="line">      &#x2F;&#x2F;   return pre</span><br><span class="line">      &#x2F;&#x2F; &#125;, [])</span><br><span class="line">      &#x2F;&#x2F; ä½¿ç”¨map</span><br><span class="line">      const promises &#x3D; this.shopList.map(item &#x3D;&gt; &#123;</span><br><span class="line">        return this.$store.dispatch(&#39;checkCartItem1&#39;, &#123;</span><br><span class="line">          skuId: item.skuId,</span><br><span class="line">          isChecked</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">      &#x2F;&#x2F; ç»Ÿä¸€å¤„ç†</span><br><span class="line">      try &#123;</span><br><span class="line">        await Promise.all(promises)</span><br><span class="line">        &#x2F;&#x2F; æˆåŠŸäº†,é‡æ–°è·å–æ•°æ®</span><br><span class="line">        this.getShopCartList()</span><br><span class="line">      &#125; catch (error) &#123;</span><br><span class="line">        alert(error.message)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; ä¿®æ”¹å•†å“è´­ç‰©é¡¹çš„æ•°é‡</span><br><span class="line">    async changeCount(item, changeNum) &#123;</span><br><span class="line">      &#x2F;&#x2F; è·å–skuId</span><br><span class="line">      const &#123; skuId &#125; &#x3D; item</span><br><span class="line">      &#x2F;&#x2F; åˆ¤æ–­å½“å‰å•†å“çš„æ•°é‡å’Œä¼ å…¥è¿›æ¥çš„ä¿®æ”¹çš„æ•°é‡ç›¸åŠ ,è¦å¤§äº0</span><br><span class="line">      if (item.skuNum + changeNum &gt; 0) &#123;</span><br><span class="line">        &#x2F;&#x2F; åˆ†å‘action</span><br><span class="line">        const errorMsg &#x3D; await this.$store.dispatch(&#39;addToCart2&#39;, &#123;</span><br><span class="line">          skuId,</span><br><span class="line">          skuNum: changeNum</span><br><span class="line">        &#125;)</span><br><span class="line">        if (!errorMsg) &#123;</span><br><span class="line">          &#x2F;&#x2F; æˆåŠŸäº†</span><br><span class="line">          this.getShopCartList()</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          &#x2F;&#x2F; å¤±è´¥äº†</span><br><span class="line">          alert(errorMsg)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    changeCount2(item, changeNum) &#123;</span><br><span class="line">      &#x2F;&#x2F; è·å–skuId</span><br><span class="line">      const &#123; skuId &#125; &#x3D; item</span><br><span class="line">      &#x2F;&#x2F; åˆ¤æ–­å½“å‰å•†å“çš„æ•°é‡å’Œä¼ å…¥è¿›æ¥çš„ä¿®æ”¹çš„æ•°é‡ç›¸åŠ ,è¦å¤§äº0</span><br><span class="line">      if (item.skuNum + changeNum &gt; 0) &#123;</span><br><span class="line">        &#x2F;&#x2F; åˆ†å‘action</span><br><span class="line">        this.$store.dispatch(&#39;addToCart3&#39;, &#123;</span><br><span class="line">          skuId,</span><br><span class="line">          skuNum: changeNum</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F; end</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<p>shopcart.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥api</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  reqAddToCart,</span><br><span class="line">  reqShopCartList,</span><br><span class="line">  reqDeleteCartItem,</span><br><span class="line">  reqCheckCartItem</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    shopList: [] <span class="comment">// è´­ç‰©è½¦ä¸­çš„å•†å“ä¿¡æ¯æŒ‰é’®</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    <span class="comment">// ç›´æ¥ä¿®æ”¹ shopList æ•°æ®</span></span><br><span class="line">    RECEIVE_SHOP_LIST(state, shopList) &#123;</span><br><span class="line">      state.shopList = shopList</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    <span class="comment">// æ·»åŠ è´­ç‰©è½¦æ“ä½œ</span></span><br><span class="line">    <span class="keyword">async</span> addToCart1(&#123; commit &#125;, &#123; skuId, skuNum, callback &#125;) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqAddToCart(skuId, skuNum, callback)</span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        callback(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        callback(result.message || <span class="string">&#x27;æ·»åŠ å¤±è´¥&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">async</span> addToCart2(&#123; commit &#125;, &#123; skuId, skuNum &#125;) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqAddToCart(skuId, skuNum)</span><br><span class="line">      <span class="keyword">return</span> result.code === <span class="number">200</span> ? <span class="string">&#x27;&#x27;</span> : result.message || <span class="string">&#x27;æ·»åŠ å¤±è´¥&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">async</span> addToCart3(&#123; commit, dispatch &#125;, &#123; skuId, skuNum &#125;) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqAddToCart(skuId, skuNum)</span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="comment">// æˆåŠŸäº†</span></span><br><span class="line">        dispatch(<span class="string">&#x27;getShopList&#x27;</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// å¤±è´¥äº†</span></span><br><span class="line">        alert(result.message)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// è·å–è´­ç‰©è½¦ä¸­çš„å•†å“ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">async</span> getShopList(&#123; commit &#125;) &#123;</span><br><span class="line">      <span class="comment">// è°ƒç”¨ api æ¥å£ï¼Œå‘é€å¼‚æ­¥è¯·æ±‚</span></span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqShopCartList()</span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="comment">// æ›´æ–°æ•°æ®</span></span><br><span class="line">        commit(<span class="string">&#x27;RECEIVE_SHOP_LIST&#x27;</span>, result.data)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// åˆ é™¤è´­ç‰©è½¦çš„å•†å“ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">async</span> deleteCartItem1(&#123; commit &#125;, skuId) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqDeleteCartItem(skuId)</span><br><span class="line">      <span class="keyword">return</span> result.code === <span class="number">200</span> ? <span class="string">&#x27;&#x27;</span> : result.message || <span class="string">&#x27;åˆ é™¤å¤±è´¥&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">async</span> deleteCartItem2(&#123; commit &#125;, skuId) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqDeleteCartItem(skuId)</span><br><span class="line">      <span class="keyword">if</span> (result.code !== <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="comment">// æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(result.message)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// åˆ‡æ¢è´­ç‰©é€‰ä¸­çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">async</span> checkCartItem1(&#123; commit &#125;, &#123; skuId, isChecked &#125;) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqCheckCartItem(skuId, isChecked)</span><br><span class="line">      <span class="comment">// å¤±è´¥çš„é—®é¢˜</span></span><br><span class="line">      <span class="keyword">if</span> (result.code !== <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(result.message || <span class="string">&#x27;åˆ‡æ¢å‹¾é€‰çŠ¶æ€å¤±è´¥&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// end</span></span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;</span><br><span class="line">    <span class="comment">// æ€»æ•°é‡</span></span><br><span class="line">    totalCount(state) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.shopList.reduce(<span class="function">(<span class="params">pre, item</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> item.isChecked === <span class="number">1</span> ? pre + item.skuNum : pre</span><br><span class="line">      &#125;, <span class="number">0</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// æ€»ä»·æ ¼</span></span><br><span class="line">    totalPrice(state) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.shopList.reduce(<span class="function">(<span class="params">pre, item</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> item.isChecked === <span class="number">1</span> ? pre + item.skuNum * item.skuPrice : pre</span><br><span class="line">      &#125;, <span class="number">0</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// æ˜¯å¦å…¨éƒ¨é€‰ä¸­</span></span><br><span class="line">    isCheckAll(state) &#123;</span><br><span class="line">      <span class="comment">// æ•°ç»„ä¸­è¦æœ‰æ•°æ®,å¹¶ä¸”æ¯ä¸ªæ•°æ®éƒ½æ˜¯é€‰ä¸­çš„,æ‰æœ‰æ„ä¹‰</span></span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        state.shopList.length &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">        state.shopList.every(<span class="function"><span class="params">item</span> =&gt;</span> item.isChecked === <span class="number">1</span>)</span><br><span class="line">      )</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// è·å–æ‰€æœ‰é€‰ä¸­çš„è´­ç‰©é¡¹</span></span><br><span class="line">    selectedCartItems(state) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.shopList.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.isChecked === <span class="number">1</span>)</span><br><span class="line">      <span class="comment">// return state.shopList.reduce((pre, item) =&gt; &#123;</span></span><br><span class="line">      <span class="comment">//   åˆ¤æ–­æ˜¯å¦é€‰ä¸­</span></span><br><span class="line">      <span class="comment">//   if (item.isChecked === 1) &#123;</span></span><br><span class="line">      <span class="comment">//     pre.push(item)</span></span><br><span class="line">      <span class="comment">//   &#125;</span></span><br><span class="line">      <span class="comment">//   return pre</span></span><br><span class="line">      <span class="comment">// &#125;, [])</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2><span id="p75-deng-lu-zhu-ce-tui-chu-api-jie-kou">75 ç™»é™†/æ³¨å†Œ/é€€å‡º apiæ¥å£</span><a href="#p75-deng-lu-zhu-ce-tui-chu-api-jie-kou" class="header-anchor">#</a></h2>
<p>api +</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç™»å½•æ¥å£</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqLogin = <span class="function">(<span class="params">mobile, password</span>) =&gt;</span></span><br><span class="line">  ajax.post(<span class="string">`/user/passport/login`</span>, &#123; mobile, password &#125;)</span><br><span class="line"><span class="comment">// æ³¨å†Œæ¥å£</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqRegister = <span class="function"><span class="params">userInfo</span> =&gt;</span></span><br><span class="line">  ajax.post(<span class="string">`/user/passport/register`</span>, userInfo)</span><br><span class="line"><span class="comment">// é€€å‡ºæ¥å£</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqLogout = <span class="function">() =&gt;</span> ajax.get(<span class="string">`/user/passport/logout`</span>)</span><br></pre></td></tr></table></figure>
<p>13700000000</p>
<p>111111</p>
<h1><span id="9-yue-27-ri-day-8">9æœˆ27æ—¥ï¼ˆday 8ï¼‰</span><a href="#9-yue-27-ri-day-8" class="header-anchor">#</a></h1>
<h2><span id="p76-vuex-feng-zhuang">76 vuexå°è£…</span><a href="#p76-vuex-feng-zhuang" class="header-anchor">#</a></h2>
<p>user.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”¨æˆ·æ¨¡å—</span></span><br><span class="line"><span class="comment">// å¼•å…¥ ç”Ÿæˆuuid å·¥å…·</span></span><br><span class="line"><span class="keyword">import</span> &#123; getUUID &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/storageUtils&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; reqLogin, reqRegister, reqLogout &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    userInfo: &#123;&#125;, <span class="comment">// ç”¨æˆ·ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line">    userTempId: getUUID() <span class="comment">// ç”¨æˆ·çš„ä¸´æ—¶id</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    <span class="comment">// ç›´æ¥æ›´æ–°ç”¨æˆ·ä¿¡æ¯æ•°æ®ï¼ˆç™»é™†æˆåŠŸï¼‰</span></span><br><span class="line">    RECEIVE_USER_INFO(state, userInfo) &#123;</span><br><span class="line">      state.userInfo = userInfo</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// æ¸…ç©ºç”¨æˆ·ä¿¡æ¯æ•°æ®ï¼ˆé€€å‡ºï¼‰</span></span><br><span class="line">    RESET_USER_INFO(state) &#123;</span><br><span class="line">      state.userInfo = &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    <span class="comment">// ç™»é™†</span></span><br><span class="line">    <span class="keyword">async</span> login(&#123; commit &#125;, &#123; mobile, password &#125;) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqLogin(mobile, password)</span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> userInfo = result.data</span><br><span class="line">        commit(<span class="string">&#x27;RECEIVE_USER_INFO&#x27;</span>, userInfo)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;ç™»é™†å¤±è´¥äº†&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// æ³¨å†Œ</span></span><br><span class="line">    <span class="keyword">async</span> register(&#123; commit &#125;, userInfo) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqRegister(userInfo)</span><br><span class="line">      <span class="keyword">if</span> (result.code !== <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;æ³¨å†Œå¤±è´¥äº†&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// é€€å‡º</span></span><br><span class="line">    <span class="keyword">async</span> logout(&#123; commit &#125;) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqLogout()</span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="comment">// æ¸…ç©ºç”¨æˆ·ä¿¡æ¯æ•°ç»„ï¼ˆå‘ï¼‰</span></span><br><span class="line">        commit(<span class="string">&#x27;RESET_USER_INFO&#x27;</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;é€€å‡ºå¤±è´¥äº†&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2><span id="p77-zhu-ce-1">77 æ³¨å†Œ1</span><a href="#p77-zhu-ce-1" class="header-anchor">#</a></h2>
<p>Register 12è¡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span>æ‰‹æœºå·:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥ä½ çš„æ‰‹æœºå·&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;mobile&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span>éªŒè¯ç :<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥éªŒè¯ç &quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;code&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">    <span class="attr">ref</span>=<span class="string">&quot;code&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">src</span>=<span class="string">&quot;/api/user/passport/code&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">alt</span>=<span class="string">&quot;code&quot;</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span>ç™»å½•å¯†ç :<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥ä½ çš„ç™»å½•å¯†ç &quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;password&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span>ç¡®è®¤å¯†ç :<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥ç¡®è®¤å¯†ç &quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;password2&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;controls&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;m1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;isAgree&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>åŒæ„åè®®å¹¶æ³¨å†Œã€Šå°šå“æ±‡ç”¨æˆ·åè®®ã€‹<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬16è¡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span>éªŒè¯ç :<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥éªŒè¯ç &quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;code&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">    <span class="attr">ref</span>=<span class="string">&quot;code&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">src</span>=<span class="string">&quot;http://182.92.128.115/api/user/passport/code&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">alt</span>=<span class="string">&quot;code&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">click</span>=<span class="string">&quot;updateCode&quot;</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬38è¡Œ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;btn&quot;</span>&gt;</span><br><span class="line">  &lt;a href=<span class="string">&quot;javascript:&quot;</span> @click=<span class="string">&quot;register&quot;</span>&gt;å®Œæˆæ³¨å†Œ&lt;/a&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>ç‚¹å›¾å½¢éªŒè¯ç å¯ä»¥åˆ‡æ¢</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;Register&#x27;</span>,</span><br><span class="line">  data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      mobile: <span class="string">&#x27;&#x27;</span>, <span class="comment">// æ‰‹æœºå·</span></span><br><span class="line">      password: <span class="string">&#x27;&#x27;</span>, <span class="comment">// æ”¶é›†å¯†ç </span></span><br><span class="line">      password2: <span class="string">&#x27;&#x27;</span>, <span class="comment">// ç¡®è®¤å¯†ç </span></span><br><span class="line">      code: <span class="string">&#x27;&#x27;</span>, <span class="comment">// ä¿å­˜éªŒè¯ç ä¿¡æ¯</span></span><br><span class="line">      isAgree: <span class="literal">true</span> <span class="comment">// æ§åˆ¶æ˜¯å¦åŒæ„</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods:&#123;</span><br><span class="line">    <span class="comment">// æ›´æ–°å›¾å½¢éªŒè¯ç </span></span><br><span class="line">    updateCode()&#123;</span><br><span class="line">      <span class="built_in">this</span>.$refs.code.src = <span class="string">&#x27;/api/user/passport/code?time=&#x27;</span>+<span class="built_in">Date</span>.now()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// æ³¨å†Œ</span></span><br><span class="line">    register()&#123;</span><br><span class="line">      <span class="comment">// è·å–æ‰€éœ€è¦çš„éªŒè¯ç </span></span><br><span class="line">      <span class="keyword">const</span> &#123;mobile, password, password2, code, isAgree&#125; = <span class="built_in">this</span></span><br><span class="line">      <span class="comment">// éªŒè¯</span></span><br><span class="line">      <span class="keyword">if</span>(!isAgree)&#123;</span><br><span class="line">        alert(<span class="string">&#x27;è¯·å‹¾é€‰æ˜¯å¦åŒæ„&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span>(password!==password2)&#123;</span><br><span class="line">        alert(<span class="string">&quot;å¯†ç ä¸ä¸€è‡´&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;OK&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p78-biao-dan-yan-zheng">78 è¡¨å•éªŒè¯</span><a href="#p78-biao-dan-yan-zheng" class="header-anchor">#</a></h2>
<p>npm install vee-validate@2.2.13</p>
<p>utils æ–°å»º validate.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> VeeValidate <span class="keyword">from</span> <span class="string">&#x27;vee-validate&#x27;</span></span><br><span class="line"><span class="keyword">import</span> zh_CN <span class="keyword">from</span> <span class="string">&#x27;vee-validate/dist/locale/zh_CN&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.use(VeeValidate)</span><br><span class="line"></span><br><span class="line">VeeValidate.Validator.localize(<span class="string">&#x27;zh_CN&#x27;</span>, &#123;</span><br><span class="line">  messages: zh_CN.messages,</span><br><span class="line">  attributes: &#123;</span><br><span class="line">    mobile: <span class="string">&#x27;æ‰‹æœºå·ç &#x27;</span>,</span><br><span class="line">    code: <span class="string">&#x27;å›¾å½¢éªŒè¯ç &#x27;</span>,</span><br><span class="line">    password: <span class="string">&#x27;å¯†ç &#x27;</span>,</span><br><span class="line">    password2: <span class="string">&#x27;ç¡®è®¤å¯†ç &#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">VeeValidate.Validator.extend(<span class="string">&#x27;phone&#x27;</span>, &#123;</span><br><span class="line">  getMessage: <span class="function"><span class="params">field</span> =&gt;</span> <span class="string">&#x27;æ¸…è¾“å…¥æ­£ç¡®çš„&#x27;</span> + field,</span><br><span class="line">  validate: <span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="regexp">/^[1]\d&#123;10&#125;$/</span>.test(value)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">VeeValidate.Validator.extend(<span class="string">&#x27;code1&#x27;</span>, &#123;</span><br><span class="line">  getMessage: <span class="function"><span class="params">field</span> =&gt;</span> <span class="string">&#x27;è¯·è¾“å…¥æ­£ç¡®çš„&#x27;</span> + field,</span><br><span class="line">  <span class="comment">// æ–‡æœ¬æ¡†è¾“å…¥çš„å†…å®¹</span></span><br><span class="line">  validate: <span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="regexp">/^\d&#123;4&#125;$/</span>.test(value)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Register</p>
<p>å¼•å…¥</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@/utils/validate&#x27;</span></span><br></pre></td></tr></table></figure>
<p>æ›´æ–°</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- æ³¨å†Œ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;register&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">      æ³¨å†Œæ–°ç”¨æˆ·</span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;go&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span>æˆ‘æœ‰è´¦å·ï¼Œå»</span><br><span class="line">        <span class="comment">&lt;!-- &lt;a href=&quot;login.html&quot; target=&quot;_blank&quot;&gt;ç™»é™†&lt;/a&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/login&quot;</span>&gt;</span>ç™»é™†<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>æ‰‹æœºå·:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥ä½ çš„æ‰‹æœºå·&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model</span>=<span class="string">&quot;mobile&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-validate</span>=<span class="string">&quot;&#x27;required|phone&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">&quot;mobile&quot;</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span>&#123;&#123; errors.first(&#x27;mobile&#x27;) &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>éªŒè¯ç :<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥éªŒè¯ç &quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model</span>=<span class="string">&quot;code&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-validate</span>=<span class="string">&quot;&#x27;required|code1&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">&quot;code&quot;</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ref</span>=<span class="string">&quot;code&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">src</span>=<span class="string">&quot;/api/user/passport/code&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">alt</span>=<span class="string">&quot;code&quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">click</span>=<span class="string">&quot;updateCode&quot;</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span>&#123;&#123; errors.first(&#x27;code&#x27;) &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>ç™»å½•å¯†ç :<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥ä½ çš„ç™»å½•å¯†ç &quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model</span>=<span class="string">&quot;password&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-validate</span>=<span class="string">&quot;&#x27;required&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">&quot;password&quot;</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span>&#123;&#123; errors.first(&#x27;password&#x27;) &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>ç¡®è®¤å¯†ç :<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥ç¡®è®¤å¯†ç &quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model</span>=<span class="string">&quot;password2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-validate</span>=<span class="string">&quot;&#x27;required&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">&quot;password2&quot;</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span>&#123;&#123; errors.first(&#x27;password2&#x27;) &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;controls&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;m1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;isAgree&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>åŒæ„åè®®å¹¶æ³¨å†Œã€Šå°šå“æ±‡ç”¨æˆ·åè®®ã€‹<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;register&quot;</span>&gt;</span>å®Œæˆæ³¨å†Œ<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p79-biao-dan-yan-zheng-2">79 è¡¨å•éªŒè¯2</span><a href="#p79-biao-dan-yan-zheng-2" class="header-anchor">#</a></h2>
<p>register æ›´æ–°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨å†Œ</span></span><br><span class="line">    <span class="keyword">async</span> register() &#123;</span><br><span class="line">      <span class="comment">// è·å–æ‰€éœ€è¦çš„éªŒè¯ç </span></span><br><span class="line">      <span class="keyword">const</span> &#123; mobile, password, password2, code, isAgree &#125; = <span class="built_in">this</span></span><br><span class="line">      <span class="comment">// éªŒè¯</span></span><br><span class="line">      <span class="keyword">if</span> (!isAgree) &#123;</span><br><span class="line">        alert(<span class="string">&#x27;è¯·å‹¾é€‰æ˜¯å¦åŒæ„&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (password !== password2) &#123;</span><br><span class="line">        alert(<span class="string">&#x27;å¯†ç ä¸ä¸€è‡´&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// è¡¨å•çš„éªŒè¯</span></span><br><span class="line">      <span class="comment">// -- å‡†å¤‡å­—æ®µæ•°ç»„</span></span><br><span class="line">      <span class="keyword">const</span> names = [<span class="string">&#x27;mobile&#x27;</span>, <span class="string">&#x27;password&#x27;</span>, <span class="string">&#x27;code&#x27;</span>]</span><br><span class="line">      <span class="comment">// -- ä»…å½“æ‰€æœ‰è¡¨å•éªŒè¯é€šè¿‡æ‰æ˜¯ true</span></span><br><span class="line">      <span class="keyword">const</span> success = <span class="keyword">await</span> <span class="built_in">this</span>.$validator.validateAll(names)</span><br><span class="line">      <span class="keyword">if</span> (success) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="comment">// å®ç° æ³¨å†Œ</span></span><br><span class="line">          <span class="keyword">await</span> <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;register&#x27;</span>, &#123; mobile, password, code &#125;)</span><br><span class="line">          <span class="comment">// è·¯ç”±è·³è½¬ -- ç™»å½•ç•Œé¢</span></span><br><span class="line">          <span class="built_in">this</span>.$router.replace(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          alert(error.message)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p80-deng-lu">80 ç™»å½•</span><a href="#p80-deng-lu" class="header-anchor">#</a></h2>
<p>Login</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">  &lt;div class&#x3D;&quot;input-text clearFix&quot;&gt;</span><br><span class="line">    &lt;span class&#x3D;&quot;pwd&quot;&gt;&lt;&#x2F;span&gt;</span><br><span class="line">    &lt;input type&#x3D;&quot;text&quot; placeholder&#x3D;&quot;è¯·è¾“å…¥å¯†ç &quot; v-model&#x3D;&quot;password&quot; &#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;setting clearFix&quot;&gt;</span><br><span class="line">    &lt;label class&#x3D;&quot;checkbox inline&quot;&gt;</span><br><span class="line">      &lt;input name&#x3D;&quot;m1&quot; type&#x3D;&quot;checkbox&quot; value&#x3D;&quot;2&quot; checked&#x3D;&quot;&quot; &#x2F;&gt;</span><br><span class="line">      è‡ªåŠ¨ç™»å½•</span><br><span class="line">    &lt;&#x2F;label&gt;</span><br><span class="line">    &lt;span class&#x3D;&quot;forget&quot;&gt;å¿˜è®°å¯†ç ï¼Ÿ&lt;&#x2F;span&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;button class&#x3D;&quot;btn&quot; @click.prevent&#x3D;&quot;login&quot;&gt;ç™»&amp;nbsp;&amp;nbsp;å½•&lt;&#x2F;button&gt;</span><br><span class="line">&lt;&#x2F;form&gt;</span><br></pre></td></tr></table></figure>
<p>script</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;Login&#x27;</span>,</span><br><span class="line">  data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      mobile: <span class="string">&#x27;13700000000&#x27;</span>,</span><br><span class="line">      password: <span class="string">&#x27;123456&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="comment">// ç™»å½•</span></span><br><span class="line">    <span class="keyword">async</span> login() &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; mobile, password &#125; = <span class="built_in">this</span></span><br><span class="line">      <span class="comment">// ç®€å•çš„éªŒè¯</span></span><br><span class="line">      <span class="keyword">if</span> (mobile === <span class="string">&#x27;&#x27;</span> || password === <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">        alert(<span class="string">&#x27;è¯·è¾“å…¥æ‰‹æœºå·ç æˆ–è€…å¯†ç &#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ‰‹æœºå·ç å’Œå¯†ç éƒ½å·²ç»æ”¶åˆ°</span></span><br><span class="line">      <span class="comment">// åˆ†å‘action</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">await</span> <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;login&#x27;</span>, &#123; mobile, password &#125;)</span><br><span class="line">        <span class="built_in">this</span>.$router.replace(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        alert(error)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p81-deng-lu-zhi-hou-xian-shi-yong-hu-ming">81 ç™»å½•ä¹‹åæ˜¾ç¤ºç”¨æˆ·å</span><a href="#p81-deng-lu-zhi-hou-xian-shi-yong-hu-ming" class="header-anchor">#</a></h2>
<p>Header 7</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>å•†åŸæ¬¢è¿æ‚¨ï¼<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">&quot;userInfo.name&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; userInfo.name &#125;&#125;<span class="tag">&lt;/<span class="name">span</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="symbol">&amp;nbsp;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span>&gt;</span>é€€å‡º<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>è¯·<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  ...mapState(&#123;</span><br><span class="line">    userInfo: <span class="function"><span class="params">state</span> =&gt;</span> state.user.userInfo</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>ä¿å­˜ç™»å½•ä¿¡æ¯ user.js åˆ·æ–°ä¸ä¼šæ‰çº¿</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">state: &#123;</span><br><span class="line">  <span class="comment">// 1 å°†tokenæ”¾åœ¨ç¼“å­˜ä¸­</span></span><br><span class="line">  userInfo: <span class="built_in">JSON</span>.parse(<span class="built_in">localStorage</span>.getItem(<span class="string">&#x27;user_info_key&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>),</span><br><span class="line">    </span><br><span class="line">actions: &#123;</span><br><span class="line">  <span class="comment">// ç™»é™†</span></span><br><span class="line">  <span class="keyword">async</span> login(&#123; commit &#125;, &#123; mobile, password &#125;) &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> reqLogin(mobile, password)</span><br><span class="line">    <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> userInfo = result.data</span><br><span class="line">      commit(<span class="string">&#x27;RECEIVE_USER_INFO&#x27;</span>, userInfo)</span><br><span class="line">      <span class="comment">// 2 ç¼“å­˜</span></span><br><span class="line">      <span class="built_in">localStorage</span>.setItem(<span class="string">&#x27;user_info_key&#x27;</span>, <span class="built_in">JSON</span>.stringify(userInfo))</span><br></pre></td></tr></table></figure>
<h2><span id="p82-token">82 token</span><a href="#p82-token" class="header-anchor">#</a></h2>
<p>user.js +</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// state</span></span><br><span class="line">userInfo: <span class="built_in">JSON</span>.parse(<span class="built_in">localStorage</span>.getItem(<span class="string">&#x27;user_info_key&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>ajax è¯·æ±‚æ‹¦æˆªå™¨</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å– token</span></span><br><span class="line"><span class="keyword">const</span> token = store.state.user.userInfo.token</span><br><span class="line"><span class="comment">// åˆ¤æ–­ token æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="keyword">if</span> (token) &#123;</span><br><span class="line">  config.headers[<span class="string">&#x27;token&#x27;</span>] = token</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p83-deng-chu">83 ç™»å‡º</span><a href="#p83-deng-chu" class="header-anchor">#</a></h2>
<p>Header 13</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;logout&quot;</span>&gt;</span>é€€å‡º<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>methods</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">logout()&#123;</span><br><span class="line">  this.$store.dispatch(&#39;logout&#39;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>store/modules/user.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¸…ç©ºç”¨æˆ·ä¿¡æ¯æ•°æ®ï¼ˆé€€å‡ºï¼‰</span></span><br><span class="line">RESET_USER_INFO(state) &#123;</span><br><span class="line">  state.userInfo = &#123;&#125;</span><br><span class="line">  <span class="comment">// æ¸…ç©ºæµè§ˆå™¨ä¸­ç¼“å­˜ä¿¡æ¯ä¸­çš„ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">  <span class="built_in">localStorage</span>.removeItem(<span class="string">&#x27;user_info_key&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1><span id="9-yue-28-ri-day-9">9æœˆ28æ—¥ï¼ˆday 9ï¼‰</span><a href="#9-yue-28-ri-day-9" class="header-anchor">#</a></h1>
<h2><span id="p84-da-jian-lu-you-he-tiao-zhuan">84 æ­å»ºè·¯ç”±å’Œè·³è½¬</span><a href="#p84-da-jian-lu-you-he-tiao-zhuan" class="header-anchor">#</a></h2>
<p>æ‹·è´å››ä¸ªè·¯ç”±ç»„ä»¶åˆ° pages</p>
<p><code>@\router\routes.js</code> å¼•å…¥å››è·¯ç”±ç»„ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Trade <span class="keyword">from</span> <span class="string">&#x27;@/pages/Trade&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Pay <span class="keyword">from</span> <span class="string">&#x27;@/pages/Pay&#x27;</span></span><br><span class="line"><span class="keyword">import</span> PaySuccess <span class="keyword">from</span> <span class="string">&#x27;@/pages/PaySuccess&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Center <span class="keyword">from</span> <span class="string">&#x27;@/pages/Center&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Trade</span></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/trade&#x27;</span>,</span><br><span class="line">    component: Trade</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// Pay</span></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/pay&#x27;</span>,</span><br><span class="line">    component: Pay</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// PaySuccess</span></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/paysuccess&#x27;</span>,</span><br><span class="line">    component: PaySuccess</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// Center</span></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/center&#x27;</span>,</span><br><span class="line">    component: Center</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>Header ä¿®æ”¹è·³è½¬é“¾æ¥ï¼ˆè·¯ç”±é“¾æ¥ï¼‰  æˆ‘çš„è®¢å• 21è¡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;typeList&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/center&quot;</span>&gt;</span>æˆ‘çš„è®¢å•<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/shopcart&quot;</span>&gt;</span>æˆ‘çš„è´­ç‰©è½¦<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p85-wo-de-ding-dan-xie-jie-kou">85 æˆ‘çš„è®¢å•å†™æ¥å£</span><a href="#p85-wo-de-ding-dan-xie-jie-kou" class="header-anchor">#</a></h2>
<p>å†™æ¥å£ <code>api/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–è®¢å•çš„è¯¦æƒ…ä¿¡æ¯æ•°æ®</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqTradeInfo = <span class="function">() =&gt;</span> ajax.get(<span class="string">&#x27;/order/auth/trade&#x27;</span>)</span><br><span class="line"><span class="comment">// è·å–è®¢å•çš„åˆ—è¡¨ä¿¡æ¯æ•°æ®</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqOrderList = <span class="function">(<span class="params">page, limit</span>) =&gt;</span></span><br><span class="line">  ajax.get(<span class="string">`/order/auth/<span class="subst">$&#123;page&#125;</span>/<span class="subst">$&#123;limit&#125;</span>`</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æäº¤è®¢å•</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqSubmitOrder = <span class="function">(<span class="params">tradeNo, orderInfo</span>) =&gt;</span></span><br><span class="line">  ajax(&#123;</span><br><span class="line">    method: <span class="string">&#x27;POST&#x27;</span>, <span class="comment">// è¯·æ±‚æ–¹å¼</span></span><br><span class="line">    url: <span class="string">&#x27;/order/auth/submitOrder&#x27;</span>, <span class="comment">// è¯·æ±‚åœ°å€</span></span><br><span class="line">    params: &#123; tradeNo &#125;, <span class="comment">// å‚æ•°</span></span><br><span class="line">    data: orderInfo <span class="comment">// æ•°æ®å‚æ•°</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–è®¢å•æ”¯ä»˜ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqPayInfo = <span class="function"><span class="params">orderId</span> =&gt;</span></span><br><span class="line">  ajax.get(<span class="string">`/payment/weixin/createNative/<span class="subst">$&#123;orderId&#125;</span>`</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢æ”¯ä»˜çŠ¶æ€</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqPayStatus = <span class="function"><span class="params">orderId</span> =&gt;</span></span><br><span class="line">  ajax.get(<span class="string">`/payment/weixin/queryPayStatus/<span class="subst">$&#123;orderId&#125;</span>`</span>)</span><br></pre></td></tr></table></figure>
<h2><span id="p86-er-ji-lu-you">86 äºŒçº§è·¯ç”±</span><a href="#p86-er-ji-lu-you" class="header-anchor">#</a></h2>
<p>ç»“æ„å’Œæ ·å¼ä¸€èµ·å¸¦èµ°ï¼Œå›¾ç‰‡</p>
<p>pages/Center æ–°å»º MyOrder å’Œ GroupBuy æ–°å»º index.vue</p>
<p>MyOrder</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;order-content&quot;&gt;</span><br><span class="line">...</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#39;MyOrder&#39;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot; scoped&gt;</span><br><span class="line">&#x2F;&#x2F;è®¢å•éƒ¨åˆ†</span><br><span class="line">.order-content &#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
<p>GroupBuy</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;111111&lt;&#x2F;h2&gt;</span><br><span class="line">    &lt;h2&gt;111111&lt;&#x2F;h2&gt;</span><br><span class="line">    &lt;h2&gt;111111&lt;&#x2F;h2&gt;</span><br><span class="line">    &lt;h2&gt;111111&lt;&#x2F;h2&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#39;GroupBuy&#39;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot; scoped&gt;&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
<p>Center 58è¡Œ å‰ªåˆ‡ï¼ˆåŠ è·¯ç”±è§†å›¾ï¼‰ ï¼Œä»¥åŠä¸‹é¢æ ·å¼ ä»¥åŠå›¾ç‰‡ åˆ° MyOrder</p>
<p>ç¬¬9è¡ŒåŠ è·¯ç”±é“¾æ¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dd&gt;</span><br><span class="line">  &lt;router-link to&#x3D;&quot;&#x2F;center&#x2F;myorder&quot;&gt;æˆ‘çš„è®¢å•&lt;&#x2F;router-link&gt;</span><br><span class="line">&lt;&#x2F;dd&gt;</span><br><span class="line">&lt;dd&gt;</span><br><span class="line">  &lt;router-link to&#x3D;&quot;&#x2F;center&#x2F;groupbuy&quot;&gt;å›¢è´­è®¢å•&lt;&#x2F;router-link&gt;</span><br></pre></td></tr></table></figure>
<p>è·¯ç”±ä¸­å¼•å…¥å¹¶åˆ›å»ºäºŒçº§è·¯ç”±</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Center <span class="keyword">from</span> <span class="string">&#x27;@/pages/Center&#x27;</span></span><br><span class="line"><span class="keyword">import</span> MyOrder <span class="keyword">from</span> <span class="string">&#x27;@/pages/Center/MyOrder&#x27;</span></span><br><span class="line"><span class="keyword">import</span> GroupBuy <span class="keyword">from</span> <span class="string">&#x27;@/pages/Center/GroupBuy&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Center</span></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/center&#x27;</span>,</span><br><span class="line">    component: Center,</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">&#x27;/center/myorder&#x27;</span>,</span><br><span class="line">        component: MyOrder</span><br><span class="line">      &#125;,&#123;</span><br><span class="line">        path: <span class="string">&#x27;/center/groupbuy&#x27;</span>,</span><br><span class="line">        component: GroupBuy</span><br><span class="line">      &#125;,&#123;</span><br><span class="line">        path: <span class="string">&#x27;/center&#x27;</span>,</span><br><span class="line">        redirect: <span class="string">&#x27;/center/myorder&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<h2><span id="p87-xian-shi-ding-dan">87 æ˜¾ç¤ºè®¢å•</span><a href="#p87-xian-shi-ding-dan" class="header-anchor">#</a></h2>
<p>main.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥apiæ¥å£å¹¶ç»‘å®šåœ¨VueåŸå‹å¯¹è±¡ä¸Š</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> API <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br><span class="line">Vue.prototype.$API = API</span><br></pre></td></tr></table></figure>
<p>MyOrder</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;MyOrder&#x27;</span>,</span><br><span class="line">  data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      pageNo: <span class="number">1</span>, <span class="comment">// é»˜è®¤ç¬¬ä¸€é¡µ</span></span><br><span class="line">      limit: <span class="number">10</span>, <span class="comment">// æ¯é¡µçš„æ¡æ•°</span></span><br><span class="line">      total: <span class="number">0</span>, <span class="comment">// æ€»æ¡æ•°æ•°æ®</span></span><br><span class="line">      orders: [] <span class="comment">// å­˜å‚¨å½“å‰æ¯é¡µçš„è®¢å•ä¿¡æ¯æ•°æ®</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    <span class="built_in">this</span>.getMyOrderList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="comment">// è·å–è®¢å•ä¿¡æ¯æ•°æ®åˆ—è¡¨</span></span><br><span class="line">    <span class="keyword">async</span> getMyOrderList() &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="built_in">this</span>.$API.reqOrderList(<span class="built_in">this</span>.pageNo, <span class="built_in">this</span>.limit)</span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; records, total &#125; = result.data</span><br><span class="line">        <span class="comment">// æ›´æ–°æ•°æ®</span></span><br><span class="line">        <span class="built_in">this</span>.total = total</span><br><span class="line">        <span class="built_in">this</span>.orders = records</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>20è¡Œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;orders&quot;&gt;</span><br><span class="line">  &lt;!-- è¿™æ˜¯è®¢å• --&gt;</span><br><span class="line">  &lt;table class&#x3D;&quot;order-item&quot; v-for&#x3D;&quot;(item, index) in orders&quot; :key&#x3D;&quot;item.id&quot;&gt;</span><br><span class="line">    &lt;thead&gt;</span><br><span class="line">      &lt;tr&gt;</span><br><span class="line">        &lt;th colspan&#x3D;&quot;5&quot;&gt;</span><br><span class="line">          &lt;span class&#x3D;&quot;ordertitle&quot;</span><br><span class="line">            &gt;&#123;&#123; item.createTime &#125;&#125; è®¢å•ç¼–å·ï¼š&#123;&#123; item.outTradeNo &#125;&#125;</span><br><span class="line">            &lt;span class&#x3D;&quot;pull-right delete&quot;</span><br><span class="line">              &gt;&lt;img src&#x3D;&quot;.&#x2F;images&#x2F;delete.png&quot;&#x2F;&gt;&lt;&#x2F;span</span><br><span class="line">          &gt;&lt;&#x2F;span&gt;</span><br><span class="line">        &lt;&#x2F;th&gt;</span><br><span class="line">      &lt;&#x2F;tr&gt;</span><br><span class="line">    &lt;&#x2F;thead&gt;</span><br><span class="line">    &lt;tbody&gt;</span><br><span class="line">      &lt;tr v-for&#x3D;&quot;(goods, index) in item.orderDetailList&quot; :key&#x3D;&quot;goods.id&quot;&gt;</span><br><span class="line">        &lt;td width&#x3D;&quot;60%&quot;&gt;</span><br><span class="line">          &lt;div class&#x3D;&quot;typographic&quot;&gt;</span><br><span class="line">            &lt;img :src&#x3D;&quot;goods.imgUrl&quot; &#x2F;&gt;</span><br><span class="line">            &lt;a href&#x3D;&quot;#&quot; class&#x3D;&quot;block-text&quot;&gt;&#123;&#123; goods.skuName &#125;&#125;&lt;&#x2F;a&gt;</span><br><span class="line">            &lt;span&gt;x&#123;&#123; goods.skuNum &#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">            &lt;a href&#x3D;&quot;#&quot; class&#x3D;&quot;service&quot;&gt;å”®åç”³è¯·&lt;&#x2F;a&gt;</span><br><span class="line">          &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;&#x2F;td&gt;</span><br><span class="line">        &lt;template v-if&#x3D;&quot;index &#x3D;&#x3D;&#x3D; 0&quot;&gt;</span><br><span class="line">          &lt;td</span><br><span class="line">            :rowspan&#x3D;&quot;item.orderDetailList.length&quot;</span><br><span class="line">            width&#x3D;&quot;8%&quot;</span><br><span class="line">            class&#x3D;&quot;center&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            &#123;&#123; item.consignee &#125;&#125;</span><br><span class="line">          &lt;&#x2F;td&gt;</span><br><span class="line">          &lt;td</span><br><span class="line">            :rowspan&#x3D;&quot;item.orderDetailList.length&quot;</span><br><span class="line">            width&#x3D;&quot;13%&quot;</span><br><span class="line">            class&#x3D;&quot;center&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            &lt;ul class&#x3D;&quot;unstyled&quot;&gt;</span><br><span class="line">              &lt;li&gt;æ€»é‡‘é¢Â¥&#123;&#123; item.totalAmount &#125;&#125;&lt;&#x2F;li&gt;</span><br><span class="line">              &lt;li&gt;</span><br><span class="line">                &#123;&#123; item.paymentWay &#x3D;&#x3D;&#x3D; &#39;ONLINE&#39; ? &#39;åœ¨çº¿æ”¯ä»˜&#39; : &#39;è´§åˆ°ä»˜æ¬¾&#39; &#125;&#125;</span><br><span class="line">              &lt;&#x2F;li&gt;</span><br><span class="line">            &lt;&#x2F;ul&gt;</span><br><span class="line">          &lt;&#x2F;td&gt;</span><br><span class="line">          &lt;td</span><br><span class="line">            :rowspan&#x3D;&quot;item.orderDetailList.length&quot;</span><br><span class="line">            width&#x3D;&quot;8%&quot;</span><br><span class="line">            class&#x3D;&quot;center&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            &lt;a href&#x3D;&quot;#&quot; class&#x3D;&quot;btn&quot;</span><br><span class="line">              &gt;&#123;&#123; item.orderStatus &#x3D;&#x3D;&#x3D; &#39;UNPAID&#39; ? &#39;æœªæ”¯ä»˜&#39; : &#39;å·²å®Œæˆ&#39; &#125;&#125;</span><br><span class="line">            &lt;&#x2F;a&gt;</span><br><span class="line">          &lt;&#x2F;td&gt;</span><br><span class="line">          &lt;td</span><br><span class="line">            :rowspan&#x3D;&quot;item.orderDetailList.length&quot;</span><br><span class="line">            width&#x3D;&quot;13%&quot;</span><br><span class="line">            class&#x3D;&quot;center&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            &lt;ul class&#x3D;&quot;unstyled&quot;&gt;</span><br><span class="line">              &lt;li&gt;</span><br><span class="line">                &lt;a href&#x3D;&quot;mycomment.html&quot; target&#x3D;&quot;_blank&quot;&gt;è¯„ä»·|æ™’å•&lt;&#x2F;a&gt;</span><br><span class="line">              &lt;&#x2F;li&gt;</span><br><span class="line">            &lt;&#x2F;ul&gt;</span><br><span class="line">          &lt;&#x2F;td&gt;</span><br><span class="line">        &lt;&#x2F;template&gt;</span><br><span class="line">      &lt;&#x2F;tr&gt;</span><br><span class="line">    &lt;&#x2F;tbody&gt;</span><br><span class="line">  &lt;&#x2F;table&gt;</span><br></pre></td></tr></table></figure>
<p>æ ·å¼ä¿®æ”¹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.typographic &#123;</span><br><span class="line">  img &#123;</span><br><span class="line">    float: left;</span><br><span class="line">    margin-right: 10px;</span><br><span class="line">    width: 100px;</span><br><span class="line">    height: 100px;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p88-fen-ye">88 åˆ†é¡µ</span><a href="#p88-fen-ye" class="header-anchor">#</a></h2>
<p>MyOrder 89è¡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åˆ†é¡µ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Pagination</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:pageConfig</span>=<span class="string">&quot;&#123;</span></span></span><br><span class="line"><span class="tag"><span class="string">    total,</span></span></span><br><span class="line"><span class="tag"><span class="string">    pageNo,</span></span></span><br><span class="line"><span class="tag"><span class="string">    pageSize: limit,</span></span></span><br><span class="line"><span class="tag"><span class="string">    showPageNo: 5</span></span></span><br><span class="line"><span class="tag"><span class="string">  &#125;&quot;</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">changeCurrentPage</span>=<span class="string">&quot;getMyOrderList&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹ 117è¡Œ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–è®¢å•ä¿¡æ¯æ•°æ®åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">async</span> getMyOrderList(pageNo = <span class="number">1</span>) &#123;</span><br><span class="line">  <span class="built_in">this</span>.pageNo = pageNo</span><br></pre></td></tr></table></figure>
<p>å»æ‰åé¢çš„æ ·å¼ <code>.choose-order</code></p>
<h2><span id="p89-jie-suan-zhi-qian">89 ç»“ç®—ä¹‹å‰</span><a href="#p89-jie-suan-zhi-qian" class="header-anchor">#</a></h2>
<p>ShopCart 105è¡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç»“ç®— --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/trade&quot;</span> <span class="attr">class</span>=<span class="string">&quot;sum-btn&quot;</span>&gt;</span>ç»“ç®—<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>storeæ–°å»ºorder.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reqPayInfo, reqTradeInfo &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    tradeInfo: &#123;&#125;, <span class="comment">// è®¢å•ä¿¡æ¯æ•°æ®å¯¹è±¡</span></span><br><span class="line">    payInfo: &#123;&#125; <span class="comment">// æ”¯ä»˜ä¿¡æ¯æ•°æ®å¯¹è±¡</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    <span class="comment">// ç›´æ¥æ›´æ–°è®¢å•æ•°æ®</span></span><br><span class="line">    RECEIVE_TRADE_INFO(state, &#123; tradeInfo &#125;) &#123;</span><br><span class="line">      state.tradeInfo = tradeInfo</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ç›´æ¥æ›´æ–°æ”¯ä»˜æ•°æ®</span></span><br><span class="line">    RECEIVE_PAY_INFO(state, &#123; payInfo &#125;) &#123;</span><br><span class="line">      state.payInfo = payInfo</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    <span class="comment">// è·å–è®¢å•çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">async</span> getTradeInfo(&#123; commit &#125;) &#123;</span><br><span class="line">      <span class="comment">// è°ƒç”¨æ¥å£è·å–æ•°æ®</span></span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqTradeInfo()</span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> tradeInfo = result.data</span><br><span class="line">        commit(<span class="string">&#x27;RECEIVE_TRADE_INFO&#x27;</span>, &#123; tradeInfo &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// æŠ›é”™å¤„ç†</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(result.message || <span class="string">&#x27;è·å–è®¢å•å¤±è´¥äº†&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// è·å–æ”¯ä»˜çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">async</span> getPayInfo(&#123; commit &#125;, orderId) &#123;</span><br><span class="line">      <span class="comment">// è°ƒç”¨æ¥å£è·å–æ•°æ®</span></span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqPayInfo(orderId)</span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> payInfo = result.data</span><br><span class="line">        commit(<span class="string">&#x27;RECEIVE_PAY_INFO&#x27;</span>, &#123; payInfo &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// æŠ›é”™å¤„ç†</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(result.message || <span class="string">&#x27;è·å–æ”¯ä»˜ä¿¡æ¯å¤±è´¥äº†&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>åœ¨indexä¸­å¼•å…¥</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> home <span class="keyword">from</span> <span class="string">&#x27;./home&#x27;</span></span><br><span class="line"><span class="keyword">import</span> search <span class="keyword">from</span> <span class="string">&#x27;./search&#x27;</span></span><br><span class="line"><span class="keyword">import</span> detail <span class="keyword">from</span> <span class="string">&#x27;./detail&#x27;</span></span><br><span class="line"><span class="keyword">import</span> shopcart <span class="keyword">from</span> <span class="string">&#x27;./shopcart&#x27;</span></span><br><span class="line"><span class="keyword">import</span> user <span class="keyword">from</span> <span class="string">&#x27;./user&#x27;</span></span><br><span class="line"><span class="keyword">import</span> order <span class="keyword">from</span> <span class="string">&#x27;./order&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  home,</span><br><span class="line">  search,</span><br><span class="line">  detail,</span><br><span class="line">  shopcart,</span><br><span class="line">  user,</span><br><span class="line">  order</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2><span id="p90-bian-li-shou-jian-ren-xiang-guan-xin-xi">90 éå†æ”¶ä»¶äººç›¸å…³ä¿¡æ¯</span><a href="#p90-bian-li-shou-jian-ren-xiang-guan-xin-xi" class="header-anchor">#</a></h2>
<p>Trade 6</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">&quot;address clearFix&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-for</span>=<span class="string">&quot;(addr, index) in tradeInfo.userAddressList&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:key</span>=<span class="string">&quot;addr.id&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;username&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:class</span>=<span class="string">&quot;&#123; selected: selectedAddress === addr &#125;&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span>&#123;&#123; addr.consignee &#125;&#125;<span class="tag">&lt;/<span class="name">span</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">p</span> @<span class="attr">click</span>=<span class="string">&quot;selectedAddress = addr&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;s1&quot;</span>&gt;</span>&#123;&#123; addr.userAddress &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;s2&quot;</span>&gt;</span>&#123;&#123; addr.phoneNum &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;s3&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;addr.isDefault === &#x27;1&#x27;&quot;</span>&gt;</span>é»˜è®¤åœ°å€<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;Trade&#x27;</span>,</span><br><span class="line">  data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      selectedAddress: &#123;&#125; <span class="comment">// ç”¨æ¥å‚¨å­˜é€‰ä¸­æ˜¯æ”¶ä»¶äººçš„ç”¨æˆ·ä¿¡æ¯åœ°å€å¯¹è±¡</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    <span class="comment">// è·å–å½“å‰è®¢å•ä¿¡æ¯</span></span><br><span class="line">    <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;getTradeInfo&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    ...mapState(&#123;</span><br><span class="line">      tradeInfo: <span class="function"><span class="params">state</span> =&gt;</span> state.order.tradeInfo</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    <span class="comment">// ç›‘è§†çš„æ˜¯æ”¶ä»¶äººä¿¡æ¯æ•°ç»„</span></span><br><span class="line">    <span class="string">&#x27;tradeInfo.userAddressList&#x27;</span>: <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// ä»æ•°ç»„ä¸­æŸ¥æ‰¾isDefaultå±æ€§ä¸º1çš„å¯¹è±¡</span></span><br><span class="line">      <span class="keyword">const</span> defaultAddr = value.find(<span class="function"><span class="params">addr</span> =&gt;</span> addr.isDefault === <span class="string">&#x27;1&#x27;</span>)</span><br><span class="line">      <span class="comment">// åˆ¤æ–­è¿™ä¸ªå¯¹è±¡æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">      <span class="keyword">if</span> (defaultAddr) &#123;</span><br><span class="line">        <span class="comment">// ä¿å­˜èµ·æ¥</span></span><br><span class="line">        <span class="built_in">this</span>.selectedAddress = defaultAddr</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p91-bian-li-shang-pin-lie-biao">91 éå†å•†å“åˆ—è¡¨</span><a href="#p91-bian-li-shang-pin-lie-biao" class="header-anchor">#</a></h2>
<p>Trade 37</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;detail&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h5</span>&gt;</span>å•†å“æ¸…å•<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;list clearFix&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-for</span>=<span class="string">&quot;(goods, index) in tradeInfo.detailArrayList&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:key</span>=<span class="string">&quot;goods.skuId&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;goods.imgUrl&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">              &#123;&#123; goods.skuName &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h4</span>&gt;</span>7å¤©æ— ç†ç”±é€€è´§<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h3</span>&gt;</span>ï¿¥&#123;&#123; goods.orderPrice &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span>X&#123;&#123; goods.skuNum &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span>æœ‰è´§<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bbs&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h5</span>&gt;</span>ä¹°å®¶ç•™è¨€ï¼š<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">textarea</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">&quot;å»ºè®®ç•™è¨€å‰å…ˆä¸å•†å®¶æ²Ÿé€šç¡®è®¤&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;remarks-cont&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;line&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bill&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h5</span>&gt;</span>å‘ç¥¨ä¿¡æ¯ï¼š<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>æ™®é€šå‘ç¥¨ï¼ˆç”µå­ï¼‰ ä¸ªäºº æ˜ç»†<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h5</span>&gt;</span>ä½¿ç”¨ä¼˜æƒ /æŠµç”¨<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;money clearFix&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">b</span></span></span><br><span class="line"><span class="tag">            &gt;</span><span class="tag">&lt;<span class="name">i</span>&gt;</span>&#123;&#123; tradeInfo.totalNum &#125;&#125;<span class="tag">&lt;/<span class="name">i</span></span></span><br><span class="line"><span class="tag">            &gt;</span>ä»¶å•†å“ï¼Œæ€»å•†å“é‡‘é¢<span class="tag">&lt;/<span class="name">b</span></span></span><br><span class="line"><span class="tag">          &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>Â¥&#123;&#123; tradeInfo.totalAmount &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">b</span>&gt;</span>è¿”ç°ï¼š<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>0.00<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">b</span>&gt;</span>è¿è´¹ï¼š<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>0.00<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;trade&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;price&quot;</span>&gt;</span></span><br><span class="line">        åº”ä»˜é‡‘é¢: <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; tradeInfo.totalAmount &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;receiveInfo&quot;</span>&gt;</span></span><br><span class="line">        å¯„é€è‡³:</span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; selectedAddress.userAddress &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        æ”¶è´§äººï¼š<span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; selectedAddress.consignee &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; selectedAddress.phoneNum &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sub clearFix&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- &lt;router-link class=&quot;subBtn&quot; to=&quot;/pay&quot;&gt;æäº¤è®¢å•&lt;/router-link&gt; --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;subBtn&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;pay&quot;</span>&gt;</span>æäº¤è®¢å•<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Trade 263</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.list &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">  background-color: #feedef;</span><br><span class="line">  margin: <span class="number">5</span>px <span class="number">0</span>;</span><br><span class="line">  li &#123;</span><br><span class="line">    line-height: <span class="number">30</span>px;</span><br><span class="line">    img&#123;</span><br><span class="line">      width: <span class="number">100</span>px;</span><br><span class="line">      height: <span class="number">100</span>px;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p92-lu-you-props-chuan-can">92 è·¯ç”±propsä¼ å‚</span><a href="#p92-lu-you-props-chuan-can" class="header-anchor">#</a></h2>
<p>Trade</p>
<p>æ›´æ–° pay</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  <span class="comment">// æ”¯ä»˜</span></span><br><span class="line">  pay() &#123;</span><br><span class="line">    <span class="comment">// è·å–è®¢å•ç¼–å·ï¼Œå•†å“åˆ—è¡¨æ•°æ®</span></span><br><span class="line">    <span class="keyword">const</span> &#123; tradeNo, detailArrayList &#125; = <span class="built_in">this</span>.tradeInfo</span><br><span class="line">    <span class="comment">// æ”¶ä»¶äººåå­—ï¼Œç”µè¯ï¼Œåœ°å€</span></span><br><span class="line">    <span class="keyword">const</span> &#123; consignee, phoneNum, userAddress &#125; = <span class="built_in">this</span>.selectedAddress</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> orderInfo = &#123;</span><br><span class="line">      consignee, <span class="comment">// æ”¶ä»¶äºº</span></span><br><span class="line">      consigneeTel: phoneNum, <span class="comment">// æ”¶ä»¶äººçš„ç”µè¯</span></span><br><span class="line">      deliveryAddress: userAddress, <span class="comment">// æ”¶ä»¶äººçš„åœ°å€</span></span><br><span class="line">      paymentWay: <span class="string">&#x27;ONLINE&#x27;</span>, <span class="comment">// æ”¯ä»˜æ–¹å¼</span></span><br><span class="line">      orderComment: <span class="built_in">this</span>.orderComment, <span class="comment">// è®¢å•çš„å¤‡æ³¨</span></span><br><span class="line">      orderDetailList: detailArrayList <span class="comment">// å•†å“åˆ—è¡¨æ•°æ®</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">this</span>.$API</span><br><span class="line">      .reqSubmitOrder(tradeNo, orderInfo)</span><br><span class="line">      .then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// æ¥å£è°ƒç”¨æˆåŠŸï¼Œè·¯ç”±è·³è½¬ï¼Œå¹¶ä¼ å‚ï¼Œqueryçš„æ–¹å¼ä¼ å‚</span></span><br><span class="line">        <span class="comment">// è®¢å•æäº¤æˆåŠŸåï¼Œè¿”å›çš„æ˜¯è®¢å•çš„id</span></span><br><span class="line">        <span class="keyword">const</span> orderId = result.data</span><br><span class="line">        <span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&#x27;/pay&#x27;</span>, <span class="attr">query</span>: &#123; orderId &#125; &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        alert(error.mess)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>æ–°å¢ <code>orderComment</code> æ•°æ®</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    selectedAddress: &#123;&#125;, <span class="comment">// ç”¨æ¥å‚¨å­˜é€‰ä¸­æ˜¯æ”¶ä»¶äººçš„ç”¨æˆ·ä¿¡æ¯åœ°å€å¯¹è±¡</span></span><br><span class="line">    orderComment: <span class="string">&#x27;è¿™æ˜¯æ–‡æœ¬&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>66è¡Œ æ–°å¢ v-model</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;bbs&quot;</span>&gt;</span><br><span class="line">  &lt;h5&gt;ä¹°å®¶ç•™è¨€ï¼š&lt;/h5&gt;</span><br><span class="line">  &lt;textarea</span><br><span class="line">    placeholder=<span class="string">&quot;å»ºè®®ç•™è¨€å‰å…ˆä¸å•†å®¶æ²Ÿé€šç¡®è®¤&quot;</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;remarks-cont&quot;</span></span><br><span class="line">    v-model=<span class="string">&quot;orderComment&quot;</span></span><br><span class="line">  &gt;&lt;/textarea&gt;</span><br></pre></td></tr></table></figure>
<p>Pay æ›´æ–°</p>
<p>11è¡Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;paymark&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;fl&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span>è¯·æ‚¨åœ¨æäº¤è®¢å•<span class="tag">&lt;<span class="name">em</span> <span class="attr">class</span>=<span class="string">&quot;orange time&quot;</span>&gt;</span>4å°æ—¶<span class="tag">&lt;/<span class="name">em</span></span></span><br><span class="line">    &gt;ä¹‹å†…å®Œæˆæ”¯ä»˜ï¼Œè¶…æ—¶è®¢å•ä¼šè‡ªåŠ¨å–æ¶ˆã€‚è®¢å•å·ï¼š&lt;em&gt;&#123;&#123;payInfo.orderId&#125;&#125;&lt;&lt;/em&gt;&lt;/span</span><br><span class="line">  &gt;</span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;fr&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;<span class="name">em</span> <span class="attr">class</span>=<span class="string">&quot;lead&quot;</span>&gt;</span>åº”ä»˜é‡‘é¢ï¼š&#123;&#123;payInfo.totalFee&#125;&#125;<span class="tag">&lt;/<span class="name">em</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;Pay&#x27;</span>,</span><br><span class="line">  props: [<span class="string">&#x27;orderId&#x27;</span>],</span><br><span class="line">  computed: &#123;</span><br><span class="line">    ...mapState(&#123;</span><br><span class="line">      payInfo: <span class="function"><span class="params">state</span> =&gt;</span> state.order.payInfo</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    <span class="comment">// åˆ†å‘action</span></span><br><span class="line">    <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;getPayInfo&#x27;</span>, <span class="built_in">this</span>.orderId)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>routes.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Pay</span></span><br><span class="line">&#123;</span><br><span class="line">  path: <span class="string">&#x27;/pay&#x27;</span>,</span><br><span class="line">  component: Pay,</span><br><span class="line">  <span class="comment">// é€šè¿‡propsçš„æ–¹å¼æ¥è¿›è¡Œå‚æ•°çš„ä¼ é€’,è®©ç»„ä»¶å’Œ$routeä¹‹é—´çš„å…³é—­ä¸é‚£ä¹ˆçš„å¯†åˆ‡(è§£è€¦)</span></span><br><span class="line">  props:<span class="function">(<span class="params">route</span>)=&gt;</span>(&#123;<span class="attr">orderId</span>:route.query.orderId&#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h1><span id="9-yue-29-ri-day-10">9æœˆ29æ—¥ï¼ˆday 10ï¼‰</span><a href="#9-yue-29-ri-day-10" class="header-anchor">#</a></h1>
<p>éœ€æ±‚</p>
<ul>
<li>
<p>åªæœ‰åœ¨ç™»å½•çš„æƒ…å†µä¸‹æ‰èƒ½è®¿é—® /trade /pay /centeråŠå…¶å­ç›®å½•</p>
</li>
<li>
<p>åªæœ‰åœ¨æ²¡ç™»å½•çš„æƒ…å†µä¸‹æ‰èƒ½è¿›å…¥ç™»å½•ç•Œé¢ï¼Œå¦‚æœç™»å½•äº†è‡ªåŠ¨è¿›å…¥é¦–é¡µ</p>
</li>
<li>
<p>åªæœ‰ skuId /skuNum / skuInfo æ•°æ®éƒ½å­˜åœ¨çš„æƒ…å†µä¸‹æ‰èƒ½è¿›å…¥ /addsuccess</p>
</li>
<li>
<p>åªæœ‰ä» /shopcart æ‰èƒ½è¿›å…¥ /trade</p>
</li>
<li>
<p>åªæœ‰ä» /trade æ‰èƒ½è¿›å…¥ /pay</p>
</li>
<li>
<p>åªæœ‰ä» /pay æ‰èƒ½è¿›å…¥ /paysucces</p>
</li>
<li>
<p>å¦‚æœè®¿é—®çš„æ˜¯ /center ä½†æ˜¯æ²¡æœ‰ç™»å½•ï¼Œå…ˆè·³è½¬åˆ°ç™»å½•ç•Œé¢ ç™»å½•æˆåŠŸè‡ªåŠ¨è¿›å…¥ /center</p>
</li>
<li>
<p>å¦‚æœé€€å‡ºï¼Œç›´æ¥è¿›å…¥é¦–é¡µ</p>
</li>
</ul>
<p>è·¯ç”±å®ˆå«ï¼ˆå¯¼èˆªå®ˆå«ï¼‰</p>
<ul>
<li>
<p>å…¨å±€å¯¼èˆªå®ˆå«ï¼ˆåœ¨å®ä¾‹åŒ–è·¯ç”±å™¨å¯¹è±¡çš„æ—¶å€™è¿›è¡Œè®¾ç½®ï¼‰</p>
<p>å…¨å±€å‰ç½®å¯¼èˆªå®ˆå« beforeEach â–³</p>
<p>å…¨å±€è§£æå¯¼èˆªå®ˆå« beforeResolve</p>
<p>å…¨å±€åç½®å¯¼èˆªå®ˆå« afterEach</p>
</li>
<li>
<p>è·¯ç”±ç‹¬äº«å®ˆå«ï¼ˆåœ¨æ³¨å†Œè·¯ç”±ç»„ä»¶å¯¹è±¡ä¸­è¿›è¡Œè®¾ç½®ï¼‰</p>
<p>boforeEnter â–³</p>
</li>
<li>
<p>ç»„ä»¶å†…çš„å®ˆå«ï¼ˆåœ¨ç»„ä»¶å¯¹è±¡ä¸­è¿›è¡Œè®¾ç½®ï¼‰</p>
<p>beforeRouterEnter â–³</p>
<p>beforeRouteUpdate</p>
<p>beforeRouteLeave</p>
</li>
</ul>
<p>å‚æ•°</p>
<ul>
<li>to â€” ç›®æ ‡è·¯ç”±å¯¹è±¡</li>
<li>from â€” ç¦»å¼€å‰çš„å¯¹è±¡</li>
<li>next â€” å‡½æ•°</li>
</ul>
<h2><span id="p93-zhi-you-zai-deng-lu-de-qing-kuang-xia-cai-neng-jin-ru">93 åªæœ‰åœ¨ç™»å½•çš„æƒ…å†µä¸‹æ‰èƒ½è¿›å…¥â€¦</span><a href="#p93-zhi-you-zai-deng-lu-de-qing-kuang-xia-cai-neng-jin-ru" class="header-anchor">#</a></h2>
<p>router/index.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜ä½¿ç”¨è·¯ç”±å™¨æ’ä»¶</span></span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ä¾‹åŒ–è·¯ç”±å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  mode: <span class="string">&#x27;history&#x27;</span>, <span class="comment">// åœ°å€æ ä¸­ä¸å¸¦#</span></span><br><span class="line">  routes,</span><br><span class="line">  <span class="comment">// è§£å†³è·¯ç”±å™¨è·³è½¬åˆ°æ»šåŠ¨çš„ä½ç½®çš„é—®é¢˜</span></span><br><span class="line">  scrollBehavior(to, <span class="keyword">from</span>, savedPosition) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      x: <span class="number">0</span>,</span><br><span class="line">      y: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨å±€å‰ç½®è·¯ç”±å®ˆå«</span></span><br><span class="line"><span class="comment">// router.beforeEach((to, from, next) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//   è®¿é—®çš„åœ°å€ä¸æ˜¯ç™»å½•é¡µé¢ï¼Œè®©å…¶è·³è½¬åˆ°ç™»å½•é¡µé¢</span></span><br><span class="line"><span class="comment">//   if (to.path !== &#x27;/login&#x27;) &#123;</span></span><br><span class="line"><span class="comment">//     next(&#x27;/login&#x27;)</span></span><br><span class="line"><span class="comment">//   &#125; else &#123;</span></span><br><span class="line"><span class="comment">//     next()</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨å±€å‰ç½®è·¯ç”±å®ˆå«</span></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// åªæœ‰åœ¨ç™»å½•çš„æƒ…å†µä¸‹æ‰èƒ½è®¿é—® /trade /pay / center //</span></span><br><span class="line">  <span class="comment">// è·å–ç›®æ ‡è·¯ç”±ä¸­çš„è®¿é—®åœ°å€</span></span><br><span class="line">  <span class="keyword">const</span> targetPath = to.path</span><br><span class="line">  <span class="comment">// å‡†å¤‡ä¸€ä¸ªéœ€è¦æ£€æµ‹çš„è·¯ç”±çš„æ•°ç»„</span></span><br><span class="line">  <span class="keyword">const</span> checkPath = [<span class="string">&#x27;/trade&#x27;</span>, <span class="string">&#x27;/pay&#x27;</span>, <span class="string">&#x27;/center&#x27;</span>]</span><br><span class="line">  <span class="comment">// if (checkPath.indexOf(targetPath) !== -1) &#123;</span></span><br><span class="line">  <span class="keyword">if</span> (checkPath.find(<span class="function"><span class="params">path</span> =&gt;</span> targetPath.indexOf(path) !== <span class="number">-1</span>)) &#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦å·²ç»ç™»å½•</span></span><br><span class="line">    <span class="keyword">if</span> (store.state.user.userInfo.token) &#123;</span><br><span class="line">      <span class="comment">// æ”¾è¡Œ</span></span><br><span class="line">      next()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// è·³è½¬åˆ°ç™»å½•ç•Œé¢</span></span><br><span class="line">      next(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// æ­£å¸¸çš„æ”¾è¡Œ</span></span><br><span class="line">    next()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ä¾‹åŒ–è·¯ç”±å™¨å¯¹è±¡,å¹¶æš´éœ²å‡ºå»</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2><span id="p94-zhi-you-zai-mei-deng-lu-de-qing-kuang-xia-cai-neng-jin-ru-deng-lu-jie-mian-ru-guo-deng-lu-liao-zi-dong-jin-ru-shou-ye">94 åªæœ‰åœ¨æ²¡ç™»å½•çš„æƒ…å†µä¸‹æ‰èƒ½è¿›å…¥ç™»å½•ç•Œé¢ï¼Œå¦‚æœç™»å½•äº†è‡ªåŠ¨è¿›å…¥é¦–é¡µ</span><a href="#p94-zhi-you-zai-mei-deng-lu-de-qing-kuang-xia-cai-neng-jin-ru-deng-lu-jie-mian-ru-guo-deng-lu-liao-zi-dong-jin-ru-shou-ye" class="header-anchor">#</a></h2>
<p>router/routes.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥vuex</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    component: Login,</span><br><span class="line">    <span class="comment">// å‚æ•°æ•°æ®</span></span><br><span class="line">    meta: &#123;</span><br><span class="line">      isHideFooter: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ? åªæœ‰åœ¨æ²¡æœ‰ç™»å½•çš„æƒ…å†µä¸‹æ‰èƒ½è¿›å…¥ç™»å½•é¡µé¢ï¼Œå·²ç»ç™»å½•ï¼Œå°±è¿›å…¥é¦–é¡µ</span></span><br><span class="line">    <span class="comment">// è·¯ç”±ç‹¬äº«å®ˆå«</span></span><br><span class="line">    beforeEnter: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// åˆ¤æ–­æœ‰æ²¡æœ‰ç™»å½•</span></span><br><span class="line">      <span class="keyword">if</span> (store.state.user.userInfo.name) &#123;</span><br><span class="line">        next(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        next()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…åœ¨ Login ä¸­</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// ç»„ä»¶å†…çš„è·¯ç”±å‰ç½®å®ˆå«</span></span><br><span class="line">  beforeRouteEnter(to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    next(<span class="function"><span class="params">vm</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// å…ˆåˆ¤æ–­æ˜¯å¦ç™»å½•</span></span><br><span class="line">      <span class="comment">// ! ä¸èƒ½ç”¨ this</span></span><br><span class="line">      <span class="keyword">if</span> (vm.$store.state.user.userInfo.name) &#123;</span><br><span class="line">        next(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        next()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2><span id="p95-zhi-you-shu-ju-du-cun-zai-de-qing-kuang-xia-cai-neng-jin-ru-addsuccess">95 åªæœ‰æ•°æ®éƒ½å­˜åœ¨çš„æƒ…å†µä¸‹æ‰èƒ½è¿›å…¥ /addsuccess</span><a href="#p95-zhi-you-shu-ju-du-cun-zai-de-qing-kuang-xia-cai-neng-jin-ru-addsuccess" class="header-anchor">#</a></h2>
<p>åªæœ‰ skuId /skuNum / skuInfo æ•°æ®éƒ½å­˜åœ¨çš„æƒ…å†µä¸‹æ‰èƒ½è¿›å…¥ /addsuccess</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AddCartSuccess -- query</span></span><br><span class="line">&#123;</span><br><span class="line">  path: <span class="string">&#x27;/addcartsuccess&#x27;</span>,</span><br><span class="line">  component: AddCartSuccess,</span><br><span class="line">  <span class="comment">// ? åªæœ‰å‚æ•°å­˜åœ¨çš„æƒ…å†µä¸‹æ‰èƒ½è¿›å…¥è¿™ä¸ªé¡µé¢</span></span><br><span class="line">  beforeEnter: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// å…ˆè·å–å‚æ•°æ•°æ®</span></span><br><span class="line">    <span class="keyword">const</span> &#123; skuId, skuNum &#125; = to.query</span><br><span class="line">    <span class="keyword">const</span> skuInfo = <span class="built_in">localStorage</span>.getItem(<span class="string">&#x27;SKU_INFO&#x27;</span>)</span><br><span class="line">    <span class="comment">// åˆ¤æ–­è¿™ä¸‰ä¸ªæ•°æ®æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">    <span class="keyword">if</span> (skuId &amp;&amp; skuNum &amp;&amp; skuInfo) &#123;</span><br><span class="line">      next()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// ä»å“ªé‡Œæ¥ï¼Œå“ªé‡Œå»</span></span><br><span class="line">      next(<span class="keyword">from</span>.path)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2><span id="p96-zhi-you-cong-cai-neng-jin-ru">96 åªæœ‰ä»â€¦æ‰èƒ½è¿›å…¥â€¦</span><a href="#p96-zhi-you-cong-cai-neng-jin-ru" class="header-anchor">#</a></h2>
<ul>
<li>åªæœ‰ä» /shopcart æ‰èƒ½è¿›å…¥ /trade</li>
<li>åªæœ‰ä» /trade æ‰èƒ½è¿›å…¥ /pay</li>
<li>åªæœ‰ä» /pay æ‰èƒ½è¿›å…¥ /paysucces</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Pay</span></span><br><span class="line">&#123;</span><br><span class="line">  path: <span class="string">&#x27;/pay&#x27;</span>,</span><br><span class="line">  component: Pay,</span><br><span class="line">  <span class="comment">// é€šè¿‡propsçš„æ–¹å¼æ¥è¿›è¡Œå‚æ•°çš„ä¼ é€’,è®©ç»„ä»¶å’Œ$routeä¹‹é—´çš„å…³é—­ä¸é‚£ä¹ˆçš„å¯†åˆ‡(è§£è€¦)</span></span><br><span class="line">  props: <span class="function"><span class="params">route</span> =&gt;</span> (&#123; <span class="attr">orderId</span>: route.query.orderId &#125;),</span><br><span class="line">  <span class="comment">// ? åªæœ‰ä»/tradeæ‰èƒ½è¿›å…¥/pay</span></span><br><span class="line">  beforeEnter: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">from</span>.path === <span class="string">&#x27;/trade&#x27;</span>) &#123;</span><br><span class="line">      next()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      next(<span class="string">&#x27;/trade&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// PaySuccess</span></span><br><span class="line">&#123;</span><br><span class="line">  path: <span class="string">&#x27;/paysuccess&#x27;</span>,</span><br><span class="line">  component: PaySuccess,</span><br><span class="line">  <span class="comment">// ? åªæœ‰ä» /pay æ‰èƒ½è¿›å…¥ / PaySuccess</span></span><br><span class="line">  beforeEnter: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">from</span>.path === <span class="string">&#x27;/pay&#x27;</span>) &#123;</span><br><span class="line">      next()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      next(<span class="string">&#x27;/pay&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2><span id="p97-ru-guo-fang-wen-de-shi-center-dan-shi-mei-you-deng-lu">97 å¦‚æœè®¿é—®çš„æ˜¯ /center ä½†æ˜¯æ²¡æœ‰ç™»å½•â€¦</span><a href="#p97-ru-guo-fang-wen-de-shi-center-dan-shi-mei-you-deng-lu" class="header-anchor">#</a></h2>
<p>å¦‚æœè®¿é—®çš„æ˜¯ /center ä½†æ˜¯æ²¡æœ‰ç™»å½•ï¼Œå…ˆè·³è½¬åˆ°ç™»å½•ç•Œé¢ ç™»å½•æˆåŠŸè‡ªåŠ¨è¿›å…¥ /center</p>
<p>router / index.js 60</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (store.state.user.userInfo.token) &#123;</span><br><span class="line">  <span class="comment">// æ”¾è¡Œ</span></span><br><span class="line">  next()</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// è·³è½¬åˆ°ç™»å½•ç•Œé¢</span></span><br><span class="line">  <span class="comment">// ? å¦‚æœæˆ‘è®¿é—®çš„æ˜¯ /center ï¼Œä½†æ˜¯æ²¡æœ‰ç™»å½•ï¼Œå…ˆè·³è½¬åˆ°ç™»å½•ç•Œé¢</span></span><br><span class="line">  <span class="comment">// ? ç™»å½•æˆåŠŸä¹‹åè‡ªåŠ¨è¿›å…¥åˆ° /center ä¸­</span></span><br><span class="line">  next(<span class="string">&#x27;/login?redirect=&#x27;</span> + targetPath)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Login 72</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‰‹æœºå·ç å’Œå¯†ç éƒ½å·²ç»æ”¶åˆ°</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="comment">// åˆ†å‘action</span></span><br><span class="line">  <span class="keyword">await</span> <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;login&#x27;</span>, &#123; mobile, password &#125;)</span><br><span class="line">  <span class="comment">// ä»queryä¸­è·å–å‚¨å­˜çš„å‚æ•°</span></span><br><span class="line">  <span class="keyword">const</span> &#123; redirect &#125; = <span class="built_in">this</span>.$route.query</span><br><span class="line">  <span class="comment">// å¦‚æœqueryä¸­çš„redirectä¸­æœ‰æ•°æ®ï¼ˆæœ‰ç›®æ ‡è·¯å¾„ï¼‰ï¼Œé‚£ä¹ˆå°±åƒè¿™ä¸ªè·¯å¾„ä¸­è·³è½¬</span></span><br><span class="line">  <span class="comment">// å¦‚æœæ²¡æœ‰ï¼Œåˆ™ç›´æ¥è¿›å…¥åˆ°é¦–é¡µ</span></span><br><span class="line">  <span class="built_in">this</span>.$router.replace(redirect || <span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">  alert(error.message)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Header</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">logout() &#123;</span><br><span class="line">  <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;logout&#x27;</span>)</span><br><span class="line">  <span class="comment">// å¦‚æœé€€å‡ºï¼Œåˆ™ç›´æ¥è¿›å…¥é¦–é¡µ</span></span><br><span class="line">  <span class="built_in">this</span>.$router.replace(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p98-an-zhuang-element-ui-bing-yin-ru">98 å®‰è£…element-uiå¹¶å¼•å…¥</span><a href="#p98-an-zhuang-element-ui-bing-yin-ru" class="header-anchor">#</a></h2>
<p>æ”¯ä»˜éœ€ä½¿ç”¨ç»„ä»¶åº“</p>
<p>å®‰è£… æŒ‰éœ€å¼•å…¥</p>
<p>npm i element-ui</p>
<p>npm i babel-plugin-component -D</p>
<p><code>babel.config.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  presets: [</span><br><span class="line">    <span class="string">&#x27;@vue/cli-plugin-babel/preset&#x27;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;plugins&quot;</span>: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&quot;component&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;libraryName&quot;</span>: <span class="string">&quot;element-ui&quot;</span>,</span><br><span class="line">        <span class="string">&quot;styleLibraryName&quot;</span>: <span class="string">&quot;theme-chalk&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>utils / elementui.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥Vue</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">// å¼•å…¥element-uiä¸­çš„éƒ¨åˆ†ç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> &#123;  MessageBox, Message &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="comment">// æŠŠç›¸å…³çš„ç»„ä»¶ç»‘å®šåˆ°Vueçš„åŸæƒ³ä¸Š, ç»„ä»¶çš„å®ä¾‹å¯¹è±¡å¯ä»¥ç›´æ¥ä½¿ç”¨</span></span><br><span class="line">Vue.prototype.$msgbox = MessageBox <span class="comment">// å¼¹æ¡†</span></span><br><span class="line">Vue.prototype.$alert = MessageBox.alert</span><br><span class="line">Vue.prototype.$message = Message</span><br></pre></td></tr></table></figure>
<p>main.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@/utils/elementui&#x27;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p99-zhi-fu-yu-er-wei-ma-gong-ju">99 æ”¯ä»˜ä¸äºŒç»´ç å·¥å…·</span><a href="#p99-zhi-fu-yu-er-wei-ma-gong-ju" class="header-anchor">#</a></h2>
<p>å®‰è£…äºŒç»´ç å·¥å…·ï¼ˆäº§ç”ŸäºŒç»´ç ï¼‰</p>
<p>npm i qrcode</p>
<p>Pay</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥QRCode</span></span><br><span class="line"><span class="keyword">import</span> QRCode <span class="keyword">from</span> <span class="string">&#x27;qrcode&#x27;</span></span><br></pre></td></tr></table></figure>
<p>76</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &lt;router-link class=&quot;btn&quot; to=&quot;/paysuccess&quot;&gt;ç«‹å³æ”¯ä»˜&lt;/router-link&gt; --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;pay&quot;</span>&gt;</span>ç«‹å³æ”¯ä»˜<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">pay() &#123;</span><br><span class="line">  QRCode.toDataURL(<span class="built_in">this</span>.payInfo.codeUrl)</span><br><span class="line">    .then(<span class="function"><span class="params">imgURL</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// è¿™ä¸ªå¯¹è¯æ¡†è¿”å› Promise å¯¹è±¡</span></span><br><span class="line">      <span class="built_in">this</span>.$alert(<span class="string">`&lt;img src=&quot;<span class="subst">$&#123;imgURL&#125;</span>&quot;&gt;`</span>, <span class="string">&#x27;è¯·ä½¿ç”¨å¾®ä¿¡æ‰«ç å­—ç¬¦&#x27;</span>, &#123;</span><br><span class="line">        dangerouslyUseHTMLString: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦ç¬¬ä¸€ä¸ªå‚æ•°ç”¨htmlè§£æ</span></span><br><span class="line">        showClose: <span class="literal">false</span>, <span class="comment">// æ˜¯å¦æ˜¾ç¤ºå…³é—­å°å›¾æ ‡ï¼ˆå³ä¸Šè§’ï¼‰</span></span><br><span class="line">        showCancelButton: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦æ˜¾ç¤ºå–æ¶ˆæŒ‰é’®</span></span><br><span class="line">        showConfirmButton: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦æ˜¾ç¤ºç¡®å®šæŒ‰é’®</span></span><br><span class="line">        cancelButtonText: <span class="string">&#x27;æ”¯ä»˜ä¸­é‡åˆ°é—®é¢˜&#x27;</span>, <span class="comment">// å–æ¶ˆæŒ‰é’®çš„æ–‡æœ¬</span></span><br><span class="line">        confirmButtonText: <span class="string">&#x27;æˆ‘å·²æˆåŠŸæ”¯ä»˜&#x27;</span>, <span class="comment">// ç¡®å®šæŒ‰é’®çš„æ–‡æœ¬</span></span><br><span class="line">        center: <span class="literal">true</span> <span class="comment">// æ˜¯å¦å±…ä¸­æ˜¾ç¤º</span></span><br><span class="line">      &#125;)</span><br><span class="line">        .then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// æ¸…ç†å®šæ—¶å™¨</span></span><br><span class="line">          <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.timeId)</span><br><span class="line">          <span class="comment">// å…³é—­å½“å‰å¯¹è¯æ¡†</span></span><br><span class="line">          <span class="built_in">this</span>.$msgbox.close()</span><br><span class="line">          <span class="comment">// æç¤ºä¿¡æ¯</span></span><br><span class="line">          <span class="built_in">this</span>.$message.success(<span class="string">&#x27;æ­å–œæ”¯ä»˜æˆåŠŸ&#x27;</span>)</span><br><span class="line">          <span class="comment">// è·¯ç”±è·³è½¬</span></span><br><span class="line">          <span class="built_in">this</span>.$router.push(<span class="string">&#x27;/paysuccess&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.$message.warning(<span class="string">&#x27;è¯·è¿…é€Ÿè”ç³»ç ´æ™“å°å§å§é€€é’±ï¼&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="built_in">this</span>.timeId = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.$API</span><br><span class="line">          .reqPayStatus(<span class="built_in">this</span>.orderId)</span><br><span class="line">          .then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// æ˜¯å¦æ”¯ä»˜æˆåŠŸ</span></span><br><span class="line">            <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">              <span class="comment">// æ¸…ç†å®šæ—¶å™¨</span></span><br><span class="line">              <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.timeId)</span><br><span class="line">              <span class="comment">// å…³é—­å½“å‰å¯¹è¯æ¡†</span></span><br><span class="line">              <span class="built_in">this</span>.$msgbox.close()</span><br><span class="line">              <span class="comment">// æç¤ºä¿¡æ¯</span></span><br><span class="line">              <span class="built_in">this</span>.$message.success(<span class="string">&#x27;æ­å–œæ”¯ä»˜æˆåŠŸ&#x27;</span>)</span><br><span class="line">              <span class="comment">// è·¯ç”±è·³è½¬</span></span><br><span class="line">              <span class="built_in">this</span>.$router.push(<span class="string">&#x27;/paysuccess&#x27;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">          .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// æ¸…ç†å®šæ—¶å™¨</span></span><br><span class="line">            <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.timeId)</span><br><span class="line">            <span class="built_in">this</span>.$message.error(error.message || <span class="string">&#x27;æ”¯ä»˜å¤±è´¥&#x27;</span>)</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;, <span class="number">2000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.$message.error(<span class="string">&#x27;æ”¯ä»˜äºŒç»´ç ç”Ÿæˆå¤±è´¥&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;, </span><br><span class="line"><span class="comment">// end</span></span><br></pre></td></tr></table></figure>
<h2><span id="p100-lie-biao-guo-du-xiao-guo">100 åˆ—è¡¨è¿‡æ¸¡æ•ˆæœ</span><a href="#p100-lie-biao-guo-du-xiao-guo" class="header-anchor">#</a></h2>
<p>TypeNav 7</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">&quot;move&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- è¿™é‡ŒåŠ äº†ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼ˆäº‹ä»¶å§”æ‰˜ï¼‰ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sort&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;toSearch&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;isShowFirst&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>less</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.sort</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">45px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">210px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">461px</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fafafa</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">999</span>;</span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-class">.move-enter-active</span>,</span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-class">.move-leave-active</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.5s</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-class">.move-enter</span>,</span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-class">.move-leave-to</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p101-tu-pian-lan-jia-zai">101 å›¾ç‰‡æ‡’åŠ è½½</span><a href="#p101-tu-pian-lan-jia-zai" class="header-anchor">#</a></h2>
<p>å®‰è£… æ‡’åŠ è½½ æ’ä»¶</p>
<p><code>npm install vue-lazyload --save-dev</code></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/rachelch/p/9802227.html">https://www.cnblogs.com/rachelch/p/9802227.html</a></p>
<p>æ‰¾ä¸ª å›¾ç‰‡æ”¾ assets/ljz.gif ç›®å½•</p>
<p>main.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥æ‡’åŠ è½½çš„æ’ä»¶</span></span><br><span class="line"><span class="keyword">import</span> VueLazyload <span class="keyword">from</span> <span class="string">&#x27;vue-lazyload&#x27;</span></span><br><span class="line"><span class="keyword">import</span> loading <span class="keyword">from</span> <span class="string">&#x27;./assets/ljz.gif&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.use(VueLazyload, &#123;</span><br><span class="line">  loading</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Search 78</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;`/detail/$&#123;goods.id&#125;`&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">v-lazy</span>=<span class="string">&quot;goods.defaultImg&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p102-lu-you-lan-jia-zai">102  è·¯ç”±æ‡’åŠ è½½</span><a href="#p102-lu-you-lan-jia-zai" class="header-anchor">#</a></h2>
<p>router / routes.js</p>
<pre class="line-numbers language-language-js"><code class="language-language-js">// è·¯ç”±çš„æ‡’åŠ è½½
// import GroupBuy from '@/pages/Center/GroupBuy'
const GroupBuy =() => import('@/pages/Center/GroupBuy')
`
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

    </div>

    
    
    

      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/Vue/" rel="tag"><i class="fa fa-tag"></i> Vue</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/182001/" rel="prev" title="Kindle ä½¿ç”¨æ•™ç¨‹">
      <i class="fa fa-chevron-left"></i> Kindle ä½¿ç”¨æ•™ç¨‹
    </a></div>
      <div class="post-nav-item">
    <a href="/730201/" rel="next" title="æ­Œè¯ / ãªã”ã‚Šé›ª">
      æ­Œè¯ / ãªã”ã‚Šé›ª <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">9æœˆ16æ—¥ï¼ˆday 0ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">0 å¼€å‘æ‰€éœ€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">1 æ–°å»ºé¡¹ç›®å¹¶å®‰è£…é¡¹ç›®ä¾èµ–</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">2 é¡¹ç›®ç›®å½•é…ç½®</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">3 é…ç½®ä¸»å…¥å£æ–‡ä»¶</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">4 é…ç½®æ ¹ç»„ä»¶</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">5 æ–°å»ºç»„ä»¶</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">6 é…ç½®è·¯ç”±</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">7 æ³¨å†Œè·¯ç”±å™¨</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">9æœˆ18æ—¥ï¼ˆday 1ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">8 åŠ è½½è·¯ç”±è§†å›¾</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">9 è·¯ç”±ä¸­æ·»åŠ å‚æ•°æ•°æ®ï¼Œæ›´æ–°è§†å›¾</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">10 index.html åŠ å…¥æ ·å¼æ–‡ä»¶</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">11 æ‹†åˆ†é™æ€é¡µé¢ä¹‹ä¸€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">12 æ‹†åˆ†é™æ€é¡µé¢ä¹‹äºŒ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">13 æ–°å»º TypeNav ç»„ä»¶ å¹¶æ³¨å†Œä¸ºå…¬å…±ç»„ä»¶</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">14 æ‹†åˆ†é™æ€é¡µé¢ä¹‹ä¸‰</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">15 æ‹†åˆ†é™æ€é¡µé¢ä¹‹å››</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">16 åŠ å‡ ä¸ªè·¯ç”±é“¾æ¥ï¼ˆå£°æ˜å¼è·¯ç”±è·³è½¬ï¼‰</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">17 ç‚¹å‡»æœç´¢åè·³è½¬ searchï¼ˆç¼–ç¨‹å¼è·¯ç”±è·³è½¬ï¼‰  â–³</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">18 é‡å†™ push å’Œ replace</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">19 è·¯ç”±ä¼ å‚ï¼ˆparamsï¼‰ â–³</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">20 äºŒæ¬¡å°è£… axios â–³</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">21 vue.config.js &#x2F; eslint è®¾ç½® &#x2F; è·¨åŸŸä»£ç†è®¾ç½®</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">9æœˆ19æ—¥ï¼ˆday 2ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">22 store æ­å»ºå’Œæ³¨å†Œ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">23 Vuex ä¹‹ modules</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">24 Homeç»„ä»¶ç›¸å…³çš„ store</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">25 éå† TypeNav ä¸‰çº§åˆ†ç±»æ•°æ®å¹¶æ˜¾ç¤º</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">26 é¼ æ ‡ç§»å…¥ç§»å‡ºæ•ˆæœ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">27 æŒ‰éœ€å¼•å…¥lodashä¸­èŠ‚æµå‡½æ•°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">28 queryæ–¹å¼è·¯ç”±ä¼ å‚ + äº‹ä»¶å§”æ‰˜ï¼ˆå†’æ³¡ï¼‰ â–³</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">29 Search é¡µé¢æ·»åŠ  TypeNav</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">30 å¼•å…¥ mockJS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">31 mockç›¸å…³æ•°æ®åŠ å…¥ store ä¸­</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">32 Swiper å®ç°è½®æ’­å›¾</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">9æœˆ21æ—¥ï¼ˆday 3ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">33 é¡¹ç›®ä¼˜åŒ–</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">34 è½®æ’­å›¾ä¸æ•°æ®åŠ è½½ä¸æ¸²æŸ“ï¼ŒSwiperå¯¹è±¡åˆ›å»ºæ—¶æœº</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">35 Floor è§†å›¾ç”Ÿæˆ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">36 è½®æ’­å›¾å°è£…ä¸ºå…¬å…±ç»„ä»¶</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">37 ä¿®å¤è½®æ’­å›¾é—®é¢˜</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">38 Search ç»„ä»¶</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">39 éå†å•†å“åˆ†ç±»ä¿¡æ¯</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">9æœˆ22æ—¥ï¼ˆday 4ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">40 Search ç»„ä»¶æ˜¾ç¤ºå•†å“ä¿¡æ¯</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">41 è§£å†³ä¸€ä¸ªè·³è½¬bug</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">42 Search åˆ†å‘æ—¶ä¼ å…¥å‚æ•°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">43 ç‚¹å‡»æ ‡ç­¾çš„ç§»é™¤ä»¥åŠåœ°å€çš„ä¿®æ­£</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">44 ç‚¹å‡»å“ç‰Œæ ‡ç­¾è¿›è¡Œç­›é€‰</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">45 å¹³å°å±æ€§ç›¸å…³</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">46 æ’åº</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">47 æ¸…ç†ç©ºæ•°æ®</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">9æœˆ23æ—¥ï¼ˆday 5ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">48 åˆ†é¡µç»„ä»¶</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">49 è‡ªå·±å®ç°åˆ†é¡µç»„ä»¶</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">50 æ²¡æœ‰æ•°æ®çš„æ—¶å€™ï¼Œåˆ†é¡µç»„ä»¶çš„ç›¸å…³å¤„ç†</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">51 å•†å“è¯¦æƒ…é¡µ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">52 å•†å“è¯¦æƒ…é¡µ-æ¥å£</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">53 å°è£… Vuex</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">54 æ˜¾ç¤ºåŸºæœ¬ä¿¡æ¯</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">55 éå†é”€å”®å±æ€§</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">9æœˆ24æ—¥ï¼ˆday 6ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">56 æ•°é‡çš„å¢åŠ å’Œå‡å°‘æ“ä½œ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">57 æ˜¾ç¤ºè¯¦æƒ…å›¾ç‰‡ï¼ˆè½®æ’­ï¼‰</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">58 å¼•å…¥è½®æ’­å›¾ç»„ä»¶</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">59 æ”¾å¤§é•œ1</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">60 æ”¾å¤§é•œ2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">61 æ·»åŠ è´­ç‰©è½¦æˆåŠŸ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">62 å°è£…apiæ¥å£å‡½æ•°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">63 å›è°ƒå‡½æ•°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">64 dispatch è¿”å› Promise</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">65 AddCartSuccess æ›´æ–°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">66 è´­ç‰©è½¦</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">67 ç”Ÿæˆä¸´æ—¶ç”¨æˆ·id</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">9æœˆ25æ—¥ï¼ˆday 7ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">68 è·å–è´­ç‰©è½¦æ•°æ®ï¼ˆå°è£…api + vuexï¼‰</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">69 æ¸²æŸ“è´­ç‰©è½¦å†…å®¹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">69 æ¸²æŸ“è´­ç‰©è½¦ç•Œé¢2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">70 è´­ç‰©è½¦åˆ é™¤</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">71 æ¸…ç©ºè´­ç‰©è½¦</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">72 åˆ‡æ¢é€‰ä¸­çŠ¶æ€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">73 å…¨é€‰&#x2F;å…¨ä¸é€‰</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">74 æ•°é‡æ“ä½œ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">75 ç™»é™†&#x2F;æ³¨å†Œ&#x2F;é€€å‡º apiæ¥å£</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">9æœˆ27æ—¥ï¼ˆday 8ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">76 vuexå°è£…</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">77 æ³¨å†Œ1</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">78 è¡¨å•éªŒè¯</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">79 è¡¨å•éªŒè¯2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">80 ç™»å½•</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">81 ç™»å½•ä¹‹åæ˜¾ç¤ºç”¨æˆ·å</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">82 token</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">83 ç™»å‡º</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">9æœˆ28æ—¥ï¼ˆday 9ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">84 æ­å»ºè·¯ç”±å’Œè·³è½¬</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">85 æˆ‘çš„è®¢å•å†™æ¥å£</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">86 äºŒçº§è·¯ç”±</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">87 æ˜¾ç¤ºè®¢å•</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">88 åˆ†é¡µ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">89 ç»“ç®—ä¹‹å‰</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">90 éå†æ”¶ä»¶äººç›¸å…³ä¿¡æ¯</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">91 éå†å•†å“åˆ—è¡¨</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">92 è·¯ç”±propsä¼ å‚</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">9æœˆ29æ—¥ï¼ˆday 10ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">93 åªæœ‰åœ¨ç™»å½•çš„æƒ…å†µä¸‹æ‰èƒ½è¿›å…¥â€¦</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">94 åªæœ‰åœ¨æ²¡ç™»å½•çš„æƒ…å†µä¸‹æ‰èƒ½è¿›å…¥ç™»å½•ç•Œé¢ï¼Œå¦‚æœç™»å½•äº†è‡ªåŠ¨è¿›å…¥é¦–é¡µ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">95 åªæœ‰æ•°æ®éƒ½å­˜åœ¨çš„æƒ…å†µä¸‹æ‰èƒ½è¿›å…¥ &#x2F;addsuccess</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">96 åªæœ‰ä»â€¦æ‰èƒ½è¿›å…¥â€¦</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">97 å¦‚æœè®¿é—®çš„æ˜¯ &#x2F;center ä½†æ˜¯æ²¡æœ‰ç™»å½•â€¦</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">98 å®‰è£…element-uiå¹¶å¼•å…¥</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">99 æ”¯ä»˜ä¸äºŒç»´ç å·¥å…·</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">100 åˆ—è¡¨è¿‡æ¸¡æ•ˆæœ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">101 å›¾ç‰‡æ‡’åŠ è½½</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">102  è·¯ç”±æ‡’åŠ è½½</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">KEEL</p>
  <div class="site-description" itemprop="description">è¿™ä¸ªäººå¾ˆæ‡’ï¼Œä»€ä¹ˆéƒ½æ²¡ç•™ä¸‹ã€‚ </div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">219</span>
          <span class="site-state-item-name">æ–‡ç« </span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">86</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">47</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">KEEL</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">ç«™ç‚¹æ€»å­—æ•°ï¼š</span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">385k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">ç«™ç‚¹é˜…è¯»æ—¶é•¿ &asymp;</span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">5:50</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT</a> å¼ºåŠ›é©±åŠ¨
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>




  




  
<script src="/js/local-search.js"></script>











<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

  

</body>
</html>
