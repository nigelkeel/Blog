<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"nigelkeel.gitee.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="这个人很懒，什么都没留下。">
<meta property="og:type" content="website">
<meta property="og:title" content="永远的伊尔瓦">
<meta property="og:url" content="http://nigelkeel.gitee.io/page/4/index.html">
<meta property="og:site_name" content="永远的伊尔瓦">
<meta property="og:description" content="这个人很懒，什么都没留下。">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="KEEL">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://nigelkeel.gitee.io/page/4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>永远的伊尔瓦</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="stylesheet" href="/css/prism-material-oceanic.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">永远的伊尔瓦</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/random" rel="section"><i class="fa fa-sitemap fa-fw"></i>随机</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/240302/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#666; font-size:12px; padding:3px; border:1px solid #666;">240302</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/240302/" class="post-title-link" itemprop="url">Tree Shaking</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-30 15:09:08" itemprop="dateCreated datePublished" datetime="2021-01-30T15:09:08+08:00">2021-01-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-02 15:04:15" itemprop="dateModified" datetime="2021-02-02T15:04:15+08:00">2021-02-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2403%EF%BC%9ARollupJS/" itemprop="url" rel="index"><span itemprop="name">2403：RollupJS</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1><span id="tree-shaking">Tree-Shaking</span><a href="#tree-shaking" class="header-anchor">#</a></h1>
<p>俗称树摇，摇树。作用是清理无用代码。<br>
webpack 最新版本在生产环境会自动开启。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/240301/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#666; font-size:12px; padding:3px; border:1px solid #666;">240301</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/240301/" class="post-title-link" itemprop="url">RollupJS</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-02 15:00:06 / 修改时间：15:04:02" itemprop="dateCreated datePublished" datetime="2021-02-02T15:00:06+08:00">2021-02-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2403%EF%BC%9ARollupJS/" itemprop="url" rel="index"><span itemprop="name">2403：RollupJS</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Rollup 是一个 JavaScript 模块打包器，可以将小块代码编译成大块复杂的代码。<br>
Rollup 对代码模块使用新的标准化格式，这些标准都包含在 JavaScript 的 ES6 版本中，而不是以前的特殊解决方案，如 CommonJS 和 AMD。ES6 模块可以使你自由、无缝地使用你最喜爱的 library 中那些最有用独立函数，而你的项目不必携带其他未使用的代码。ES6 模块最终还是要由浏览器原生实现，但当前 Rollup 可以使你提前体验。</p>
<p><a target="_blank" rel="noopener" href="https://www.rollupjs.com/">文档</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/240201/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#666; font-size:12px; padding:3px; border:1px solid #666;">240201</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/240201/" class="post-title-link" itemprop="url">Webpack</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-01 00:39:13" itemprop="dateCreated datePublished" datetime="2021-02-01T00:39:13+08:00">2021-02-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-02 15:06:19" itemprop="dateModified" datetime="2021-02-02T15:06:19+08:00">2021-02-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2402%EF%BC%9AWebpack/" itemprop="url" rel="index"><span itemprop="name">2402：Webpack</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>自动化构建工具：<strong>开发环境 --&gt; 生产环境</strong></p>
<ul>
<li>开发环境（development）注重开发效率和源码的阅读。</li>
<li>生产环境（production）注重代码的执行效率（压缩）。</li>
</ul>
<p>gulp / grunt 属于任务流工具（Task Runner）</p>
<p>webpack 是模块化打包工具（bundler）</p>
<p><strong><a target="_blank" rel="noopener" href="https://www.webpackjs.com/">webpack</a></strong> 是一个模块打包器（bundler），根据模块的依赖关系进行静态分析，生成对应的静态资源。对 webpack 来说，前端所有资源文件（js/json/css/less/img/…）都会作为模块处理。</p>
<p>核心概念</p>
<ul>
<li><code>Entry</code> 入口起点，指示 webpack 应该使用哪个模块，来作为构建其内部依赖图的开始。</li>
<li><code>Output</code> 告诉 webpack 在哪里输出它所创建的 bundles，以及如何命名这些文件。</li>
<li><code>Loader</code> 让 webpack 能够处理那些非 JS 文件。</li>
<li><code>Plugins</code> 插件，用于执行范围更广的任务，比如打包优化，压缩。</li>
<li><code>Mode</code> 模式，有生产模式（production）和开发模式（development）。</li>
</ul>
<h2><span id="p1-kai-shi">1、开始</span><a href="#p1-kai-shi" class="header-anchor">#</a></h2>
<p>（1）初始化</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">npm init<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>（2）安装</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"># 全局安装
npm i webpack webpack-cli -g

# 局部安装（建议）
npm i webpack webpack-cli -D<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2><span id="p2-ji-ben-shi-yong">2、基本使用</span><a href="#p2-ji-ben-shi-yong" class="header-anchor">#</a></h2>
<pre class="line-numbers language-tree" data-language="tree"><code class="language-tree">demo
 ├── src
 │   ├── js
 │   │   ├── app.js
 │   │   └── mod.js
 │   └── index.html
 ├── build
 ├── package.json
 └── webpack.config.js<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>（1）打包 JS 文件</p>
<p>能够编译打包 js 和 json 文件，并且能将 es6 的模块化语法转换成浏览器能识别的语法。</p>
<p>将 <code>src/js/app.js</code> 打包成开发环境文件 <code>build/js/app.js</code></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">npx webpack src&#x2F;js&#x2F;app.js -o build&#x2F;js&#x2F;app.js --mode&#x3D;develoment
#                         -output<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>打包到生产环境（比生产环境多了一个<strong>代码压缩</strong>）</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">npx webpack src&#x2F;js&#x2F;app.js -o build&#x2F;js&#x2F;app.js --mode&#x3D;production<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>缺点就是不能编译打包 CSS img 等文件，不能将 ES6 基本语法转化成 ES5 以下语法。</p>
<p>可以通过配置文件改善。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"># 对指定文件进行打包
npx webpack xxx.js --output xxx.js

# 打包多个文件
npx webpack x1.js x2.js<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>（2）默认配置文件 <code>webpack.config.js</code> △</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">&#123;</span> resolve <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// 指定打包文件的入口</span>
  <span class="token comment">// （单入口写法）</span>
  <span class="token comment">// entry: ".src/js/app.js",</span>
  <span class="token comment">// （多入口写法）</span>
  entry<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    app<span class="token operator">:</span> <span class="token string">"./src/js/app.js"</span><span class="token punctuation">,</span>
    mod<span class="token operator">:</span> <span class="token string">"./src/js/mod.js"</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token comment">// output</span>
  output<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 指定打包之后的名字</span>
    <span class="token comment">//               ↓ entry 的属性名</span>
    filename<span class="token operator">:</span> <span class="token string">"js/[name].index.js"</span><span class="token punctuation">,</span>
    <span class="token comment">// 指定打包的绝对路径</span>
    path<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"./build"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token comment">// 指定打包模式</span>
  <span class="token comment">// - development 开发模式</span>
  <span class="token comment">// - production  生产模式</span>
  mode<span class="token operator">:</span> <span class="token string">"development"</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"># 这里是局部安装的命令，全局安装直接 webpack 即可
npx webpack<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>（3）清空上次打包的内容</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">npm install clean-webpack-plugin -D<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">&#123;</span> cleanWebpackPlugin <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"clean-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// ...</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">cleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>（4）配置 <code>package.json</code> 编译命令</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// package.json</span>
<span class="token string">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token string">"build"</span><span class="token operator">:</span> <span class="token string">"npx webpack"</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

<span class="token comment">// bash</span>
npm run build<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2><span id="p3-da-bao-css-less-sass-zi-yuan">3、打包 CSS/LESS/SASS 资源</span><a href="#p3-da-bao-css-less-sass-zi-yuan" class="header-anchor">#</a></h2>
<p>（1）打包 CSS</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">npm install style-loader css-loader -D<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 入口文件 app.js</span>
<span class="token keyword">import</span> <span class="token string">"../css/app.css"</span><span class="token punctuation">;</span>

<span class="token comment">// 配置文件 webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// ...</span>
  module<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">&#123;</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"style-loader"</span><span class="token punctuation">,</span> <span class="token string">"css-loader"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>index.html</code> 把 <code>build/js/app.js</code> 引入之后就能加载样式了。</p>
<p>（2）打包 LESS</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">npm install less-loader -D<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 入口文件 app.js</span>
<span class="token keyword">import</span> <span class="token string">"../css/style.less"</span><span class="token punctuation">;</span>

<span class="token comment">// 配置文件 webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// ...</span>
  module<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">&#123;</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"style-loader"</span><span class="token punctuation">,</span> <span class="token string">"css-loader"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#123;</span>
        test<span class="token operator">:</span> <span class="token regex">/\.less$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"style-loader"</span><span class="token punctuation">,</span> <span class="token string">"css-loader"</span><span class="token punctuation">,</span> <span class="token string">"less-loader"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>（3）打包 SASS</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">npm install sass-loader -D<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2><span id="p4-js-eslint">4、JS eslint</span><a href="#p4-js-eslint" class="header-anchor">#</a></h2>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">npm install eslint-loader eslint -D<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// webpack.config.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
    module<span class="token operator">:</span><span class="token punctuation">&#123;</span>
        rules<span class="token operator">:</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>
                <span class="token comment">// 只检测 js 文件</span>
                test<span class="token operator">:</span><span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
                <span class="token comment">// 排除的目录</span>
                exclude<span class="token operator">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
                <span class="token comment">// 要检查的目录</span>
                include<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"./src"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// 提前加载使用</span>
                enforce<span class="token operator">:</span> <span class="token string">"pre"</span><span class="token punctuation">,</span>
                use<span class="token operator">:</span><span class="token punctuation">&#123;</span>
                    loader<span class="token operator">:</span><span class="token string">"eslint-loader"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// .eslintrc.js（项目根目录）</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token string">"parserOptions"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>
        <span class="token string">"ecmaVersion"</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>  <span class="token comment">// 支持 ES6</span>
        <span class="token string">"sourceType"</span><span class="token operator">:</span> <span class="token string">"module"</span>  <span class="token comment">// 使用 ES6 模块化</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token string">"env"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>                <span class="token comment">// 设置环境</span>
        <span class="token string">"browser"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>   <span class="token comment">// 支持浏览器环境</span>
        <span class="token string">"node"</span><span class="token operator">:</span> <span class="token boolean">true</span>       <span class="token comment">// 支持服务器环境</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

    <span class="token comment">// 如果这个地方定义了但是没有用，会过不去</span>
    <span class="token comment">// Unexpected top-level property "global"</span>
    <span class="token string">"global"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>             <span class="token comment">// 声明使用的全局变量</span>
        <span class="token string">"$"</span><span class="token operator">:</span><span class="token string">"readonly"</span><span class="token punctuation">,</span>    <span class="token comment">// 不允许重写 "writable" 可修改</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token string">"rules"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>              <span class="token comment">// 0/off忽略 1/warn警告 2/error错误</span>
        <span class="token string">"eqeqeq"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>       <span class="token comment">// 必须使用全等</span>
        <span class="token string">"no-alert"</span><span class="token operator">:</span> <span class="token number">0</span>      <span class="token comment">// 禁止使用 alert confirm prompt</span>
        <span class="token string">"no-console"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>   <span class="token comment">// 禁止使用 console</span>
        <span class="token string">"no-var"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>       <span class="token comment">// 禁用 var</span>
        <span class="token string">"indent"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"error"</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment">// 缩进风格</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token comment">// 使用 eslint 推荐的默认规则</span>
    <span class="token string">"extends"</span><span class="token operator">:</span> <span class="token string">"eslint:recommended"</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2><span id="p5-js-yu-fa-zhuan-huan">5、JS 语法转换</span><a href="#p5-js-yu-fa-zhuan-huan" class="header-anchor">#</a></h2>
<p><code>@babel/preset-env</code> 将新语法转成 ES5。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">npm install babel-loader @babel&#x2F;core @babel&#x2F;preset-env -D
# @babel&#x2F;core  babel 的核心库
# @babel&#x2F;preset-env  babel 预设工具包，默认可以将所有最新的语法转为为 ES5<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// webpack.config.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">//...</span>
    module<span class="token operator">:</span><span class="token punctuation">&#123;</span>
        rules<span class="token operator">:</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>
            test<span class="token operator">:</span><span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
            exclude<span class="token operator">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
            use<span class="token operator">:</span><span class="token punctuation">&#123;</span>
                loader<span class="token operator">:</span><span class="token string">"babel-loader"</span><span class="token punctuation">,</span>
                options<span class="token operator">:</span><span class="token punctuation">&#123;</span>
                    presets<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@babel/preset-env'</span><span class="token punctuation">]</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2><span id="p6-js-jian-rong-xing-chu-li">6、JS 兼容性处理</span><a href="#p6-js-jian-rong-xing-chu-li" class="header-anchor">#</a></h2>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">npm install @babel&#x2F;polyfill<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 入口文件 app.js</span>
<span class="token keyword">import</span> <span class="token string">"@babel/polyfill"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>解决 <code>babel</code> 只能转换语法的问题，引入 <code>polyfill</code> 可以转换高级语法（如 <code>Promise</code> ）。</p>
<h2><span id="p7-da-bao-yang-shi-wen-jian-zhong-de-tu-pian-zi-yuan">7、打包样式文件中的图片资源</span><a href="#p7-da-bao-yang-shi-wen-jian-zhong-de-tu-pian-zi-yuan" class="header-anchor">#</a></h2>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">npm install file-loader url-loader -D<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// webpack.config.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">//...</span>
    module<span class="token operator">:</span><span class="token punctuation">&#123;</span>
        rules<span class="token operator">:</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">,</span>
            <span class="token punctuation">&#123;</span>
                test<span class="token operator">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
                use<span class="token operator">:</span><span class="token punctuation">&#123;</span>
                    loader<span class="token operator">:</span> <span class="token string">"url-loader"</span><span class="token punctuation">,</span>
                    options<span class="token operator">:</span><span class="token punctuation">&#123;</span>
                        <span class="token comment">// 8KB以下的base64处理</span>
                        limit<span class="token operator">:</span> <span class="token number">8192</span><span class="token punctuation">,</span>
                        <span class="token comment">// 文件本地输出路径</span>
                        outputPath<span class="token operator">:</span> <span class="token string">"images"</span><span class="token punctuation">,</span>
                        <span class="token comment">// 图片URL路径</span>
                        publicPath<span class="token operator">:</span> <span class="token string">"../build/images"</span><span class="token punctuation">,</span>
                        <span class="token comment">// 修改文件名称和后缀</span>
                        name<span class="token operator">:</span> <span class="token string">"[hash:8]"</span><span class="token punctuation">.</span><span class="token punctuation">[</span>ext<span class="token punctuation">]</span><span class="token punctuation">,</span>
                    <span class="token punctuation">&#125;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2><span id="p8-da-bao-html-wen-jian">8、打包 HTML 文件</span><a href="#p8-da-bao-html-wen-jian" class="header-anchor">#</a></h2>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">npm install html-webpack-plugin -D<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// webpack.config.js</span>

<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"html-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">//...</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      <span class="token comment">// 设置要编译的 HTML 源文件路径</span>
      template<span class="token operator">:</span> <span class="token string">"./src/index.html"</span><span class="token punctuation">,</span>
      <span class="token comment">// 设置打包之后的文件名，默认 index.html</span>
      filename<span class="token operator">:</span> <span class="token string">"home.html"</span><span class="token punctuation">,</span>
      title<span class="token operator">:</span> <span class="token string">"我是打包之后的文件"</span><span class="token punctuation">,</span>

      <span class="token comment">// 传入参数</span>
      <span class="token comment">// -- &lt;%=user%></span>
      <span class="token comment">// -- &lt;%if(user)%></span>
      arr<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1111</span><span class="token punctuation">,</span> <span class="token number">222</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token comment">// 加载的JS增加一个后缀</span>
      <span class="token comment">// JS内容变化，后缀会重新生成</span>
      hash<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token comment">// 指定要引入的JS文件</span>
      <span class="token comment">// app 是entry对象的属性名不是文件名</span>
      chunk<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"app"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      excludeChunk<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"app"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 除了...之外</span>
      <span class="token comment">// 不引入 JS</span>
      <span class="token comment">// - "head", 放到head里</span>
      <span class="token comment">// - "body"</span>
      inject<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      minify<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// 移除注释</span>
        removeComments<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// 移除属性中的引号</span>
        removeAttributeQuotes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// 将代码进行折叠，去除空格</span>
        collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2><span id="p9-da-kai-html-zhong-de-tu-pian-zi-yuan">9、打开 HTML 中的图片资源</span><a href="#p9-da-kai-html-zhong-de-tu-pian-zi-yuan" class="header-anchor">#</a></h2>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">npm install html-loader -D<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// webpack.config.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">//...</span>
    module<span class="token operator">:</span><span class="token punctuation">&#123;</span>
        rules<span class="token operator">:</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">,</span>
            <span class="token punctuation">&#123;</span>
                test<span class="token operator">:</span> <span class="token regex">/\.(html)$/</span><span class="token punctuation">,</span>
                use<span class="token operator">:</span><span class="token punctuation">&#123;</span>
                    loader<span class="token operator">:</span> <span class="token string">"html-loader"</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2><span id="p10-da-bao-zi-ti-zi-yuan">10、打包字体资源</span><a href="#p10-da-bao-zi-ti-zi-yuan" class="header-anchor">#</a></h2>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">npm install file-loader -D<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// webpack.config.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">//...</span>
    module<span class="token operator">:</span><span class="token punctuation">&#123;</span>
        rules<span class="token operator">:</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>
                test<span class="token operator">:</span><span class="token regex">/\.(eot|svg|woff|woff2|ttf)$/</span><span class="token punctuation">,</span>
                loader<span class="token operator">:</span> <span class="token string">"file-loader"</span><span class="token punctuation">,</span>
                options<span class="token operator">:</span><span class="token punctuation">&#123;</span>
                    <span class="token comment">// 输出的目录</span>
                    outputPath<span class="token operator">:</span> <span class="token string">"fonts"</span><span class="token punctuation">,</span>
                    name<span class="token operator">:</span><span class="token string">'[hash:8].[ext]'</span>
                <span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2><span id="p11-zi-dong-bian-yi-da-bao-yun-xing">11、自动编译打包运行</span><a href="#p11-zi-dong-bian-yi-da-bao-yun-xing" class="header-anchor">#</a></h2>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">npm install webpack-dev-server -D<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// webpack.config.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// ...</span>
  output<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
    <span class="token comment">// 添加 devServer 服务后需要调整输出的路径</span>
    publicPath<span class="token operator">:</span> <span class="token string">"/"</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
    <span class="token comment">// 删除 publicPath 配置</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token comment">// 配置服务</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 自动打开浏览器</span>
    open<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 启动 gzip 压缩</span>
    compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 端口号</span>
    port<span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    <span class="token comment">// 开启热模替换功能</span>
    hot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"># 启动服务
npx webpack-dev-server<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>热模替换</p>
<p>HMR，Hot Module Replacement，热模替换功能会在应用程序运行过程中替换。添加或删除模块，而无需重新加载整个界面。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// webpack.config.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// index.html 不能自动刷新的问题</span>
  entry<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    main<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"./src/js/app.js"</span><span class="token punctuation">,</span> <span class="token string">"./src/index.html"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2><span id="p12-devtool">12、devtool</span><a href="#p12-devtool" class="header-anchor">#</a></h2>
<p>devtools 是 webpack 中的一个配置，可以将压缩/编译文件中的代码映射回源文件中的原始位置，便于调试代码。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// webpack.config.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// 设置 devtool 策略（生产环境需改成 none）</span>
  devtool<span class="token operator">:</span> <span class="token string">"cheap-module-eval-sourse-map"</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2><span id="p13-zhun-bei-sheng-chan-huan-jing">13、准备生产环境</span><a href="#p13-zhun-bei-sheng-chan-huan-jing" class="header-anchor">#</a></h2>
<p>webpack.config.js --&gt; webpack.dev.js + webpack.prod.js</p>
<p>运行非默认的配置文件</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">webpack-dev-server --config .&#x2F;config&#x2F;webpack.dev.js
npx webpack --config .&#x2F;config&#x2F;webpack.prot.js<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>加到 <code>package.json</code> 快捷命令中 <code>dev</code> / <code>build</code></p>
<h2><span id="p14-ti-qu-css-cheng-dan-du-wen-jian">14、提取 CSS 成单独文件</span><a href="#p14-ti-qu-css-cheng-dan-du-wen-jian" class="header-anchor">#</a></h2>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">npm install mini-css-exrtract-plugin -D<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// webpack.prod.js</span>

<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"mini-css-extract-plugin"</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports<span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
    module<span class="token operator">:</span><span class="token punctuation">&#123;</span>
        rules<span class="token operator">:</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">,</span>
              <span class="token comment">// 修改</span>
              <span class="token punctuation">&#123;</span>
               		test<span class="token operator">:</span> <span class="token operator">/</span>\<span class="token punctuation">.</span>less$\<span class="token punctuation">,</span>
               		use<span class="token operator">:</span><span class="token punctuation">[</span>
               			MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
               			<span class="token string">'css-loader'</span><span class="token punctuation">,</span>
               			<span class="token string">'less-loader'</span>
              <span class="token punctuation">]</span><span class="token punctuation">&#125;</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span>
    plugins<span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            filename<span class="token operator">:</span> <span class="token string">"css.[hash:8].css"</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2><span id="p15-tian-jia-css-jian-rong">15、添加 CSS 兼容</span><a href="#p15-tian-jia-css-jian-rong" class="header-anchor">#</a></h2>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">npm install postcss-loader autoprefixer -D<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// webpack.prod.js</span>

<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"mini-css-extract-plugin"</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports<span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
    module<span class="token operator">:</span><span class="token punctuation">&#123;</span>
        rules<span class="token operator">:</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">,</span>
              <span class="token comment">// 修改</span>
              <span class="token punctuation">&#123;</span>
               		test<span class="token operator">:</span> <span class="token operator">/</span>\<span class="token punctuation">.</span>less$\<span class="token punctuation">,</span>
               		use<span class="token operator">:</span><span class="token punctuation">[</span>
               			MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
               			<span class="token string">'css-loader'</span><span class="token punctuation">,</span>
               			<span class="token punctuation">&#123;</span>
               				loader<span class="token operator">:</span> <span class="token string">"postcss-loader"</span><span class="token punctuation">,</span>
               				options<span class="token operator">:</span><span class="token punctuation">&#123;</span>
               					plugins<span class="token operator">:</span><span class="token punctuation">[</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"autoprefixer"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
               				<span class="token punctuation">&#125;</span>
               			<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
               			<span class="token string">'less-loader'</span>
              <span class="token punctuation">]</span><span class="token punctuation">&#125;</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// .browserslistrc (根目录)</span>
<span class="token comment">// 目标浏览器配置表</span>
chrome <span class="token number">50</span>
last <span class="token number">1</span> versions
ie <span class="token number">10</span>
iOS <span class="token number">7</span>

<span class="token comment">// >1%                 全球超过1%人使用的浏览器</span>
<span class="token comment">// >1% in US</span>
<span class="token comment">// last 1 version      所有浏览器兼容到最后1个版本根据CanIUse.com追踪的版本</span>
<span class="token comment">// Firefox > 20        指定浏览器的版本范围</span>
<span class="token comment">// since 2013          2013年之后发布的版本</span>
<span class="token comment">// cover 99%           99%的浏览器都是目标</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2><span id="p16-ya-suo-css">16、压缩 CSS</span><a href="#p16-ya-suo-css" class="header-anchor">#</a></h2>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">npm install optimize-css-assets-webpack-plugin -D<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// webpack.prod.js</span>

<span class="token keyword">const</span> OptimizeCssAssetsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'optimize-css-assets-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
    plugins<span class="token operator">:</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">OptimizeCssAssetsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
             cssProcessorPluginOptions<span class="token operator">:</span><span class="token punctuation">&#123;</span>
             	<span class="token comment">// 移除所有注释</span>
             	preset<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'default'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>disardComments<span class="token operator">:</span> <span class="token punctuation">&#123;</span>removeAll<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
             <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
             <span class="token comment">// 解决 无 sourse map 问题</span>
             cssProcessorOptions<span class="token operator">:</span><span class="token punctuation">&#123;</span>
                 map<span class="token operator">:</span> <span class="token boolean">true</span>
             <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/240102/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#666; font-size:12px; padding:3px; border:1px solid #666;">240102</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/240102/" class="post-title-link" itemprop="url">前端代码规范</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-24 17:12:21" itemprop="dateCreated datePublished" datetime="2020-12-24T17:12:21+08:00">2020-12-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-01 19:17:37" itemprop="dateModified" datetime="2021-02-01T19:17:37+08:00">2021-02-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2401%EF%BC%9A%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/" itemprop="url" rel="index"><span itemprop="name">2401：前端工程化</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1><span id="qian-duan-dai-ma-gui-fan">前端代码规范</span><a href="#qian-duan-dai-ma-gui-fan" class="header-anchor">#</a></h1>
<p>JS</p>
<ol>
<li>使用单引号</li>
<li>代码换号</li>
<li><code>:</code> 后加空格，函数名和 <code>()</code> 前后加空格</li>
<li>废弃 <code>var</code> 用 <code>let</code> 和 <code>const</code></li>
<li>去除未使用的变量和函数</li>
<li>如有多个属性引用至同一个对象：<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 错误写法</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>a
<span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>b
<span class="token comment">// 正确写法</span>
<span class="token keyword">let</span> query <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route 
query<span class="token punctuation">.</span>a
query<span class="token punctuation">.</span>b <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li>不用分号</li>
<li>四个空格缩进</li>
<li>使用小驼峰命名法，并且变量都有明确的用途 <pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">let</span> getComputedStyle
<span class="token keyword">let</span> setProjectName
<span class="token keyword">let</span> deleteProject<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
</li>
<li>代码注释</li>
</ol>
<p>CSS：</p>
<ol>
<li>尽量在三层嵌套以内</li>
<li>不使用 <code>*</code></li>
<li>注重公共样式提取</li>
<li>命名用<code>-</code>拼接，应明确功能用途</li>
</ol>
<p>HTML：</p>
<ol>
<li>
<p>组件尽量遵守柯里化，例如一个确认框组件，尽可能拆散：<br>
（1. 头部组件<br>
- 标题<br>
- close</p>
<p>（2. 中间内容</p>
<p>（3. 底部组件<br>
- 按钮组件</p>
<p>（4. 遮罩组件<br>
…</p>
</li>
<li>
<p>class 名使用 <code>-</code> 拼接</p>
</li>
<li>
<p>Tab / 4格缩进</p>
</li>
<li>
<p>尽量各个组件维护各个组件的 JS/CSS/HTML</p>
</li>
</ol>
<p>VSCode 配置</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json">&#123;
  &#x2F;&#x2F; 调整窗口的缩放级别
  &#x2F;&#x2F; &quot;window.zoomLevel&quot;: 1,
  &#x2F;&#x2F;设置文字大小
  &quot;editor.fontSize&quot;: 16,
  &#x2F;&#x2F;设置文字行高
  &quot;editor.lineHeight&quot;: 24,
  &#x2F;&#x2F;开启行数提示
  &quot;editor.lineNumbers&quot;: &quot;on&quot;,
  &#x2F;&#x2F;开启自动显示建议
  &quot;editor.quickSuggestions&quot;: &#123;
    &quot;other&quot;: true,
    &quot;comments&quot;: true,
    &quot;strings&quot;: true
  &#125;,
  &#x2F;&#x2F;指定工作台中使用的颜色主题
  &#x2F;&#x2F; &quot;workbench.colorTheme&quot;: &quot;Darcula Theme from IntelliJ&quot;,
  &#x2F;&#x2F; vscode默认启用了根据文件类型自动设置tabsize的选项
  &quot;editor.detectIndentation&quot;: false,
  &#x2F;&#x2F; 重新设定 tabSize
  &quot;editor.tabSize&quot;: 4,
  &#x2F;&#x2F; #每次保存的时候自动格式化
  &quot;editor.formatOnSave&quot;: false,
  &#x2F;&#x2F; #每次保存的时候将代码按eslint格式进行修复
  &quot;eslint.autoFixOnSave&quot;: false,
  &#x2F;&#x2F; 添加 vue 支持, 开启对.vue文件中错误的检查
  &quot;eslint.validate&quot;: [
    &quot;javascript&quot;,
    &quot;javascriptreact&quot;,
    &#123;
      &quot;language&quot;: &quot;vue&quot;,
      &quot;autoFix&quot;: true
    &#125;
  ],
  &#x2F;&#x2F;  #让prettier使用eslint的代码格式进行校验
  &quot;prettier.eslintIntegration&quot;: true,
  &#x2F;&#x2F;  #去掉代码结尾的分号
  &quot;prettier.semi&quot;: false,
  &#x2F;&#x2F;  #使用带引号替代双引号
  &quot;prettier.singleQuote&quot;: true,
  &#x2F;&#x2F;  #让函数(名)和后面的括号之间加个空格
  &quot;javascript.format.insertSpaceBeforeFunctionParenthesis&quot;: true,
  &#x2F;&#x2F; #这个按用户自身习惯选择
  &quot;vetur.format.defaultFormatter.html&quot;: &quot;js-beautify-html&quot;,
  &#x2F;&#x2F; #让vue中的js按编辑器自带的ts格式进行格式化
  &quot;vetur.format.defaultFormatter.js&quot;: &quot;vscode-typescript&quot;,
  &quot;vetur.format.defaultFormatterOptions&quot;: &#123;
    &quot;js-beautify-html&quot;: &#123;
      &#x2F;&#x2F; #vue组件中html代码格式化样式
      &quot;wrap_attributes&quot;: &quot;auto&quot;
    &#125;
  &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/240101/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#666; font-size:12px; padding:3px; border:1px solid #666;">240101</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/240101/" class="post-title-link" itemprop="url">前端工程化</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-30 15:07:44" itemprop="dateCreated datePublished" datetime="2021-01-30T15:07:44+08:00">2021-01-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-01 19:17:27" itemprop="dateModified" datetime="2021-02-01T19:17:27+08:00">2021-02-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2401%EF%BC%9A%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/" itemprop="url" rel="index"><span itemprop="name">2401：前端工程化</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1><span id="qian-duan-gong-cheng-hua">前端工程化</span><a href="#qian-duan-gong-cheng-hua" class="header-anchor">#</a></h1>
<p>前端工程化就是为了让前端开发可以自成体系。<br>
可以从 模块化、组件化、规范化、自动化 四个方面来思考。</p>
<h2><span id="pcan-kao">参考</span><a href="#pcan-kao" class="header-anchor">#</a></h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/88ed70476adb">https://www.jianshu.com/p/88ed70476adb</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/230504/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#666; font-size:12px; padding:3px; border:1px solid #666;">230504</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/230504/" class="post-title-link" itemprop="url">跨域解决方案</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-30 17:30:33" itemprop="dateCreated datePublished" datetime="2021-01-30T17:30:33+08:00">2021-01-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-01 19:17:09" itemprop="dateModified" datetime="2021-02-01T19:17:09+08:00">2021-02-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2505%EF%BC%9A%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/" itemprop="url" rel="index"><span itemprop="name">2505：网络请求</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1><span id="kua-yu-jie-jue-fang-an">跨域解决方案</span><a href="#kua-yu-jie-jue-fang-an" class="header-anchor">#</a></h1>
<h2><span id="pyi-tong-yuan-ce-lue">一、同源策略</span><a href="#pyi-tong-yuan-ce-lue" class="header-anchor">#</a></h2>
<p>Same-Origin Policy，<a href><strong>同源策略</strong></a> 最早由 Netscape 公司提出，是浏览器的一种安全策略。该策略表示<strong>协议</strong>、<strong>域名</strong>、<strong>端口号</strong>必须完全相同。</p>
<p>违背同源策略就是<a href><strong>跨域</strong></a>，主要是针对 ajax 而言。</p>
<h2><span id="per-jsonp">二、JSONP</span><a href="#per-jsonp" class="header-anchor">#</a></h2>
<p>JSON with Padding，<strong>JSONP</strong> 是一个非官方的跨域解决方案，只支持 get 请求，而且需要服务器的配合。</p>
<h3><span id="p1-gong-zuo-yuan-li">1、工作原理</span><a href="#p1-gong-zuo-yuan-li" class="header-anchor">#</a></h3>
<p>在网页有一些标签天生具有跨域能力，比如 <code>img</code> <code>link</code> <code>iframe</code> <code>script</code>。JSONP 就是利用 <code>script</code> 标签的跨域能力来发送请求的。</p>
<h3><span id="p2-ying-yong-shi-li">2、应用示例</span><a href="#p2-ying-yong-shi-li" class="header-anchor">#</a></h3>
<p>客户端</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> script <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token comment">// 这是一个事件触发</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">&#123;</span>
      <span class="token comment">// 新建一个 script 标签</span>
      script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 设置需要跨域的URL</span>
      script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">"http://.../test?a=1&amp;cb=jp"</span><span class="token punctuation">;</span>
      <span class="token comment">// 插入到页面</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
  <span class="token comment">// 回调函数</span>
  <span class="token keyword">function</span> <span class="token function">jp</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      <span class="token comment">// 这边要移除script 标签</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 后续操作</span>
  <span class="token punctuation">&#125;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>服务器</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token function">cb</span><span class="token punctuation">(</span>xxx<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2><span id="psan-cors">三、CORS</span><a href="#psan-cors" class="header-anchor">#</a></h2>
<p>Cross-Origin Resource Sharing，CORS，<strong>跨域资源共享</strong>是官方的跨域解决方案，它的特点是不需要在客户端做任何特殊的操作，完全在服务器中进行处理，支持 GET 和 POST 请求。是通过设置一个响应头来告诉浏览器，该请求允许跨域，浏览器收到该响应以后就会对响应放行。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 服务端</span>
app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
    <span class="token comment">// 设置白名单</span>
    <span class="token keyword">const</span> arrOrigin <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string">"http://xxxxx"</span><span class="token punctuation">,</span>
        <span class="token string">"xxxx"</span>
    <span class="token punctuation">]</span>
    <span class="token comment">// 如果访问的URL在白名单中</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>arrOrigin<span class="token punctuation">.</span><span class="token function">oncludes</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>header<span class="token punctuation">.</span>origin<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token comment">// 允许跨域</span>
        res<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">"Access-Control-Allow-Origin"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>req<span class="token punctuation">.</span>header<span class="token punctuation">.</span>origin<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 允许携带内容</span>
        res<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">"Access-Control-Allow-Headers"</span><span class="token punctuation">,</span> <span class="token string">"content-type"</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2><span id="psi-fu-wu-qi-dai-li">四、服务器代理</span><a href="#psi-fu-wu-qi-dai-li" class="header-anchor">#</a></h2>
<p>服务器和服务器之间没有同源策略限制，所以可以通过代理的方式进行跨域。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/230503/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#666; font-size:12px; padding:3px; border:1px solid #666;">230503</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/230503/" class="post-title-link" itemprop="url">fetch</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-30 18:03:43" itemprop="dateCreated datePublished" datetime="2021-01-30T18:03:43+08:00">2021-01-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-01 19:17:11" itemprop="dateModified" datetime="2021-02-01T19:17:11+08:00">2021-02-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2505%EF%BC%9A%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/" itemprop="url" rel="index"><span itemprop="name">2505：网络请求</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1><span id="fetch">fetch</span><a href="#fetch" class="header-anchor">#</a></h1>
<p><code>fetch</code> 是新型 ajax 请求方式，返回的是一个 Promise 对象。<br>
兼容性不好。</p>
<p>1、get</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1/sword/1"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>2、post</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// application/json</span>
<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1/sword"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
  method<span class="token operator">:</span> <span class="token string">"post"</span><span class="token punctuation">,</span> <span class="token comment">// 默认是 get</span>
  headers<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token string">"content-type"</span><span class="token operator">:</span> <span class="token string">"application/json"</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    name<span class="token operator">:</span> <span class="token string">"绒布球之剑"</span><span class="token punctuation">,</span>
    attr<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      atk<span class="token operator">:</span> <span class="token number">999</span><span class="token punctuation">,</span>
      parry<span class="token operator">:</span> <span class="token number">999</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// application/x-www-form-urlencoded</span>
<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1/sword"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
  method<span class="token operator">:</span> <span class="token string">"post"</span><span class="token punctuation">,</span>
  headers<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token string">"content-type"</span><span class="token operator">:</span> <span class="token string">"application/x-www-form-urlencoded"</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token string">"name=大绒布球之剑&amp;text=绒布球之剑"</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>3、delete</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1/sword/9"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
  method<span class="token operator">:</span> <span class="token string">"delete"</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>4、put</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1/sword/9"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
  method<span class="token operator">:</span> <span class="token string">"put"</span><span class="token punctuation">,</span>
  headers<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token string">"content-type"</span><span class="token operator">:</span> <span class="token string">"application/json"</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    name<span class="token operator">:</span> <span class="token string">"绒布球之大剑"</span><span class="token punctuation">,</span>
    attr<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      atk<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
      parry<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">999</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>5、patch</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1/sword/9"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
  method<span class="token operator">:</span> <span class="token string">"patch"</span><span class="token punctuation">,</span>
  headers<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token string">"content-type"</span><span class="token operator">:</span> <span class="token string">"application/json"</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    name<span class="token operator">:</span> <span class="token string">"绒布球快乐剑"</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/230502/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#666; font-size:12px; padding:3px; border:1px solid #666;">230502</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/230502/" class="post-title-link" itemprop="url">Axios</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-30 17:38:02" itemprop="dateCreated datePublished" datetime="2021-01-30T17:38:02+08:00">2021-01-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-02 16:01:46" itemprop="dateModified" datetime="2021-02-02T16:01:46+08:00">2021-02-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2505%EF%BC%9A%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/" itemprop="url" rel="index"><span itemprop="name">2505：网络请求</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>axios</strong> 是目前最受欢迎的 ajax 封装库， 基于 Promise。</p>
<p><a target="_blank" rel="noopener" href="http://www.axios-js.com/zh-cn">文档</a></p>
<h2><span id="pyi-kai-shi">一、开始</span><a href="#pyi-kai-shi" class="header-anchor">#</a></h2>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">npm install axios<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2><span id="per-ji-ben-shi-yong">二、基本使用</span><a href="#per-ji-ben-shi-yong" class="header-anchor">#</a></h2>
<p><code>axios</code> 相当于 <code>axios.request</code> ，返回的是一个 Promise 对象</p>
<h3><span id="p1-get">1、GET</span><a href="#p1-get" class="header-anchor">#</a></h3>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1/sword/9"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">axios</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1/sword/9"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3><span id="p2-post">2、POST</span><a href="#p2-post" class="header-anchor">#</a></h3>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// application/json</span>
axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1/sword"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
  id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">"破剑"</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// application/x-www-form-urlencoded</span>
axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1/sword"</span><span class="token punctuation">,</span> <span class="token string">"name=破晓快乐剑"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  method<span class="token operator">:</span> <span class="token string">"post"</span><span class="token punctuation">,</span>
  url<span class="token operator">:</span> <span class="token string">"http://127.0.0.1/sword"</span><span class="token punctuation">,</span>
  data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    name<span class="token operator">:</span> <span class="token string">"破铁剑"</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3><span id="p3-delete">3、DELETE</span><a href="#p3-delete" class="header-anchor">#</a></h3>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">axios<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1/sword/9"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  method<span class="token operator">:</span> <span class="token string">"delete"</span><span class="token punctuation">,</span>
  url<span class="token operator">:</span> <span class="token string">"http://127.0.0.1/sword/9"</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3><span id="p4-put">4、PUT</span><a href="#p4-put" class="header-anchor">#</a></h3>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">axios<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1/sword/9"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
  name<span class="token operator">:</span> <span class="token string">"七色破晓剑"</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  method<span class="token operator">:</span> <span class="token string">"put"</span><span class="token punctuation">,</span>
  url<span class="token operator">:</span> <span class="token string">"http://127.0.0.1/sword/9"</span><span class="token punctuation">,</span>
  data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    name<span class="token operator">:</span> <span class="token string">"七色破晓剑"</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3><span id="p5-patch">5、PATCH</span><a href="#p5-patch" class="header-anchor">#</a></h3>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">axios<span class="token punctuation">.</span><span class="token function">patch</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1/sword/9"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
  name<span class="token operator">:</span> <span class="token string">"轩辕剑"</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  method<span class="token operator">:</span> <span class="token string">"patch"</span><span class="token punctuation">,</span>
  url<span class="token operator">:</span> <span class="token string">"http://127.0.0.1/sword/9"</span><span class="token punctuation">,</span>
  data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    name<span class="token operator">:</span> <span class="token string">"轩辕剑"</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3><span id="p6-lian-zhui-xie-fa">6、连缀写法</span><a href="#p6-lian-zhui-xie-fa" class="header-anchor">#</a></h3>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1/sword/9"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3><span id="p7-await-xie-fa">7、await 写法</span><a href="#p7-await-xie-fa" class="header-anchor">#</a></h3>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1/sword/9"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3><span id="p8-quan-ju-she-zhi">8、全局设置</span><a href="#p8-quan-ju-she-zhi" class="header-anchor">#</a></h3>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 指定根路径</span>
axios<span class="token punctuation">.</span>default<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">"http://127.0.0.1"</span><span class="token punctuation">;</span>

<span class="token comment">// 指定超时时间（毫秒）</span>
axios<span class="token punctuation">.</span>default<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>或者</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> ajax <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  baseURL<span class="token operator">:</span> <span class="token string">"/api"</span><span class="token punctuation">,</span> <span class="token comment">// 设置根路径</span>
  timeOut<span class="token operator">:</span> <span class="token number">20000</span><span class="token punctuation">,</span> <span class="token comment">// 设置超时时间</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h2><span id="plan-jie-qi-chang-yong">拦截器 <code>常用</code></span><a href="#plan-jie-qi-chang-yong" class="header-anchor">#</a></h2>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 请求拦截</span>
axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  config<span class="token punctuation">.</span>url <span class="token operator">=</span> <span class="token string">"url"</span> <span class="token operator">+</span> config<span class="token punctuation">.</span>url<span class="token punctuation">;</span>
  <span class="token keyword">return</span> config<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 响应拦截</span>
axios<span class="token punctuation">.</span>intercertors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/230501/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#666; font-size:12px; padding:3px; border:1px solid #666;">230501</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/230501/" class="post-title-link" itemprop="url">ajax</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-31 14:21:11" itemprop="dateCreated datePublished" datetime="2021-01-31T14:21:11+08:00">2021-01-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-01 19:16:23" itemprop="dateModified" datetime="2021-02-01T19:16:23+08:00">2021-02-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2505%EF%BC%9A%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/" itemprop="url" rel="index"><span itemprop="name">2505：网络请求</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1><span id="ajax">Ajax</span><a href="#ajax" class="header-anchor">#</a></h1>
<p><strong>AJAX</strong> 即 Asynchronous Javascript And XML，异步 JavaScript 和 XML。是指一种无需重新加载整个网页的情况下，能够更新部分网页的技术。通过 Ajax 可以在浏览器中向服务器发起异步请求。</p>
<p>XML 称为可扩展标记语言，被设计用来传输和存储数据，和 HTML 类似，不同的是 HTML 日常使用大部分都是预定义标签，XML 全部都是自定义标签，用来表示一些数据。</p>
<h2><span id="p1-gong-zuo-yuan-li">1、工作原理</span><a href="#p1-gong-zuo-yuan-li" class="header-anchor">#</a></h2>
<p>相当于在用户和服务器之间加了一个中间层（Ajax 引擎），使用户操作与服务器响应异步化。</p>
<h2><span id="p2-te-dian">2、特点</span><a href="#p2-te-dian" class="header-anchor">#</a></h2>
<p>优点</p>
<ul>
<li>无需刷新页面来和服务器通信。</li>
<li>允许你根据用户事件来更新部分页面内容。</li>
</ul>
<p>缺点</p>
<ul>
<li>没有浏览历史，无法回退。</li>
<li>存在跨域问题。</li>
<li>对 SEO 不友好。</li>
</ul>
<h2><span id="p3-xhr-xmlhttprequest">3、XHR - XMLHttpRequest</span><a href="#p3-xhr-xmlhttprequest" class="header-anchor">#</a></h2>
<p>Ajax 的所有操作都是通过 <strong><code>XMLHttpRequest</code></strong> 对象进行的。</p>
<h2><span id="p4-shi-yong-bu-zou-kao">4、使用步骤 <code>考</code></span><a href="#p4-shi-yong-bu-zou-kao" class="header-anchor">#</a></h2>
<h3><span id="p-1-chuang-jian-yi-bu-diao-yong-dui-xiang">（1）创建异步调用对象</span><a href="#p-1-chuang-jian-yi-bu-diao-yong-dui-xiang" class="header-anchor">#</a></h3>
<p>创建 <code>XMLHttpRequest</code> 核心对象。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3><span id="p-2-chuang-jian-http-qing-qiu">（2）创建 HTTP 请求</span><a href="#p-2-chuang-jian-http-qing-qiu" class="header-anchor">#</a></h3>
<p>通过 <code>open(method, URL)</code> 打开接口。</p>
<ul>
<li><code>method</code> 请求方法，<code>POST</code> 或者 <code>GET</code>。</li>
<li><code>URL</code> 接口地址。</li>
</ul>
<p><code>POST</code> 方式要设置请求头</p>
<ul>
<li><code>application/json</code></li>
<li><code>application/x-www-form-urlencoded</code></li>
<li><code>formdata</code></li>
</ul>
<p><code>xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')</code></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"POST"</span><span class="token punctuation">,</span> <span class="token string">"http://127.0.0.1/weibo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3><span id="p-3-fa-song-qing-qiu">（3）发送请求</span><a href="#p-3-fa-song-qing-qiu" class="header-anchor">#</a></h3>
<p>发送请求 <code>send(body)</code></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringifly</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 只能传字符串</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><code>GET</code> 请求不需要参数， <code>POST</code> 请求需要。</p>
<h3><span id="p-4-tong-guo-zhi-ding-hui-diao-han-shu-jie-shou-shu-ju">（4）通过指定回调函数接收数据</span><a href="#p-4-tong-guo-zhi-ding-hui-diao-han-shu-jie-shou-shu-ju" class="header-anchor">#</a></h3>
<p><code>xhr.responseXML</code> 接收 XML 格式的响应数据。</p>
<p><code>xhr.responseText</code> 接收文本格式的响应数据。</p>
<p>a. 通过 <code>onreadystatechange</code> 事件接收数据，xhr 对象有 <code>readyState</code> 表示当前的请求状态，状态改变就会触发这个事件。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">>=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">let</span> text <span class="token operator">=</span> xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>b. 通过 <code>onload</code> 事件</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token operator">...</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h2><span id="p5-xhr-api">5、XHR API △</span><a href="#p5-xhr-api" class="header-anchor">#</a></h2>
<p>（01）<code>XMLHttpRequest()</code> 创建 XHR 对象的构造函数</p>
<p>（02）<code>readyState</code> 当前的请求状态</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token function">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 0</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// 3</span>
  <span class="token comment">// 4</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"get"</span><span class="token punctuation">,</span> <span class="token string">"http://..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 1</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<table>
<thead>
<tr>
<th>状态</th>
<th>常量</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>UNSENT</td>
<td>表示 <code>XMLHttpRequest</code> 实例已经生成，但是 <code>open()</code> 方法还没有被调用。</td>
</tr>
<tr>
<td>1</td>
<td>OPENED</td>
<td>表示 <code>send()</code>方法还没有被调用，仍然可以使用<code>setRequestHeader()</code>，设定 HTTP 请求的头信息。</td>
</tr>
<tr>
<td>2</td>
<td>HEADERS_RECEIVED</td>
<td>表示 <code>send()</code> 方法已经执行，并且头信息和状态码已经收到。</td>
</tr>
<tr>
<td>3</td>
<td>LOADING</td>
<td>表示正在接收服务器传来的 body 部分的数据，如果 responseType 属性是 text 或者空字符串，responseText 就会包含已经收到的部分信息。</td>
</tr>
<tr>
<td>4</td>
<td>DONE</td>
<td>表示服务器数据已经接收完成，或者本次接收已经失败了。</td>
</tr>
</tbody>
</table>
<p>（03）<code>status</code> 响应状态码</p>
<p>（04）<code>statusText</code> 响应状态文本</p>
<p>（05）<code>onreadystatechange</code> 当<code>readyState</code>发生变化就会触发这个事件</p>
<p>（06）<code>responseType</code> 指定响应数据类型，如果是 json，得到响应后自动解析响应体数据</p>
<p>（07）<code>response</code> 响应体数据，类型取决于 <code>responseType</code> 的指定</p>
<ul>
<li><code>responseXML</code> 接收 XML 格式的响应数据</li>
<li><code>responseText</code> 接收文本格式的响应数据</li>
</ul>
<p>（08）<code>timeout</code> 指定请求超时时间（毫秒），默认是 0，代表没有限制</p>
<p>（09）<code>ontimeout</code> 超时之后触发的事件</p>
<p>（10）<code>onerror</code> 请求网络错误触发的事件</p>
<p>（11）<code>open(method, URL[, async])</code> 初始化一个请求</p>
<p>（12）<code>send(data)</code> 发送请求</p>
<p>（13）<code>abort()</code> 中断请求</p>
<p>（14）<code>getResponseHeader(name)</code> 获取指定名称的响应头值</p>
<p>（15）<code>getAllResponseHeaders()</code> 获取所有响应头组成的字符串</p>
<p>（16）<code>setRequestHeader(name, value)</code> 设置请求头</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/230301/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#666; font-size:12px; padding:3px; border:1px solid #666;">230301</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/230301/" class="post-title-link" itemprop="url">DOM</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-31 14:08:02" itemprop="dateCreated datePublished" datetime="2021-01-31T14:08:02+08:00">2021-01-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-01 19:15:43" itemprop="dateModified" datetime="2021-02-01T19:15:43+08:00">2021-02-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2303%EF%BC%9ADOM/" itemprop="url" rel="index"><span itemprop="name">2303：DOM</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1><span id="javascript-dom">JavaScript DOM</span><a href="#javascript-dom" class="header-anchor">#</a></h1>
<h1><span id="dom-dui-xiang">DOM 对象</span><a href="#dom-dui-xiang" class="header-anchor">#</a></h1>
<p><strong>Document Object Model</strong>， <strong>文档对象模型</strong>。是 W3C 制订的一套技术规范，用来描述 JS 如何与 HTML 或 XML 文档进行交互的 Web 标准。DOM 规定了一系列标准 API，允许开发人员通过标准方式访问文档结构、操作网页内容、控制样式和行为等。</p>
<p>加载 HTML 页面时，Web 浏览器生成一个树型结构，用来表示页面内部结构。DOM 将这种树型结构理解为由节点组成的 DOM 树。</p>
<h2><span id="p1-dom-ban-ben">1、DOM 版本</span><a href="#p1-dom-ban-ben" class="header-anchor">#</a></h2>
<p>主要分为 <code>DOM 0级</code> 和 <code>DOM 2级</code>。</p>
<h2><span id="p2-document-dui-xiang">2、document 对象</span><a href="#p2-document-dui-xiang" class="header-anchor">#</a></h2>
<p><strong><code>document</code> 对象</strong> 是<code>window</code>对象的一个属性，因此可以将<code>document</code>对象作为一个全局对象来访问。当浏览器载入 html 文档, 它就会成为<code>document</code>对象。</p>
<p>JS 顶层对象是<code>global</code>，<code>window</code>是<code>global</code>在浏览器的实现。</p>
<h1><span id="dom-jie-dian">DOM 节点</span><a href="#dom-jie-dian" class="header-anchor">#</a></h1>
<p>在网页中所有的对象和内容称为<strong>节点</strong>（Node），如文档、元素、文本、属性、注释等，节点是 DOM 最基本的单元，并派生出不同类型的节点，它们共同的构成了文档的树形结构。</p>
<h2><span id="p1-jie-dian-guan-xi">1、节点关系</span><a href="#p1-jie-dian-guan-xi" class="header-anchor">#</a></h2>
<p>节点之间的关系包括：</p>
<ul>
<li>父子关系</li>
<li>兄弟关系。</li>
</ul>
<p>在节点树中，最顶端节点为<strong>根节点</strong>。</p>
<p>除了根节点之外，每个节点都有一个父节点。</p>
<p>节点可以包含任何数量的子节点。</p>
<p>叶子是没有子节点的节点。</p>
<p>同级节点是拥有相同父节点的节点。</p>
<h2><span id="p2-jie-dian-shu-xing">2、节点属性</span><a href="#p2-jie-dian-shu-xing" class="header-anchor">#</a></h2>
<p><code>childNodes</code> 属性获取元素所有的子节点，保存到一个<code>NodeList</code>伪数组对象中。</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>nodeType</code></td>
<td>节点类型</td>
</tr>
<tr>
<td><code>nodeName</code></td>
<td>节点名称</td>
</tr>
<tr>
<td><code>nodeValue</code></td>
<td>节点值</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>nodeType</th>
<th></th>
<th>nodeName</th>
<th>nodeValue</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Element</td>
<td>元素名</td>
<td>null</td>
<td>元素</td>
</tr>
<tr>
<td>2</td>
<td>Attr</td>
<td>属性名</td>
<td>属性值</td>
<td>属性</td>
</tr>
<tr>
<td>3</td>
<td>Text</td>
<td>#text</td>
<td>节点内容</td>
<td>文本</td>
</tr>
<tr>
<td>8</td>
<td>Comment</td>
<td>#comment</td>
<td>注释文本</td>
<td>注释</td>
</tr>
<tr>
<td>9</td>
<td>Document</td>
<td>#document</td>
<td>null</td>
<td>根节点</td>
</tr>
<tr>
<td>11</td>
<td>DocumentFragment</td>
<td>#document 片段</td>
<td>null</td>
<td>文档碎片</td>
</tr>
</tbody>
</table>
<h1><span id="huo-qu-jie-dian">获取节点</span><a href="#huo-qu-jie-dian" class="header-anchor">#</a></h1>
<h2><span id="p1-getelement-s-xi-lie">1、getElement(s) 系列</span><a href="#p1-getelement-s-xi-lie" class="header-anchor">#</a></h2>
<p>（1） <code>getElementsByTagName()</code> 通过标签名获取</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 获得一个 HTMLCollection 对象（伪数组）</span>
<span class="token comment">// 拥有 length 属性</span>
<span class="token keyword">var</span> oLis <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"li"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 控制背景并变色</span>
oLis<span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">"red"</span><span class="token punctuation">;</span> <span class="token comment">// 报错了！</span>
oLis<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">"red"</span><span class="token punctuation">;</span> <span class="token comment">// 注意要加下标获取</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>（2）<code>getElementsByClassName()</code> 通过类名</p>
<p>（3）<code>getElementsByName()</code> 通过 name 属性获取（几乎不用）</p>
<ul>
<li>IE6-9 不兼容。</li>
</ul>
<p>（4）<code>getElementByID()</code> 通过 id 获取</p>
<p>和上面三个的区别是，这个可以直接获取到元素，不需要下标。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 获取某个元素中元素的方法</span>
<span class="token comment">// （1）先获取到ul</span>
<span class="token keyword">var</span> oBox <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"box"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> oBox2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"ul"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// （2）通过ul获取到其中的li</span>
<span class="token keyword">var</span> oBoxLis <span class="token operator">=</span> oBox<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"li"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> oBoxLis2 <span class="token operator">=</span> oBox2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"li"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//   注意下标</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>（1）（2）（3）获取到的是 <code>HTMLCollection</code> 伪数组对象。</p>
<h2><span id="p2-selectors-api">2、selectors API</span><a href="#p2-selectors-api" class="header-anchor">#</a></h2>
<p>直接使用 CSS 选择器作为参数传递。</p>
<p>核心方法 <code>querySelector()</code> 和 <code>querySelectorAll()</code>。</p>
<p><code>querySelectorAll()</code> 获取的是一个<code>NodeList</code>对象。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 获取单个节点（如果选择多个，默认选第一个）</span>
<span class="token keyword">var</span> oRed <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#box>.red"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取多个节点（NodeList），使用的时候注意加下标</span>
<span class="token keyword">var</span> oRed2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"#box>.red"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

oRed2<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  	item<span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">"red"</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>注意：低版本的 IE&lt;8 不支持<code>querySelector</code>和<code>querySelectorAll</code>。IE8 仅有限支持。</p>
<h2><span id="p3-fang-fa-bi-jiao">3、方法比较</span><a href="#p3-fang-fa-bi-jiao" class="header-anchor">#</a></h2>
<p><code>getElementsByXX</code> 获取的元素集合是 <strong>动态</strong> 的，也就是 DOM 节点改变时，当前获取的集合内容也会改变。（选出来的元素会随着文档的改变而改变）</p>
<p><code>selector API</code> 是 <strong>静态</strong> 的集合。（只要取出来，就和页面有没有任何关系；未来元素改变，不影响获取的结果。）</p>
<h2><span id="p4-jie-dian-guan-xi-zhong-fang-wen-jie-dian-fang-fa">4、节点关系中访问节点方法</span><a href="#p4-jie-dian-guan-xi-zhong-fang-wen-jie-dian-fang-fa" class="header-anchor">#</a></h2>
<table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>parentNode</td>
<td>获取元素的父元素节点</td>
</tr>
<tr>
<td>children</td>
<td>获取元素的所有子元素节点<br>（IE6-8 会获取到注释节点）</td>
</tr>
<tr>
<td>firstChild</td>
<td>获取第一个子元素节点</td>
</tr>
<tr>
<td>firstElementChild</td>
<td>获取第一个子元素节点</td>
</tr>
<tr>
<td>lastChild</td>
<td>获取最后一个子元素节点</td>
</tr>
<tr>
<td>lastElementChild</td>
<td>获取最后一个子元素节点</td>
</tr>
<tr>
<td>nextSibling</td>
<td>获取下一个兄弟节点</td>
</tr>
<tr>
<td>nextElementSibing</td>
<td>获取下一个兄弟节点</td>
</tr>
<tr>
<td>previousSibling</td>
<td>获取上一个兄弟节点</td>
</tr>
<tr>
<td>previosElementSibing</td>
<td>获取上一个兄弟节点</td>
</tr>
</tbody>
</table>
<p>在 IE678 中获取上一个元素节点，在其他浏览器中获取的是是一个节点（可能是文本节点等）。后者在浏览器中获取上一个兄弟元素节点，IE678 不兼容。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// (1) parentNode</span>
<span class="token operator">...</span>parentNode <span class="token comment">// ul</span>
<span class="token operator">...</span>parentNode<span class="token punctuation">.</span>parentNode<span class="token comment">// body</span>
<span class="token operator">...</span>parentNode<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>parentNode <span class="token comment">// html</span>
<span class="token operator">...</span>parentNode<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>parentNode <span class="token comment">// document</span>
<span class="token operator">...</span>parentNode<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>parentNode <span class="token comment">// null</span>
<span class="token operator">...</span>parentNode<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>parentNode <span class="token comment">// 报错</span>


<span class="token comment">// (2) 获取上一个兄弟元素节点的兼容性封装</span>
<span class="token keyword">function</span> <span class="token function">getPrevSibling</span><span class="token punctuation">(</span><span class="token parameter">ele</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  	<span class="token keyword">if</span><span class="token punctuation">(</span>ele<span class="token punctuation">.</span>previousElementSibing<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> ele<span class="token punctuation">.</span>previousElementSibing<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> ele<span class="token punctuation">.</span>previousSibing<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2><span id="p5-qi-ta-huo-qu-jie-dian-fang-fa">5、其他获取节点方法</span><a href="#p5-qi-ta-huo-qu-jie-dian-fang-fa" class="header-anchor">#</a></h2>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// (1)获取body元素</span>
document<span class="token punctuation">.</span>body <span class="token operator">==</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"body"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// (2)获取head元素</span>
document<span class="token punctuation">.</span>head <span class="token operator">==</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"head"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// (3)获取html元素</span>
document<span class="token punctuation">.</span>documentElement <span class="token operator">==</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"html"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1><span id="cao-zuo-jie-dian">操作节点</span><a href="#cao-zuo-jie-dian" class="header-anchor">#</a></h1>
<p>原生 DOM 操作。</p>
<h2><span id="p1-chuang-jian-jie-dian">1、创建节点</span><a href="#p1-chuang-jian-jie-dian" class="header-anchor">#</a></h2>
<p><code>createElement()</code></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
	参数：标签名字
	返回值：新元素的引用
*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>使用 document 对象的 createElement 方法能够根据参数指定的标签名创建一个新的元素。并返回对新元素的引用。</p>
<p>使用 creatElement 方法创建的新元素不会被自动添加到文档里，需要使用 appendChild 等方法。</p>
<p><code>createTextNode</code> 用于创建文本节点。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>String<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//                    参数是字符串</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h2><span id="p2-cha-ru-jie-dian">2、插入节点</span><a href="#p2-cha-ru-jie-dian" class="header-anchor">#</a></h2>
<p><code>appendChild()</code></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>可以向当前节点的字节点列表的==末尾==添加新的节点。如果文档树中已经存在参数节点，则将从文档树中删除，然后重新插入新的位置。</p>
<p><code>insertBefore()</code></p>
<p>使用 <code>insertBefore(newChild,oldChild)</code> 方法可以在已有的子节点前插入一个新的子节点。</p>
<p>newChild 表示新插入的节点，oldChild 用于指定插入节点的后边的相邻位置。插入成功以后，该方法返回新插入的节点。insertBefore 可以把指定元素及其所包含的所有子节点都一起插入到指定位置中。同时会先删除移动的元素，再重新插入。</p>
<p>appendChild 和 insertBefore 可以操作已经存在的元素。</p>
<h2><span id="p3-fu-zhi-jie-dian">3、复制节点</span><a href="#p3-fu-zhi-jie-dian" class="header-anchor">#</a></h2>
<p><code>cloneNode()</code></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//      参数 true 深复制 复制整个节点和里面的内容</span>
<span class="token comment">//           false 浅复制 只复制节点（不要里面的内容）</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>可以创建一个节点的副本。复制后的新节点，也不会被自动插入到文档，需要用到之前的方法去插入。</p>
<p>注意改<code>id</code>，复制的节点会包含原节点的所有特性，如果原节点中包含 id 属性，就会出现 id 属性值重叠的情况。为了避免潜在的冲突，应修改其中某个节点的 id 属性值。</p>
<h2><span id="p4-shan-chu-jie-dian">4、删除节点</span><a href="#p4-shan-chu-jie-dian" class="header-anchor">#</a></h2>
<p><code>removeChild()</code></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">removeChild</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回值：</span>
<span class="token comment">// - 删除成功 ==> 返回被删除的节点</span>
<span class="token comment">// - 删除失败 ==> 返回 null</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>可以从子节点列表中删除某个节点，该节点所包含的所有子节点将同时被删除。</p>
<h2><span id="p5-ti-huan-jie-dian">5、替换节点</span><a href="#p5-ti-huan-jie-dian" class="header-anchor">#</a></h2>
<p><code>replaceChild(new, old)</code> 方法可以将某个子节点替换为另一个。替换节点替换的是所有子节点以及包含的所有内容。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">replaceChild</span><span class="token punctuation">(</span>newNode<span class="token punctuation">,</span> oldNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 参数</span>
<span class="token comment">// - newNode 指定的新节点</span>
<span class="token comment">// - oldNode 被替换的节点</span>
<span class="token comment">// 返回值</span>
<span class="token comment">// - 替换成功 ==> 返回替换的节点</span>
<span class="token comment">// - 替换失败 ==>  null</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2><span id="p6-nei-rong-cao-zuo">6、内容操作</span><a href="#p6-nei-rong-cao-zuo" class="header-anchor">#</a></h2>
<h3><span id="pinnerhtml-innertext-outerhtml-outertext">innerHTML、innerText、outerHTML、outerText</span><a href="#pinnerhtml-innertext-outerhtml-outertext" class="header-anchor">#</a></h3>
<p>（1）获取标签</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>abc<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>破晓<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>是猪<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  oT <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oT<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&lt;span>破晓&lt;/span>是猪</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oT<span class="token punctuation">.</span>innerText<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//破晓是猪</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oT<span class="token punctuation">.</span>outerText<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//破晓是猪</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oT<span class="token punctuation">.</span>outerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&lt;p id="abc">&lt;span>破晓&lt;/span>是猪&lt;/p></span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>innerHTML</code> 和 <code>innerText</code> 前者可以解析并输出标签，后者是纯文本。</p>
<p><code>innerHTML</code> 和 <code>outerHTML</code> 前者不包括自身，后者包括自身。</p>
<p>（2）设置标签（直接覆盖原来的内容）</p>
<p>innerText 和 outerText 在获取的时候是相同效果，但在设置时，innerText 仅设置标签所包含的文本，而 outerText 设置包含包括标签<strong>自身在内</strong>的文本。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">oTest<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">"这是内容"</span>
oTest<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">"&lt;a href = "</span>##<span class="token string">"> 这是内容 &lt;/a>"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3><span id="ptextcontent">textContent</span><a href="#ptextcontent" class="header-anchor">#</a></h3>
<p>设置或者返回固定节点的文本内容。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"myList"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent<span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"myList"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">"你好"</span>；<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>（1）textContent 和 innerHTML 的区别</p>
<ul>
<li>textContent 会获取 style= “display:none” 中的文本，而 innerText 不会。</li>
<li>innerText 不会理会 html 格式，直接输出不换行的文本，textContent 会根据标签里面的元素独立一行。</li>
<li>innerText 对 IE 的兼容性较好 ，textContent 虽然作为标准方法但是只支持 IE8+以上的浏览器 。</li>
</ul>
<p>（2）兼容性处理</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">setOrGetContent</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> content</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">//代表当前是读取操作</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">//只要能拿到这个dom对象的textContent属性值，代表当前用户是高级浏览器</span>
      <span class="token keyword">return</span> node<span class="token punctuation">.</span>textContent<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">//代表拿不到  那就是低级浏览器</span>
      <span class="token keyword">return</span> node<span class="token punctuation">.</span>innerText<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">//代表写入操作</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">//代表高级</span>
      node<span class="token punctuation">.</span>textContent <span class="token operator">=</span> content<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">//代表低级</span>
      node<span class="token punctuation">.</span>innerText <span class="token operator">=</span> content<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2><span id="p7-wen-dang-pian-duan-jie-dian-xu-ni-dom">7、文档片段节点（虚拟 DOM） △</span><a href="#p7-wen-dang-pian-duan-jie-dian-xu-ni-dom" class="header-anchor">#</a></h2>
<p><strong>DocumentFragment</strong> 是一个==虚拟的==节点类型，仅仅存在于内存中，没有添加到文档树中，看不到渲染效果。当文档片段设计完善后，再使用 JS 一次性添加到文档树中显示出来，提高效率，==减少页面重绘的次数==。避免浏览器渲染和资源占用，解决大量添加节点时候的性能问题。</p>
<p><strong>createDocumentFragment()</strong> 创建虚拟节点，使用 appendChild 等方法插入。</p>
<h1><span id="shu-xing-jie-dian-cao-zuo">属性节点操作</span><a href="#shu-xing-jie-dian-cao-zuo" class="header-anchor">#</a></h1>
<h2><span id="p1-chuang-jian-shu-xing-jie-dian">1、创建属性节点</span><a href="#p1-chuang-jian-shu-xing-jie-dian" class="header-anchor">#</a></h2>
<p><code>createAttribute()</code> 可以创建属性节点。</p>
<ul>
<li>使用属性节点的 name 属性，可以得到属性的名称。</li>
<li>使用属性节点的 value 属性，可以设置和属性的值。</li>
<li>创建的属性可以通过 setAttributeNode 来插入到元素中。</li>
</ul>
<h2><span id="p2-du-qu-shu-xing">2、读取属性</span><a href="#p2-du-qu-shu-xing" class="header-anchor">#</a></h2>
<p>（1） 常用点语法通过元素直接访问 HTML 属性，如 src、href 等。</p>
<p>（2） <code>getAttribute()</code> 可以读取指定属性的值（非自有属性）。</p>
<p>对于 class 属性，必须使用 className 属性名。对于 for 属性，则必须使用 htmlFor 属性名。</p>
<p>在脚本化 css 中设置 float 属性和 text 属性，要改为 cssFloat 和 cssText（一次设置多个样式）使用。</p>
<h2><span id="p3-she-zhi-shu-xing">3、设置属性</span><a href="#p3-she-zhi-shu-xing" class="header-anchor">#</a></h2>
<p><code>setAttribute(name,value)</code> 可以设置元素的属性值。</p>
<p>参数 name 和 value 分别代表属性名称和属性值，并且必须是字符串，如果存在相同属性，则值被刷新，如果不存在则创建属性并添加。</p>
<p>通过 <code>ele.value</code> 获取或设置表单的值（string）。</p>
<h2><span id="p4-shan-chu-shu-xing">4、删除属性</span><a href="#p4-shan-chu-shu-xing" class="header-anchor">#</a></h2>
<p><code>removeAttribute()</code> 使用元素的方法可以删除指定的属性</p>
<p>参数是要删除的属性名。</p>
<h2><span id="p5-zi-ding-yi-shu-xing">5、自定义属性 △</span><a href="#p5-zi-ding-yi-shu-xing" class="header-anchor">#</a></h2>
<p>HTML5 允许用户为元素自定义属性，但是要求添加前缀<code>data-</code>。</p>
<p><code>.dataset</code> 设置和获取自定义属性</p>
<p><code>.delete</code> 删除自定义属性</p>
<h2><span id="pinnre-outer-html-text-xi-lie">innre / outer | HTML / text 系列</span><a href="#pinnre-outer-html-text-xi-lie" class="header-anchor">#</a></h2>
<p>inner 不包括自身 outer 包括自身</p>
<p>HTML 解析 html 标签 Text 不解析</p>
<h2><span id="ptextcontent">textContent</span><a href="#ptextcontent" class="header-anchor">#</a></h2>
<p>textContent 和 innerHTML 的区别</p>
<ul>
<li>textContent 会获取 style= “display:none” 中的文本，而 innerText 不会</li>
<li>innerText 不会理会 html 格式，直接输出不换行的文本 ，textContent 会根据标签里面的元素独立一行</li>
<li>innerText 对 IE 的兼容性较好 ，textContent 虽然作为标准方法但是只支持 IE8+以上的浏览器</li>
</ul>
<h1><span id="jiao-ben-hua-css">脚本化 CSS</span><a href="#jiao-ben-hua-css" class="header-anchor">#</a></h1>
<h3><span id="p1-huo-qu-chi-cun">1、获取尺寸</span><a href="#p1-huo-qu-chi-cun" class="header-anchor">#</a></h3>
<p><code>offsetWidth</code>和<code>offsetHeight</code> 可以获取元素的<code>border-box</code>尺寸。</p>
<p><code>clientWidth</code>和<code>clientHeight</code> 可以获取元素的<code>padding-box</code>尺寸。</p>
<p><code>scrollWidth</code>和<code>scrollHeight</code> 可以获取元素完全内容尺寸和<code>padding</code>。（几乎不用）</p>
<p><code>innerWidth</code>和<code>innerHeight</code> 可以获取浏览器窗口的尺寸。</p>
<p><code>outerWidth</code>和<code>outerHeight</code> 可以获取取加上工具条与滚动条窗口的尺寸。</p>
<p><code>style.width/height</code> <strong>只能获取行内样式的尺寸</strong>（字符串，“10px”）。</p>
<p>常见应用: 大盒子里面小盒子，大盒子用<code>clientX</code>，小盒子用<code>offsetX</code>。</p>
<h3><span id="p2-huo-qu-wei-zhi">2、获取位置</span><a href="#p2-huo-qu-wei-zhi" class="header-anchor">#</a></h3>
<p><code>getBoundingClientRect()</code> 返回一个对象，对象中包含元素距离视口的距离信息。</p>
<p>getBoundingClientRect。</p>
<p>获取某个元素相对于视口的位置集合</p>
<ul>
<li>top 元素上边到视窗上的距离</li>
<li>right 元素右边到视窗左的距离</li>
<li>bottom 元素下边到视窗上的距离</li>
<li>left 元素左边到视窗左的距离</li>
<li>width</li>
<li>height</li>
</ul>
<p>offsetParent</p>
<p>==offsetLeft / Top==</p>
<p>返回当前元素的相对包含块的偏移位置。</p>
<p>JS 默认把它当成绝对定位属性来寻找包含块，不管是什么属性，都是寻找最近定位父级，如果没找到就是 HTML。</p>
<p>clientLeft / Top</p>
<p>clientLeft 等于 border-left。</p>
<p>==scrollLeft / Top==</p>
<p>==设置或者获取==当前元素滚动条已经滚动过的距离。（值增大，内容左滚）</p>
<h3><span id="p3-huo-qu-wen-dang-da-xiao-shi-kou-da-xiao">3、获取文档大小、视口大小</span><a href="#p3-huo-qu-wen-dang-da-xiao-shi-kou-da-xiao" class="header-anchor">#</a></h3>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 获取文档大小</span>
<span class="token keyword">function</span> <span class="token function">getDocSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">var</span> h <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>
  <span class="token keyword">var</span> b <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
    y<span class="token operator">:</span> h<span class="token punctuation">.</span>offsetHeight <span class="token operator">||</span> b<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">,</span>
    x<span class="token operator">:</span> h<span class="token punctuation">.</span>offsetWidth <span class="token operator">||</span> b<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// 获取视口大小</span>
<span class="token keyword">function</span> <span class="token function">getWinSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">var</span> h <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>
  <span class="token keyword">var</span> b <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
    y<span class="token operator">:</span> h<span class="token punctuation">.</span>clientHeight <span class="token operator">||</span> b<span class="token punctuation">.</span>clientHeight<span class="token punctuation">,</span>
    x<span class="token operator">:</span> h<span class="token punctuation">.</span>clientWidth <span class="token operator">||</span> b<span class="token punctuation">.</span>clientWidth<span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3><span id="p4-huo-qu-he-she-zhi-xi-tong-gun-dong-tiao">4、获取和设置系统滚动条</span><a href="#p4-huo-qu-he-she-zhi-xi-tong-gun-dong-tiao" class="header-anchor">#</a></h3>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 获取系统滚动条</span>
<span class="token keyword">function</span> <span class="token function">getDocScroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">var</span> h <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>
  <span class="token keyword">var</span> b <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
  <span class="token keyword">var</span> y <span class="token operator">=</span> self<span class="token punctuation">.</span>pageYOffset <span class="token operator">||</span> h<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> b<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
  <span class="token keyword">var</span> x <span class="token operator">=</span> self<span class="token punctuation">.</span>pageXOffset <span class="token operator">||</span> h<span class="token punctuation">.</span>scrollLeft <span class="token operator">||</span> b<span class="token punctuation">.</span>scrollLeft<span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
    x<span class="token operator">:</span> x<span class="token punctuation">,</span>
    y<span class="token operator">:</span> y<span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// 设置系统滚动条</span>
<span class="token keyword">function</span> <span class="token function">setDocScroll</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">"number"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollLeft <span class="token operator">=</span> x<span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollLeft <span class="token operator">=</span> x<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    arguments<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span>
    <span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">"number"</span> <span class="token operator">&amp;&amp;</span>
    <span class="token keyword">typeof</span> y <span class="token operator">===</span> <span class="token string">"number"</span>
  <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollLeft <span class="token operator">=</span> x<span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> y<span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollLeft <span class="token operator">=</span> x<span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> y<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/230201/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#666; font-size:12px; padding:3px; border:1px solid #666;">230201</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/230201/" class="post-title-link" itemprop="url">BOM</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-31 14:19:46" itemprop="dateCreated datePublished" datetime="2021-01-31T14:19:46+08:00">2021-01-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-01 19:15:31" itemprop="dateModified" datetime="2021-02-01T19:15:31+08:00">2021-02-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2302%EF%BC%9ABOM/" itemprop="url" rel="index"><span itemprop="name">2302：BOM</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1><span id="javascript-bom">JavaScript BOM</span><a href="#javascript-bom" class="header-anchor">#</a></h1>
<p>Browser Object Model，浏览器对象模型。</p>
<h1><span id="yi-window-dui-xiang">一、window 对象</span><a href="#yi-window-dui-xiang" class="header-anchor">#</a></h1>
<p><code>window</code> 是 BOM 的核心对象。表示浏览器的一个实例，是客户端浏览器对象模型的基类。在浏览器中，该对象具有双重角色，既是通过 JS 访问浏览器窗口的一个接口，也是 ES 规定中的 <strong>Global</strong> 对象。这意味着在网页中定义的任何一个对象、变量和函数，都以 <code>window</code> 作为其 <code>Global</code> 对象。<strong>所有在全局作用域中声明的变量、函数都会变成该对象的属性和方法。</strong></p>
<h2><span id="p1-ke-hu-duan-dui-xiang">1、客户端对象</span><a href="#p1-ke-hu-duan-dui-xiang" class="header-anchor">#</a></h2>
<p>可以访问客户端其他对象，这种关系构成浏览器对象模型。</p>
<table>
<thead>
<tr>
<th>对象</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>document</code></td>
<td>包含整个 HTML 文档，可以用来访问文档内容及其所有页面元素。</td>
</tr>
<tr>
<td><code>navigator</code></td>
<td>包含客户端有关浏览器的信息。</td>
</tr>
<tr>
<td><code>screen</code></td>
<td>包含客户端屏幕的信息</td>
</tr>
<tr>
<td><code>history</code></td>
<td>包含浏览历史记录信息</td>
</tr>
<tr>
<td><code>location</code></td>
<td>包含当前网页文档的 URL 信息</td>
</tr>
</tbody>
</table>
<h2><span id="p2-xi-tong-dui-hua-kuang">2、系统对话框</span><a href="#p2-xi-tong-dui-hua-kuang" class="header-anchor">#</a></h2>
<p>浏览器通过 <code>alert()</code>、<code>confirm()</code> 和 <code>prompt()</code> 方法可以调用系统对话框向用户显示消息。</p>
<p>系统对话框与在浏览器中显示的网页没有关系，也不包含 HTML。它们的外观由操作系统及（或）浏览器设置决定，而不是由 CSS 决定（无法设置）。通过这几个方法打开的对话框都是同步和模态的。也就是说，显示这些对话框的时候代码会停止执行，而关掉这些对话框后代码又会恢复执行。</p>
<p><code>confirm</code>和<code>prompt</code>有返回值。生产环境下不用，调试使用。</p>
<h2><span id="p3-da-kai-he-guan-bi-chuang-kou">3、打开和关闭窗口</span><a href="#p3-da-kai-he-guan-bi-chuang-kou" class="header-anchor">#</a></h2>
<p><code>window.open()</code> 方法既可以导航到一个特定的 URL，也可以打开一个新的浏览器窗口。</p>
<p>参数</p>
<ul>
<li>要加载的 URL</li>
<li>新窗口打开方式：<code>_self</code> <code>_blank</code>（默认新标签页打开）</li>
<li>窗口大小、位置。</li>
</ul>
<p>返回值 就是新建的窗口名称。</p>
<p><code>窗口名.close()</code>可以关闭窗口，如果关闭自身那就使用 <code>window.close()</code>。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 1. 打开窗口</span>
<span class="token keyword">var</span> newWin <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>
  <span class="token string">"http://www.jd.com"</span><span class="token punctuation">,</span>
  <span class="token string">"_blank"</span><span class="token punctuation">,</span>
  <span class="token string">"width=300,height=300,left=200,top=100"</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2. 关闭窗口</span>
newWin<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>close()</code> 方法仅适用于通过 <code>window.open()</code> 打开的弹出窗口。</p>
<h2><span id="p4-liu-lan-qi-kuan-gao">4、浏览器宽高</span><a href="#p4-liu-lan-qi-kuan-gao" class="header-anchor">#</a></h2>
<p><code>window</code>对象有<code>innerWidth</code>和<code>innerHeight</code>属性，可以获取浏览器窗口的内部宽度和高度。内部宽高是指除去菜单栏、工具栏、边框等占位元素后，用于显示网页的净宽高。</p>
<p>对应的，还有一个<code>outerWidth</code>和<code>outerHeight</code>属性，可以获取浏览器窗口的整个宽高。</p>
<h1><span id="er-navigator-dui-xiang">二、navigator 对象</span><a href="#er-navigator-dui-xiang" class="header-anchor">#</a></h1>
<p>navigator 对象储存了浏览器信息。通过 <code>navigator</code> 可以引用该对象，并利用它的属性来读取客户端基本信息。</p>
<p>常见属性：</p>
<ul>
<li><code>onLine</code> 表示浏览器是否连接到因特网</li>
<li><code>platform</code> 浏览器所在的操作系统</li>
<li><code>userAgent</code> 浏览器识别码</li>
<li><code>appName</code> 浏览器名称</li>
<li><code>labguage</code> 浏览器设置的语言</li>
</ul>
<h2><span id="p1-liu-lan-qi-jian-ce-fang-fa">1、浏览器检测方法</span><a href="#p1-liu-lan-qi-jian-ce-fang-fa" class="header-anchor">#</a></h2>
<p>检测浏览器类型的方法有多种，常用的方法包括两种:<strong>特征检测法</strong>和<strong>字符串检测法</strong>，这两种方法都存在各自的优点与缺点，用户可以根据需要进行选择。</p>
<p>（1）特征检测法</p>
<ul>
<li>特征检测法就是根据浏览器是否支持特定功能来决定相应操作的方式。这是一种非精确判断法。但却是最安全的检测方法</li>
<li>因为准确检测浏览器的类型和型号是一件很困难的事情,而且很容易存在误差，如果不关心浏览器的身份，仅仅在意浏览器的执行能力，那么使用特征检测法就完全可以满足需要。</li>
<li>当使用一个对象、方法或属性时，先判断它是否存在，如果存在，则说明浏览器支持该对象、方法属性，那么就可以放心使用</li>
</ul>
<p>（2）字符串检测法</p>
<ul>
<li>客户端浏览器每次发送 HTTP 请求时，都会附带有一个 user-agent(用户代理)字符串，对于 Web 开发人员来说，可以使用用户代理字符串检测浏览器类型。</li>
<li>userAgent 字符串包含了 web 浏览器的大量信息，如浏览器的名称和版本。</li>
</ul>
<h2><span id="p2-cao-zuo-xi-tong-jian-ce-fang-fa">2、操作系统检测方法</span><a href="#p2-cao-zuo-xi-tong-jian-ce-fang-fa" class="header-anchor">#</a></h2>
<p>navigator.userAgent 返回值一般都会包含操作系统的基本信息，不过这些信息比较散乱，没有统一的规则。</p>
<p>用户可以检测一些更为通用的信息，如检测是否为 Windows 系统，或者为 Macintosh 系统，而不去分辨操作系统的版本号。</p>
<p>例如，如果仅检测通用信息，那么所有 Windows 版本的操作系统都会包含&quot;Win”字符串，所有 Macintosh 版本的操作系统都包含有&quot;Mac”字符串，所有 Umix 版本的操作系统都包含有&quot;X11”，而 Linux 操作系统会同时包含&quot;X11”和&quot; Linux。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">var</span> isWin <span class="token operator">=</span> navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"Win"</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">// 如果是Windows系统，则返回true</span>
<span class="token keyword">var</span> isMac <span class="token operator">=</span> navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"Mac"</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">// 如果是Macintosh系统，则返回true</span>
<span class="token keyword">var</span> isUnix <span class="token operator">=</span> navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"X11"</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">// 如果是UNIX系统，则返回true</span>
<span class="token keyword">var</span> isLinux <span class="token operator">=</span> navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"Linux"</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">// 如果是Linux系统，则返回true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>！请注意，<code>navigator</code>的信息可以很容易地被用户修改，所以 JavaScript 读取的值不一定是正确的。但这样既可能判断不准确，也很难维护代码。正确的方法是充分利用 JavaScript 对不存在属性返回<code>undefined</code>的特性，直接用短路运算符<code>||</code>计算：</p>
<pre class="line-numbers language-none"><code class="language-none">var width &#x3D; window.innerWidth || document.body.clientWidth;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h1><span id="san-location-dui-xiang">三、location 对象</span><a href="#san-location-dui-xiang" class="header-anchor">#</a></h1>
<p><code>location</code> 对象存储了与当前文档位置（URL）信息。</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>href</code></td>
<td>声明或获取当前文档完整的 URL</td>
</tr>
<tr>
<td><code>protocol</code></td>
<td>协议部分 <code>http:</code></td>
</tr>
<tr>
<td><code>host</code></td>
<td>主机和端口名称 <code>localhost:8080</code></td>
</tr>
<tr>
<td><code>hostname</code></td>
<td>主机名称 <code>localhost</code></td>
</tr>
<tr>
<td><code>port</code></td>
<td>端口号 <code>8080</code></td>
</tr>
<tr>
<td><code>pathname</code></td>
<td>路径部分</td>
</tr>
<tr>
<td><code>search</code></td>
<td>URL 查询部分</td>
</tr>
<tr>
<td><code>hash</code></td>
<td>锚部分包括前导 <code>#</code></td>
</tr>
</tbody>
</table>
<p><code>location.href</code> 可以设置和获取 url 地址</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">"demo.html"</span><span class="token punctuation">;</span> <span class="token comment">//重定向</span>
location<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token string">"demo.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//刷新</span>
location<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"demo.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

hostname<span class="token punctuation">;</span> <span class="token comment">// http://127.0.0.1:5500/0717/12.location.html</span>
protocol<span class="token punctuation">;</span> <span class="token comment">// 127.0.0.1</span>
host<span class="token punctuation">;</span> <span class="token comment">// http:</span>
port<span class="token punctuation">;</span> <span class="token comment">// 127.0.0.1:5500</span>
pathname<span class="token punctuation">;</span> <span class="token comment">// 5500</span>
search<span class="token punctuation">;</span> <span class="token comment">/// 0717/12.location.html</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>reload()</code> 重新加载文档</p>
<p><code>replace()</code> 重新加载一个新文档，无需为它创建一个新的历史记录，替换当前文档的历史记录</p>
<p><code>assign()</code> 和<code>href</code>差不多，要加载一个新页面，可以调用 <code>location.assign()</code> 。如果要重新加载当前页面，调用 <code>location.reload()</code> 方法非常方便。</p>
<h1><span id="si-history-dui-xiang-ji-chu">四、history 对象 <code>基础</code></span><a href="#si-history-dui-xiang-ji-chu" class="header-anchor">#</a></h1>
<p><code>history</code>对象保存了浏览器的历史记录，JS 可以调用<code>history</code>对象的<code>back()</code>或<code>forward ()</code>，相当于用户点击了浏览器的后退或前进按钮。</p>
<p>这个对象属于历史遗留对象，对于现代 Web 页面来说，由于大量使用 AJAX 和页面交互，简单粗暴地调用<code>history.back()</code>可能会让用户体验非常不好。</p>
<p>新手开始设计 Web 页面时喜欢在登录页登录成功时调用<code>history.back()</code>，试图回到登录前的页面。这是一种错误的方法。</p>
<p>前端框架路由原理中使用了 <code>history</code> 库。</p>
<p><code>https://github.com/ReactTraining/history</code></p>
<h1><span id="wu-screen-dui-xiang">五、screen 对象</span><a href="#wu-screen-dui-xiang" class="header-anchor">#</a></h1>
<p><code>screen</code> 对象表示屏幕的信息，常用的属性有：</p>
<ul>
<li>screen.width：屏幕宽度，以像素为单位；</li>
<li>screen.height：屏幕高度，以像素为单位；</li>
<li>screen.colorDepth：返回颜色位数，如 8、16、24。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/220901/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#666; font-size:12px; padding:3px; border:1px solid #666;">220901</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/220901/" class="post-title-link" itemprop="url">jQuery</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-31 13:24:58" itemprop="dateCreated datePublished" datetime="2021-01-31T13:24:58+08:00">2021-01-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-01 19:29:44" itemprop="dateModified" datetime="2021-02-01T19:29:44+08:00">2021-02-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2209%EF%BC%9AjQuery/" itemprop="url" rel="index"><span itemprop="name">2209：jQuery</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1><span id="jquery-ji-chu">jQuery 基础</span><a href="#jquery-ji-chu" class="header-anchor">#</a></h1>
<h2><span id="pyi-kai-shi">一、开始</span><a href="#pyi-kai-shi" class="header-anchor">#</a></h2>
<p><strong>jQuery</strong> 是一个 JS 开源类库，它通过封装原生的 JavaScript 函数得到。</p>
<h2><span id="p1-kai-shi">1、开始</span><a href="#p1-kai-shi" class="header-anchor">#</a></h2>
<p>引入</p>
<ul>
<li>
<p>本地</p>
</li>
<li>
<p>CDN 在线</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.bootcdn.net/ajax/libs/jquery/1.12.4/jquery.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
</ul>
<p>版本</p>
<ul>
<li>版本格式 <code>大版本.小版本.bugfix</code></li>
<li><code>1.x.x</code> 完全兼容 IE678</li>
<li><code>2.x.x</code> 不再兼容 IE678</li>
<li><code>3.x.x</code> 源码使用 ES6 语法</li>
</ul>
<p><code>jquery.js</code> / <code>jquery.min.js</code> 压缩版，正式上线使用压缩版本。</p>
<h3><span id="p2-dai-ma-feng-ge">2、代码风格</span><a href="#p2-dai-ma-feng-ge" class="header-anchor">#</a></h3>
<p>（1）全局函数 <code>jQuery()</code> ，快捷别名 <code>$</code>。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">window<span class="token punctuation">.</span>jQuery <span class="token operator">=</span> windows<span class="token punctuation">.</span>$ <span class="token operator">=</span> jQuery<span class="token punctuation">;</span>

<span class="token comment">// 选择器选中 box 元素，获取了 jQuery 对象</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#box"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// CSS方法设置样式</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#box"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"color"</span><span class="token punctuation">,</span> <span class="token string">"red"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>（2）链式调用</p>
<p>jQuery 的<strong>每个方法返回的都是 jQuery 对象</strong>，所以可以链式调用。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#box"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"color"</span><span class="token punctuation">,</span> <span class="token string">"red"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"font-size"</span><span class="token punctuation">,</span> <span class="token string">"40px"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3><span id="p3-jquery-dui-xiang-yu-js-dui-xiang">3、jQuery 对象与 JS 对象</span><a href="#p3-jquery-dui-xiang-yu-js-dui-xiang" class="header-anchor">#</a></h3>
<p><strong>JS 对象</strong> 即 DOM 对象，即是我们用传统的方法获得的对象。</p>
<p><strong>jQuery 对象</strong> 即是用 jQuery 类库的选择器获得的类数组对象，就是通过 jQuery 包装 DOM 对象后产生的对象，它是 jQuery 独有的。如果一个对象是 jQuery 对象，那么就可以使用 jQuery 里的方法。</p>
<p>对象的转换</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// jQuery对象 转 DOM对象</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// DOM对象 转 jQuery 对象</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token constant">BOM</span>对象<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3><span id="p4-zhi-xing-shi-ji">4、执行时机 △</span><a href="#p4-zhi-xing-shi-ji" class="header-anchor">#</a></h3>
<table>
<thead>
<tr>
<th></th>
<th>window.onload</th>
<th>$(document).ready()</th>
</tr>
</thead>
<tbody>
<tr>
<td>执行时机</td>
<td>等待网页全部加载完成然后才会执行</td>
<td>等待 DOM 结构加载完成就执行</td>
</tr>
<tr>
<td>执行次数</td>
<td>只会执行一次<br>写第二次会覆盖第一次</td>
<td>可以执行多次<br>不会覆盖</td>
</tr>
<tr>
<td>简写方案</td>
<td>无</td>
<td>$(function (){});</td>
</tr>
</tbody>
</table>
<h2><span id="per-chang-gui-cao-zuo">二、常规操作</span><a href="#per-chang-gui-cao-zuo" class="header-anchor">#</a></h2>
<h3><span id="p1-lei-shu-zu-cao-zuo">1、类数组操作</span><a href="#p1-lei-shu-zu-cao-zuo" class="header-anchor">#</a></h3>
<ul>
<li><code>children()</code> 获取选择器元素的<strong>子元素</strong>节点集合，如果指定了参数，那么该参数也是筛选表达式</li>
<li><code>parent()</code> 获取选择器元素的<strong>父元素</strong>节点集合（只有一个），，如果指定了参数，那么该参数也是筛选表达式</li>
<li><code>siblings()</code> 获取选择器元素的<strong>兄弟元素</strong>节点集合，如果指定了参数，那么该参数也是筛选表达式</li>
<li><code>find()</code> 寻找后代元素，参数直接写选择器</li>
<li><code>end</code> 返回上一次破坏性操作之前的伪数组</li>
<li>对于类数组的常用方法还有很多，比如 <code>prev()</code>、<code>next()</code>等等。</li>
</ul>
<h3><span id="p2-xuan-ze-qi-cao-zuo">2、选择器操作</span><a href="#p2-xuan-ze-qi-cao-zuo" class="header-anchor">#</a></h3>
<p>直接参数传递选择器。</p>
<ul>
<li>基础选择器 <code>#id</code>、<code>.class</code></li>
<li>层次选择器 <code>A B</code>、<code>A+B</code>、<code>A~B</code></li>
<li>过滤选择器 <code>:first</code>、<code>first-child</code>、<code>not()</code>、<code>even</code>、<code>odd</code>
<ul>
<li><code>:first</code> / <code>:last</code> 选取第一个元素/最后一个元素</li>
<li><code>:first-child</code> / <code>:last-child</code> 选取第一个子元素/最后一个子元素。</li>
<li><code>:only-child</code> 选取只有一个子元素的节点。</li>
<li><code>nth-child(index/even/odd/equation)</code> 选取序列特定的元素</li>
<li><code>:even</code> / <code>:odd</code> 选取索引是单数、双数的元素</li>
<li><code>:eq(index)</code> 选取指定 index 值的元素</li>
<li><code>:gt(index)</code> / <code>:lt(index)</code> 选取索引大于/小于指定的元素</li>
<li><code>:not(seletor)</code> 排除选定的元素</li>
<li><code>:contains(text)</code> 选取包含指定文本 text 的元素。</li>
<li><code>:empty</code> 选取空元素</li>
<li><code>:has(seletor)</code> 选取含有指定选择器的元素。</li>
<li><code>:parent</code> 选取含有子元素或文本的元素。</li>
</ul>
</li>
<li>属性过滤选择器 <code>[attr]</code></li>
<li>表单选择器 <code>:input</code></li>
</ul>
<h2><span id="psan-jquery-dong-hua">三、jQuery 动画</span><a href="#psan-jquery-dong-hua" class="header-anchor">#</a></h2>
<h3><span id="p1-xian-shi-yin-cang">1. 显示、隐藏</span><a href="#p1-xian-shi-yin-cang" class="header-anchor">#</a></h3>
<p><code>.show()</code> 显示 | <code>.hide()</code> 隐藏</p>
<ul>
<li>第一个参数 控制速度 600ms <code>slow</code> | 默认 400ms <code>normal</code> | 200ms <code>fast</code></li>
<li>第二个参数 控制动画形式 <code>linear</code> | <code>swing</code></li>
<li>第三个参数 书写回调函数</li>
</ul>
<p><code>.tiggle()</code> 开关（显示的时候隐藏，隐藏的时候显示）</p>
<h3><span id="p2-hua-dong-juan-dong">2. 滑动、卷动</span><a href="#p2-hua-dong-juan-dong" class="header-anchor">#</a></h3>
<p><code>.slideUp()</code> 向上收缩| <code>.slideDown()</code> 向上展开 | <code>.sildeToggle()</code></p>
<h3><span id="p3-dan-ru-dan-chu">3. 淡入、淡出</span><a href="#p3-dan-ru-dan-chu" class="header-anchor">#</a></h3>
<p><code>.fadeIn()</code> | <code>.fadeOut()</code> | <code>.fadeToggle()</code></p>
<h3><span id="p4-zi-ding-yi-dong-hua">4. 自定义动画</span><a href="#p4-zi-ding-yi-dong-hua" class="header-anchor">#</a></h3>
<p>（1）基础使用</p>
<p><code>animate( params, speed, callback)</code></p>
<ul>
<li>第 1 个参数 包含样式属性和值的映射速度</li>
<li>第 2 个参数 可选</li>
<li>第 3 个参数 在动画完成时执行的回调函数</li>
</ul>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".box"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>
  <span class="token punctuation">&#123;</span>
    left<span class="token operator">:</span> <span class="token string">"1000px"</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token number">2000</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 回调函数</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>（2）动画队列</p>
<p>如果要按照顺序执行动画，只需要按照代码顺序就可以。（只有动画会放在队列中，其他方法会立即执行 ）</p>
<h3><span id="p5-ting-zhi-dong-hua">5. 停止动画</span><a href="#p5-ting-zhi-dong-hua" class="header-anchor">#</a></h3>
<p>（1） 停止方法</p>
<p><code>stop( clearQueue, gotoEnd )</code></p>
<ul>
<li>第 1 个参数 可选 布尔值 是否需要清空未执行完的动画队列</li>
<li>第 2 个参数 可选 布尔值 是否直接将正在执行的动画跳转到末状态</li>
</ul>
<p>这个方法会结束当前正在进行的动画，并立即执行队列中的下一个动画。</p>
<p>（2）判断元素是否处于动画状态</p>
<p>当用户在某个元素上执行 <code>animate()</code> 动画时，就会出现动画积累，</p>
<p>使用 <code>is(&quot;:animated&quot;)</code> 来判断是否处于动画状态，如果不处于动画状态，才会给元素添加新动画。</p>
<h3><span id="p6-yan-chi-dong-hua">6. 延迟动画</span><a href="#p6-yan-chi-dong-hua" class="header-anchor">#</a></h3>
<p><code>delay()</code></p>
<p>参数是延迟的毫秒数。</p>
<h2><span id="psi-jquery-yuan-su-yang-shi-cao-zuo">四、jQuery 元素样式操作</span><a href="#psi-jquery-yuan-su-yang-shi-cao-zuo" class="header-anchor">#</a></h2>
<table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>css( name )</code></td>
<td>获取元素的样式</td>
</tr>
<tr>
<td><code>css( name, value)</code></td>
<td>设置元素的样式</td>
</tr>
<tr>
<td><code>css( name:value, name2:value2,..)</code></td>
<td>设置元素的样式（多个）</td>
</tr>
<tr>
<td><code>addClass(Class)</code>/<code>removeClass(Class)</code></td>
<td>添加类/ 移除类</td>
</tr>
<tr>
<td><code>toggleClass(Class)</code></td>
<td>来回切换默认样式和指定样式</td>
</tr>
<tr>
<td><code>width()</code>/<code>height()</code></td>
<td>获取和设置宽高</td>
</tr>
<tr>
<td><code>innerWidth()</code> / <code>innerHeight()</code></td>
<td>获取包含内边距的宽高</td>
</tr>
<tr>
<td><code>outerWidth()</code> / <code>outerHeight()</code></td>
<td>获取包含边框和内边距的宽高<br>如果参数是<code>true</code>则包含外边距</td>
</tr>
<tr>
<td><code>offset()</code></td>
<td>获取元素相对文档的偏移位置</td>
</tr>
<tr>
<td><code>position()</code></td>
<td>获取元素相对父元素的偏移位置</td>
</tr>
<tr>
<td><code>scrollTop()</code> / <code>scrollLeft</code></td>
<td>获取和设置水平/垂直滚动条</td>
</tr>
</tbody>
</table>
<h2><span id="pwu-jquery-dom-cao-zuo">五、jQuery DOM 操作</span><a href="#pwu-jquery-dom-cao-zuo" class="header-anchor">#</a></h2>
<h3><span id="p1-she-zhi-nei-rong-he-shu-xing">1、设置内容和属性</span><a href="#p1-she-zhi-nei-rong-he-shu-xing" class="header-anchor">#</a></h3>
<table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>html()</code></td>
<td>获取和设置元素中的内容</td>
</tr>
<tr>
<td><code>text()</code></td>
<td>获取和设置元素中的文本内容</td>
</tr>
<tr>
<td><code>val()</code></td>
<td>获取和设置表单元素的文本内容</td>
</tr>
<tr>
<td><code>prop/attr(key[, value])</code> <br><code>prop/attr(key:value, key2:value2, )</code></td>
<td>获取和设置元素 key 属性值<br>处理自带属性使用 <code>prop</code><br>处理自定义属性使用 <code>attr</code></td>
</tr>
<tr>
<td><code>removeattr(key)</code></td>
<td>删除指定的属性</td>
</tr>
</tbody>
</table>
<h3><span id="p2-jie-dian-cao-zuo">2、节点操作</span><a href="#p2-jie-dian-cao-zuo" class="header-anchor">#</a></h3>
<table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$(&quot;&lt;标签名&gt;&lt;/标签名&quot;)</code></td>
<td><code>createElement()</code></td>
</tr>
<tr>
<td><code>$(&quot;&lt;标签名&gt;文本&lt;/标签名&gt;&quot;)</code></td>
<td><code>createTextNode()</code></td>
</tr>
<tr>
<td>直接写在创建的标签中 | <code>setAttribute( name, value)</code></td>
<td>创建属性节点</td>
</tr>
<tr>
<td><code>append(Content)</code> 元素内部后面插入 <br><code>appendTo(Content)</code> <br><code>prepend(Content)</code> 元素内部前面插入 <br><code>prepentTo(Content)</code> <br><code>after()</code> 元素外部后面 <br><code>insertAfter()</code> <br><code>before()</code> 元素外部前面 <br><code>insertBefore()</code></td>
<td>插入节点</td>
</tr>
<tr>
<td><code>remove()</code></td>
<td><code>removeChild()</code></td>
</tr>
<tr>
<td><code>replaceAll()</code></td>
<td><code>replaceChild()</code><br>节点被替换后，所包含的事件行为就全部消失了。</td>
</tr>
<tr>
<td><code>clone()</code></td>
<td><code>cloneNode()</code><br>参数可以为空，只复制元素和内容，<br>加上 <code>true</code> 参数的话，会复制这个元素的事件处理行为。</td>
</tr>
</tbody>
</table>
<h2><span id="pliu-jquery-shi-jian">六、jQuery 事件</span><a href="#pliu-jquery-shi-jian" class="header-anchor">#</a></h2>
<h3><span id="p1-jian-xie-shi-jian">1、简写事件</span><a href="#p1-jian-xie-shi-jian" class="header-anchor">#</a></h3>
<p>jQuery 封装了常用的事件以节约更多的代码，称为<strong>简写事件</strong>。</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>触发</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>click(fn)</code></td>
<td>鼠标单击</td>
</tr>
<tr>
<td><code>dblclick(fn)</code></td>
<td>鼠标双击</td>
</tr>
<tr>
<td><code>mousedown(fn)</code></td>
<td>鼠标点击后</td>
</tr>
<tr>
<td><code>mouseup(fn)</code></td>
<td>鼠标点击后弹起</td>
</tr>
<tr>
<td><code>mouseover(fn)</code></td>
<td>鼠标移入</td>
</tr>
<tr>
<td><code>mouseout(fn)</code></td>
<td>鼠标移出</td>
</tr>
<tr>
<td><code>mousemove(fn)</code></td>
<td>鼠标移动</td>
</tr>
<tr>
<td><code>mouseeenter(fn)</code></td>
<td>鼠标穿过</td>
</tr>
<tr>
<td><code>mouselevave(fn)</code></td>
<td>鼠标穿出</td>
</tr>
<tr>
<td><code>keydown(fn)</code></td>
<td>键盘按下</td>
</tr>
<tr>
<td><code>keyup(fn)</code></td>
<td>键盘弹起</td>
</tr>
<tr>
<td><code>resize(fn)</code></td>
<td>文档改变大小</td>
</tr>
<tr>
<td><code>scroll(fn)</code></td>
<td>滚动条滚动</td>
</tr>
<tr>
<td><code>focus(fn)</code></td>
<td>表单交单激活</td>
</tr>
<tr>
<td><code>blur(fn)</code></td>
<td>表单交单丢失</td>
</tr>
<tr>
<td><code>focusin(fn)</code></td>
<td>表单焦点激活</td>
</tr>
<tr>
<td><code>select(fn)</code></td>
<td>表单文本选定</td>
</tr>
<tr>
<td><code>change(fn)</code></td>
<td>表单元素值改变</td>
</tr>
<tr>
<td><code>submit(fn)</code></td>
<td>表单提交</td>
</tr>
</tbody>
</table>
<h3><span id="p2-shi-jian-dui-xiang">2、事件对象</span><a href="#p2-shi-jian-dui-xiang" class="header-anchor">#</a></h3>
<p>对于原生的事件对象，由于浏览器差异，开发者总是需要做兼容性处理。jQuery 解决了原生事件对象的兼容性问题，还提供了很多新的属性和方法。</p>
<p><code>stopPropagation()</code> 阻止事件冒泡</p>
<p><code>preventDefault()</code> 阻止默认行为</p>
<h3><span id="p3-jquery-bang-ding-shi-jian">3、jQuery 绑定事件</span><a href="#p3-jquery-bang-ding-shi-jian" class="header-anchor">#</a></h3>
<p><code>bind()</code> 方法无法动态绑定尚未存在的元素。此外还有 <code>live()</code> <code>delegate</code> 等已经被废弃，底层实际使用 <code>on()</code>。</p>
<p><strong><code>on( events, selector, data, fn)</code></strong> 绑定事件 jQuery 1.7+</p>
<ul>
<li><code>events</code> 事件类型</li>
<li><code>selector</code> 触发事件选择器元素的后代</li>
<li><code>data</code> 当一个事件被触发要传递 event.data 给事件处理函数</li>
<li><code>fn</code> 该事件被触发时的执行函数</li>
</ul>
<p>还可以<strong>绑定多个事件绑定同一个函数、多个事件绑定不同函数</strong>。</p>
<p><code>unbind()</code> 解除绑定事件。</p>
<p><strong><code>off( events, selector, fn)</code></strong> 解除绑定事件。</p>
<p><code>one( type, data, fn )</code> 绑定元素执行完毕后自动移除事件，方法仅触发一次。</p>
<ul>
<li><code>type</code> 添加到元素的一个或者多个事件。</li>
<li><code>data</code> 将要传递给事件处理函数的数据映射。</li>
<li><code>fn</code> 每当事件触发时执行的函数。</li>
</ul>
<h2><span id="pqi-jquery-kuo-zhan">七、jQuery 扩展</span><a href="#pqi-jquery-kuo-zhan" class="header-anchor">#</a></h2>
<p>自定义了<code>extent()</code>和 <code>fn.extent()</code> 方法，扩展 jQuery 类本身，为类添加新的方法。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
$<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">index<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/220820/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#666; font-size:12px; padding:3px; border:1px solid #666;">220820</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/220820/" class="post-title-link" itemprop="url">CSS Hack</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-02 16:12:53 / 修改时间：16:13:56" itemprop="dateCreated datePublished" datetime="2021-02-02T16:12:53+08:00">2021-02-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2208%EF%BC%9ACSS/" itemprop="url" rel="index"><span itemprop="name">2208：CSS</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>CSS hack 是什么<br>
由于不同的厂商的浏览器，或者是同一个浏览器不同的版本（IE），对 css 的解析和认识不完全一样,可能会导致不同浏览器显示的效果不相同,那么我们需要针对某个浏览器，去写不同的样式，让代码能够兼容所有的浏览器。</p>
<p>为什么要用 CSS hack</p>
<p>第一种理解：让我们 CSS 的代码兼容不同的浏览器</p>
<p>第二种理解：我们可以为不同的浏览器定制不同的样式</p>
<p>表现方式：</p>
<ul>
<li>CSS 属性前缀法</li>
<li>选择器前缀法</li>
<li><strong>IE 条件注释法</strong>: iE10、11 不再使用条件注释。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/220803/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#666; font-size:12px; padding:3px; border:1px solid #666;">220803</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/220803/" class="post-title-link" itemprop="url">uuid.js 使用心得</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-01 00:35:47" itemprop="dateCreated datePublished" datetime="2021-02-01T00:35:47+08:00">2021-02-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-02 16:11:53" itemprop="dateModified" datetime="2021-02-02T16:11:53+08:00">2021-02-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2208%EF%BC%9AJS%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">2208：JS库</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>生成随机用户 id 字符串的工具模块。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 安装</span>
npm i uuidjs

<span class="token comment">// 引入</span>
<span class="token keyword">import</span> uuid <span class="token keyword">from</span> <span class="token string">'uuidjs'</span>

<span class="token comment">// 生成随机的用户id，如</span>
<span class="token keyword">const</span> uuid <span class="token operator">=</span> <span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// uuid: 9b88f18f-7172-41b0-8868-260045692a42</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/220802/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#666; font-size:12px; padding:3px; border:1px solid #666;">220802</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/220802/" class="post-title-link" itemprop="url">个人封装函数库</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-02 16:08:13 / 修改时间：16:11:41" itemprop="dateCreated datePublished" datetime="2021-02-02T16:08:13+08:00">2021-02-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2208%EF%BC%9AJS%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">2208：JS库</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>基本格式</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">w</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">/*
   * xxxx方法：xxxx
   * @pargm &#123;x:[type],y:[type]&#125; （参数
   * @return &#123;object&#125; x:xxx y:xxx （返回值
   */</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span>windows<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ol>
<li><code>;</code>是为了防止其他库末尾不加分号，引起错误</li>
<li><code>+</code>等一元运算符代表把匿名函数括起来</li>
<li>在匿名函数中定义一个对象，把所有方法</li>
</ol>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">/*
 * 作者：xxx
 * 时间：2020-7-18
 * 内容：个人封装函数库
 *
 *   ;是为了防止其他库末尾不加分号 引起错误
 *   + - ~ ！ 等一元运算符 代表把匿名函数括起来
 *   在匿名函数中定义一个对象，把所有的方法放到这个对象上，方便识别和管理
 * */</span>

<span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">w</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  w<span class="token punctuation">.</span>my <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

  <span class="token comment">/*
   *   getDocScroll方法：获取系统滚动条的位置
   *   @param &#123;&#125; 无
   *   @return &#123;Object&#125; x：横向滚动条  y：竖向滚动条
   * */</span>
  w<span class="token punctuation">.</span>my<span class="token punctuation">.</span><span class="token function-variable function">getDocScroll</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> h <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>
    <span class="token keyword">var</span> b <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
    <span class="token keyword">var</span> y <span class="token operator">=</span> self<span class="token punctuation">.</span>pageYOffset <span class="token operator">||</span> h<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> b<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
    <span class="token keyword">var</span> x <span class="token operator">=</span> self<span class="token punctuation">.</span>pageXOffset <span class="token operator">||</span> h<span class="token punctuation">.</span>scrollLeft <span class="token operator">||</span> b<span class="token punctuation">.</span>scrollLeft<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      x<span class="token operator">:</span> x<span class="token punctuation">,</span>
      y<span class="token operator">:</span> y<span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

  <span class="token comment">/*
   *   getDocScroll方法：获取系统滚动条的位置
   *   @param &#123;x:[number],y:[number]&#125;  x：横向滚动条  y：竖向滚动条
   *   @return &#123;&#125; 无
   * */</span>
  w<span class="token punctuation">.</span>my<span class="token punctuation">.</span><span class="token function-variable function">setDocScroll</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">"number"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollLeft <span class="token operator">=</span> x<span class="token punctuation">;</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollLeft <span class="token operator">=</span> x<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      arguments<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span>
      <span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">"number"</span> <span class="token operator">&amp;&amp;</span>
      <span class="token keyword">typeof</span> y <span class="token operator">===</span> <span class="token string">"number"</span>
    <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
      document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollLeft <span class="token operator">=</span> x<span class="token punctuation">;</span>
      document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> y<span class="token punctuation">;</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollLeft <span class="token operator">=</span> x<span class="token punctuation">;</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> y<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

  w<span class="token punctuation">.</span>my<span class="token punctuation">.</span><span class="token function-variable function">log</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">con</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>con<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>con<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/220801/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#666; font-size:12px; padding:3px; border:1px solid #666;">220801</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/220801/" class="post-title-link" itemprop="url">JavaScript 函数库</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-01 00:34:51" itemprop="dateCreated datePublished" datetime="2021-02-01T00:34:51+08:00">2021-02-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-02 16:09:24" itemprop="dateModified" datetime="2021-02-02T16:09:24+08:00">2021-02-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2208%EF%BC%9AJS%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">2208：JS库</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>lodash.js<br>
day.js</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/220701/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#666; font-size:12px; padding:3px; border:1px solid #666;">220701</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/220701/" class="post-title-link" itemprop="url">正则表达式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-01 00:44:23 / 修改时间：15:58:47" itemprop="dateCreated datePublished" datetime="2021-02-01T00:44:23+08:00">2021-02-01</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2207%EF%BC%9A%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" itemprop="url" rel="index"><span itemprop="name">2207：正则表达式</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1><span id="zheng-ze-biao-da-shi">正则表达式</span><a href="#zheng-ze-biao-da-shi" class="header-anchor">#</a></h1>
<p>正则表达式（RegExp，Regular Expression），又叫规则表达式，是由一些特殊符号（<strong>元字符</strong>、限定符）组成的式子。</p>
<p>是搜索和替换字符串一种强大的方法。在 JS 中，正则表达式通过内置的 RegExp 类的对象来实现，并和字符串集成。用来匹配字符串。</p>
<h1><span id="yi-kai-shi">一、开始</span><a href="#yi-kai-shi" class="header-anchor">#</a></h1>
<h3><span id="p1-chuang-jian-yi-ge-zheng-ze-biao-da-shi-dui-xiang">1、创建一个正则表达式对象</span><a href="#p1-chuang-jian-yi-ge-zheng-ze-biao-da-shi-dui-xiang" class="header-anchor">#</a></h3>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// （1）允许从字符串动态构造模式</span>
reg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"pattern"</span><span class="token punctuation">,</span> <span class="token string">"flags"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// （2）常用</span>
reg2 <span class="token operator">=</span> <span class="token regex">/pattern/</span><span class="token punctuation">;</span>
reg3 <span class="token operator">=</span> <span class="token regex">/pattern/gim</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果要在字符串中搜索，可以使用 <code>search()</code> 。这个方法返回匹配项的索引位置，如果没找到返回<code>-1</code>。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 例子</span>

<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">"I love you!"</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex">/love/</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>test()</code></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 匹配就是 true</span>
<span class="token comment">// 不匹配就是 false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3><span id="p2-yuan-zi-fu">2、元字符</span><a href="#p2-yuan-zi-fu" class="header-anchor">#</a></h3>
<table>
<thead>
<tr>
<th>元字符</th>
<th>表述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>.</code></td>
<td>除了<code>\n</code>之外任意单个字符</td>
</tr>
<tr>
<td><code>[]</code></td>
<td>表示一个范围 / 去除元字符串原有的作用<br>- <code>[0-9]</code> 0-9 之间任意的单个数字<br>- <code>[a-zA-Z]</code> 表示任意一个字母<br>- <code>[.]</code> 表示单纯的<code>.</code></td>
</tr>
<tr>
<td><code>          |</code></td>
<td>或者<br>- <code>[a-z] | [0-9]</code> 小写字母或者数字</td>
</tr>
<tr>
<td><code>()</code></td>
<td>提升优先级 / 分组（第几组从左开始数<code>(</code>）</td>
</tr>
<tr>
<td><code>\b</code></td>
<td>单词的边界</td>
</tr>
<tr>
<td><code>\d</code> / <code>\D</code></td>
<td>数字 / 非数字</td>
</tr>
<tr>
<td><code>\s</code> / <code>\S</code></td>
<td>空白字符 | 非空白符</td>
</tr>
<tr>
<td><code>\w</code> / <code>\W</code></td>
<td>非特殊符号 | 特殊符号（下划线不是特殊符号）</td>
</tr>
<tr>
<td><code>^</code></td>
<td>开头 / 取反（在<code>[]</code> 里面）</td>
</tr>
<tr>
<td><code>$</code></td>
<td>结尾</td>
</tr>
</tbody>
</table>
<h3><span id="p3-xian-ding-fu">3、限定符</span><a href="#p3-xian-ding-fu" class="header-anchor">#</a></h3>
<p>限定符也是一种元字符，限定某些表达式出现的次数。</p>
<table>
<thead>
<tr>
<th>限定符</th>
<th>表述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&#123;&#125;</code></td>
<td>该限定符前面的表达式出现的次数<br>- <code>[a-z]&#123;5&#125;</code> 出现 5 次 <br>- <code>[a-z]&#123;5,&#125;</code> 出现 5 次或者多次 <br>- <code>[0-9]&#123;0,1&#125;</code> 出现 0 次或者 1 次</td>
</tr>
<tr>
<td><code>*</code></td>
<td>表示前面的表达式出现 0 次或者多次</td>
</tr>
<tr>
<td><code>+</code></td>
<td>表示前面的表达式出现 1 次或者多次</td>
</tr>
<tr>
<td><code>?</code></td>
<td>表示前面的表达式出现 0 次或者 1 次</td>
</tr>
</tbody>
</table>
<h3><span id="p4-xiu-shi-fu">4、修饰符</span><a href="#p4-xiu-shi-fu" class="header-anchor">#</a></h3>
<p>正则表达式的修饰符影响搜索结果，在 JS 中有五个修饰符：</p>
<table>
<thead>
<tr>
<th>修饰符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>i</td>
<td>搜索不区分大小写</td>
</tr>
<tr>
<td>g</td>
<td>搜索会查找所有的匹配项，而不是第一个</td>
</tr>
<tr>
<td>m</td>
<td>多行模式</td>
</tr>
<tr>
<td>u</td>
<td>开启完整的 unicode 支持</td>
</tr>
<tr>
<td>y</td>
<td>粘滞模式</td>
</tr>
</tbody>
</table>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">"I love you!"</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token regex">/LOVE/</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token regex">/LOVE/i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>搜索默认是区分大小写的。</p>
<h3><span id="p5-zhuan-yi">5、转义</span><a href="#p5-zhuan-yi" class="header-anchor">#</a></h3>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token operator">/</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h1><span id="er-ying-yong">二、应用</span><a href="#er-ying-yong" class="header-anchor">#</a></h1>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 邮编</span>
<span class="token operator">=</span><span class="token regex">/[1-9][0-9]&#123;5&#125;/</span>

<span class="token comment">// 手机号码</span>
<span class="token operator">=</span><span class="token regex">/[1][0-9]&#123;10&#125;/</span>
<span class="token operator">=</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">358</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">9</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>

<span class="token comment">// 邮箱的正则 重要</span>
<span class="token comment">// fsdffisdhfuid @ dadjhasdhuyudga   .com.cn</span>
<span class="token operator">=</span><span class="token regex">/[a-zA-Z0-9_.-]+[@][a-zA-Z0-9_.-]+([.][a-zA-Z]+)&#123;1,2&#125;/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/220601/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#666; font-size:12px; padding:3px; border:1px solid #666;">220601</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/220601/" class="post-title-link" itemprop="url">TypeScript</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-01 00:27:28" itemprop="dateCreated datePublished" datetime="2021-02-01T00:27:28+08:00">2021-02-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-02 16:16:28" itemprop="dateModified" datetime="2021-02-02T16:16:28+08:00">2021-02-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2206%EF%BC%9ATypeScript/" itemprop="url" rel="index"><span itemprop="name">2206：TypeScript</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2><span id="pjie-kou-interface">接口 <code>interface</code></span><a href="#pjie-kou-interface" class="header-anchor">#</a></h2>
<p>约束对象</p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript">interface P &#123;
  name: string;
  age: number;
  like: any[];
  sex?: string; &#x2F;&#x2F; 可以有也可以没有
&#125;

const person: P &#x3D; &#123;
  name: &quot;Tom&quot;,
  age: 10,
  like: [&quot;吃饭&quot;, 123],
&#125;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/220504/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#666; font-size:12px; padding:3px; border:1px solid #666;">220504</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/220504/" class="post-title-link" itemprop="url">NodeJS 核心模块</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-31 14:01:52" itemprop="dateCreated datePublished" datetime="2021-01-31T14:01:52+08:00">2021-01-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-01 19:14:03" itemprop="dateModified" datetime="2021-02-01T19:14:03+08:00">2021-02-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2205%EF%BC%9ANodeJS/" itemprop="url" rel="index"><span itemprop="name">2205：NodeJS</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1><span id="node-he-xin-mo-kuai">Node 核心模块</span><a href="#node-he-xin-mo-kuai" class="header-anchor">#</a></h1>
<h1><span id="process">process</span><a href="#process" class="header-anchor">#</a></h1>
<p>进程模块，无需<code>require</code>。</p>
<p><code>.MODE_ENV</code> 设置是开发环境还是生产环境</p>
<p><code>cwd()</code> 返回当前进程的绝对路径</p>
<p><code>exit()</code></p>
<h1><span id="buffer-mo-kuai">buffer 模块</span><a href="#buffer-mo-kuai" class="header-anchor">#</a></h1>
<p><code>Buffer</code> 是一个和数组类似的对象，是专门用来保存二进制数据的（数据储存为二进制数据，性能是最好的）。</p>
<p>在全局作用域上，不需要引用直接使用。</p>
<p>1 Byte = 8 bit</p>
<p>一个字母 1 字节</p>
<p>一个汉字或者全角 3 字节</p>
<h1><span id="path-mo-kuai-chang-yong">path 模块 <code>常用</code></span><a href="#path-mo-kuai-chang-yong" class="header-anchor">#</a></h1>
<p><code>path</code> 是专门用于处理文件路径、目录的核心模块。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2><span id="presolve">resolve</span><a href="#presolve" class="header-anchor">#</a></h2>
<p><code>resolve</code> 方法将目录或者路径片段的序列解析成绝对路径。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"./index.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2><span id="phuo-qu-dang-qian-wen-jian-jia">获取当前文件夹</span><a href="#phuo-qu-dang-qian-wen-jian-jia" class="header-anchor">#</a></h2>
<p><code>__dirname</code> 表示当前目录。</p>
<p>常用 <code>path.resolve(__dirname, &quot;xxxx&quot;)</code></p>
<h1><span id="fs-mo-kuai-chong-dian">fs 模块 <code>重点</code></span><a href="#fs-mo-kuai-chong-dian" class="header-anchor">#</a></h1>
<p><code>fs</code> 就是 <code>file system</code> 是 NodeJS 核心的文件系统。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"fs"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>该模块大部分方法提供了两个版本的方法，同步和异步。</p>
<ul>
<li>
<p>同步方法 带<code>sync</code>的方法</p>
<p>同步方法会阻塞程序的执行</p>
<p>同步方法通过返回值返回结果</p>
</li>
<li>
<p>异步方法 不带 sync 的方法</p>
<p>异步方法不会阻塞程序的执行</p>
<p>异步方法都是通过回调函数来返回结果的</p>
</li>
</ul>
<h2><span id="pwen-jian-de-du-qu">文件的读取</span><a href="#pwen-jian-de-du-qu" class="header-anchor">#</a></h2>
<h3><span id="p-1-jian-dan-du-qu-wen-jian">（1）简单读取文件</span><a href="#p-1-jian-dan-du-qu-wen-jian" class="header-anchor">#</a></h3>
<p><code>fs.readFileSync(path[, options])</code><br>
<code>fs.readFile(path[, options], callback)</code></p>
<ul>
<li>
<p>path 读取文件的路径</p>
</li>
<li>
<p>options 配置对象 默认如下： <code>&#123;encoding:&quot;utf8&quot;,flag:&quot;w&quot;,mode:0666&#125;</code></p>
</li>
<li>
<p>callback 回调函数，通过回调函数返回读取到的数据</p>
<p>err 错误对象</p>
<p>data 返回的数据（Buffer）</p>
</li>
</ul>
<h3><span id="p-2-shi-yong-promisify-jie-jue-yi-bu-wen-ti">（2）使用 promisify 解决异步问题</span><a href="#p-2-shi-yong-promisify-jie-jue-yi-bu-wen-ti" class="header-anchor">#</a></h3>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">//案例1</span>
<span class="token keyword">const</span> <span class="token punctuation">&#123;</span> promisify <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"util"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> readFile <span class="token operator">=</span> <span class="token function">promisify</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span>readFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">"./conf.js"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span>
  <span class="token comment">//案例2</span>
  <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"fs"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> promisify <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"util"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> readFile <span class="token operator">=</span> <span class="token function">promisify</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span>readFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">"./index.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3><span id="p-3-liu-shi-du-qu-wen-jian">（3）流式读取文件</span><a href="#p-3-liu-shi-du-qu-wen-jian" class="header-anchor">#</a></h3>
<p>适用于较大的文件。</p>
<h2><span id="pwen-jian-de-xie-ru">文件的写入</span><a href="#pwen-jian-de-xie-ru" class="header-anchor">#</a></h2>
<h3><span id="p-1-tong-bu-xie">（1）同步写</span><a href="#p-1-tong-bu-xie" class="header-anchor">#</a></h3>
<p>打开，写入，==关闭==。</p>
<p><code>fs.openSync(path[, flags, mode])</code></p>
<ul>
<li>
<p><code>path</code> 文件路径</p>
</li>
<li>
<p><code>flag</code> 文件系统标志<br><code>a</code> 追加，如果不存在就创建<br><code>w</code> 用于写，如果不存在就创建，存在覆盖<br><code>r</code> 用于读，如果不存在就异常（默认）</p>
</li>
<li>
<p><code>mode</code> 设置下一次打开文件时候的权限。<br><code>0o666</code> <code>110110110</code> 可读可写<br><code>0o111</code> <code>001001001</code> 可执行<br><code>0o222</code> <code>010010010</code> 可写<br><code>0o333</code> <code>100100100</code> 可读</p>
</li>
<li>
<p>返回文件描述符</p>
</li>
</ul>
<p><code>fs.writeSync(fd, buffer[, offset, length, position, encoding])</code></p>
<ul>
<li><code>fd</code> 文件描述符</li>
<li><code>buffer</code> 要写入的内容</li>
<li><code>offset</code></li>
<li><code>length</code></li>
<li><code>position</code></li>
<li><code>encoding</code> 写人文件的编码，默认<code>utf-8</code></li>
</ul>
<p><code>fs.closeSync(fd)</code></p>
<h3><span id="p-2-yi-bu-xie">（2）异步写</span><a href="#p-2-yi-bu-xie" class="header-anchor">#</a></h3>
<p><code>fs.open( path, flags[, ], (err, data)=&gt;&#123;&#125;)</code></p>
<ul>
<li>回调函数<code>err</code>在前是因为 NodeJS 是==错误优先处理机制==。如果有错误返回错误对象，否则返回<code>null</code>。<code>data</code> 就是文件描述符。</li>
<li>异步得到结果在回调函数中。</li>
</ul>
<p><code>fs.write(fd, string, call, (err, data)=&gt;&#123;&#125;)</code></p>
<p><code>fs.close(fd)</code></p>
<p>无论写入成功或者失败都要关闭文件。</p>
<h2><span id="pliu-shi-wen-jian-cao-zuo">流式文件操作</span><a href="#pliu-shi-wen-jian-cao-zuo" class="header-anchor">#</a></h2>
<ul>
<li>fs 模块处理文件的缺点：将文件的数据全读到内存中，在把数据写到文件内，会大量占用内存</li>
<li>流（stream）是 Node.js 中处理流式数据的抽象接口，是一组有序的，有起点和终点的字节数据传输手段。可以实现将数据从一个地方流动到另一个地方，其边读取边写入的特点有别于 fs 模块的文件处理，并且可以做到控制读取文件和写入文件的速度，从而减少内存的占用</li>
<li>流是基于事件的，所有的流对象都用 on(once)绑定事件，并触发</li>
<li>流式文件写入适用于一些比较大的文件，可以分多次向文件中写入内容，有效避免内存溢出的问题。</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">fs.createWriteStream(path[, options])<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"fs"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> inputFilePath <span class="token operator">=</span> <span class="token string">"//Users//lipeihua//Desktop//nodeJS//08.简单文件写入.mp4"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> outputFilePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"d.mp4"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 创建可读流 会自动关闭</span>
<span class="token keyword">const</span> rs <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span>inputFilePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 创建可写流 不会自动关闭，需要手动关闭</span>
<span class="token keyword">const</span> ws <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span>outputFilePath<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* rs.on('data', (chunk) => &#123;
  // 当数据读取出来，要写入成另外一个文件
  ws.write(chunk);
&#125;)
.once('end', () => &#123;
  // 可读流全部读取完毕了，关闭可写流
  ws.end();
&#125;) */</span>

<span class="token comment">// pipe会持续性消费可读流数据</span>
<span class="token comment">// 将可读流数据写入到可写流中</span>
<span class="token comment">// 会自动关闭可写流</span>
rs<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>ws<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1><span id="events-mo-kuai">events 模块</span><a href="#events-mo-kuai" class="header-anchor">#</a></h1>
<p>事件触发器。</p>
<p><code>once()</code> 函数可注册最多只监听一次的函数。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/220503/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#666; font-size:12px; padding:3px; border:1px solid #666;">220503</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/220503/" class="post-title-link" itemprop="url">NodeJS 版本管理</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-08 18:12:45" itemprop="dateCreated datePublished" datetime="2021-01-08T18:12:45+08:00">2021-01-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-01 19:13:48" itemprop="dateModified" datetime="2021-02-01T19:13:48+08:00">2021-02-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2205%EF%BC%9ANodeJS/" itemprop="url" rel="index"><span itemprop="name">2205：NodeJS</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1><span id="nodejs-ban-ben-guan-li">NodeJS 版本管理</span><a href="#nodejs-ban-ben-guan-li" class="header-anchor">#</a></h1>
<h2><span id="pyi-n">一、<code>n</code></span><a href="#pyi-n" class="header-anchor">#</a></h2>
<p>用于 Mac 系统。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"># 安装
sudo npm i -g n
# 安装指定版本的 node.js
sudo n 12.18.2
# 切换
sudo n<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2><span id="per-nvm">二、<code>NVM</code></span><a href="#per-nvm" class="header-anchor">#</a></h2>
<p>用于 Windows 系统。<br>
全称 <code>Node.js Version Management</code></p>
<ul>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/coreybutler/nvm-windows/releases">下载</a>，推荐使用 <code>nvm-setup.zip</code></p>
</li>
<li>
<p>相关命令</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"># 查看已经安装的node版本
nvm ls
# 安装对应的版本 
nvm install xxx
# 卸载
nvm uninstall xxx
# 使用
nvm use xxx<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">KEEL</p>
  <div class="site-description" itemprop="description">这个人很懒，什么都没留下。 </div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">193</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">81</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">46</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">KEEL</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>











<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

  

</body>
</html>
