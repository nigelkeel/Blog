<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"nigelkeel.gitee.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="这个人很懒，什么都没留下。">
<meta property="og:type" content="website">
<meta property="og:title" content="永远的伊尔瓦">
<meta property="og:url" content="http://nigelkeel.gitee.io/page/2/index.html">
<meta property="og:site_name" content="永远的伊尔瓦">
<meta property="og:description" content="这个人很懒，什么都没留下。">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="KEEL">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://nigelkeel.gitee.io/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>
  <title>永远的伊尔瓦</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="stylesheet" href="/css/prism-material-oceanic.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">永远的伊尔瓦</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">个人知识库</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/random" rel="section"><i class="fa fa-sitemap fa-fw"></i>随机</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/730114/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#ddd; font-size:20px; font-weight: 888; ">730114</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/730114/" class="post-title-link" itemprop="url">摘抄集 / 2014年</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-03 00:59:59 / 修改时间：01:15:00" itemprop="dateCreated datePublished" datetime="2021-02-03T00:59:59+08:00">2021-02-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/7301%EF%BC%9A%E6%91%98%E6%8A%84/" itemprop="url" rel="index"><span itemprop="name">7301：摘抄</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.6k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ol>
<li>Love never ends. 爱是永不止息。—— Corinthians. 哥林多前书</li>
<li>这才知道我的全部努力，不过完成了普通的生活。 —— 穆旦《冥想》</li>
<li>爱自己是终身浪漫的开始。—— 奥斯卡·王尔德</li>
<li>与怪物战斗的人，应当小心自己不要成为怪物。当你凝视深渊时，深渊也在凝视着你。―― 尼采</li>
<li>Histories make men wise; Poems witty; The mathematics subtle; Natural philosophy deep; Moral grave; Logic and rhetoric able to contend. 历史使人明智；诗词使人灵秀；数学使人周密；自然哲学使人深刻；伦理使人庄重；逻辑修辞学使人善辨。—— Francis Bacon , British philosopher（英国哲学家，弗朗西斯·培根）</li>
<li>时间决定你会在生命中遇见谁，你的心决定你想要谁出现在你的生命里，而你的行为决定最后谁能留下。<br>
—— 戴维·梭罗《瓦尔登湖》</li>
<li>我们都在阴沟里，但仍有人仰望星空。—— 奥斯卡·王尔德</li>
<li>未经审视的人生不值得一过。—— 苏格拉底</li>
<li>唯一配得上一个高等生物的理智态度，就是对不属于他的一切保持平静和冷淡的同情心。不是说这种态度有什么正当或真理的因子，而是说它如此令人艳羡，他必须接受它。—— 佩索阿 《不安选集》</li>
<li>不能让你毁灭的使你强大。―― 尼采</li>
<li>我贴在地面步行，不在云端跳舞。—— 维特根斯坦</li>
<li>大多数人在二十岁或三十岁就死了，他们变成自己的影子，往后的生命只是一天天不断地复制自己。—— 罗曼·罗兰</li>
<li>我穿过一个个城市，只为遇见你；路过的每一个你，都曾呼唤我的名字。<br>
我爱你的双脚，还因为，它们曾踏遍土地，蒙受风尘，涉过水渠，直到你与我相遇。<br>
我不再爱她，这是确定的，但我也许爱她，爱情太短，而遗忘太长。<br>
—— 聂鲁达</li>
<li>他穿过人群走到她跟前，仅仅是为了跟她说：“那时候，你还很年轻，人人都说你美。现在，我是特意来告诉你，对我来说，我觉得现在你比年轻的时候更美。与你那时的面貌相比，我更爱你现在备受摧残的面容。”如果有一天，你不再害怕饥寒交迫、不再害怕孤单寂寞。你不会因为你的生活是个冰冻星球，需要一个闪闪发亮的人来拯救。你还是对她念念不忘，我想你一定是爱她的。—— 杜拉斯《情人》</li>
<li>她留着长长的黄色卷发，穿着白色的拖地长裙。</li>
<li>当一个人不能拥有的时候，他唯一能做的便是不要忘记。—— 普鲁斯特</li>
<li>除了没用的肉体自杀和精神逃避，第三种自杀的态度是坚持奋斗，对抗人生的荒谬。—— 加缪</li>
<li>尽管眼泪是无色的，却会使眼睛变红。—— 阿诺什·艾拉尼《没有悲伤的城市》</li>
<li>诗人从跃动、喧嚣不已的现实中唤出幻境和梦。—— 马丁·海德格尔</li>
<li>河的东岸正被乌沉沉的暝色所侵袭。</li>
<li>窗外星光闪耀，宇宙在猎户星座肩旁熊熊燃烧。</li>
<li>我喜欢你，因为你比我更像我自己。—— 艾米丽·勃朗特《呼啸山庄》</li>
<li>你身体里的每一个原子都来自一颗爆炸了的恒星,你左手的原子与右手的原子也许来自不同的恒星。这实在是我所知道的物理学中最富诗意的东西：你的一切都是星尘。星星都死去了，你今天才能在这里。</li>
<li>我是你路上最后的一个过客，最后的一个春天，最后的一场雪，最后的一次求生的战争。—— 保尔·艾吕雅</li>
<li>并不是所有黑暗的地方，都需要光明。—— 温特森</li>
<li>水来我在漩涡中等你，火来我在灰烬中等你。—— 洛夫</li>
<li>From small beginning come great things. 伟大始于渺小。</li>
<li>天下熙熙，皆为利来，天下攘攘，皆为利往。——《史记·货殖列传》</li>
<li>你最可爱，我说时来不及思索，但思索之后，还是这样说。—— 普希金</li>
<li>诸神的黄昏，整个天空都是玫瑰红色的，好像小王子的花。</li>
<li>星河里望一眼光年，尘埃里写一幕时间，云海里读一页情书，海岸边坐一夜枯骨。就算时光魂飞魄散。不管是你行将就木，躺在铺满天鹅绒的木床上。还是你心怀碎裂，以为自己走到了世界尽头。闭上眼，就可以看见少年爱人的脸。他依然会穿过时间，越过整饬的青春残骸，带着这一页仍有余温的表白，安抚你心底的波涛。</li>
<li>一天是永恒的缩影。—— 爱默生</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/730110/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#ddd; font-size:20px; font-weight: 888; ">730110</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/730110/" class="post-title-link" itemprop="url">摘抄集 / 天南地北</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-03 00:58:00 / 修改时间：01:15:14" itemprop="dateCreated datePublished" datetime="2021-02-03T00:58:00+08:00">2021-02-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/7301%EF%BC%9A%E6%91%98%E6%8A%84/" itemprop="url" rel="index"><span itemprop="name">7301：摘抄</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>22k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li>瑞士杜欧克斯堡村登山吊车站旁，有一张印上三种文字的告示。英文的字句是：“请勿摘花。”德文写着：“禁止摘花。”法文是：“爱山的人让花留在山上。”</li>
<li>爱尔兰结婚不许离婚，但是可以选择年限1到100年，<br>
过期不续期就相当于自动离了，但是时间越短费用越高，1年的登记费折合人民币2万多，100年的只要6元钱。选择结婚一年的，有一本好厚的关于婚姻的书要看，而选择100年只一张纸，上面写着一句：祝你白头到老。</li>
<li>1973年10月17日，沙龙指挥的师穿透埃及战线，重新占领苏伊士运河沿岸。<br>
随后，以色列军队甚至跨过运河，推进到距开罗仅101公里处，切断了埃及进攻主力第3军的退路。</li>
<li>1981年6月7日，以色列空军8架F-16A战斗机在6架F-15A战斗机掩护下展开了歌剧行动，<br>
旨在摧毁伊拉克的奥西拉克核反应堆。以色列称这次行动为歌剧行动。</li>
<li>苏格兰有一巨大威士忌酒窖（藏酒值3亿英镑），20多年来都由80只鹅负警戒之责，而且从未失窃。<br>
因此，苏格兰打算增加鹅数。</li>
<li>震网病毒又名Stuxnet病毒，是一个席卷全球工业界的病毒。<br>
于2010年6月首次被检测出来，是第一个专门定向攻击真实世界中基础（能源）设施的“蠕虫”病毒，比如核电站，水坝，国家电网。互联网安全专家对此表示担心。作为世界上首个网络“超级破坏性武器”，Stuxnet的计算机病毒已经感染了全球超过 45000个网络，伊朗遭到的攻击最为严重，60%的个人电脑感染了这种病毒。计算机安防专家认为，该病毒是有史以来最高端的“蠕虫”病毒。蠕虫是一种典型的计算机病毒，它能自我复制，并将副本通过网络传输，任何一台个人电脑只要和染毒电脑相连，就会被感染。“震网”病毒利用了微软视窗操作系统之前未被发现的4个漏洞。通常意义上的犯罪性黑客会利用这些漏洞盗取银行和信用卡信息来获取非法收入。而“震网”病毒不像一些恶意软件那样可以赚钱，它需要花钱研制。这是专家们相信“震网”病毒出自情报部门的一个原因。据全球最大网络保安公司赛门铁克（Symantec）和微软（Microsoft）公司的研究，近60%的感染发生在伊朗，其次为印尼（约20%）和印度（约10%）， 阿塞拜疆、美国与巴基斯坦等地亦有小量个案。由于“震网”感染的重灾区集中在伊朗境内。美国和以色列因此被怀疑是“震网”的发明人。这种新病毒采取了多种先进技术，因此具有极强的隐身和破坏力。只要电脑操作员将被病毒感染的U盘插入USB接口，这种病毒就会在神不知鬼不觉的情况下(不会有任何其他操作要求或者提示出现)取得一些工业用电脑系统的控制权。</li>
<li>津巴布韦是非洲东南部内陆国家。<br>
公元1100年前后开始形成中央集权国家。13世纪马卡伦加人建立莫诺塔帕王国，15世纪初王国达到鼎盛时期。1890年沦为英国南非公司殖民地，1923年英国政府接管该地，并给予“自治领地”地位。1980年4月18日独立。津巴布韦在1980年之前原本称为罗得西亚，这名字源自于替英国在这地区建立殖民地的塞西尔·罗兹。津巴布韦曾经经历了严重的恶性通货膨胀，但从2009年用美元和南非兰特替代本国货币后，通货膨胀开始逐渐趋于稳定。津巴布韦是非洲工业较发达的国家，制造业、农业、矿业为经济三大支柱，津巴布韦以出产优质鳄鱼皮而闻名，有“鳄鱼之乡”的誉称。该国自然资源丰富，工农业基础较好。哈拉雷是津巴布韦首都和最大城市，津巴布韦政治、经济、文化中心。位于国境东北高原上。海拔1480米，年降水量1000毫米左右，年均气温18℃。常年凉爽如春，四季宜人。哈拉雷面积477平方千米，人口约86万。由于在2009年之前受到了危害性极大的恶性通货膨胀冲击，若要恢复至上世纪90年代的水平仍旧需要天文数字的资金。2011年8月30日英国经济学家信息社将津巴布韦的首都哈拉雷(Harare)评为全球最不适合居住的城市。哈拉雷始建于1890年，当时英国殖民者为侵略津巴布韦而兴建的城堡。19～20世纪，殖民者不断进行城市扩建，城市初具规模。1935年设市。原名索尔兹伯里，1982年4月18日津巴布韦独立2周年时，将首都更名为哈拉雷。为全国重要的工业城市，工业产值仅次于布拉瓦约居全国第二。因其周围60千米地下遍布铬矿，故有铬都美称。有金属冶炼、卷烟、炼油、化肥、纺织、造纸、橡胶、金属加工、食品、车辆修配等工业部门。为世界较大的烟草集散市场之一，每年3～11月各国烟商云集，交易繁忙。为全国的交通中心，哈拉雷国际机场设备先进，与邻国有定期的航班往来。文教事业发达，津巴布韦大学位于北郊，多体育运动场所，还有博物馆、国家档案馆、国家美术馆、地质博物馆和国家植物园等。</li>
<li>英国海温坎姆选新市长时，总依据古例，要当众把全部市议会议员的体重量一下，<br>
哪一位比上任前轻了或和上任前一样重的，便获得热烈的鼓掌。这证明他没有靠民脂民膏发胖。</li>
<li>英国诗人柯勒律治把读者分为四类：<br>
第一类好比计时的沙漏，读书像漏沙，注进去，漏出来，到头来一点痕迹也没有留下；第二类好像海绵，什么都吸收，挤一挤，流出来的东西原封不变，甚至还脏了些；第三类像滤豆浆的布袋，豆浆都流了，留下的只有豆渣；第四类像是宝石矿床里的苦工，把矿渣甩一旁，只拣些纯净的宝石。</li>
<li>巴西东北部的西阿拉省气候干燥，常年阳光普照，令人感到单调乏味。<br>
碰到阴天，西阿拉人会额手相告：“天气真好！”</li>
<li>在希腊爱琴海的一个小岛上，有一个名叫阿罗斯安塔利亚的小城。<br>
每当大雨滂沱时，全城就会出现一望无际的肥皂“海洋”。这个城下的岩石含有大量的碱性物质，遇水就起泡泡。城市里的居民洗衣时，只要随手捡一土块就可当“肥皂”用。</li>
<li>郑桓公准备袭击郐国时，先打听郐国有哪些豪杰、良臣和明智果断的人士。<br>
全部记下他们的名字，选择郐国好的田地写在他们名下表示已通贿赂，又在他们名下写上官爵名称表示已被收买。然后假装在外城门外设了坛场，把有关记录掩埋在下面，洒上鸡和猪的血来加以祭祀，像结盟似的。郐君相信了这些假证据，因而杀了全部良臣。郑桓公偷袭郐国时，郐国已经没有可用之材了。郑桓公的儿子郑武公最终彻底灭亡郐国。</li>
<li>现代射电天文望远镜正常工作所需要的能量是巨大的，然而它所接收到的能量却微乎其微。<br>
世界上所有的射电天文望远镜所接收到的还抵不上一片雪花“撞”到地面上所产生的能量。</li>
<li>我在洛杉矶一著名咖啡厅闲坐，发现一件怪事：<br>
许多人会多付一杯的钱，然后让服务生“贴墙上”；而服务生就在墙上贴张纸，写着“一杯咖啡”后来我又到那里，这时进来一人，穿着寒酸。他看看墙上说：“墙上的一杯咖啡。”服务生恭敬地端上咖啡，那人喝完没结账就走了。正当我惊讶时，服务生从墙上揭下一张纸。原来如此。那些顾客在享受咖啡时，会想到同样喜欢、却无力支付的人们；这里的服务生，面对穷人依旧恭敬，让对方无须放弃尊严，而只需看看墙上，那面墙，远比咖啡更加美好。</li>
<li>外出就餐，点菜是一门费神的艺术。<br>
伦敦商学院的新研究认为：要想吃得开心，最好尽快点完菜，撤走菜单。研究者认为，这可停止对选择的评估，更好地享受选定的菜肴；如果反复修改，满意度会不断降低。有实验显示：A组顾客所在商店，提供24种风味的果酱，B组只有6种选择。结果A组的购买人数，只有B组的15%。为何选择越多越不满意？诺贝尔经济奖得主康纳曼：人们对“失去”的心理反应，远强于“得到”；当你必须做出决定，更多选择意味更多“失去”，烦恼随之增加。</li>
<li>1957年9月29日，前苏联乌拉尔山中的秘密核工厂“车里雅宾斯克65 号”一个装有核废料的仓库发生大爆炸，<br>
迫使苏联当局紧急撤走当地11000名居民。1957年10月7日，英国东北岸的温德斯凯尔一个核反应堆发生火灾，这次事故产生的放射性物质污染了英国全境，至少有39人患癌症死亡。1961年1月3日，美国爱荷华州一座实验室里的核反应堆发生爆炸，当场炸死3名工人。1967年夏天，前苏联“车里雅宾斯克65号”用于储存核废料的“卡拉察湖”干枯，结果风将许多放射性微粒子吹往各地，当局不得不撤走了9000名居民。1971年11月9日，美国明尼苏达州“北方州电力公司”的一座核反应堆的废水储存设施发生超库存事件，结果导致5000加仑放射性废水流入密西西比河，其中一些水甚至流入圣保罗的城市饮水系统。1979年3月28日，美国三里岛核反应堆因为机械故障和人为的失误而使冷却水和放射性颗粒外逸，但没有人员伤亡报告。1979年8月7日，美国田纳西州浓缩铀外泄，结果导致1000人受伤。1986年1月6日，美国俄克拉荷马一座核电站因错误加热发生爆炸，结果造成一名工人死亡，100人住院。</li>
<li>1986年4月26日，整个世界见证了历史上最昂贵的事故。<br>
切尔诺贝利核电站事故被称作和平时期历史上最大的社会经济大灾难。乌克兰50%的区域被污染，超过20万人需要转移并安置，170万人受到这场灾难的直接影响。切尔诺贝利造成的死亡人数，包括几年后因癌症死亡的，估计有12.5万人。总共的花费包括清理，替换，补偿受害者粗略估计就有2000亿美元。切尔诺贝利核心工厂需要花费20亿美元建造新的钢铁掩蔽层。这场事故官方认定为电力工厂操作员违反工厂程序并且忽视安全需要。切尔诺贝利核电站发生大爆炸后，其放射性云团直抵西欧，造成约八千人死于辐射导致的各种疾病。爆炸最终导致20多万平方公里的土地受到污染，今天的乌克兰、俄罗斯和白俄罗斯受到的核污染最严重。这次事故造成的放射性污染遍及前苏联15万平方公里的地区，那里居住着694.5万人。由于这次事故，核电站周围30公里范围被划为隔离区，附近的居民被疏散，庄稼被全部掩埋，周围7000米内的树木都逐渐死亡。在日后长达半个世纪的时间里，10公里范围以内将不能耕作、放牧；10年内100公里范围内被禁止生产牛奶。切尔诺贝利的核辐射通过风力、雨水等传播途径，污染了乌克兰、白俄罗斯、俄罗斯等一些堪称世界上最富饶的土壤。切尔诺贝利核事故所泄漏的放射性粉尘有70%飘落在白俄罗斯境内。事故发生初期，白俄罗斯大部分公民都受到不同程度的核辐射，6000平方公里土地无法使用，400多个居民点成为无人区，政府不得不关闭了600多所学校、300多个企业以及54个大型农业联合体。</li>
<li>1962年7月22日，一枚命名为“水手1号”的火箭，在飞往金星途中，突然偏离预定的轨道，凌空爆炸。<br>
随即进行的调查表明，导致这次事故的原因是，在控制火箭飞行的电脑程序中省略了一个连字号（一）。只是因为缺少了这么一个小小的标点符号，竟使美国国民损失了1.85千万美元。</li>
<li>“挑战者”号在卡纳维拉尔角发射基地起飞后，以三倍于音速的速度升到佛罗里达五万英尺的蓝天时发生爆炸。<br>
爆炸后，航天飞机变成熊熊燃烧的巨大火球，拖着长蛇般的、然后分叉的火焰和黄白色浓烟坠入距发射地点20英里外的大西洋。燃烧着的飞机碎片散落在广阔的海面，持续了一个小时。这架耗资12亿美元的航天飞机失事后，美国全国上下极为震动，人们几乎中断了一切活动，等待有关这场灾难的详细消息。各大电视网作了整天的特别报道。华盛顿和全国各地下半旗致哀。纽约市通常灯火辉煌的帝国大厦今晚熄了灯火，以示哀悼。</li>
<li>在一切数中，人们认为最重要和常用的共有五个，即0、1、i、π、e。<br>
数学家欧拉在1748年曾得出了一个著名公式：<br>
eix＝cos x＋isin x。<br>
令x＝π，则可得出：<br>
eiπ＋1＝0。<br>
这真是一个绝妙的公式，它把这五个最重要的数，用最简洁的方式联系起来。</li>
<li>古今最大的动物是什么？<br>
是现在仍然生存的蓝鲸。久已绝迹的恐龙很大，有些身长约二十七公尺，体重高达四、五十吨，但跟蓝鲸一比，还是小巫见大巫。捕鲸人捉到的蓝鲸，最长的超过三十公尺，体重达到一百吨以上。</li>
<li>每次下雨，五光十色的热带鸟杜拉克就要脱毛。</li>
<li>候鸟做距离最远的不着陆飞行是从阿留申群岛到夏威夷群岛。全程4500公里，要不歇气地飞行48—72小时。</li>
<li>鹦鹉鱼（Amphilophus）学名洛神颈鳍鱼，隆头鱼科的属类，俗称有鹦哥鱼、鹦嘴鱼、红楔鲷等，<br>
是生活在珊瑚礁中的热带鱼类。因其色彩艳丽，嘴型酷似鹦鹉嘴型而得名。另有一种由美洲慈鲷雄红魔鬼鱼和紫红火口杂交培育成的淡水赏观鱼，因体色鲜红，又称为血鹦鹉。每当涨潮的时候，大大小小的鹦鹉鱼披着绿莹莹、黄灿灿的外衣，从珊瑚礁外的斜坡的深水中游到浅水礁坪和泻湖中。鹦鹉鱼有特殊的消化系统。鹦鹉鱼用它们板齿状的喙将珊瑚虫连同它们的骨骼一同啃下来，再用咽喉齿磨碎珊瑚虫，然后吞入腹中。有营养的物质被消化吸收，珊瑚的碎屑被排除体外。鹦鹉鱼的咽喉齿不象牙齿一样尖利，而是演变为条石状，咽喉齿的上颌面上凸起，正好和下面的凹处相吻合。</li>
<li>坦桑尼亚的基戈马山区有一种蜡烛鼠，这种鼠全身的80％是脂肪，只要用火柴一点，就象蜡烛一样燃烧。<br>
当地人将它晒干作蜡烛或燃料。厄瓜多尔国家动物园里有不怕高温的烫鼠，它们生活在90℃左右的水中，倒显得更活泼。烫鼠在热水中演技高超，招徕了不少观众。</li>
<li>大嘴乌鸦（Corvus macrorhynchos）又叫巨嘴鸦，俗称老鸦、老鸹。<br>
是雀形目鸟类中体型最大的几个物种之一，成年的大嘴乌鸦体长可达50厘米左右。大嘴乌鸦雌雄同形同色，通身漆黑，除头顶、后颈和颈侧之外的其它部分羽毛，带有一些显蓝色、紫色和绿色的金属光泽。嘴粗大，嘴峰弯曲，峰嵴明显，嘴基有长羽，伸至鼻孔处。额较陡突。尾长、呈楔状。后颈羽毛柔软松散如发状，羽干不明显。大嘴乌鸦是杂食性鸟类，对生活环境不挑剔，无论山区平原均可见到，喜结群活动于城市、郊区等适宜的环境。主要分布于亚洲东部地区，中国全境可见。栖息于低山、平原和山地阔叶林、针阔叶混交林、针叶林、次生杂木林、人工林等各种森林类型中。喜欢在林间路旁、河谷、海岸、农田、沼泽和草地上活动，有时甚至出现在山顶灌丛和高山苔原地带。主要以蝗虫、金龟甲、金针虫等昆虫、昆虫幼虫和蛹为食。</li>
<li>南美原始密林里，有一种凶猛的蚂蚁，渡河时，几百万、几千万只聚成一个大球，滚入河水，浮动着，然后登岸。<br>
附在蚁球表面的蚂蚁被淹死了，但蚂蚁大队继续前进。一次，猎人把野猪架在篝火上，后来发现篝火熄灭了，留下白生生的骨头。原来，蚂蚁嗅到野猪肉香，便结队而来。前面的烧死了，后面的跟上来，这样，火被蚂蚁用尸体压灭了。</li>
<li>有位富豪宿于旅店，旅店正对着一个染坊。<br>
这天下午，富豪坐在窗前，美滋滋地喝着茶水欣赏街景，忽然发现几个人在窗外走过来走过去，且不断地偷眼打量对面染坊。富豪有点纳闷。一人悄悄走到富豪跟前，伏在他耳边说，我们要把这家染坊晾在外面的布匹偷走，你安静点，别声张！富豪说，我是打酱油的，你们偷东西关我屁事。鬼才多嘴呢！那人拱拱手走了。富豪想，染坊的布就晾在大街上，这人来人往的，光天化日之下，我倒要看看你们怎么偷！于是，富豪抿着茶水，饶有兴趣地看现场直播。那几个人时时经过，或左或右，渐久渐疏。傍晚时，都不见了。富豪说，嘿嘿，果然是妄人！白忙活。回转房内收拾行李，才发现所有的财物都被人拿走了。</li>
<li>世界上最慢的信，是1493年哥伦布放在瓶子内写给西班牙女皇伊萨柏拉的信。<br>
它被投入大西洋后，一直漂到1852年才给美国船长发现，整整行走了359年。</li>
<li>柏拉图说：“蠢人可以根据这两个特征很容易地加以判别：说话时总是语无伦次；回答时总是牛头不对马嘴。”</li>
<li>英国的萨弗伦沃尔登城，每年6月27日是敲钟日，<br>
这一天所有敲钟人都聚集在一起，从黎明到黄昏连续不停地敲12口古老的大钟，整个城市响彻钟声，终日不绝。据说大约在1600年6月27日，该城有一个绸布商人在森林中迷了路，后来凭借钟声才返回城里。他为此十分感激，在遗嘱中把这一天作为敲钟日，用他的钱作这一天敲钟经费。这个习俗一直传到今天。当城里许多居民在这一天都携带东西离开这里，等敲钟结束才返回。但是许多旅行者和好事者却在这一天慕名而来，欣赏盛况。</li>
<li>1969年的一天，宇航员阿姆斯特朗正在美国的一个沙漠里进行登月前的例行训练。<br>
后来在训练时，一个旁观的印第安老人听说他就要去月亮上以后，请求阿姆斯特朗替他老人家给印第安人在月球上的神明带个话。尽管完全不明白那句印第安语是什么意思，可是阿姆斯特朗还是同意了，并且很努力地把话背了下来。后来有一次，阿姆斯特朗和自己的印第安朋友聊天时想起了这件事，就把那句印第安语复述了一遍，他的印第安朋友听后狂笑不已。那句印第安语的意思是：“神啊，不要相信这些白人，他们只是想偷走您的土地。”</li>
<li>在拉瓦锡的那个年代是如何制造精密的玻璃器皿的？<br>
首先，找一个玻璃师傅，吹一个差不多大的瓶子。说到玻璃师傅，这是一个出人才的行业，比如最早记载太阳光谱里面吸收线的夫琅和费就是一个玻璃师傅。洗净，用蒸馏水润湿。然后，找一个天平，称量需要的量的蒸馏水，倒进去。在水位线位置处刻线，此处需要温度控制。最后，倒出蒸馏水，出售瓶子。</li>
<li>美国在60年代就发明的SR-71“黑鸟”侦察机1964年12月22日首飞，1966年开始服役。<br>
最大速度每小时超过3500公里，从纽约飞到伦敦不到两小时。黑鸟大部分由钛构成，理论上由于采用隐身设计在雷达的反射面非常小，然而高速飞行时具有巨大的红外特征在几百公里外就会被雷达发现。不过由于黑鸟飞的比导弹还快摆脱了上千次导弹的攻击至今没有一架被击落过。最大升限可以超过3万米的高空，作战半径达5400公里。一小时内黑鸟就能完成对面积达324000平方千米的地区的光学摄影侦察任务。形象地说，它只需要6分钟就可以拍摄得到覆盖整个意大利的高清晰度照片。黑鸟共制造了32架，由于侦察卫星的发展剩下的20架在1998年被永久退役，但至今依然没有任何一架飞机打破黑鸟创下的高速纪录。</li>
<li>鲁国有一道法律，如果鲁国人在外国见到同胞遭遇不幸，沦落为奴隶，<br>
只要能够把这些人赎回来帮助他们恢复自由，就可以从国家获得金钱的补偿和奖励。 孔子的学生子贡，把鲁国人从外国赎回来，但不却没有向国家领取金钱。孔子听说后，说：“子贡，你错了！圣人做的事，可用来改变民风世俗，教导可以传授给百姓，不仅仅是有利于自己的行为。 现在鲁国富的人少穷人多，向国家领取补偿金，对你没有任何损失；但不领取补偿金，鲁国就没有人再去赎回自己遇难的同胞了。”子路救起一名溺水者，那人感谢他送了一头牛，子路收下了。孔子高兴地说：“鲁国人从此一定会勇于救落水者了。”</li>
<li>银河系，是太阳系所在的星系，属于棒旋星系，<br>
包括1000到4000亿颗恒星和大量的星团、星云，还有各种类型的星际气体和星际尘埃。它的直径约为12万光年，中心厚度约为1.2万光年，可见物质总质量是太阳质量的大约2500万亿倍。2003年1月，英国科学家发现，银河系外围可能镶嵌着一个由数十亿颗恒星组成的巨大的环。2015年3月，科学家发现银河系体积比之前认为的要大50%。</li>
<li>球状闪电是一种自然现象。球状闪电俗称滚地雷，通常都在雷暴之下发生，形为一个呈圆球形的闪电球。<br>
这是一个真实的物理现象，它十分光亮，略呈圆球形，直径大约是15～40厘米不等。通常它只会维持数秒，但也有维持了1-2分钟的纪录。颜色除常见的橙色和红色外，还有黄色、紫色、蓝色、亮白色，幽绿色的光环。火球呈现多种多样的色彩。</li>
<li>夜光云（Noctilucent Cloud）是深曙暮期间出现于地球高纬度地区高空的一种发光而透明的波状云，<br>
距地面的高度一般在80km左右，常呈淡蓝色或银灰色，是夜光云中的冰晶颗粒散射太阳光的结果，这类冰晶颗粒的半径一般为0.05～0.5微米。夜光云看起来有点像卷云，但比它薄得多，而且颜色为银白色或蓝色，出现在落日后太阳与地平线夹角在6-15度之间的时候。这是非常自然的，因为时候太早会因为其太薄而看不见，而太迟了它也会落到地球的阴影之中去。</li>
<li>1912年，摩纳哥有一名囚犯被判死刑，根据惯例，行刑的刽子手都是从法国请来的。<br>
然而当刽子手抵达摩纳哥时，却为这“不愉快”的工作，开口要求1万法郎的报酬。摩纳哥亲王认为索价太高，他们这个小国负担不起。法国刽子手拒绝削价，便回去了。然而更便宜一点的刽子手又找不到，所以行刑只好不定期地拖延下去。这死囚是个穷苦人，没有家也没有亲戚，他在监牢里生活，自然舒适多了。但是他的开销却成为这小国家的负担，他是监牢里的唯一囚犯，也是全国唯一的囚犯。日子这样地过下去，看管囚犯以及囚犯本身的生活费，却越积越高了。终于，不得不想个办法了。如果囚犯肯安分守己，不做逃亡的企图，他可以往在牢狱里，不要人监视，并且每个月给他一笔小“津贴”，直到他死去。囚犯欣然同意。结果，这笔“津贴”一共付了30年。</li>
<li>一对住在西班牙的父子。经过一连串的事情后，他们的关系变得异常紧张。<br>
男孩选择离家而去。父亲心急如焚地寻找他。遍寻不着之际，父亲在马德里的报纸上刊登寻人启事。儿子名叫帕科，在西班牙是个很普通的名字。寻人启事上写着：“亲爱的帕科，爸爸明天在马德里日报社前等你。一切既往不咎。我爱你。”隔天中午，报社门口来了八百多个等待宽恕的“帕科”们。</li>
<li>英国最畅销杂志《天空》的封面人物，无不是社会名流。<br>
但2010年第七期的封面，却是一位牧羊老人贾斯汀，因为他创造的奇迹。贾斯汀年轻时，每天牧羊路过一座荒山，就想在这里种满橡树。家人反对：“荒山有六千亩，你几辈子都种不完！”但他决心干这“傻事”26岁开始，他每天带一百粒橡树籽，上山安顿好羊群，他播种、浇水、用羊粪施肥…三十年不间断，如今荒山已是“橡山”我们常被庞大的任务吓倒，其实任何“大目标”都能拆成“小工作”，只要你不停止前进的脚步。</li>
<li>杜瓦尔是弗朗索一世的图书管理员。一天，有人出了一道题让他回答，他答道：“我不会”。<br>
“可是皇上是根据您的学识给您俸禄的呀。”那个人不怀好意地说。<br>
“说得没错，皇上给我俸禄的标准是根据我所懂的东西的多少；如果按我不懂的东西给我俸禄，皇上的全部财宝也不够支付我的。”杜瓦尔答道。</li>
<li>某国的国王要为他的臣民们修建一座宏伟的图书馆和一条画廊，打算聘请一名主持工程的建筑师。<br>
他召集了全国所有的大建筑师。叫他们自报条件候选，并推荐第二候选人。国王耐心倾听每个候选人自荐各自的能耐，最后轻而易举地决定了工程主持人。中选的是得第二候选人票数最多的那个建筑师。</li>
<li>西绪福斯被罚推巨石上山，每次快到山顶，巨石就滚回山脚，他不得不重新开始这徒劳的苦役。<br>
听说他悲观沮丧到了极点。可是，有一天，我遇见正在下山的西绪福斯，却发现他吹着口哨，迈着轻盈的步伐，一脸无忧无虑的神情。我生平最怕见到大不幸的人，譬如说身患绝症的人，或刚死了亲人的人，因为对他们的不幸，我既不能有所表示，怕犯忌，又不能无所表示，怕显得我没心没肺。所以，看见西绪福斯迎面走来，尽管不是传说的那副凄苦模样，深知他的不幸身世的我仍感到局促不安。没想到西绪福斯先开口了，他举起手，对我喊道：“喂，你瞧，我逮了一只多漂亮的蝴蝶！”我望着他渐渐远逝的背影，不禁思忖：总有些事情是宙斯的神威鞭长莫及的，那是一些太细小的事情，在那里便有了西绪福斯(和我们整个人类)的幸福。</li>
<li>教育学家威廉·坎宁安对加利福尼亚州州长乔治·先克默杰恩说过一则寓言：<br>
一个人正在沙漠里散步，突然一个声音对他说：“捡一些卵石放在你的口袋里，明天你会又高兴又后悔。”这个人弯腰捡了一把卵石放进口袋。第二天他将手伸进了口袋，发现了钻石、绿宝石和红宝石。他感到又高兴又后悔。高兴的是他拿了一些；后悔的是没能多拿一点。教育也与此同理。</li>
<li>一次篮球锦标赛中，保加利亚男队与捷克斯洛伐克男队对垒。<br>
保队必须在这场比赛中净胜捷队三个球才能出线，否则将被淘汰。可是当比赛进行到离终场只剩八秒钟的时候，保队仅领先一球，这时保队虽掌握着发球权，但要在短短的八秒钟内再连中两球，已经是不可能了。场内观众都认为保队败局已定。然而保队教练却镇定自若，从容叫停，对上场队员面授机宜。此时捷队队员也严阵以待，全部退防固守篮下。不料保队发球后，一队员突然转向相反方向，向自己篮内投球，球进锣响，捷队队员见状一时目瞪口呆。由于保队为捷队投进一球，终场时使比分拉平。按照竞赛规定，需再战一个延长期。在这最后的比赛时刻，保队队员士气旺盛，配合默契，再加上教练指挥得当，终于净胜三球，进入了第二阶段的比赛。</li>
<li>爱神星是一颗阿莫尔型小行星，1898年8月13日由德国天文学家威特发现。</li>
<li>命运如同一个人的影子，有谁能够摆脱自己的影子呢？<br>
可是，有一天，一个流浪者对于自己的命运实在不堪忍受，便来到一座神庙，请求神允许他和别人交换命运。神说：“如果你能找到一个对自己命运完全满意的人，你就和他交换吧。”按照神的指示，流浪者出发去寻找了。他遍访城市和乡村，竟然找不到一个对自己命运完全满意的人。凡他遇到的人，只要一说起命运，个个摇头叹息，口出怨言。甚至那些王公贵族，达官富豪，名流权威，他们的命运似乎令人羡慕，但他们自己并不满意。事实上，世人所见的确只是他们的命运之河的表面景色，底下许多阴暗曲折惟有他们自己知道。流浪者终于没有找到一个可以和他交换命运的人。直到今天，他仍然拖着他自己的影子到处流浪。</li>
<li>一位胆小如鼠的骑士将要进行一次远途旅行，于是他竭力准备好应付旅途中可能遇到的各种问题。<br>
他带了一把剑和一副盔甲为的是对付他遇到的敌手，一大瓶药膏为防太阳晒伤皮肤或毒藤挂伤皮肤，一把斧子用来砍柴火，一顶帐篷，一条毯子，锅和盘以及喂马的草料。他出发了，——叮叮，当当，咕咕，咚咚，似乎一座移动的废物堆。他来到一座破木桥的中间，桥板突然塌陷，他和他的马都坠入河中，淹死了。临死前那一刻，他很懊悔，他忘了带一个救生筏。命运加给我们的困难艰辛，我们即使在最狂乱的梦境也难以预想。我倒是更相信那只备一条坚定的信念断然前行的人，他们的旅行才更轻捷，更稳健。</li>
<li>十九世纪的某个炎炎夏日，教堂里牧师的布道冗长乏味，众人昏昏欲睡。<br>
只有一个人坐姿挺直，全神贯注听讲，他就是当时的英国首相格莱斯顿。有人好奇地问：“你觉得今天的布道很精彩吗？”他微笑着说：“我也很想打瞌睡。可转念一想，何不以此试试自己的忍耐力？所以我聚精会神地从头听到尾。有这样的耐心，还有什么难事解决不了？所以，今天我很有收获”。《圣经》有言“万事都互相效力”。意思是说，每件事不管好坏，都能找出积极的意义。秉此一念，许多原本不堪的局面，都可改观。</li>
<li>津巴布韦元是由津巴布韦央行发行的货币，是津巴布韦的法定货币，每一元分为100分（cents）。<br>
盾面上的波纹象征津巴布韦广阔的水域。盾面下部是举世闻名的文化遗址“石头城”。盾形上端竖立着五角星和津巴韦鸟。该鸟是国家和民族的愿望之象征，也是津巴布韦和非洲国家古老文化之象征。盾形下端的山坡上有玉米、棉花图案，象征津巴布韦丰富的农产品和丰富的矿藏资源。两侧是津巴布韦羚羊。绶带上用英文写着“团结、自由、劳动”。津巴布韦的物价越来越高，钱却是越来越薄，通货膨胀让许多人大喊吃不消，位于非洲的津巴布韦，感触绝对特别深，一张面额1000万津巴布韦币的纸钞，只能换到美金1.5元，而在津巴布韦买一只鸡要1300万津巴布韦币，游民至少要捡两个月的垃圾，加上不吃不喝才能买到一只鸡。</li>
<li>古希腊人季诺，曾拥有一艘货船，衣食无忧。虽然他经常讲授哲学，但别人总把他当生意人。<br>
某日，他的货船在暴风雨中沉没。不幸的消息传来，他却松了口气：“感谢命运之神！今后我只能以哲学为业了！”只剩哲学的季诺，后来创立了著名的斯多葛学派。芭蕾编舞大师巴伦仙曾说：“我不要想跳芭蕾舞的人，我要不得不跳芭蕾舞的人。”他的意思是，不要业余者，要的是真正为生活挣扎的人。为兴趣做一件事，是不可靠的。而为生活，忍辱负重地背起工作担子，工多艺熟，日后自有长进。</li>
<li>一个瞎子在路上走。另外一个人过来把他引上正路。<br>
可是瞎子却不知道他的指路人是谁。一个人正在酣睡。忽然一条毒蛇昂着头向他爬了过来。另一个人赶过来一刀把毒蛇杀死。可是酣睡者却依然在梦中。当半夜时分，躺在清真寺里生病的旅行者发出沉重呻吟的时候，有一个人一直服侍他到天明。清晨，旅行者死了。可是他到底也没认清这位帮助他的人是谁。他走在路上，把水果送给孩子们，在沙漠中把水送给了一位渴得要死的人，把自己的干粮平分给饥饿者。可是，谁也不与他相识。他把荆棘和碎石从大路上除掉。可是早晨当人们在这条大路上行走的时候，谁也不知这是他干的。谁也不认识他。真的，我们真的不认得那些为我们服务的人们。可是，我们对于那些达官贵人们却认识得这么清楚！ —— 乌尔法特</li>
<li>乞力马扎罗山（Kilimanjaro）位于坦桑尼亚东北部及东非大裂谷以南约160公里，<br>
奈洛比以南约225公，赤道与南纬3度之间，是坦桑尼亚和肯尼亚的分水岭，非洲最高的山脉，也是同时是火山和雪山。该山的主体沿东西向延伸将近80公里，主要由基博、马温西和希拉三个死火山构成，面积756平方公里，其中央火山锥呼鲁峰，海拔5,895米，是非洲最高点。乞力马扎罗山素有“非洲屋脊”之称，而许多地理学家称它为“非洲之王”。该山的主体以典型火山曲线向下面的平原倾斜，平原的高度约海拔900米，山顶终年满布冰雪，但冰川消融现象非常严重。该山四周都是山林，生活着众多哺乳动物，其中一些是濒危物种。</li>
<li>同是一条溪中的水，可是有的人用金杯盛它，有的人却用泥制的土杯子喝它。<br>
那些既无金杯又无土杯的人就只好用手捧水喝了。水，本来是没有任何差别的。差别就在于盛水的器皿。君王与乞丐的差别就在“器皿”上面。只有那些最渴的人才最了解水的甜美。从沙漠中走来的疲渴交加的旅行者是最知道水的滋味的人。在烈日炎炎的正午，当农民们忙于耕种而大汗淋漓的时候，水对他们是最宝贵的东西。当一个牧羊人从山上下来，口干舌燥的时候，要是能够趴在河边痛饮一顿，那他就是最了解水的甜美的人。可是，另外一个人，尽管他坐在绿阴下的靠椅上，身边放着漂亮的水壶，拿着精致的茶杯喝上几口，也仍然品不出这水的甜美来。为什么呢？因为他没有旅行者和牧羊人那样的干渴，没有在烈日当头的中午耕过地，所以他不会觉得那样需要水。无论什么人，只要他没有尝过饥与渴是什么味道，他就永远也享受不到饭与水的甜美，不懂得生活到底是什么滋味。 —— 乌尔法特</li>
<li>一个时候，哲学家第欧根尼常常在大白天也点着灯走路。<br>
每当人们诧异地问他时，便回答说：“我正在找人。”这是在讽刺当时社会上没有一个真正配得上“人”这一称呼的有德行的人。亚历山大帝来到科林特市时拜记了这位哲学家，并且对他说：“你有什么希望都请讲，我可以满足你的一切要求。”爬进了自己所住的酒桶、正在晒太阳的第欧根尼说：“只希望请你向那边让开，因为你遮住了我身上的阳光。”亚历山大帝听了后说：“我若不是亚历山大的话，就想做第欧根尼。”</li>
<li>我陪客人到海上钓鱼，他告诉我说他钓鲑30年，却从来没有钓起过一条大得可以得奖的大鱼，<br>
说后不久，他就钓到了一条巨大的大西洋鲑。这条巨鱼疯狂地在钓线所及的大范围内挣扎，我的客人用尽技能将鱼控住。我担任向导45年，从未见过这样剧烈奋战的鱼。人鱼大战了整整三个小时，还难以预测胜负。最后客人终于把鱼赶到岸边，我手持鱼叉站在那里。“不要叉它，”客人忽然大叫，“把钓饵线切断吧。”我在惊愕中切断了钓线，巨鱼得到了自由，游去无踪。“不管得不得奖，”他轻轻地说，“像这样智勇善战的鱼是不该让人为了娱乐而杀死的。”</li>
<li>英国人对放风筝的兴趣很浓，在伦敦区设有“风筝玩赏者协会”，<br>
英国每年销风筝200万个，平均每9家就有一个风筝。圣地亚哥的萨卡别斯村，如果哪个青年能成为放风筝的优胜者，他就会赢得姑娘的爱情。危地马拉的印第安人把风筝当作祭品。每逢圣节，人们便把五彩缤纷、绘有各种图案的风筝带到附近的小山上放出，表达对亡者的怀念。新西兰的莫斯兰地区，风筝是和平的象征，每个村子都把一个风筝放上天空，如果掉下来，就意味着不吉利，村民们不顾路途遥远，都去把风筝找回来重新放上空中。西班牙上的一个小岛上的居民，每年春播时要集体放风筝，他们将装有粮食的小布袋拴在风筝上，当风筝放出时把线剪断，以求风调雨顺，粮食丰收。南朝鲜人常把自己的忧愁和不幸写于纸条挂在风筝上，把风筝放到空中，然后将线剪断，让风筝把忧愁和不幸随风带走。</li>
<li>麦哲伦海峡（Strait of Magellan），南美洲大陆南端同火地岛等岛屿之间的海峡(71°W，54°S）。<br>
因航海家麦哲伦于1520年首先由此通过进入太平洋，故名。峡湾曲折，长563千米，最窄处仅有3.3千米，最宽处却有32千米左右。是沟通南大西洋和南太平洋的通道。风大流急，航行困难。</li>
<li>阿库雷里是冰岛的第二大城市，总共只有四百居民，主要是渔民。<br>
这座城市以生长着冰岛唯一的一棵树而闻名全国。这棵树是几百年前栽植的，奇迹般地活到现在。冰岛人象爱护自己的眼珠那样爱护这棵古树。在冰岛，动物多于植物，岛上白熊随处可见，它们成群结队地袭击村庄，在街道上大摇大摆地走来走去，穿户入室。</li>
<li>20世纪30年代，德瑞贝克兄弟西德和哈里在黎斯腾所住的街区开了一家男装裁缝店。<br>
每当西德有新客户对着店里的三开大镜子试衣服，他就会告诉对方，自己听力有些问题，并反复让客户说话时提高音量。只要客户喜欢上了哪套衣服，问起价格，西德就会大声叫他兄弟。哈里是首席裁缝，在殿堂后面。“哈里，这套衣服要多少钱？”哈里抬头看着自己做的衣服–并大大地抬高真实价格–高喊着回答说：“那件漂亮的纯羊毛西服，要42美元。”西德假装没听见，用手在耳边做个敞口杯子的形状，再问上一遍。哈里再次回答&quot;42美元。“此时，西德转过身。对客户说：”他说要22美元。“好多人都会急急忙忙地付了钱，抢在可怜的西德发现自己”搞错了“之前，抓着西服狂奔出店。满心以为自己捡了天大的便宜呢。</li>
<li>英语字母是从腓尼基语、希腊语、拉丁语进近代欧洲语言的。<br>
腓尼基位于地中海东岸，相当于现在的叙利亚、黎巴嫩一带地方。腓尼基文字约有三千年历史。Ａ在字母表上名列前茅，这是事出有因的。在古腓尼基的时候，字母Ａ叫aleph，意思是牛。当时Ａ的写法是Ｖ，样子象牛的双角。当中并有斜斜的一横。希腊人把它翻转过来，成为现在这个样子。牛给腓尼基人以肉食，从事劳役，提供鞋靴、衣著的原料。一群牛对他们来说就意味着一大笔财富。</li>
<li>在世界最大的产金地南非，有一家名叫兰特的炼金厂，是世界最大的炼金厂。<br>
这家炼金厂的总经理室里放着一块金砖，并立了一条规定：任何参观者，如果能单靠人力能把它拿起，就可以随意带走。但是这么多年来，所有到那里参观的人，都曾咬紧牙关去碰碰运气，却没有一个人能拿起。现在这金砖依然放在那里。</li>
<li>罗素的茶壶（Russell’s Teapot）是由哲学家伯特兰·罗素塑造的一个类比概念，<br>
说明举证责任在于提出不可证伪的宣称的人，特别是在宗教的情况。罗素以之驳斥怀疑论在怀疑宗教主张的不可证伪性时具有举证责任的说法。罗素写道，如果他声称，有一个茶壶在小行星带围绕太阳转，而他指望别人相信他的理由是他们不能证明这声明是错，这是荒谬的。罗素的茶壶至今仍然频繁出现在有关神是否存在的讨论中。罗素写到：“如果我说，在小行星带有个瓷制茶壶以椭圆轨道绕太阳公转，只要我小心地补充说明这茶壶实在太小，即使用我们最强大的望远镜也找不到它，那么没有人可以证伪我的主张。但如果我要声明道，即然我的声明无法被推翻，那么向它提出怀疑对人类理性来说就是不可容忍的，我自然应当被看作在胡言乱语。”</li>
<li>在星期天不去酒店喝个醉，却安静地在他的苹果树下读书的农民；<br>
厌弃跑马场的纷扰喧嚣却去看一场高雅的戏或者只度过一个宁静的午后的小市民；不去街上唱粗俗的歌或哼些无聊的曲子，却走向田间或者到城墙上看日落的工人，他们都把无名的、无意识的，但绝不是不重要的柴薪投进人类的大火之中。——梅特林克</li>
<li>秦朝上层社会吃肉，需要用鼎把整块的肉煮熟，再用“匕”插在肉上取出来，<br>
放在砧板“俎”上，用小刀切开，蘸调料吃，这就是“人为刀俎，我为鱼肉”的由来。</li>
<li>一公里约等于八分之五英里。</li>
<li>在一盘国际象棋中至少有170，000，000，000，000，000，000，000，000种方法来走开局的十步棋。</li>
<li>方形骰子相对两面的数字相加总是七。</li>
<li>英国诗人雪莱好读书，常站在一个地方，一动也不动地读，一天可以读上十六小时。</li>
<li>美国诗人爱伦·坡，要先让他的暹罗猫坐在他的肩头上，然后才能写作。</li>
<li>刘易斯·卡罗尔在1865年出版了《爱丽丝梦游仙境》。</li>
<li>亨利 · 马蒂斯的画《浮舟》，1961年在纽约现代艺术馆展览时倒挂了一个半月。</li>
<li>伦敦的猫比挪威的人还多。</li>
<li>爱斯基摩人用电冰箱的目的是防止食物结冰。</li>
<li>巴拿马草帽产地是厄瓜多尔，不是巴拿马。</li>
<li>哈密瓜主要并不产在哈密，而是产在哈密以西的鄯善。</li>
<li>西西里岛埃特纳火山每天朝天喷出大量火山气体，其中含银9克，含金2.4克。</li>
<li>哈雷彗星上一次回归是在1986年，而下一次回归将在2061年中。<br>
哈雷彗星是唯一能用裸眼直接从地球看见的短周期彗星，也是人一生中唯一可能以裸眼看见两次的彗星。其它能以裸眼看见的彗星可能会更壮观和更美丽，但那些都是数千年才会出现一次的彗星。</li>
<li>1928年国际天文学联合会正式公布国际通用的88个星座方案。<br>
同时规定以1875年的春分点和赤道为基准。根据88个星座在天球上的不同位置和恒星出没的情况，又划成五大区域，即北天拱极星座（5个）、北天星座（19个）、黄道十二星座（天球上黄道附近的12个星座）、赤道带星座（10个）、南天星座（42个）。</li>
<li>一天，美国布朗克斯的一名公共汽车司机开走了他的空车，直至好几天后才在佛罗里达被警察抓获。<br>
他解释说，由于厌倦了每天在同一条路线上行驶，他决定来一次这样的旅行。这个消息见报之后，他成了布朗克斯轰动性的人物，许多素不相识的人到机场欢迎他归来，公司也决定不对他进行处罚，而只让他保证以后不再做这样的旅行。这是《罗洛·梅文集》里的一个小故事，其中的韵味让人难以释怀。罗洛·梅认为，司机的行为代表了美国中产阶级某种相似的空虚感和无效感。人们之所以能够忍受这种千篇一律的生活，就是因为他们可以偶尔地爆发，或者至少认同他人的爆发。但这种爆发，凸显的正是人们生活的无意义与荒谬。</li>
<li>1917年斯特拉文斯基访罗马和那不勒斯。<br>
这次旅行结识了西班牙的大画家毕加索，两人结成密友。他在回瑞士时，海关人员检查行李，发现皮箱里有一个他觉得很奇怪的文件。“这上面画的是什么？”——他们问斯特拉文斯基道：“毕加索给我的肖像画”。“不可能。这是平面图”。“对了！是我的脸的平面图”。但是认真负责的海关还是把画给没收了，认为这是某个战略工事的经过伪装了的平面图。</li>
<li>地中海的沿岸夏季炎热干燥，冬季温暖湿润，被称作地中海性气候。<br>
植被，叶质坚硬，叶面有蜡质，根系深，有适应夏季干热气候的耐旱特征，属亚热带常绿硬叶林。这里光热充足，是欧洲主要的亚热带水果产区，盛产柑橘、无花果，和葡萄等，还有木本油料作物油橄榄。</li>
<li>位于西非几内亚海湾的三点交合处，被人们称做“最不靠近任何地区的地区。<br>
因为那地方纬度是零，经度也是零，海拔高度还是零。</li>
<li>尼泊尔境内有273座山峰，其中122座允许外国人攀登探险或游览。<br>
这些山峰都标了价。要登山，必须先交钱，山越高价钱越贵。最便宜的是二万一千五百英尺以下非游览性质的山峰，610美元；超过二万六千英尺以上的山要价1,069美元；至于珠穆朗玛峰，先交1,145美元，然后须办理繁杂的手续并耐心等待。据说申请登珠峰者已排到1988年以后了。</li>
<li>儒略历（Julian Calendar）是由罗马共和国执政官盖乌斯·尤里乌斯·凯撒采纳<br>
数学家兼天文学家索西琴尼的计算后，于公元前45年1月1日起执行的取代旧罗马历法的一种历法。儒略历中，一年被划分为12个月，大小月交替；四年一闰，平年365日，闰年366日为在当年二月底增加一闰日，年平均长度为365.25日。由于实际使用过程中累积的误差随着时间越来越大，1582年教皇格里高利十三世颁布、推行了以儒略历为基础改善而来的格里历，即沿用至今的公历。</li>
<li>闰年(Leap Year)是为了弥补因人为历法规定造成的年度天数与地球实际公转周期的时间差而设立的。<br>
补上时间差的年份为闰年。最根本的原因是：地球绕太阳运行周期为365天5小时48分46秒（合365.24219天）即一回归年（tropical year）。公历的平年只有365日，比回归年短约0.2422 日，所余下的时间约为每四年累计一天，故第四年于2月末加1天，使当年的历年长度为366日，这一年就为闰年。现行公历中每400年有97个闰年。按照每四年一个闰年计算，平均每年就要多算出0.0078天，这样经过四百年就会多算出大约3天来。因此每四百年中要减少三个闰年。所以公历规定：年份是整百数时，必须是400的倍数才是闰年；不是400的倍数的年份，即使是4的倍数也不是闰年。这就是通常所说的：四年一闰，百年不闰，四百年再闰。 例如，2000年是闰年，2100年则是平年。</li>
<li>在中东一些国家的城市里，晚上常有骆驼在街上行走，造成许多交通事故。<br>
因此这些国家政府采取一种措施，规定在骆驼挽具上涂一层含磷的发光物质，以使司机在晚间看得清楚。</li>
<li>第十二位美国总统是艾奇逊，他是著名的只当了一天总统的人。<br>
1849年3月3日是波尔克担任总统的最后一天,与此同时,3月4日星期日开始，扎卡里·泰勒将军将宣誓就职。但后者是个虔诚的圣公会教徒，他拒绝在星期日就职，于是美国就遇到两个总统交接之间有一整天的空隙没有总统。根据法律，参议院议长就自动成为美国的临时总统。于是临时议长艾奇逊就当了一天总统。据他自己说：“我忙了两三个晚上，因此那个星期天的大部分时间我都在睡觉。”</li>
<li>美国马萨诸塞州有一个风景如画、碧波荡漾的小湖，<br>
湖名中文音译为“查尔戈格加戈格曼乔加戈格乔布纳根加莫格”。湖名是由早先栖居此地的所第安人所起，意为“你在那边捕鱼，我在这边捕鱼，谁也不能在中间捕鱼”。</li>
<li>最初的火柴是由英国化学家约翰 · 华尔克发明的。<br>
在一次偶然的机会中，华尔克发现用砂皮纸摩擦氯化钾和硫化锑的混合物能产生火焰。在1827年，华尔克出售第一盒氯化钾和硫化锑做的火柴。当时每购买一盒火柴，免费奉送一块砂皮纸。</li>
<li>1884年，英国工程师柏里斯曾著文建议，功的测量单位为“驴力”。他指出，1驴力＝2/3马力。</li>
<li>上世纪末在美国旧金山兴起的淘金热中，当地一把铁铲的价值要超过同等重量的黄金。</li>
<li>津巴布韦火车时刻表上印着：“表上所列仅为火车在此以前决不开行的时间。”</li>
<li>在墨西哥的瓦哈卡州一带的印第安部落里，蚂蚁是一道名菜，并且只有在款待尊贵的客人时才会上一盆蚂蚁。</li>
<li>新几内亚人非常信仰平等原则，那里学校训练学生踢足球时，<br>
规定训练中每场球双方必须踢成平局，只有在训练完毕，正式比赛中才能有胜负。</li>
<li>Thomas “Blind Tom” Wiggins(1849–1908)是19世纪美国极负盛名的盲人钢琴演奏家，<br>
也是一个自闭症天才。1850年，黑人奴隶汤姆与其父母一起被卖给了乔治亚州的白求恩上将。因天生眼盲，年幼的汤姆，只能在农场里做些简单的粗活。彼时从主人女儿房间传来的音乐深深地吸引着他。四岁时，他无师自通，仅靠感觉就能把听到的旋律用钢琴弹奏出来，五岁时，他已经可以自己创作乐曲。汤姆的音乐才华受到主人的赏识，他被安排住在一间配有钢琴的小房间里，日夜弹奏。八岁时，他开始在全美巡演名声鹊起。伴着悠扬的卡农变奏，创作才子Great-Lee Phillips通过低沉忧郁的吟唱让我们仿佛看到了小小的汤姆紧闭双眼弹奏钢琴的场景。这是个只为音乐而生的天才，他的世界里除了黑暗，就只剩下音乐，再无其他。他在风中学会了怎样弹奏动听的乐曲，却学不会怎样生活，怎样与人交流。Blind Tom的故事正是Phillips擅长的叙事风格，用音乐揭示社会的不公和人性的悲剧，这样的音乐，正如Phillips所希望的那样，像缓慢但坚韧的藤曼，编织在一起，延展攀爬，直诉心灵。</li>
<li>有人间第奥根：“如果你住的大桶被打破了，你怎么办呢？”<br>
他答道：“对此我毫不担心。需知，我所占据的地位是不能打破的。”据说第奥根常年住在大木桶里。</li>
<li>1954年，生物学家F.A.Brown从康奈提格的海边挖下来了一批牡蛎（Ostrea virginica），<br>
放进了千里之外芝加哥一个地下室里的水族箱。他是一个生物节律研究者，他知道牡蛎会随着潮水的涨落而起居。<br>
搬入新居的头两个星期，什么都没有改变。牡蛎们依然按照它们正常的规律生活：它们时而缩回去，时而张开壳，捕捉海水里的浮游生物，喂养自己，一切遵循着遥远的康奈提格海岸的潮起潮落。但是接下来的两星期里，发生了一件难以解释的事情。它们依然像潮水一样起伏，但是它们的高潮期行为却不再和康奈提格的潮水吻合了。不是佛罗里达，不是加利福尼亚，不是多佛，不符合科学所知的任何一张潮汐表。经过反复计算，Brown意识到一点：这是芝加哥的涨潮时间。但是芝加哥没有海。这些牡蛎生活在钢筋混凝土的地下室里，生活在玻璃箱的人造海水中。但它们知道海的存在，它们的祖先已经在海边生活了几亿年；它们可以离开海，海却不会离开它们。Brown猜测，也许牡蛎是感知到了气压的变化，从中反推出了潮汐应来的时间、自己应有的节律。没有任何一只牡蛎是有意识地在做这一切——但在某种深层的意义上，它们正想象着这样的一片海，一片不存在于地球上任何角落的海，在那里会有潮起潮落，而它们会随着海的节律而开合。<br>
芝加哥没有海，但牡蛎带来了海。<br>
F. A. Brown, Jr., Persistent activity rhythms in the oyster. The American journal of physiology, 1954.</li>
<li>如果有一天你拜访了曼哈顿的第五大道，可以注意一下路边行道树。<br>
你也许会发现一棵非常不友好的树——它的树干上缠绕着巨大而尖锐的棘刺。这些刺有的能长到比人的手掌还长，刚出生时还是柔软而嫩绿，但很快就会变得坚硬无比。倘若你走累了想倚靠树干歇息一下，必定会被扎得头破血流。<br>
它叫美国皂荚（Gleditsia triacanthos）。它的拉丁文种加词意思是“三刺”，想必命名人也对它印象深刻。<br>
可是这些刺毫无用途。它们虽然巨大尖锐，可是太长也太稀疏了。常见的食草动物——比如鹿——几乎不会被这些刺困扰，它们灵巧的嘴不需太多工夫就能绕过尖刺啃到树皮，就像蚂蚁从篱笆的缝隙间穿过。<br>
这没有道理。皂荚不应该做这样毫无意义的事情，它们不可能费心费力建筑一道无用的篱笆，在蚂蚁的世界里对抗巨人—— 除非，有巨人曾在此驻足，生态学家盖伊·罗宾逊说。<br>
远在有第五大道之前，远在任何大道之前，远在人类还没有抵达美洲之前，在曼哈顿，在整个北美，曾经生活着一种巨兽。它叫乳齿象。它和今天的大象差不多大。它很可能是一种喜欢吃树皮的动物。它随着一万三千年前人类的到来而灭绝了。没有关系，树还记得。乳齿象在这里生活了至少几百万年，美国皂荚也在这里生活了至少几百万年。它们是老邻居，哪怕是充满敌意的邻居。在今天的非洲，金合欢树为了抵御非洲象而演化出了长而锐利的刺；完全可以想象，百万年前美洲的皂荚树也做出了一样的尝试。哪怕乳齿象已经一万三千年不曾拜访，基因也不会那么快被遗忘；它和它的刺还将留存许久。谁知道呢，也许再过一万三千年，第五大道就会深埋在尘埃之中，布朗克斯动物园里大象的后代又将在美洲漫游，重访每一个遥远亲戚所曾踏足的故地；树也将想起久远的恩怨，它的棘刺又将重新派上用场。<br>
但是故事还没有完。树也记住了人。<br>
Sharon Levy. Once and Future Giants: What Ice Age Extinctions Tell Us About the Fate of Earth’s Largest Animals. Oxford University Press, 2012.</li>
<li>1895年，植物学家约翰·麦德利·伍德在南非见到了一棵漂亮的树。<br>
它站在一片小森林的边缘，看起来就像是一株棕榈，长达3米的叶子弯曲成优雅的弧形，远远望去就像是浓密的伞形王冠。伍德拔下了树周围的几株蘖生苗，把一株寄给了伦敦。它将被命名为伍德苏铁（Encephalartos woodii）。它很可能是这星球上最后一棵伍德苏铁。两亿多年前，苏铁曾经遍布世界。铁树的森林延伸到大地的每一个角落，伴随了恐龙从诞生到衰亡的全部历史。苏铁的生长很缓慢，往往要几年甚至几十年才能开花；但它们的寿命很长，它们不急。侏罗纪时代，地球上20%的植物可能都是苏铁。但今天苏铁只剩下大约300个物种，伍德苏铁是其中一员。它的祖先也曾经历了二叠末、三叠末和白垩末的三次大灭绝，经历了不计其数的冰河时代。它很可能也曾经繁盛过，但终究无法与更高更快的被子植物竞争；它也许曾经广泛分布在非洲大地，但今天只剩下了这最后一株。而苏铁是雌雄异体的植物。这是一株雄树。此刻它还不会灭绝。它的克隆体生长在全世界的植物园里，但是这些克隆体当然也都是雄性。所有这些克隆和它的遗传特征都几乎完全一样，突变带来的变化可以忽略不计；它们将这样永远静止下去，直到最终消失——或者，直到找到一株雌树，绽开金黄色的美丽“花朵”，结出饱满的种子，重新踏上演化的漫漫旅途。然而植物学家已经在南非的森林里搜寻了很久，直到今天依然一无所获。<br>
托尔金以另一种方式想象过这个场景。在他笔下的中土大陆，有一个种族叫做树人。他们是森林的牧人，外形像树，能够移动和说话，只是非常缓慢（树人的寿命很长，他们不急）。树人的雌性成员在很久以前的战乱中消失了，许多树人们相信她们只是躲避到了遥远而不可触及的世界角落，但这一切都只是猜测和传说。一切迹象都表明，树人作为一个种族终将消亡。<br>
除非……<br>
不，不应该有除非。无论读者如何心怀不可能的希望，托尔金知道雌树人不会复活。她们不应该复活，这将是一个廉价的奇迹。奇迹也许真的会发生，一株雌性的伍德苏铁也许还藏在非洲某片无人涉足的森林里——但是，苏铁的时代已经结束了。即使挽救了这一棵树，也不能改变任何事情。<br>
或许就这么看着它凝固在时间里，看着它成为一个伟大的克隆，经人之手传遍所有的庭园，然后随着人类文明一起消失吧。这将是一个孤独的结局——但有些时候，孤独才是最真实的。<br>
Donaldson, J.S. (2003). ‘Encephalartos woodii’. 2006. IUCN Red List of Threatened Species.</li>
<li>诺贝尔奖得主理查德-费曼提出的反物质猜想。<br>
他由麦克斯韦方程推导出两个解，发现在数学上，一个在时间中正向前进的负电子和一个在时间中逆行的正电子是一样的。换句话说，反物质不过是在时间中逆行，即从未来向过去前进的正物质而已。反物质和正物质的对消泯灭，实质上是正物质在时间轴上的突然掉头，回到过去的同时变成了反物质。即2分钟前的反物质，在1分钟前和正物质对消，实质上是该正物质在1分钟前开始了时间上的逆行，变成了反物质。2分钟前你看到的反物质就是在时间轴上逆行回去的这个正物质而已。更加震撼的理论如下，费曼由此解决了困扰物理学界多年的基本粒子问题：为何世间万物、大至星系、小到原子，都会展现出不同的属性，例如银河系和仙女星系、我和马克思，氢原子和氧原子，没有完全相同的个体。但是在电子身上是个例外，世上没有“大电子”、“小电子”、“性感电子”、“美丽电子”之说，你也无法在一个电子上刻字，然后送给自己的女友。组成宇宙万物的无穷多的电子，是一模一样的，找不出任何差异的。费曼由自己的反物质假设完美地解释了这一困扰：因为从宇宙大爆炸的那一刻起，整个宇宙本来就只有一个电子。没错，全宇宙的庞大的空间、数不尽的星体和物质，其实都是这一个电子在不同时空的分身而已。它从大爆炸开始，在时间轴上正向前进，直到宇宙的末日，又掉头回去，变成正电子，在时间里逆行，逆行到了宇宙诞生之初。就这样永世无休止地循环下去，这个电子出现在了时间轴上的每一个点，出现在了宇宙的每一个角落，在三维世界的我们看来，空间里布满了数不尽的电子，构成了世间万物。其实它们，包括我们自身，你的父母亲人，你的恋人，你养的猫，狗拉的屎，曼哈顿川流不息的人潮，塔克拉玛干寂如死水的无人区，兰桂坊莺歌燕舞的不夜城，海底两万里那只无尽孤独的蛇颈龙，万事万物都一样，都只不过是那同一个电子正行逆行了无数次的分身而已。整个宇宙就这么一个电子，孤零零地从天地混沌走到宇宙毁灭，再倒回去重来，周而复始。</li>
<li>相对论并不禁止超光速的存在，而只是禁止「超越」光速。<br>
前者指的是速度大于光速的状态，后者指的是从亚光速加速至超光速的过程。即所谓：亚光速的永远亚光速，超光速的永远超光速。真实的普通物质都是亚光速的，所以通常才说光速是自然界速度的上限。如果将快子一类物质也包括进来的话，则更普适的说法是：「光速」是一种速度的「屏障」或者「壁垒」，即普通物质：质量为实数（质量平方为正数），速度比光速低，且永远不可向上超光速；快子类物质：质量为虚数（质量平方为负数），速度比光速快，且永远不可向下亚光速。</li>
<li>天空本来没有颜色。阳光含有彩虹的所有色彩，它穿过大气层时，受到浮沉空中的亿万微粒所散射。<br>
蓝色光波较短，比光波较长的红色或黄色更容易散射，所以天空出现一片蓝色。</li>
<li>TNT炸药是一种烈性炸药，由J•威尔勃兰德发明，呈黄色粉末或鱼鳞片状，难溶于水，可用于水下爆破。<br>
由于威力大，常用来做副起爆药。爆炸后呈负氧平衡，产生有毒气体 。性质稳定，不易爆炸，即使直接被子弹击中也不会引爆。需要雷管进行引爆。</li>
<li>铅笔芯不是铅做的，而是石墨加粘土制成，起源于英国。</li>
<li>1997年，网络游戏的鼻祖之一《网络创世纪》诞生了，它被誉为史上一款成功的图形化网络游戏。<br>
制作者是现年 54 岁的理查德·加里奥特爵士，他曾经缔造过在欧美无人不晓的 RPG《创世纪》 系列，如今坐拥城堡、上过太空，是名副其实的人生赢家。在《网络创世纪》的测试阶段，他作为公司的大老板，游戏的总设计师，自然也在游戏中拥有自己的专属账号，不仅属性无敌，更拥有“不列颠之王”的美名。这一天，他在游戏里的城堡门口对玩家发表公开演讲，所有玩家的注意力都被这个在《网络创世纪》里如神明一般的男人所吸引了。然而，此时一道火墙立起，我们的不列颠之王就这么被烧死了。事后人们得知，当时一名盗贼玩家从 NPC 身上偷了一本魔法卷轴，就随手试了一下。本来这种魔法石烧不死无敌的不列颠之王的，不想由于之前服务器重启，开发人员忘记打开无敌选项，导致了这一网络游戏史上最知名事件的诞生。</li>
<li>地球两极地区从来不是地震震源。</li>
<li>北半球海洋中的水都是顺时针流动，南半球则都是逆时针流动。</li>
<li>地球的旋转速度正在变慢。</li>
<li>地球在冬天转得慢，夏天转得快。</li>
<li>沿着南纬60°线，乘船可以毫无阻拦地航行一周。</li>
<li>猫没有甜味的味觉。</li>
<li>鱼和昆虫是利用太阳作指南针，为短距离游动导游。</li>
<li>蝙蝠有复眼，即使在最强烈的阳光中飞行，也不会眩晕。</li>
<li>很多鸟类总把它生下来时第一个看到的活动物认作是它的妈妈。</li>
<li>鸟类的羽毛五光十色，歌喉委婉动听，生命充满活力。它们的体温一般都高达四十到四十三摄氏度。</li>
<li>人的瞳孔，在看到一些令自己赏心的事时，能扩张到比平常大45％。</li>
<li>智利的600英里长的阿塔卡玛沙漠是世界上最干燥的地区，自从16世纪白人移民到达以后，从来没下过雨。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/730102/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#ddd; font-size:20px; font-weight: 888; ">730102</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/730102/" class="post-title-link" itemprop="url">摘抄集 / 泰戈尔</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-03 00:53:46 / 修改时间：00:55:39" itemprop="dateCreated datePublished" datetime="2021-02-03T00:53:46+08:00">2021-02-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/7301%EF%BC%9A%E6%91%98%E6%8A%84/" itemprop="url" rel="index"><span itemprop="name">7301：摘抄</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.1k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li>Let life be beautiful like summer flowers and death like autumn leaves.<br>
使生如夏花之绚烂，死如秋叶之静美。</li>
<li>云把水倒在河的水杯里，它们自己却藏在远山之中。</li>
<li>我的昼间之花，落下它那被遗忘的花瓣。在黄昏中，这花成熟为一颗记忆的金果。</li>
<li>世界以痛吻我，要我报之以歌。</li>
<li>青烟对天空夸口，灰烬对大地夸口，都以为它们是火的兄弟。</li>
<li>夜秘密地把花开放了，却让白日去领受谢词。</li>
<li>太阳在西方落下时，他的早晨的东方已静悄悄地站在他面前。</li>
<li>夜之黑暗是一只口袋，迸出黎明的金光。</li>
<li>真理之川从它的错误之沟渠中流过。</li>
<li>在我的心头燃点起那休憩的黄昏星吧，然后让黑夜向我微语着爱情。</li>
<li>寂静在喧嚣里低头不语，沉默在黑夜里与目光结交。于是，我们看错了世界，却说世界欺骗了我们。</li>
<li>雾，象爱情一样，在山峰的心上游戏，生出种种美丽的变幻。</li>
<li>浓雾仿佛是大地的愿望。它藏起了太阳，而太阳原是她所呼求的。</li>
<li>白云谦逊地站在天之一隅。晨光给它戴上霞彩。</li>
<li>太阳只穿一件朴素的光衣，白云却披了灿烂的裙裾。</li>
<li>世界上的一队小小的漂泊者呀，请留下你们的足印在我的文字里。</li>
<li>世界对着它的爱人，把它浩翰的面具揭下了。它变小了，小如一首歌，小如一回永恒的接吻。</li>
<li>是大地的泪点，使她的微笑保持着青春不谢。</li>
<li>如果你因失去了太阳而流泪，那么你也将失去群星了。</li>
<li>当我和拥挤的人群一同在路上走过时，我看见你从阳台上送过来的微笑，我歌唱着，忘却了所有的喧哗。<br>
你微微地笑着，不同我说什么话。而我觉得，为了这个，我已等待得久了。</li>
<li>夏天的飞鸟，飞到我的窗前唱歌，又飞去了。秋天的黄叶，它们没有什么可唱，只叹息一声，飞落在那里。</li>
<li>鸟儿愿为一朵云。云儿愿为一只鸟。</li>
<li>鸟翼上系上了黄金，这鸟便永不能再在天上翱翔了。</li>
<li>我不能选择那最好的。是那最好的选择我。</li>
<li>远远去了的夏之音乐，翱翔于秋间，寻求它的旧垒。</li>
<li>麻雀看见孔雀负担着它的翎尾，替它担忧。</li>
<li>我的心是旷野的鸟，在你的眼睛里找到了它的天空。</li>
<li>小草在大地寻找群聚，树木向天空寻找孤寂。</li>
<li>我们在热爱世界时便生活在这世界上。</li>
<li>黑暗向光明旅行，但是盲者却向死亡旅行。</li>
<li>不要试图填满生命的空白，因为，音乐就来自那空白深处。</li>
<li>昨夜的暴风雨用金色的和平为今晨加冕。</li>
<li>当太阳横过西方的海面时，对着东方留下他的最后的敬礼。</li>
<li>世界在踌躇之心的琴弦上跑过去，奏出忧郁的乐声。</li>
<li>夜的序曲是开始于夕阳西下的音乐，开始于它对难以形容的黑暗所作的庄严的赞歌。</li>
<li>你若爱她，让你的爱像阳光一样包围她，并且给她自由。</li>
<li>当你没胃口时，不要抱怨食物。</li>
<li>根是地下的枝，枝是空中的根。</li>
<li>绿树长到了我的窗前，仿佛是喑哑的大地发出的渴望的声音。</li>
<li>樵夫的斧头，问树要斧柄。树便给了他。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/5704/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#ddd; font-size:20px; font-weight: 888; ">5704</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/5704/" class="post-title-link" itemprop="url">摄影</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-03 00:51:31 / 修改时间：00:52:24" itemprop="dateCreated datePublished" datetime="2021-02-03T00:51:31+08:00">2021-02-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/5704%EF%BC%9A%E6%91%84%E5%BD%B1/" itemprop="url" rel="index"><span itemprop="name">5704：摄影</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>69</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1><span id="shao-ji-shi-duo-less-is-more">少即是多 <code>Less is more</code></span><a href="#shao-ji-shi-duo-less-is-more" class="header-anchor">#</a></h1>
<p>摄影最经典的法则之一。化繁为简，少即是多。<br>
因此，在拍照片的时候，一定要想一下，是不是可以少一点儿，再少一点儿。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/510410/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#ddd; font-size:20px; font-weight: 888; ">510410</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/510410/" class="post-title-link" itemprop="url">日常用语 | 英语</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-03 00:49:24 / 修改时间：00:49:56" itemprop="dateCreated datePublished" datetime="2021-02-03T00:49:24+08:00">2021-02-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/5104%EF%BC%9A%E8%8B%B1%E8%AF%AD/" itemprop="url" rel="index"><span itemprop="name">5104：英语</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>250</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li>FYI = For your information.<br>
仅供参考。</li>
<li>Best Regards.<br>
诚挚的问候，最好的祝福，致敬。</li>
<li>Thank you<br>
回复：<br>
With pleasure. 很乐意帮忙。<br>
My pleasure. 不用谢。<br>
这个回答的完整形式是 It’s my pleasure. 这种表达非常有礼貌。<br>
而且显得说话人非常绅士。男生在回答女生的感谢时可以用上。<br>
Not a problem. 别放在心上。<br>
No trouble/ problem. 不麻烦，没什么难的。<br>
Any time. 有事随时说<br>
It’s okay/alright/nothing. 没事。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/730203/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#ddd; font-size:20px; font-weight: 888; ">730203</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/730203/" class="post-title-link" itemprop="url">歌词 / Lemon</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-02 19:35:33" itemprop="dateCreated datePublished" datetime="2021-02-02T19:35:33+08:00">2021-02-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-03 01:27:38" itemprop="dateModified" datetime="2021-02-03T01:27:38+08:00">2021-02-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/7310%EF%BC%9A%E6%97%A5%E6%9C%AC%E8%AA%9E%E3%81%AE%E9%9F%B3/" itemprop="url" rel="index"><span itemprop="name">7310：日本語の音</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>980</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>夢ならばどれほどよかったでしょう<br>
如果这一切都是梦境该有多好<br>
未だにあなたのことを夢にみる<br>
至今仍能与你在梦中相遇<br>
忘れた物を取りに帰るように<br>
如同取回遗忘之物一般<br>
古びた思い出の埃を払う<br>
细细拂去将回忆覆盖的尘埃<br>
戻らない幸せがあることを<br>
最终是你让我懂得了<br>
最後にあなたが教えてくれた<br>
这世间亦有无法挽回的幸福<br>
言えずに隠してた昏い過去も<br>
那些未对他人提及过的黑暗往事<br>
あなたがいなきゃ永遠に昏いまま<br>
如果不曾有你的话 它们将永远沉睡在黑暗中<br>
きっともうこれ以上 傷つくことなど<br>
我知道这世上一定没有<br>
ありはしないとわかっている<br>
比这更令人难过的事情了<br>
あの日の悲しみさえ<br>
那日的悲伤<br>
あの日の苦しみさえ<br>
与那日的痛苦<br>
そのすべてを愛してた あなたとともに<br>
连同深爱着这一切的你<br>
胸に残り離れない<br>
化作了深深烙印在我心中的<br>
苦いレモンの匂い<br>
苦涩柠檬的香气<br>
雨が降り止むまでは帰れない<br>
在雨过天晴前都无法归去<br>
今でもあなたはわたしの光<br>
时至今日 你仍是我的光芒<br>
暗闇であなたの背をなぞった<br>
在黑暗中追寻着你的身影<br>
その輪郭を鮮明に覚えている<br>
那轮廓至今仍鲜明地刻印于心<br>
受け止めきれないものと出会うたび<br>
每当遇到无法承受的苦痛时<br>
溢れてやまないのは涙だけ<br>
总是不禁泪如泉涌<br>
何をしていたの<br>
你都经历过什么<br>
何を見ていたの<br>
又目睹过什么呢<br>
わたしの知らない横顔で<br>
脸上浮现着我不曾见过的神情<br>
どこかであなたが今<br>
如果你正在什么地方<br>
わたしと同じ様な<br>
与我一样<br>
涙にくれ 淋しさの中にいるなら<br>
终日过着以泪洗面的寂寞生活的话<br>
わたしのことなどどうか 忘れてください<br>
就请你将我的一切全部遗忘吧<br>
そんなことを心から願うほどに<br>
这是我发自内心深处唯一的祈愿<br>
今でもあなたはわたしの光<br>
时至今日 你仍是我的光芒<br>
自分が思うより 恋をしていたあなたに<br>
我深深地恋慕着你 甚至超出了我自己的想象<br>
あれから思うように 息ができない<br>
自此每当想起你 都如同窒息般痛苦<br>
あんなに側にいたのにまるで嘘みたい<br>
你曾亲密伴我身旁 如今却如烟云般消散<br>
とても忘れられないそれだけが確か<br>
唯一能确定的是 我永远都不会将你遗忘<br>
あの日の悲しみさえ<br>
那日的悲伤<br>
あの日の苦しみさえ<br>
与那日的痛苦<br>
その全てを愛してたあなたと共に<br>
连同深爱着这一切的你<br>
胸に残り離れない<br>
化作了深深烙印在我心中的<br>
苦いレモンの匂い<br>
苦涩柠檬的香气<br>
雨が降り止むまでは帰れない<br>
在雨过天晴前都无法归去<br>
切り分けた果実の片方の様に<br>
如同被切开的半个柠檬一般<br>
<strong>今でもあなたはわたしの光</strong><br>
时至今日 你仍是我的光芒</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/730202/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#ddd; font-size:20px; font-weight: 888; ">730202</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/730202/" class="post-title-link" itemprop="url">歌词 / 恋愛サーキュレーション</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-02 19:28:19" itemprop="dateCreated datePublished" datetime="2021-02-02T19:28:19+08:00">2021-02-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-03 01:27:45" itemprop="dateModified" datetime="2021-02-03T01:27:45+08:00">2021-02-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/7310%EF%BC%9A%E6%97%A5%E6%9C%AC%E8%AA%9E%E3%81%AE%E9%9F%B3/" itemprop="url" rel="index"><span itemprop="name">7310：日本語の音</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.3k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>せーの<br>
预备<br>
でもそんなんじゃ だめ<br>
但是那样不行哦<br>
もうそんなんじゃ ほら<br>
真是那样的话你看<br>
心は進化するよ もっともっと<br>
真心是会进化的 不断 不断</p>
<p>言葉にすれば消えちゃう関係なら<br>
如果说出来的话关系就会消失的话<br>
言葉を消せばいいやって<br>
那么只要不说就好啦<br>
思ってた 恐れてた<br>
这样想过，也这样害怕过<br>
だけど あれ? なんかちがうかも<br>
但是 唉？ 好像有什么误解<br>
せんりのみちもいっぽから!<br>
千里之行始于足下<br>
石のようにかたい そんな意志で<br>
就已坚如磐石的意志<br>
ちりもつもればやまとなでしこ?<br>
沉积成为大和抚子？<br>
「し」抜きで いや 死ぬ気で!<br>
去掉し ，不对 拼死去做！</p>
<p>ふわふわり ふわふわる<br>
轻飘飘 轻飘飘<br>
あなたが名前を呼ぶ それだけで宙へ浮かぶ<br>
你轻唤的名字 只是这样就让我飘在空中<br>
ふわふわる ふわふわり<br>
轻飘飘 轻飘飘<br>
あなたが笑っている それだけで笑顔になる<br>
你在笑着 只是这样就能让我流出笑容</p>
<p>神様 ありがとう 運命のいたずらでも<br>
神啊谢谢你 即使是命运的恶作剧也好<br>
めぐり逢えたことが しあわせなの<br>
和他的邂逅 让我感觉幸福</p>
<p>でもそんなんじゃ だめ<br>
但是那样不行哦<br>
もうそんなんじゃ ほら<br>
真是那样的话你看<br>
心は進化するよ もっともっと<br>
真心是会进化的 不断 不断<br>
そうそんなんじゃ やだ<br>
没错 那样的话 不要<br>
ねぇそんなんじゃ まだ<br>
呐~那样还是不行<br>
私のこと見ててね ずっとずっと<br>
请一直这样看着我吧 永远 永远</p>
<p>私の中のあなたほど<br>
比起你在我心中的情形<br>
あなたの中の私の存在は<br>
你心中的那个我的存在<br>
まだまだ 大きくないことも わかってるけれど<br>
还是不大 虽然我明白<br>
今この同じ 瞬間<br>
但现在同样的瞬间<br>
共有してる 実感<br>
共有的实感<br>
ちりもつもればやまとなでしこ!<br>
沉积成为大和抚子<br>
略して?ちりつもやまとなでこ!<br>
省略就是集腋成裘大和抚子</p>
<p>くらくらり くらくらる<br>
晕晕晕晕晕晕<br>
あなたを見上げたら それだけで まぶしすぎて<br>
仰视着你 只是这样就光彩夺目<br>
くらくらる くらくらり<br>
晕晕晕晕晕晕<br>
あなたを想っている それだけで とけてしまう<br>
想念着你 只是这样记忆让我快要融化掉了</p>
<p>神様 ありがとう 運命のいたずらでも<br>
神啊谢谢你 即使是命运的恶作剧也好<br>
めぐり逢えたことが しあわせなの<br>
和他的邂逅 让我感觉幸福</p>
<p>コイスル キセツハ ヨクバリ circulation<br>
恋爱的季节 贪念循环<br>
コイスル キモチハ ヨクバリ circulation<br>
恋爱的心情 贪念流动<br>
コイスル ヒトミハ ヨクバリ circulation<br>
恋爱的眼睛 贪念循环<br>
コイスル オトメハ ヨクバリ circulation<br>
恋爱的少女 贪念流动恋</p>
<p>ふわふわり ふわふわる<br>
轻飘飘 轻飘飘<br>
あなたが名前を呼ぶ それだけで 宙へ浮かぶ<br>
你轻唤的名字 只是这样就让我飘在空中<br>
ふわふわる ふわふわり<br>
轻飘飘 轻飘飘<br>
あなたが笑っている それだけで 笑顔になる<br>
你在笑着 只是这样就能让我流出笑容</p>
<p>神様 ありがとう 運命のいたずらでも<br>
神啊谢谢你 即使是命运的恶作剧也好<br>
めぐり逢えたことが しあわせなの<br>
和他的邂逅 让我感觉幸福</p>
<p>でもそんなんじゃ だめ<br>
但是那样不行哦<br>
もうそんなんじゃ ほら<br>
真是那样的话你看<br>
心は進化するよ もっともっと<br>
真心是会进化的 不断 不断<br>
そうそんなんじゃ やだ<br>
没错 那样的话 不要<br>
ねぇそんなんじゃ まだ<br>
呐~那样还是不行<br>
私のこと見ててね ずっとずっと<br>
请一直这样看着我吧 永远 永远<br>
でもそんなんじゃだめ</p>
<p>もうそんなんじゃほら</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/730201/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#ddd; font-size:20px; font-weight: 888; ">730201</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/730201/" class="post-title-link" itemprop="url">歌词 / なごり雪</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-02 17:38:48" itemprop="dateCreated datePublished" datetime="2021-02-02T17:38:48+08:00">2021-02-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-03 01:27:52" itemprop="dateModified" datetime="2021-02-03T01:27:52+08:00">2021-02-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/7310%EF%BC%9A%E6%97%A5%E6%9C%AC%E8%AA%9E%E3%81%AE%E9%9F%B3/" itemprop="url" rel="index"><span itemprop="name">7310：日本語の音</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>482</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>汽車を待つ君の横で僕は<br>
在等待火车的你的一旁<br>
時計を気にしてる<br>
我注意着时钟<br>
季節はずれの雪が降ってる<br>
不合时节的雪落了下来<br>
東京で見る雪はこれが最後ねと<br>
这是在东京看见的最后的雪了吧<br>
さみしそうに君がつぶやく<br>
你寂寞地喃喃自语道</p>
<p>なごり雪も降る時を知り<br>
残雪也知道要落下的时候<br>
ふざけすぎた季節のあとで<br>
在这愚弄人的季节之后<br>
今春が来て君はきれいになった<br>
如今春天来临，你变得更加美丽<br>
去年よりずっときれいになった<br>
美丽动人更甚去年</p>
<p>動き始めた汽車の窓に顔をつけて<br>
发动的火车的车窗，你将脸贴在上面<br>
君は何か言おうとしている<br>
似乎要说些什么<br>
君の口びるがさようならと動くことが<br>
害怕你的嘴唇轻吐出道别的话语<br>
こわくて下をむいてた<br>
我低下头不敢看你</p>
<p>時がゆけば幼い君も<br>
时光飞逝，年幼的你<br>
大人になると気づかないまま<br>
不知不觉已长大成人<br>
今春が来て君はきれいになった<br>
如今春天来临，你变得更加美丽<br>
去年よりずっときれいになった<br>
美丽动人更甚去年</p>
<p>君が去ったホームにのこり<br>
留在你离去后的月台<br>
落ちてはとける雪を見ていた<br>
看着落下又融化的雪<br>
今春が来て君はきれいになった<br>
如今春天来临，你变得更加美丽<br>
去年よりずっときれいになった<br>
美丽动人更甚去年</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/252001/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#ddd; font-size:20px; font-weight: 888; ">252001</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/252001/" class="post-title-link" itemprop="url">Vue 商城项目</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-02 16:49:16" itemprop="dateCreated datePublished" datetime="2021-02-02T16:49:16+08:00">2021-02-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-03 01:42:29" itemprop="dateModified" datetime="2021-02-03T01:42:29+08:00">2021-02-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2520%EF%BC%9AVue%E5%95%86%E5%9F%8E%E9%A1%B9%E7%9B%AE/" itemprop="url" rel="index"><span itemprop="name">2520：Vue商城项目</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>125k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <a id="more"></a>
<h1><span id="9-yue-16-ri-day-0">9月16日（day 0）</span><a href="#9-yue-16-ri-day-0" class="header-anchor">#</a></h1>
<h2><span id="p0-kai-fa-suo-xu">0 开发所需</span><a href="#p0-kai-fa-suo-xu" class="header-anchor">#</a></h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># node.js</span></span><br><span class="line"><span class="comment"># vue</span></span><br><span class="line">npm uninstall vue-cli -g <span class="comment"># 先全局卸载脚手架2</span></span><br><span class="line">npm install @vue/cli -g  <span class="comment"># 安装脚手架4</span></span><br><span class="line">vue -V                   <span class="comment"># 检查版本</span></span><br></pre></td></tr></table></figure>
<h2><span id="p1-xin-jian-xiang-mu-bing-an-zhuang-xiang-mu-yi-lai">1 新建项目并安装项目依赖</span><a href="#p1-xin-jian-xiang-mu-bing-an-zhuang-xiang-mu-yi-lai" class="header-anchor">#</a></h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vue create gshop_client</span><br><span class="line"><span class="built_in">cd</span> gshop_client</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装项目所需依赖 --&gt; 建议一个一个装</span></span><br><span class="line">npm install vuex vue-router axios less less-loader</span><br><span class="line">npm install nprogress</span><br></pre></td></tr></table></figure>
<p>如果使用的是 stylus ，换成 <code>stylus stylus-loader</code></p>
<h2><span id="p2-xiang-mu-mu-lu-pei-zhi">2 项目目录配置</span><a href="#p2-xiang-mu-mu-lu-pei-zhi" class="header-anchor">#</a></h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 项目目录（部分）</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">├── jsconfig.json         <span class="comment"># VSCode 路径配置文件</span></span><br><span class="line">├── vue.config.json       <span class="comment"># Vue 配置文件，设置代理，设置语法检查开关</span></span><br><span class="line">├── public</span><br><span class="line">│   ├── css              </span><br><span class="line">│   ├── font</span><br><span class="line">│   ├── images</span><br><span class="line">│   └── index.html</span><br><span class="line">└── src                </span><br><span class="line">    ├── api               <span class="comment"># --&gt; 存储封装后的api接口函数及二次封装的axios</span></span><br><span class="line">    ├── components        <span class="comment"># --&gt; 普通组件目录</span></span><br><span class="line">    │   ├── Footer        </span><br><span class="line">    │   │   └── index.vue</span><br><span class="line">    │   └── Header</span><br><span class="line">    │       └── index.vue</span><br><span class="line">    ├── pages             <span class="comment"># --&gt; 路由组件目录</span></span><br><span class="line">    │   ├── Home</span><br><span class="line">    │   │   └── index.vue</span><br><span class="line">    │   ├── Login</span><br><span class="line">    │   │   └── index.vue</span><br><span class="line">    │   ├── Register</span><br><span class="line">    │   │   └── index.vue</span><br><span class="line">    │   └── Search</span><br><span class="line">    │       └── index.vue</span><br><span class="line">    ├── router            <span class="comment"># --&gt; 路由器配置</span></span><br><span class="line">    │   ├── index.js</span><br><span class="line">    │   └── routes.js</span><br><span class="line">    ├── store             <span class="comment"># --&gt; Vuex 配置</span></span><br><span class="line">    │   ├── modules       <span class="comment"># Vue 模块化</span></span><br><span class="line">    │   ├── index.js</span><br><span class="line">    │   ├── state.js</span><br><span class="line">    │   ├── mutations.js</span><br><span class="line">    │   ├── actions.js</span><br><span class="line">    │   └── getters.js</span><br><span class="line">    ├── mock              <span class="comment"># --&gt; 模拟后台数据</span></span><br><span class="line">    ├── utils             <span class="comment"># --&gt; 工具</span></span><br><span class="line">    ├── App.vue           <span class="comment"># --&gt; 根组件</span></span><br><span class="line">    └── main.js           <span class="comment"># --&gt; 主入口</span></span><br></pre></td></tr></table></figure>
<p>配置 <code>jsconfig.json</code> 文件</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;baseUrl&quot;</span>: <span class="string">&quot;./&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;paths&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;@/*&quot;</span>: [<span class="string">&quot;src/*&quot;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;exclude&quot;</span>: [<span class="string">&quot;node_modules&quot;</span>, <span class="string">&quot;dist&quot;</span>] </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2><span id="p3-pei-zhi-zhu-ru-kou-wen-jian">3 配置主入口文件</span><a href="#p3-pei-zhi-zhu-ru-kou-wen-jian" class="header-anchor">#</a></h2>
<p>main.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App),     <span class="comment">// 渲染组件</span></span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>) </span><br></pre></td></tr></table></figure>
<h2><span id="p4-pei-zhi-gen-zu-jian">4 配置根组件</span><a href="#p4-pei-zhi-gen-zu-jian" class="header-anchor">#</a></h2>
<p>引入普通组件</p>
<p>注册组件</p>
<p>App.vue</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">   &lt;Header&#x2F;&gt;</span><br><span class="line">   &lt;Footer&#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">&#x2F;&#x2F; 引入组件</span><br><span class="line">import Header from &#39;.&#x2F;components&#x2F;Header&#39;</span><br><span class="line">import Footer from &#39;.&#x2F;components&#x2F;Footer&#39;</span><br><span class="line">    </span><br><span class="line">export default &#123;</span><br><span class="line">  name:&#39;App&#39;,</span><br><span class="line">  &#x2F;&#x2F; 注册组件</span><br><span class="line">  components: &#123;</span><br><span class="line">    Header,</span><br><span class="line">    Footer</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style rel&#x3D;&quot;stylesheet&#x2F;less&quot; scoped&gt;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
<h2><span id="p5-xin-jian-zu-jian">5 新建组件</span><a href="#p5-xin-jian-zu-jian" class="header-anchor">#</a></h2>
<p>新建 <code>Header</code> <code>Footer</code> <code>Home</code> <code>Login</code> <code>Register</code> <code>Search</code> 目录下的 <code>index.vue</code></p>
<p>模板如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    Footer</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name:&#39;Footer&#39; &#x2F;&#x2F; 这里改成各组件名字</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot; rel&#x3D;&quot;stylesheet&#x2F;less&quot; scoped&gt;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
<h2><span id="p6-pei-zhi-lu-you">6 配置路由</span><a href="#p6-pei-zhi-lu-you" class="header-anchor">#</a></h2>
<p><code>router/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> routes <span class="keyword">from</span> <span class="string">&#x27;./routes&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明使用路由插件</span></span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实例化路由对象并暴露出去</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  mode: <span class="string">&#x27;history&#x27;</span>,</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>router/routes.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入组件</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">&#x27;@/pages/Home&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Search <span class="keyword">from</span> <span class="string">&#x27;@/pages/Search&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Login <span class="keyword">from</span> <span class="string">&#x27;@/pages/Login&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Register <span class="keyword">from</span> <span class="string">&#x27;@/pages/Register&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 向外暴露所有组件对象的数组</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> [</span><br><span class="line">  <span class="comment">// 注册组件对象</span></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    component: Home</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    path: <span class="string">&#x27;/search&#x27;</span>,</span><br><span class="line">    component: Search</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    path: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    component: Login</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    path: <span class="string">&#x27;/register&#x27;</span>,</span><br><span class="line">    component: Register</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 重定向</span></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    redirect: <span class="string">&#x27;/&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h2><span id="p7-zhu-ce-lu-you-qi">7 注册路由器</span><a href="#p7-zhu-ce-lu-you-qi" class="header-anchor">#</a></h2>
<p>main.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入路由器</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="comment">// 注册路由器</span></span><br><span class="line">  router,</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App),</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h1><span id="9-yue-18-ri-day-1">9月18日（day 1）</span><a href="#9-yue-18-ri-day-1" class="header-anchor">#</a></h1>
<h2><span id="p8-jia-zai-lu-you-shi-tu">8 加载路由视图</span><a href="#p8-jia-zai-lu-you-shi-tu" class="header-anchor">#</a></h2>
<p>App.vue</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// App.vue</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Header</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 加载路由视图 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Footer</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p9-lu-you-zhong-tian-jia-can-shu-shu-ju-geng-xin-shi-tu">9 路由中添加参数数据，更新视图</span><a href="#p9-lu-you-zhong-tian-jia-can-shu-shu-ju-geng-xin-shi-tu" class="header-anchor">#</a></h2>
<p>路由中加入参数数据</p>
<p>routes.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#125;, &#123;</span><br><span class="line">  path: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">  component: Login,</span><br><span class="line">  <span class="comment">// 加入参数数据</span></span><br><span class="line">  meta: &#123;</span><br><span class="line">    isHideFooter: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  path: <span class="string">&#x27;/register&#x27;</span>,</span><br><span class="line">  component: Register,</span><br><span class="line">  <span class="comment">// 加入参数数据</span></span><br><span class="line">  meta: &#123;</span><br><span class="line">    isHideFooter: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>更新视图</p>
<p>App.vue</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; App.vue</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;Header &#x2F;&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;&#x2F;router-view&gt;</span><br><span class="line">    &lt;!-- 加上 v-if 指令 --&gt;</span><br><span class="line">    &lt;Footer v-if&#x3D;&quot;!$route.meta.isHideFooter&quot; &#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure>
<p>实现在 <code>Login</code> 页面 和 <code>Resister</code> 页面不显示 <code>Footer</code> 组件</p>
<h2><span id="p10-index-html-jia-ru-yang-shi-wen-jian">10 index.html 加入样式文件</span><a href="#p10-index-html-jia-ru-yang-shi-wen-jian" class="header-anchor">#</a></h2>
<p>拷贝辉鸿的 <code>iconfont.css</code>   <code>reset.css</code> 放在 <code>/public/css</code>中</p>
<p>加入样式文件（🐛 用绝对路径）</p>
<p>public/index.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width,initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 样式重置文件 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/css/reset.css&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 图标字体文件 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/css/iconfont.css&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">htmlWebpackPlugin.options.title</span> %&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p11-chai-fen-jing-tai-ye-mian-zhi-yi">11 拆分静态页面之一</span><a href="#p11-chai-fen-jing-tai-ye-mian-zhi-yi" class="header-anchor">#</a></h2>
<p>（在实际开发中，静态页面自己写）</p>
<p>辉鸿的 home/index.html   <code>&lt;header class=&quot;header&quot;&gt;</code> 内容复制到</p>
<p>components/Header/index.vue <code>&lt;template&gt;</code> 内</p>
<p>辉鸿的 home/css/home.less  <code>.header</code> 复制到</p>
<p>components/Header/index.vue <code>&lt;style lang=&quot;less&quot; rel=&quot;stylesheet/less&quot; scoped&gt;</code> 内</p>
<p>在这个目录新建 images 目录，把  Logo.png  复制过来</p>
<p>辉鸿的 home/index.html    <code>&lt;header class=&quot;footer&quot;&gt;</code> 内容复制到</p>
<p>components/Footer/index.vue <code>&lt;template&gt;</code> 内</p>
<p>辉鸿的 home/css/home.less  <code>.footer</code> 复制到</p>
<p>components/Footer/index.vue <code>&lt;style lang=&quot;less&quot; rel=&quot;stylesheet/less&quot; scoped&gt;</code> 内</p>
<p>在这个目录新建 images 目录，把  wz_cz.jpg  复制过来</p>
<p>如果出现错误可以<strong>重启</strong>一下（ <code>npm run serve</code>）排查问题</p>
<h2><span id="p12-chai-fen-jing-tai-ye-mian-zhi-er">12 拆分静态页面之二</span><a href="#p12-chai-fen-jing-tai-ye-mian-zhi-er" class="header-anchor">#</a></h2>
<p>辉鸿的 home/index.html   <code>&lt;header class=&quot;header&quot;&gt;</code> 到 <code>&lt;header class=&quot;footer&quot;&gt;</code> 之间的 内容复制到 <code>pages/Home/index.vue</code>  的 <code>&lt;template&gt; &lt;div&gt;</code> 内</p>
<p>拷贝对应的 less 样式</p>
<p>拷贝对应图片并修正图片路径</p>
<ul>
<li><code>./images/home</code> 替换成 <code>./images</code></li>
<li><code>../images</code> 替换成 <code>./images</code></li>
</ul>
<p>注释部分轮播图：查找 swiper 并注释（有三个地方），就是有多张图留一张就行，剩下的注释</p>
<h2><span id="p13-xin-jian-typenav-zu-jian-bing-zhu-ce-wei-gong-gong-zu-jian">13 新建 TypeNav 组件 并注册为公共组件</span><a href="#p13-xin-jian-typenav-zu-jian-bing-zhu-ce-wei-gong-gong-zu-jian" class="header-anchor">#</a></h2>
<p>在 <code>componets</code> 中新建 <code>TyperNav</code> ，再在里面新建 <code>index.vue</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#39;TypeNav&#39;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot; rel&#x3D;&quot;stylesheet&#x2F;less&quot; scoped&gt;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
<p>从 Home组件 中剪切对应的 结构+样式  黏贴在这个文件</p>
<p><strong>在 main.js 中注册为公共组件</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入的公共组件</span></span><br><span class="line"><span class="keyword">import</span> TypeNav <span class="keyword">from</span> <span class="string">&#x27;@/components/TypeNav&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置为全局的公共组件</span></span><br><span class="line">Vue.component(<span class="string">&#x27;TypeNav&#x27;</span>, TypeNav)</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>在 <code>pages/Home/index.vue</code>  使用这个组件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- 在这里使用 --&gt;</span><br><span class="line">    &lt;TypeNav &#x2F;&gt;</span><br><span class="line">    </span><br><span class="line"> ...</span><br></pre></td></tr></table></figure>
<h2><span id="p14-chai-fen-jing-tai-ye-mian-zhi-san">14 拆分静态页面之三</span><a href="#p14-chai-fen-jing-tai-ye-mian-zhi-san" class="header-anchor">#</a></h2>
<p>在 <code>pages/Home</code> 中新建  <code>ListContainer</code> <code>TodayRecommend</code> <code>Rank</code> <code>Floor</code> <code>Brand</code> <code>Like</code></p>
<p>新建 index.vue 拷贝对应的 html+css+images（注意修正路径）</p>
<p>在Home组件中引入并注册这六个组件，然后使用这些组件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- @&#x2F;pages&#x2F;Home&#x2F;index.vue--&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- 导航 --&gt;</span><br><span class="line">    &lt;TypeNav &#x2F;&gt;</span><br><span class="line">    &lt;!-- 列表 --&gt;</span><br><span class="line">    &lt;ListContainer &#x2F;&gt;</span><br><span class="line">    &lt;!-- 今日推荐 --&gt;</span><br><span class="line">    &lt;TodayRecommend &#x2F;&gt;</span><br><span class="line">    &lt;!-- 商品排行 --&gt;</span><br><span class="line">    &lt;Rank &#x2F;&gt;</span><br><span class="line">    &lt;!-- 猜你喜欢 --&gt;</span><br><span class="line">    &lt;Like &#x2F;&gt;</span><br><span class="line">    &lt;!-- 楼层 --&gt;</span><br><span class="line">    &lt;Floor &#x2F;&gt;</span><br><span class="line">    &lt;Floor &#x2F;&gt;</span><br><span class="line">    &lt;!-- 商标--&gt;</span><br><span class="line">    &lt;Brand &#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  &#x2F;&#x2F; 引入组件</span><br><span class="line">  import Brand from &#39;.&#x2F;Brand&#39;</span><br><span class="line">  import Floor from &#39;.&#x2F;Floor&#39;</span><br><span class="line">  import ListContainer from &#39;.&#x2F;ListContainer&#39;</span><br><span class="line">  import Like from &#39;.&#x2F;Like&#39;</span><br><span class="line">  import Rank from &#39;.&#x2F;Rank&#39;</span><br><span class="line">  import TodayRecommend from &#39;.&#x2F;TodayRecommend&#39;</span><br><span class="line">  </span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#39;Home&#39;,</span><br><span class="line">    &#x2F;&#x2F; 注册组件</span><br><span class="line">    components: &#123;</span><br><span class="line">      Brand,</span><br><span class="line">      Floor,</span><br><span class="line">      ListContainer,</span><br><span class="line">      Like,</span><br><span class="line">      Rank,</span><br><span class="line">      TodayRecommend</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot; rel&#x3D;&quot;stylesheet&#x2F;less&quot; scoped&gt;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
<h2><span id="p15-chai-fen-jing-tai-ye-mian-zhi-si">15 拆分静态页面之四</span><a href="#p15-chai-fen-jing-tai-ye-mian-zhi-si" class="header-anchor">#</a></h2>
<p>志远的页面（仅复制登录和注册 div 以及 less）</p>
<p>登录 html + less + images （🐛 修正图片路径） <code>images/ --&gt; ./images</code></p>
<p>注册 html + less + images</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Login组件</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 登录 --&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;login-wrap&quot;&gt;</span><br><span class="line">...</span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot; rel&#x3D;&quot;stylesheet&#x2F;less&quot; scoped&gt;</span><br><span class="line">  .login-wrap </span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Register组件</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 注册 --&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;register&quot;&gt;</span><br><span class="line">...</span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot; rel&#x3D;&quot;stylesheet&#x2F;less&quot; scoped&gt;</span><br><span class="line">  .register</span><br></pre></td></tr></table></figure>
<h2><span id="p16-jia-ji-ge-lu-you-lian-jie-sheng-ming-shi-lu-you-tiao-zhuan">16 加几个路由链接（声明式路由跳转）</span><a href="#p16-jia-ji-ge-lu-you-lian-jie-sheng-ming-shi-lu-you-tiao-zhuan" class="header-anchor">#</a></h2>
<p>点击头部的 <code>登陆</code> <code>免费注册</code> <code>logo</code> 和 登录页的 <code>立即跳转</code> 和 注册页的 <code>登录</code> 均会跳转到相应的页面</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Header  10 line</span><br><span class="line"></span><br><span class="line">&lt;!-- &lt;a href&#x3D;&quot;###&quot;&gt;登录&lt;&#x2F;a&gt;</span><br><span class="line">&lt;a href&#x3D;&quot;###&quot; class&#x3D;&quot;register&quot;&gt;免费注册&lt;&#x2F;a&gt; --&gt;</span><br><span class="line">&lt;router-link to&#x3D;&quot;&#x2F;login&quot;&gt;登录&lt;&#x2F;router-link&gt;</span><br><span class="line">&lt;router-link to&#x3D;&quot;&#x2F;register&quot; class&#x3D;&quot;register&quot;&gt;免费注册&lt;&#x2F;router-link&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 31 line</span><br><span class="line"></span><br><span class="line">&lt;!-- &lt;a class&#x3D;&quot;logo&quot; title&#x3D;&quot;尚品汇&quot; href&#x3D;&quot;###&quot; target&#x3D;&quot;_blank&quot;&gt;</span><br><span class="line">  &lt;img src&#x3D;&quot;.&#x2F;images&#x2F;Logo.png&quot; alt&#x3D;&quot;&quot;&gt;</span><br><span class="line">&lt;&#x2F;a&gt; --&gt;</span><br><span class="line">&lt;router-link class&#x3D;&quot;logo&quot; title&#x3D;&quot;尚品汇&quot; to&#x3D;&quot;&#x2F;&quot;&gt;</span><br><span class="line">  &lt;img src&#x3D;&quot;.&#x2F;images&#x2F;Logo.png&quot; alt&#x3D;&quot;&quot;&gt;</span><br><span class="line">&lt;&#x2F;router-link&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Register  6 line</span><br><span class="line"></span><br><span class="line">&lt;!-- &lt;a href&#x3D;&quot;login.html&quot; target&#x3D;&quot;_blank&quot;&gt;登陆&lt;&#x2F;a&gt; --&gt;</span><br><span class="line">&lt;router-link to&#x3D;&quot;&#x2F;login&quot;&gt;登陆&lt;&#x2F;router-link&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Login  42 line</span><br><span class="line"></span><br><span class="line">&lt;!-- &lt;a href&#x3D;&quot;##&quot; class&#x3D;&quot;register&quot;&gt;立即注册&lt;&#x2F;a&gt; --&gt;</span><br><span class="line">&lt;router-link to&#x3D;&quot;&#x2F;register&quot; class&#x3D;&quot;register&quot;&gt;立即注册&lt;&#x2F;router-link&gt;</span><br></pre></td></tr></table></figure>
<h2><span id="p17-dian-ji-sou-suo-hou-tiao-zhuan-search-bian-cheng-shi-lu-you-tiao-zhuan">17 点击搜索后跳转 search（编程式路由跳转）  △</span><a href="#p17-dian-ji-sou-suo-hou-tiao-zhuan-search-bian-cheng-shi-lu-you-tiao-zhuan" class="header-anchor">#</a></h2>
<p>绑定事件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Header 42 line</span><br><span class="line"></span><br><span class="line">&lt;button class&#x3D;&quot;sui-btn btn-xlarge btn-danger&quot; type&#x3D;&quot;button&quot; @click&#x3D;&quot;toSearch&quot;&gt;搜索&lt;&#x2F;button&gt;</span><br></pre></td></tr></table></figure>
<p>对应的回调函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Header 50 line</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;Header&#x27;</span>,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="comment">// 点击按钮跳转到Search页面</span></span><br><span class="line">    toSearch() &#123;</span><br><span class="line">      <span class="comment">// 此时多次点击按钮会报错，是 vue-router 中的一个 bug</span></span><br><span class="line">      <span class="built_in">this</span>.$router.push(<span class="string">&#x27;/search&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>点击搜索按钮后 地址变为<code>/search</code></p>
<p>此处有一个 🐛 ，<code>this.$router.push</code> 上面那种方法使用，多次点击会报错，需传入成功和失败回调。</p>
<p><code>replace</code> 也有这个问题，考虑到多次使用，要从根本上解决就只能重写</p>
<h2><span id="p18-chong-xie-push-he-replace">18 重写 push 和 replace</span><a href="#p18-chong-xie-push-he-replace" class="header-anchor">#</a></h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// router/index.js 11 line</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 重写 push 和 replace</span></span><br><span class="line"><span class="keyword">const</span> pushOrigin = VueRouter.prototype.push</span><br><span class="line">VueRouter.prototype.push = <span class="function"><span class="keyword">function</span> (<span class="params">location, onComplete = () =&gt; &#123;&#125;, onAbort</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> pushOrigin.call(<span class="built_in">this</span>, location, onComplete, onAbort)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> replaceOrigin = VueRouter.prototype.replace</span><br><span class="line">VueRouter.prototype.replace = <span class="function"><span class="keyword">function</span> (<span class="params">location, onComplete, onAbort = () =&gt; &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> replaceOrigin.call(<span class="built_in">this</span>, location, onComplete, onAbort)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此时出现报错就 <code>npm install --save core-js</code></p>
<h2><span id="p19-lu-you-chuan-can-params">19 路由传参（params） △</span><a href="#p19-lu-you-chuan-can-params" class="header-anchor">#</a></h2>
<p>💡  路由传参方式</p>
<p>获取搜索框输入内容，点击跳转，比如输入 <code>123</code> 则跳转到 <code>search/123</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  Header 41 line</span></span><br><span class="line"></span><br><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> id=<span class="string">&quot;autocomplete&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;input-error input-xxlarge&quot;</span> v-model=<span class="string">&quot;keyword&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Header 51 line</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 数据对象</span></span><br><span class="line">data() &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    keyword: <span class="string">&#x27;&#x27;</span> <span class="comment">// 用来收集搜索框中的关键字</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">  <span class="comment">// 点击按钮跳转到Search页面</span></span><br><span class="line">  toSearch() &#123;</span><br><span class="line">    <span class="comment">// 判断文本框是否输入内容</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.keyword) &#123;</span><br><span class="line">      <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">        name: <span class="string">&#x27;search&#x27;</span>,</span><br><span class="line">        params: &#123;</span><br><span class="line">          keyword: <span class="built_in">this</span>.keyword</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">        name: <span class="string">&#x27;search&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// routes.js 14 line</span></span><br><span class="line"></span><br><span class="line">path: <span class="string">&#x27;/search/:keyword?&#x27;</span>, <span class="comment">// ? 表示参数可传可不传</span></span><br><span class="line">component: Search,</span><br><span class="line">name: <span class="string">&#x27;search&#x27;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p20-er-ci-feng-zhuang-axios">20 二次封装 axios △</span><a href="#p20-er-ci-feng-zhuang-axios" class="header-anchor">#</a></h2>
<p>安装 Nprogress</p>
<p><code>npm install --save nprogress </code></p>
<p>新建 <code>api/ajax.js</code> 文件，内容如下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 二次封装 axios</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="comment">// 引入Nprogress插件和插件的样式文件</span></span><br><span class="line"><span class="comment">// 可以在发送请求或者作出响应的时候有进度条的效果</span></span><br><span class="line"><span class="keyword">import</span> Nprogress <span class="keyword">from</span> <span class="string">&#x27;nprogress&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;nprogress/nprogress.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置请求时的根路径和及请求超时时间 </span></span><br><span class="line"><span class="keyword">const</span> ajax = axios.create(&#123;</span><br><span class="line">  baseURL: <span class="string">&#x27;/api&#x27;</span>, <span class="comment">// 设置根路径</span></span><br><span class="line">  timeOut: <span class="number">20000</span> <span class="comment">// 设置超时时间</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 请求拦截器</span></span><br><span class="line">ajax.interceptors.request.use(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">  Nprogress.start() <span class="comment">// 显示进度条</span></span><br><span class="line">  <span class="keyword">return</span> config</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 响应拦截器</span></span><br><span class="line">ajax.interceptors.response.use(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">  Nprogress.done() <span class="comment">// 隐藏进度条</span></span><br><span class="line">  <span class="keyword">return</span> response.data</span><br><span class="line">&#125;), <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">  Nprogress.done() <span class="comment">// 隐藏进度条</span></span><br><span class="line">  alert(error.message)</span><br><span class="line">  <span class="comment">// 返回错误信息，外部可以处理</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> ajax</span><br></pre></td></tr></table></figure>
<p>新建 <code>api/index.js</code> 文件，内容如下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// api/index.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 封装每个接口的api函数</span></span><br><span class="line"><span class="keyword">import</span> ajax <span class="keyword">from</span> <span class="string">&#x27;./ajax&#x27;</span></span><br><span class="line"><span class="comment">// 获取首页三级分类信息的api接口函数</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqBaseCategoryList = <span class="function">() =&gt;</span> ajax.get(<span class="string">`/product/getBaseCategoryList`</span>)</span><br></pre></td></tr></table></figure>
<p>修改 <code>App.vue </code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">--&gt; <span class="string">&quot;App.vue&quot;</span> <span class="number">15</span> line</span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入 api 接口函数</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  reqBaseCategoryList</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br><span class="line"></span><br><span class="line">--&gt; <span class="number">27</span> line</span><br><span class="line"><span class="keyword">async</span> mounted() &#123;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> reqBaseCategoryList()</span><br><span class="line">  <span class="built_in">console</span>.log(result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p21-vue-config-js-eslint-she-zhi-kua-yu-dai-li-she-zhi">21 vue.config.js / eslint 设置 / 跨域代理设置</span><a href="#p21-vue-config-js-eslint-she-zhi-kua-yu-dai-li-she-zhi" class="header-anchor">#</a></h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">--&gt; <span class="string">&quot;vue.config.js&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  lintOnSave: <span class="literal">true</span>, <span class="comment">// eslint 语法检查开关</span></span><br><span class="line">  devServer: &#123;</span><br><span class="line">    proxy: &#123;</span><br><span class="line">      <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">        target: <span class="string">&#x27;http://182.92.128.115&#x27;</span>,</span><br><span class="line">        changeOrigin: <span class="literal">true</span>  <span class="comment">// 开启跨域</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1><span id="9-yue-19-ri-day-2">9月19日（day 2）</span><a href="#9-yue-19-ri-day-2" class="header-anchor">#</a></h1>
<h2><span id="p22-store-da-jian-he-zhu-ce">22 store 搭建和注册</span><a href="#p22-store-da-jian-he-zhu-ce" class="header-anchor">#</a></h2>
<p>创建 <code>store/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入核心对象</span></span><br><span class="line"><span class="keyword">import</span> state <span class="keyword">from</span> <span class="string">&#x27;./state&#x27;</span></span><br><span class="line"><span class="keyword">import</span> mutations <span class="keyword">from</span> <span class="string">&#x27;./mutations&#x27;</span></span><br><span class="line"><span class="keyword">import</span> actions <span class="keyword">from</span> <span class="string">&#x27;./actions&#x27;</span></span><br><span class="line"><span class="keyword">import</span> getters <span class="keyword">from</span> <span class="string">&#x27;./getters&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明使用插件</span></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实例化 + 暴露</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state,</span><br><span class="line">  mutations,</span><br><span class="line">  actions,</span><br><span class="line">  getters</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>创建 <code>store/state.js</code>  <code>store/mutations.js</code> <code>store/actions.js</code> <code>store/getters.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>更新 <code>main.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">--&gt; <span class="string">&quot;main.js&quot;</span></span><br><span class="line">--&gt; <span class="number">7</span> line</span><br><span class="line"><span class="comment">// 引入store</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"></span><br><span class="line">--&gt; <span class="number">20</span> line</span><br><span class="line"><span class="comment">// 注册store</span></span><br><span class="line">store,</span><br></pre></td></tr></table></figure>
<h2><span id="p23-vuex-zhi-modules">23 Vuex 之 modules</span><a href="#p23-vuex-zhi-modules" class="header-anchor">#</a></h2>
<p>💡 Vuex 的 modules 知识</p>
<p><code>store</code> 新建 目录 <code>modules</code></p>
<p>里面新建文件 <code>home.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  state:&#123;&#125;,</span><br><span class="line">  mutations:&#123;&#125;,</span><br><span class="line">  actions:&#123;&#125;,</span><br><span class="line">  getters:&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新建文件 <code>index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> home <span class="keyword">from</span> <span class="string">&#x27;./home&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  home</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>修改 <code>store/index.js</code> 文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> modules <span class="keyword">from</span> <span class="string">&#x27;./modules&#x27;</span></span><br><span class="line"></span><br><span class="line">getters,</span><br><span class="line"><span class="comment">// 管理模块</span></span><br><span class="line">modules</span><br></pre></td></tr></table></figure>
<blockquote>
<p>组件中获取状态数据方式</p>
<p><code>this.$store.state.xxxx</code> / <code>...mapState/(['xxx'])</code></p>
<p><code>this.store.state.模块名字.xxx</code> / <code>..mapState(&#123; xxx:&#125;)</code></p>
<p>尽量不能让方法重名，如果总actions有一个a方法，某模块中也有a方法，最终这两个方法都会执行</p>
</blockquote>
<h2><span id="p24-home-zu-jian-xiang-guan-de-store">24 Home组件相关的 store</span><a href="#p24-home-zu-jian-xiang-guan-de-store" class="header-anchor">#</a></h2>
<p>修改 <code>store</code> 中的 <code>home.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入API接口函数</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  reqBaseCategoryList</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;@/api&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 管理首页中的数据</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    <span class="comment">// 三级分类信息数据数组</span></span><br><span class="line">    baseCategoryList: []</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    <span class="comment">// 直接修改三级分类信息数据 </span></span><br><span class="line">    RECEIVE_BASE_CATEGORY_LIST(state, baseCategoryList) &#123;</span><br><span class="line">      state.baseCategoryList = baseCategoryList;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    <span class="comment">// 异步请求，获取三级分类信息数据</span></span><br><span class="line">    <span class="keyword">async</span> getBaseCategoryList(&#123;</span><br><span class="line">      commit</span><br><span class="line">    &#125;) &#123;</span><br><span class="line">      <span class="comment">// 调用接口发送异步请求</span></span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqBaseCategoryList()</span><br><span class="line">      <span class="comment">// 判断</span></span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="comment">// 提交</span></span><br><span class="line">        commit(<span class="string">&#x27;RECEIVE_BASE_CATEGORY_LIST&#x27;</span>, result.data)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>删除 <code>App.vue</code> 15行的引入api接口语句</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 删除这个</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  reqGetBaseCategoryList</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br></pre></td></tr></table></figure>
<p>修改22行的 <code>async mounted()&#123;&#125;</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> mounted() &#123;</span><br><span class="line">   <span class="comment">// 分发</span></span><br><span class="line">   <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;getBaseCategoryList&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p25-bian-li-typenav-san-ji-fen-lei-shu-ju-bing-xian-shi">25 遍历 TypeNav 三级分类数据并显示</span><a href="#p25-bian-li-typenav-san-ji-fen-lei-shu-ju-bing-xian-shi" class="header-anchor">#</a></h2>
<p>删除 TypeNav 组件 <code>&lt;div class=&quot;item&quot;&gt;</code> 46 - 1688行</p>
<p>视图部分更新如下</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// &quot;TypeNav&quot; 6 line</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sort&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;all-sort-list2&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 遍历第一层 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(c1, index) in baseCategoryList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;c1.categoryId&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>&#123;&#123;c1.categoryName&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item-list clearfix&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;subitem&quot;</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 遍历第二层 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">dl</span> <span class="attr">class</span>=<span class="string">&quot;fore&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(c2) in c1.categoryChild&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;c2.categoryId&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dt</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>&#123;&#123;c2.categoryName&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dd</span>&gt;</span></span><br><span class="line">              <span class="comment">&lt;!-- 遍历第三层 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">em</span> <span class="attr">v-for</span>=<span class="string">&quot;(c3) in c2.categoryChild&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;c3.categoryId&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>&#123;&#123;c3.categoryName&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 这个移动到这里 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>脚本更新如下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &quot;TypeNav&quot;</span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">import</span> &#123;</span><br><span class="line">    mapState</span><br><span class="line">  &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    name: <span class="string">&#x27;TypeNav&#x27;</span>,</span><br><span class="line">    computed: &#123;</span><br><span class="line">      <span class="comment">// 获取状态数据</span></span><br><span class="line">      ...mapState(&#123;</span><br><span class="line">        baseCategoryList: <span class="function">(<span class="params">state</span>) =&gt;</span> state.home.baseCategoryList</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2><span id="p26-shu-biao-yi-ru-yi-chu-xiao-guo">26 鼠标移入移出效果</span><a href="#p26-shu-biao-yi-ru-yi-chu-xiao-guo" class="header-anchor">#</a></h2>
<p>TypeNav  添加事件和绑定样式属性 如下中的 1 和 2</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">// TypeNav 第4行</span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 1 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> @<span class="attr">mouseleave</span>=<span class="string">&quot;currentIndex=-2&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;all&quot;</span>&gt;</span>全部商品分类<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sort&quot;</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 遍历显示导航数据 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;all-sort-list2&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 遍历第一层 --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 2 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(c1,index) in baseCategoryList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;c1.categoryId&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">:class</span>=<span class="string">&quot;&#123;item_on:currentIndex===index&#125;&quot;</span> @<span class="attr">mouseenter</span>=<span class="string">&quot;showSubCategory(index)&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>&#123;&#123;c1.categoryName&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item-list clearfix&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;subitem&quot;</span>&gt;</span></span><br><span class="line">                  <span class="comment">&lt;!-- 遍历第二层 --&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">dl</span> <span class="attr">class</span>=<span class="string">&quot;fore&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(c2) in c1.categoryChild&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;c2.categoryId&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">dt</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>&#123;&#123;c2.categoryName&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">dd</span>&gt;</span></span><br><span class="line">                      <span class="comment">&lt;!-- 遍历第三层 --&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">em</span> <span class="attr">v-for</span>=<span class="string">&quot;(c3) in c2.categoryChild&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;c3.categoryId&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>&#123;&#123;c3.categoryName&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- @mouseleave 事件那个div到这里结束 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>data更新</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    currentIndex: <span class="number">-2</span> <span class="comment">// 用来储存鼠标进入某一项的时候的索引</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>methods更新</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  <span class="comment">// 鼠标进入事件</span></span><br><span class="line">  showSubCategory(index) &#123;</span><br><span class="line">    <span class="comment">// 鼠标进入的时候把当前这个项的索引保存起来</span></span><br><span class="line">    <span class="built_in">this</span>.currentIndex = index</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>样式更新 <code>&amp;:hover </code> 改成 <code>&amp;.item_on</code></p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 187行</span></span><br><span class="line">            <span class="selector-tag">&amp;</span><span class="selector-class">.item_on</span> &#123;</span><br><span class="line">              <span class="attribute">background-color</span>: <span class="number">#02a774</span>;</span><br><span class="line"></span><br><span class="line">              <span class="selector-class">.item-list</span> &#123;</span><br><span class="line">                <span class="attribute">display</span>: block;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>
<p>呈现鼠标移入标记效果</p>
<h2><span id="p27-an-xu-yin-ru-lodash-zhong-jie-liu-han-shu">27 按需引入lodash中节流函数</span><a href="#p27-an-xu-yin-ru-lodash-zhong-jie-liu-han-shu" class="header-anchor">#</a></h2>
<p>💡 节流 / 防抖函数</p>
<p>安装 lodash</p>
<p><code>npm install lodash</code></p>
<p>引入 lodash</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TypeNav 55行</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 按需引入 lodash 中的 节流函数</span></span><br><span class="line">  <span class="keyword">import</span> throttle <span class="keyword">from</span> <span class="string">&#x27;lodash/throttle&#x27;</span></span><br></pre></td></tr></table></figure>
<p>更新 methods</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 鼠标进入事件</span></span><br><span class="line">showSubCategory: throttle( <span class="function"><span class="keyword">function</span> (<span class="params">index</span>)</span>&#123;</span><br><span class="line">   <span class="comment">// 鼠标进入的时候把当前这个项的索引保存起来</span></span><br><span class="line">  <span class="built_in">this</span>.currentIndex = index</span><br><span class="line">&#125;, <span class="number">333</span>)</span><br></pre></td></tr></table></figure>
<h2><span id="p28-query-fang-shi-lu-you-chuan-can-shi-jian-wei-tuo-mou-pao">28 query方式路由传参 + 事件委托（冒泡） △</span><a href="#p28-query-fang-shi-lu-you-chuan-can-shi-jian-wei-tuo-mou-pao" class="header-anchor">#</a></h2>
<p>这里不宜采用三层 <code>v-for</code> 嵌套的路由视图或者是事件，应该采用事件委托的方式</p>
<p>通过事件绑定委托绑定点击事件如 1 所示</p>
<p>给a标签添加自定义属性如 2 3 4 所示</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">// TypeNav 7行</span><br><span class="line">       <span class="comment">&lt;!-- 1 这里加了一个点击事件（事件委托） --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sort&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;toSearch&quot;</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 遍历显示导航数据 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;all-sort-list2&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 遍历第一层 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(c1,index) in baseCategoryList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;c1.categoryId&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">:class</span>=<span class="string">&quot;&#123; item_on:currentIndex===index&#125;&quot;</span> @<span class="attr">mouseenter</span>=<span class="string">&quot;showSubCategory(index)&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 2 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">:data-categoryName</span>=<span class="string">&quot;c1.categoryName&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">:data-category1Id</span>=<span class="string">&quot;c1.categoryId&quot;</span>&gt;</span>&#123;&#123;c1.categoryName&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item-list clearfix&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;subitem&quot;</span>&gt;</span></span><br><span class="line">                  <span class="comment">&lt;!-- 遍历第二层 --&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">dl</span> <span class="attr">class</span>=<span class="string">&quot;fore&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(c2) in c1.categoryChild&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;c2.categoryId&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">dt</span>&gt;</span></span><br><span class="line">                      <span class="comment">&lt;!-- 3 --&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">:data-categoryName</span>=<span class="string">&quot;c2.categoryName&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:data-category2Id</span>=<span class="string">&quot;c2.categoryId&quot;</span>&gt;</span>&#123;&#123;c2.categoryName&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">dd</span>&gt;</span></span><br><span class="line">                      <span class="comment">&lt;!-- 遍历第三层 --&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">em</span> <span class="attr">v-for</span>=<span class="string">&quot;(c3) in c2.categoryChild&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;c3.categoryId&quot;</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- 4 --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">:data-categoryName</span>=<span class="string">&quot;c3.categoryName&quot;</span></span></span><br><span class="line"><span class="tag">                          <span class="attr">:data-category3Id</span>=<span class="string">&quot;c3.categoryId&quot;</span>&gt;</span>&#123;&#123;c3.categoryName&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>更新对应的点击事件 <code>toSearch</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TypeNav 73行</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">      ...</span><br><span class="line">      <span class="comment">// 点击跳转事件（点击外层div，实现路由跳转）</span></span><br><span class="line">      toSearch(e) &#123;</span><br><span class="line">        <span class="comment">// 事件委托</span></span><br><span class="line">        <span class="keyword">const</span> nodeTarget = e.target</span><br><span class="line">        <span class="comment">// 判断是不是a标签</span></span><br><span class="line">        <span class="keyword">if</span> (nodeTarget.nodeName === <span class="string">&#x27;A&#x27;</span>) &#123;</span><br><span class="line">          <span class="comment">// 解构</span></span><br><span class="line">          <span class="keyword">const</span> &#123;</span><br><span class="line">            categoryname,</span><br><span class="line">            category1id,</span><br><span class="line">            category2id,</span><br><span class="line">            category3id</span><br><span class="line">          &#125; = nodeTarget.dataset</span><br><span class="line">          <span class="keyword">const</span> query = &#123;</span><br><span class="line">            categoryName: categoryname</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">// 判断</span></span><br><span class="line">          <span class="keyword">if</span> (category1id) &#123;</span><br><span class="line">            query.category1Id = category1id</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (category2id) &#123;</span><br><span class="line">            query.category2Id = category2id</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (category3id) &#123;</span><br><span class="line">            query.category3Id = category3id</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">// 路由跳转</span></span><br><span class="line">          <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">            path: <span class="string">&#x27;/search&#x27;</span>,</span><br><span class="line">            query</span><br><span class="line">          &#125;)</span><br><span class="line">          <span class="comment">// 隐藏高亮效果</span></span><br><span class="line">          <span class="built_in">this</span>.currentIndex = <span class="number">-2</span></span><br><span class="line">          </span><br><span class="line">          <span class="built_in">this</span>.isShowFirst = <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>以上可以实现点击 TypeNav 中的一级二级三级链接跳转 Search</p>
<p>URL 为 <code>search?categoryName=电脑办公&amp;categoryId=6</code>  之类的效果</p>
<h2><span id="p29-search-ye-mian-tian-jia-typenav">29 Search 页面添加 TypeNav</span><a href="#p29-search-ye-mian-tian-jia-typenav" class="header-anchor">#</a></h2>
<p>Search 添加 TypeNav 标签</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TypeNav</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>TypeNav 第8行添加一个 <code>v-if</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sort&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;toSearch&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;isShowFirst&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>data 添加一个 isShowFirst  数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    currentIndex: <span class="number">-2</span>, <span class="comment">// 用来储存鼠标进入某一项的时候的索引</span></span><br><span class="line">    isShowFirst: <span class="literal">true</span> <span class="comment">// 默认 true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>第5行 更新</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> @<span class="attr">mouseleave</span>=<span class="string">&quot;hideFirst&quot;</span> @<span class="attr">mouseenter</span>=<span class="string">&quot;showFirst&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>第114行 添加</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 该组件加载完毕的时候里面的菜单是否隐藏取决于当前的地址（路由地址/路径）</span></span><br><span class="line">mounted() &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">this</span>.$route.path !== <span class="string">&#x27;/&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// 如果不是首页 就隐藏菜单</span></span><br><span class="line">    <span class="built_in">this</span>.isShowFirst = <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>methods 中添加两个方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// 鼠标进入</span></span><br><span class="line">  showFirst() &#123;</span><br><span class="line">    <span class="built_in">this</span>.isShowFirst = <span class="literal">true</span></span><br><span class="line">    <span class="built_in">this</span>.currentIndex = <span class="number">-1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 鼠标离开</span></span><br><span class="line">  hideFirst() &#123;</span><br><span class="line">    <span class="built_in">this</span>.currentIndex = <span class="number">-2</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.$route.path != <span class="string">&#x27;/&#x27;</span>) &#123;</span><br><span class="line">      <span class="built_in">this</span>.isShowFirst = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>修改 showSubCategory</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">showSubCategory: throttle(<span class="function"><span class="keyword">function</span> (<span class="params">index</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 鼠标进入的时候把当前这个项的索引保存起来</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">this</span>.currentIndex !== <span class="number">-2</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.currentIndex = index</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="number">300</span>),</span><br></pre></td></tr></table></figure>
<h2><span id="p30-yin-ru-mockjs">30 引入 mockJS</span><a href="#p30-yin-ru-mockjs" class="header-anchor">#</a></h2>
<p>生成随机数据，拦截ajax请求</p>
<p>安装 <code>npm install mockjs</code></p>
<p>mock 目录新建 <code>banners.json</code> （直接拷贝代码）</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;id|1-10&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;imgUrl&quot;</span>: <span class="string">&quot;/images/banner1.jpg&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;imgUrl&quot;</span>: <span class="string">&quot;/images/banner2.jpg&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;3&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;imgUrl&quot;</span>: <span class="string">&quot;/images/banner3.jpg&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;4&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;imgUrl&quot;</span>: <span class="string">&quot;/images/banner4.jpg&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>mock 目录新建 <code>floors.json</code> （直接拷贝代码）</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;001&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;家用电器&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;keywords&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;节能补贴&quot;</span>,</span><br><span class="line">      <span class="string">&quot;4K电视&quot;</span>,</span><br><span class="line">      <span class="string">&quot;空气净化器&quot;</span>,</span><br><span class="line">      <span class="string">&quot;IH电饭煲&quot;</span>,</span><br><span class="line">      <span class="string">&quot;滚筒洗衣机&quot;</span>,</span><br><span class="line">      <span class="string">&quot;电热水器&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;imgUrl&quot;</span>: <span class="string">&quot;/images/floor-1-1.png&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;navList&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;热门&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;大家电&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;生活电器&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;厨房电器&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;应季电器&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;空气/净水&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;高端电器&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;carouselList&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;0011&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;imgUrl&quot;</span>: <span class="string">&quot;/images/floor-1-b01.png&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;0012&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;imgUrl&quot;</span>: <span class="string">&quot;/images/floor-1-b02.png&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;0013&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;imgUrl&quot;</span>: <span class="string">&quot;/images/floor-1-b03.png&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;recommendList&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;/images/floor-1-2.png&quot;</span>,</span><br><span class="line">      <span class="string">&quot;/images/floor-1-3.png&quot;</span>,</span><br><span class="line">      <span class="string">&quot;/images/floor-1-5.png&quot;</span>,</span><br><span class="line">      <span class="string">&quot;/images/floor-1-6.png&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;bigImg&quot;</span>: <span class="string">&quot;/images/floor-1-4.png&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;002&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;手机通讯&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;keywords&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;节能补贴2&quot;</span>,</span><br><span class="line">      <span class="string">&quot;4K电视2&quot;</span>,</span><br><span class="line">      <span class="string">&quot;空气净化器2&quot;</span>,</span><br><span class="line">      <span class="string">&quot;IH电饭煲2&quot;</span>,</span><br><span class="line">      <span class="string">&quot;滚筒洗衣机2&quot;</span>,</span><br><span class="line">      <span class="string">&quot;电热水器2&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;imgUrl&quot;</span>: <span class="string">&quot;/images/floor-1-1.png&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;navList&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;热门2&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;大家电2&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;生活电器2&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;厨房电器2&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;应季电器2&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;空气/净水2&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;#&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;高端电器2&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;carouselList&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;0011&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;imgUrl&quot;</span>: <span class="string">&quot;/images/floor-1-b01.png&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;0012&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;imgUrl&quot;</span>: <span class="string">&quot;/images/floor-1-b02.png&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;0013&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;imgUrl&quot;</span>: <span class="string">&quot;/images/floor-1-b03.png&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;recommendList&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;/images/floor-1-2.png&quot;</span>,</span><br><span class="line">      <span class="string">&quot;/images/floor-1-3.png&quot;</span>,</span><br><span class="line">      <span class="string">&quot;/images/floor-1-5.png&quot;</span>,</span><br><span class="line">      <span class="string">&quot;/images/floor-1-6.png&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;bigImg&quot;</span>: <span class="string">&quot;/images/floor-1-4.png&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>mock 目录新建 <code>index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入 Mock</span></span><br><span class="line"><span class="keyword">import</span> Mock <span class="keyword">from</span> <span class="string">&#x27;mockjs&#x27;</span></span><br><span class="line"><span class="comment">// 引入模版数据</span></span><br><span class="line"><span class="keyword">import</span> banners <span class="keyword">from</span> <span class="string">&#x27;./banners.json&#x27;</span></span><br><span class="line"><span class="keyword">import</span> floors <span class="keyword">from</span> <span class="string">&#x27;./floors.json&#x27;</span></span><br><span class="line"><span class="comment">// 根据指定的地址生成随机的数据</span></span><br><span class="line">Mock.mock(<span class="string">&#x27;/mock/banners&#x27;</span>, &#123;</span><br><span class="line">  code: <span class="number">200</span>,</span><br><span class="line">  message: <span class="string">&#x27;成功&#x27;</span>,</span><br><span class="line">  data: banners</span><br><span class="line">&#125;)</span><br><span class="line">Mock.mock(<span class="string">&#x27;/mock/floors&#x27;</span>, &#123;</span><br><span class="line">  code: <span class="number">200</span>,</span><br><span class="line">  message: <span class="string">&#x27;成功&#x27;</span>,</span><br><span class="line">  data: floors</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>复制一份 <code>api/ajax.js</code> 改名 <code>ajaxMock.js</code></p>
<p>把其中根路径（第11行）<code>baseURL:'/api'</code> 改成 <code>baseURL:'/mock'</code></p>
<p><code>api/index.js</code> 引入 ajaxMock</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ajaxMock <span class="keyword">from</span> <span class="string">&#x27;./ajaxMock&#x27;</span></span><br></pre></td></tr></table></figure>
<p>末尾 加</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置 mock 相关的接口函数</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqBanners = <span class="function">() =&gt;</span> ajaxMock.get(<span class="string">&#x27;/mock/banners&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqFloors = <span class="function">() =&gt;</span> ajaxMock.get(<span class="string">&#x27;/mock/floors&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p><code>main.js</code> 加</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;./mock&quot;</span></span><br></pre></td></tr></table></figure>
<p>Home 组件引入测试</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    reqBanners,</span><br><span class="line">    reqFloors</span><br><span class="line">  &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">async</span> mounted() &#123;</span><br><span class="line">      <span class="keyword">const</span> r1 = <span class="keyword">await</span> reqBanners()</span><br><span class="line">      <span class="keyword">const</span> r2 = <span class="keyword">await</span> reqFloors()</span><br><span class="line">      <span class="built_in">console</span>.log(r1, r2)</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>
<h2><span id="p31-mock-xiang-guan-shu-ju-jia-ru-store-zhong">31 mock相关数据加入 store 中</span><a href="#p31-mock-xiang-guan-shu-ju-jia-ru-store-zhong" class="header-anchor">#</a></h2>
<p><code>store/modules/home.js</code></p>
<p>修改引入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  reqBaseCategoryList,</span><br><span class="line">  reqBanners,</span><br><span class="line">  reqFloors</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br></pre></td></tr></table></figure>
<p>state 加入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 大轮播图数据</span></span><br><span class="line">banners: [],</span><br><span class="line"><span class="comment">// 楼层数据</span></span><br><span class="line">floors: []</span><br></pre></td></tr></table></figure>
<p>mutations 加入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 直接修改大轮播图的数据</span></span><br><span class="line">RECEIVE_BANNERS(state, banners) &#123;</span><br><span class="line">  state.banners = banners</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 直接修改楼层的数据</span></span><br><span class="line">RECEIVE_FLOORS(state, floors) &#123;</span><br><span class="line">  state.floors = floors</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>actions 加入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 异步获取大轮播图的数据</span></span><br><span class="line"><span class="keyword">async</span> getBanners (&#123; commit &#125;) &#123;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> reqBanners()</span><br><span class="line">  <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">    commit(<span class="string">&#x27;RECEIVE_BANNERS&#x27;</span>, result.data)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 异步获取楼层的数据</span></span><br><span class="line"><span class="keyword">async</span> getFloors (&#123; commit &#125;) &#123;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> reqFloors()</span><br><span class="line">  <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">    commit(<span class="string">&#x27;RECEIVE_FLOORS&#x27;</span>, result.data)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Home 组件引入测试</p>
<p>删除前面的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    reqBanners,</span><br><span class="line">    reqFloors</span><br><span class="line">  &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br></pre></td></tr></table></figure>
<p>修改</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> mounted() &#123;</span><br><span class="line">  <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;getBanners&#x27;</span>)</span><br><span class="line">  <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;getFloors&#x27;</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>Home-&gt;ListContainer 组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;ListContainer&#x27;</span>,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    ...mapState(&#123;</span><br><span class="line">      banners:<span class="function"><span class="params">state</span>=&gt;</span>state.home.banners</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p32-swiper-shi-xian-lun-bo-tu">32 Swiper 实现轮播图</span><a href="#p32-swiper-shi-xian-lun-bo-tu" class="header-anchor">#</a></h2>
<p>安装 Swiper <code>npm install swiper@5.4.2</code></p>
<p>ListContainer 轮播图 第5行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--banner轮播--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-wrapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/banner1.jpg&quot;</span> <span class="attr">alt</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/banner2.jpg&quot;</span> <span class="attr">alt</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/banner3.jpg&quot;</span> <span class="attr">alt</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/banner4.jpg&quot;</span> <span class="attr">alt</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 如果需要分页器 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-pagination&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 如果需要导航按钮 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-button-prev&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-button-next&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>115行</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入swiper对象</span></span><br><span class="line"><span class="keyword">import</span> Swiper <span class="keyword">from</span> <span class="string">&#x27;swiper&#x27;</span></span><br><span class="line"><span class="comment">// 引入swiper的样式</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;swiper/css/swiper.css&#x27;</span></span><br></pre></td></tr></table></figure>
<p>126行</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 当前组件渲染完毕的生命周期回调</span></span><br><span class="line">mounted() &#123;</span><br><span class="line">  <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span><br><span class="line">    loop: <span class="literal">true</span>, <span class="comment">// 循环模式选项</span></span><br><span class="line">    <span class="comment">// 如果需要分页器</span></span><br><span class="line">    pagination: &#123;</span><br><span class="line">      el: <span class="string">&#x27;.swiper-pagination&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 如果需要前进后退按钮</span></span><br><span class="line">    navigation: &#123;</span><br><span class="line">      nextEl: <span class="string">&#x27;.swiper-button-next&#x27;</span>,</span><br><span class="line">      prevEl: <span class="string">&#x27;.swiper-button-prev&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>实现轮播图效果</p>
<h1><span id="9-yue-21-ri-day-3">9月21日（day 3）</span><a href="#9-yue-21-ri-day-3" class="header-anchor">#</a></h1>
<h2><span id="p33-xiang-mu-you-hua">33 项目优化</span><a href="#p33-xiang-mu-you-hua" class="header-anchor">#</a></h2>
<p>store/modules/home.js 20行</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RECEIVE_BASE_CATEGORY_LIST(state, baseCategoryList) &#123;</span><br><span class="line">  state.baseCategoryList = baseCategoryList.splice(<span class="number">0</span>, baseCategoryList.length - <span class="number">2</span>);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>ListContainer <code>  import 'swiper/css/swiper.css'</code> 去掉，改为在 <code>main.js</code> 中引入</p>
<h2><span id="p34-lun-bo-tu-yu-shu-ju-jia-zai-yu-xuan-ran-swiper-dui-xiang-chuang-jian-shi-ji">34 轮播图与数据加载与渲染，Swiper对象创建时机</span><a href="#p34-lun-bo-tu-yu-shu-ju-jia-zai-yu-xuan-ran-swiper-dui-xiang-chuang-jian-shi-ji" class="header-anchor">#</a></h2>
<p>public/image 里面要有轮播使用的图</p>
<p>ListContainer 5行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--banner轮播--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-container&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sw&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-wrapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(carousel) in banners&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;carousel.id&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;carousel.imgUrl&quot;</span> <span class="attr">alt</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 如果需要分页器 --&gt;</span></span><br></pre></td></tr></table></figure>
<p>script部分更新为</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">  computed: &#123;</span><br><span class="line">    ...mapState(&#123;</span><br><span class="line">      banners: <span class="function"><span class="params">state</span> =&gt;</span> state.home.banners</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    banners() &#123;</span><br><span class="line">      <span class="built_in">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span><br><span class="line">          loop: <span class="literal">true</span>, <span class="comment">// 循环模式选项</span></span><br><span class="line">          <span class="comment">// 如果需要分页器</span></span><br><span class="line">          pagination: &#123;</span><br><span class="line">            el: <span class="string">&#x27;.swiper-pagination&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="comment">// 如果需要前进后退按钮</span></span><br><span class="line">          navigation: &#123;</span><br><span class="line">            nextEl: <span class="string">&#x27;.swiper-button-next&#x27;</span>,</span><br><span class="line">            prevEl: <span class="string">&#x27;.swiper-button-prev&#x27;</span>,</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里应该可以看到轮播图效果（banner）</p>
<h2><span id="p35-floor-shi-tu-sheng-cheng">35 Floor 视图生成</span><a href="#p35-floor-shi-tu-sheng-cheng" class="header-anchor">#</a></h2>
<p>Home 组件中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入辅助函数</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  mapState</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取数据</span></span><br><span class="line">computed: &#123;</span><br><span class="line">  ...mapState(&#123;</span><br><span class="line">    floors: <span class="function"><span class="params">state</span> =&gt;</span> state.home.floors</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 分发 actions</span></span><br><span class="line"><span class="keyword">async</span> mounted() &#123;</span><br><span class="line">  <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;getBanners&#x27;</span>)</span><br><span class="line">  <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;getFloors&#x27;</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>14行，删除一个留一个</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 楼层 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Floor</span> <span class="attr">v-for</span>=<span class="string">&quot;(floor) in floors&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;floor.id&quot;</span> <span class="attr">:floor</span>=<span class="string">&quot;floor&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>Floor中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取参数</span></span><br><span class="line">props: &#123;</span><br><span class="line">  floor: <span class="built_in">Object</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第6行修改</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;fl&quot;</span>&gt;</span>&#123;&#123;floor.name&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>第8行修改</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav-tabs clearfix&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;active:index===0&#125;&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(nav,index) in floor.navList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;tab&quot;</span>&gt;</span>&#123;&#123;nav.text&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>第19行修改</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;jd-list&quot;</span>&gt;</span><br><span class="line">  &lt;li v-<span class="keyword">for</span>=<span class="string">&quot;(keyword,index) in floor.keywords&quot;</span> :key=<span class="string">&quot;index&quot;</span>&gt;</span><br><span class="line">    &#123;&#123;keyword&#125;&#125;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
<p>第51行修改</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;floor-conver-pit&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;floor.recommendList[0]&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;floor-conver-pit&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;floor.recommendList[1]&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;split center&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;floor.bigImg&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;split&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;floor-x-line&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;floor-conver-pit&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;floor.recommendList[2]&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;floor-conver-pit&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;floor.recommendList[3]&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p36-lun-bo-tu-feng-zhuang-wei-gong-gong-zu-jian">36 轮播图封装为公共组件</span><a href="#p36-lun-bo-tu-feng-zhuang-wei-gong-gong-zu-jian" class="header-anchor">#</a></h2>
<p>在 components 新建 Carousel 新建 index.vue</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;swiper-container&quot;</span> id=<span class="string">&quot;swL&quot;</span> ref=<span class="string">&quot;sw&quot;</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;swiper-wrapper&quot;</span>&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;swiper-slide&quot;</span> v-<span class="keyword">for</span>=<span class="string">&quot;(carousel,index) in carouselList&quot;</span> :key=<span class="string">&quot;carousel.id&quot;</span>&gt;</span><br><span class="line">        &lt;img :src=<span class="string">&quot;carousel.imgUrl&quot;</span> alt /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- 如果需要分页器 --&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;swiper-pagination&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">    &lt;!-- 如果需要导航按钮 --&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;swiper-button-prev&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;swiper-button-next&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="comment">// 引入swiper对象</span></span><br><span class="line"><span class="keyword">import</span> Swiper <span class="keyword">from</span> <span class="string">&#x27;swiper&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;Carousel&#x27;</span>,</span><br><span class="line">  props:&#123;</span><br><span class="line">    carouselList:<span class="built_in">Array</span></span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    carouselList() &#123;</span><br><span class="line">      <span class="comment">// 将回调延迟到下次 DOM 更新循环之后执行。在修改数据之后立即使用它，然后等待 DOM 更新。</span></span><br><span class="line">      <span class="built_in">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="built_in">this</span>.$refs.sw, &#123;</span><br><span class="line">          loop: <span class="literal">true</span>, <span class="comment">// 循环模式选项</span></span><br><span class="line">          <span class="comment">// 如果需要分页器</span></span><br><span class="line">          pagination: &#123;</span><br><span class="line">            el: <span class="string">&#x27;.swiper-pagination&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="comment">// 如果需要前进后退按钮</span></span><br><span class="line">          navigation: &#123;</span><br><span class="line">            nextEl: <span class="string">&#x27;.swiper-button-next&#x27;</span>,</span><br><span class="line">            prevEl: <span class="string">&#x27;.swiper-button-prev&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>在 main.js 注册</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入Carousel组件---轮播图组件(ListContainer和Floor组件中使用)</span></span><br><span class="line"><span class="keyword">import</span> Carousel <span class="keyword">from</span> <span class="string">&#x27;@/components/Carousel&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 参数1:组件的名字,参数2:组件对象</span></span><br><span class="line">Vue.component(<span class="string">&#x27;Carousel&#x27;</span>,Carousel)</span><br></pre></td></tr></table></figure>
<p>Floor 26行更新</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 轮播图 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;floorBanner&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">Carousel</span> <span class="attr">:carouselList</span>=<span class="string">&quot;floor.carouselList&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ListContainer 4行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--banner轮播--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Carousel</span> <span class="attr">:carouselList</span>=<span class="string">&quot;banners&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>清理 ListContainer 组件轮播图相关的数据</p>
<p>此时大轮播图可以，小轮播图不能轮播，接下去分析 🐛</p>
<h2><span id="p37-xiu-fu-lun-bo-tu-wen-ti">37 修复轮播图问题</span><a href="#p37-xiu-fu-lun-bo-tu-wen-ti" class="header-anchor">#</a></h2>
<p>Carousel 中 watch 修改为</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">  carouselList: &#123;</span><br><span class="line">    <span class="comment">// 该回调会在监听开始被立即调用</span></span><br><span class="line">    handler: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.carouselList.length === <span class="number">0</span>) <span class="keyword">return</span></span><br><span class="line">      <span class="built_in">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">         ....</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    immediate: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p38-search-zu-jian">38 Search 组件</span><a href="#p38-search-zu-jian" class="header-anchor">#</a></h2>
<p>封装api接口函数 api/index.js 加</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取商品信息数据对象</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqProductList = <span class="function">(<span class="params">searchParams</span>) =&gt;</span> ajax.post(<span class="string">&#x27;list&#x27;</span>, searchParams)</span><br></pre></td></tr></table></figure>
<p>去静态组件文件夹拿Search</p>
<p>封装Vuex modules/新建 search.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入API接口函数</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  reqProductList</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 管理Search组件中的数据</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    <span class="comment">// 商品信息数据对象</span></span><br><span class="line">    productList: &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    <span class="comment">// 直接更新商品信息数据对象</span></span><br><span class="line">    RECEIVE_PRODUCT_LIST(state, productList) &#123;</span><br><span class="line">      state.productList = productList</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    <span class="comment">// 获取商品信息数据对象</span></span><br><span class="line">    <span class="keyword">async</span> getProductList(&#123;</span><br><span class="line">      commit</span><br><span class="line">    &#125;, searchParams) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqProductList(searchParams)</span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        commit(<span class="string">&#x27;RECEIVE_PRODUCT_LIST&#x27;</span>, result.data)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;</span><br><span class="line">    trademarkList(state) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.productList.trademarkList || []</span><br><span class="line">    &#125;,</span><br><span class="line">    attrsList(state) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.productList.attrsList || []</span><br><span class="line">    &#125;,</span><br><span class="line">    goodsList(state) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.productList.goodsList || []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>更新 index.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> home <span class="keyword">from</span> <span class="string">&#x27;./home&#x27;</span></span><br><span class="line"><span class="keyword">import</span> search <span class="keyword">from</span> <span class="string">&#x27;./search&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  home,</span><br><span class="line">  search</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Search 去分发 Vuex</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    options: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">mounted() &#123;</span><br><span class="line">  <span class="comment">// 分发 actions</span></span><br><span class="line">  <span class="built_in">this</span>.getProductList()</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">  <span class="comment">// 获取商品信息数据对象</span></span><br><span class="line">  getProductList() &#123;</span><br><span class="line">    <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;getProductList&#x27;</span>, <span class="built_in">this</span>.options)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p39-bian-li-shang-pin-fen-lei-xin-xi">39 遍历商品分类信息</span><a href="#p39-bian-li-shang-pin-fen-lei-xin-xi" class="header-anchor">#</a></h2>
<p>Search 下面 SearchSelector 前面部分修改</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;clearfix selector&quot;</span>&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;type-wrap logo&quot;</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;fl key brand&quot;</span>&gt;品牌&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;value logos&quot;</span>&gt;</span><br><span class="line">      &lt;ul <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;logo-list&quot;</span>&gt;</span><br><span class="line">        &lt;li v-<span class="keyword">for</span>=<span class="string">&quot;(tm) in trademarkList&quot;</span> :key=<span class="string">&quot;tm.tmId&quot;</span>&gt;&#123;&#123;tm.tmName&#125;&#125;&lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;type-wrap&quot;</span> v-<span class="keyword">for</span>=<span class="string">&quot;(attr) in attrsList&quot;</span> :key=<span class="string">&quot;attr.attrId&quot;</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;fl key&quot;</span>&gt;&#123;&#123;attr.attrName&#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;fl value&quot;</span>&gt;</span><br><span class="line">      &lt;ul <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;type-list&quot;</span>&gt;</span><br><span class="line">        &lt;li v-<span class="keyword">for</span>=<span class="string">&quot;(value,index) in attr.attrValueList&quot;</span> :key=<span class="string">&quot;index&quot;</span>&gt;</span><br><span class="line">          &lt;a&gt;&#123;&#123;value&#125;&#125;&lt;/a&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;fl ext&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>script 部分修改</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入辅助函数</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  mapGetters</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;SearchSelector&#x27;</span>,</span><br><span class="line">  <span class="comment">// 获取数据</span></span><br><span class="line">  computed: &#123;</span><br><span class="line">    ...mapGetters([<span class="string">&#x27;trademarkList&#x27;</span>, <span class="string">&#x27;attrsList&#x27;</span>])</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1><span id="9-yue-22-ri-day-4">9月22日（day 4）</span><a href="#9-yue-22-ri-day-4" class="header-anchor">#</a></h1>
<h2><span id="p40-search-zu-jian-xian-shi-shang-pin-xin-xi">40 Search 组件显示商品信息</span><a href="#p40-search-zu-jian-xian-shi-shang-pin-xin-xi" class="header-anchor">#</a></h2>
<p>Search 更新</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  mapState,</span><br><span class="line">  mapGetters</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  <span class="comment">// 获取商品信息数据对象</span></span><br><span class="line">  ...mapState(&#123;</span><br><span class="line">    productList: <span class="function"><span class="params">state</span> =&gt;</span> state.search.productList</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="comment">// 获取当前这一页的商品信息数据</span></span><br><span class="line">  ...mapGetters([<span class="string">&#x27;goodsList&#x27;</span>])</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p><code>&lt;li class=&quot;yui3-u-1-5&quot;&gt;</code> 删除留一个，进行以下更新</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;goods-list&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;yui3-g&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;yui3-u-1-5&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(goods, index) in goodsList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;goods.id&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list-wrap&quot;</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;p-img&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;item.html&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;goods.defaultImg&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;price&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">strong</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">em</span>&gt;</span>¥<span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">i</span>&gt;</span>&#123;&#123;goods.price&#125;&#125;<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;attr&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">href</span>=<span class="string">&quot;item.html&quot;</span> <span class="attr">:title</span>=<span class="string">&quot;goods.title&quot;</span>&gt;</span>&#123;&#123;goods.title&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;commit&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;command&quot;</span>&gt;</span>已有<span class="tag">&lt;<span class="name">span</span>&gt;</span>2000<span class="tag">&lt;/<span class="name">span</span>&gt;</span>人评价<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;operate&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;success-cart.html&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">class</span>=<span class="string">&quot;sui-btn btn-bordered btn-danger&quot;</span>&gt;</span>加入购物车<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0);&quot;</span> <span class="attr">class</span>=<span class="string">&quot;sui-btn btn-bordered&quot;</span>&gt;</span>收藏<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p41-jie-jue-yi-ge-tiao-zhuan-bug">41 解决一个跳转bug</span><a href="#p41-jie-jue-yi-ge-tiao-zhuan-bug" class="header-anchor">#</a></h2>
<p>TypeNav 106行修改（路由跳转）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 路由跳转</span></span><br><span class="line"><span class="comment">// 如果当前组件路由跳转的时候，地址栏有 params 参数，那么和 query 参数应该一起携带，如果没有，那么携带 query参数即可</span></span><br><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">  path,</span><br><span class="line">  params</span><br><span class="line">&#125; = <span class="built_in">this</span>.$route</span><br><span class="line"><span class="comment">// 判断当前的路径有没有 /search</span></span><br><span class="line"><span class="keyword">if</span> (path.indexOf(<span class="string">&#x27;/search&#x27;</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="built_in">this</span>.$router.replace(&#123;</span><br><span class="line">    path,</span><br><span class="line">    query,</span><br><span class="line">    params</span><br><span class="line">  &#125;)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.$router.replace(&#123;</span><br><span class="line">    path: <span class="string">&#x27;/search&#x27;</span>,</span><br><span class="line">    query</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>知识点：</p>
<ul>
<li>路由信息对象 <code>route</code></li>
<li>字符串的<code>indexOf</code> 方法</li>
<li>路由的 <code>params</code> 和 <code>query</code> 传参方式</li>
<li>路由的编程式跳转 <code>push</code> <code>replace</code></li>
</ul>
<p>Header 更新 <code>toSearch</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">  toSearch() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">      path,</span><br><span class="line">      query</span><br><span class="line">    &#125; = <span class="built_in">this</span>.$route</span><br><span class="line">    <span class="comment">// 判断文本框是否输入内容</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.keyword) &#123;</span><br><span class="line">      <span class="comment">// 此时说明文本框中已经有内容</span></span><br><span class="line">      <span class="keyword">if</span> (path.indexOf(<span class="string">&#x27;/search&#x27;</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// 此时说明点击按钮的时候，文本框中有搜索关键字，而且也点击了分类信息</span></span><br><span class="line">        <span class="comment">// 需要携带 params 和 query 参数</span></span><br><span class="line">        <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">          name: <span class="string">&#x27;search&#x27;</span>,</span><br><span class="line">          params: &#123;</span><br><span class="line">            keyword: <span class="built_in">this</span>.keyword</span><br><span class="line">          &#125;,</span><br><span class="line">          query</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 此时说明文本框有搜索关键字，但是没有 search 界面中，所以，也不需要携带 query 参数</span></span><br><span class="line">        <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">          name: <span class="string">&#x27;search&#x27;</span>,</span><br><span class="line">          params: &#123;</span><br><span class="line">            keyword: <span class="built_in">this</span>.keyword</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 此时文本框中没有搜索关键字</span></span><br><span class="line">      <span class="keyword">if</span> (path.indexOf(<span class="string">&#x27;/search&#x27;</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// 确实在 search 中，所以要携带 query 参数</span></span><br><span class="line">        <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">          name: <span class="string">&#x27;search&#x27;</span>,</span><br><span class="line">          query</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 没有搜索关键字，也没有在 /search 中</span></span><br><span class="line">        <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">          name: <span class="string">&#x27;search&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>
<h2><span id="p42-search-fen-fa-shi-chuan-ru-can-shu">42 Search 分发时传入参数</span><a href="#p42-search-fen-fa-shi-chuan-ru-can-shu" class="header-anchor">#</a></h2>
<p>Search 更新data数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    options: &#123;</span><br><span class="line">      category1Id: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 各级分类的id</span></span><br><span class="line">      category2Id: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      category3Id: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      categoryName: <span class="string">&#x27;&#x27;</span>,  <span class="comment">// 分级名字</span></span><br><span class="line">      props: [], <span class="comment">// [&#x27;2218:6.75-6.84英寸:屏幕尺寸&#x27;]---&gt;[&#x27;平台属性的id:属性值:属性名字&#x27;]</span></span><br><span class="line">      trademark: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 品牌的名字  &#x27;品牌的id:品牌的名字&#x27;</span></span><br><span class="line">      order: <span class="string">&#x27;1:desc&#x27;</span>, <span class="comment">// 排序的方式 1---&gt;排序的标识,desc---&gt;排序的方式 ,1--综合,2---价格 ,desc---降序,asc---升序</span></span><br><span class="line">      pageNo: <span class="number">1</span>, <span class="comment">// 获取的是第一页的数据</span></span><br><span class="line">      pageSize: <span class="number">3</span>, <span class="comment">// 默认每页三条数据</span></span><br><span class="line">      keyword: <span class="string">&#x27;&#x27;</span> <span class="comment">// 搜索关键字</span></span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>
<p>更新mounted数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mounted() &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;</span><br><span class="line">    query,</span><br><span class="line">    params</span><br><span class="line">  &#125; = <span class="built_in">this</span>.$route</span><br><span class="line">  <span class="keyword">const</span> options = &#123;</span><br><span class="line">    ...this.options,</span><br><span class="line">    ...query,</span><br><span class="line">    ...params</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">this</span>.options = options</span><br><span class="line">  <span class="comment">// 分发 actions</span></span><br><span class="line">  <span class="built_in">this</span>.getProductList()</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>更新watch数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">  <span class="comment">// to 模版路由器对象</span></span><br><span class="line">  <span class="comment">// from 从哪里来的路由信息对象</span></span><br><span class="line">  $route(to, <span class="keyword">from</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">      query,</span><br><span class="line">      params</span><br><span class="line">    &#125; = to</span><br><span class="line">    <span class="keyword">const</span> options = &#123;</span><br><span class="line">      ...this.options,</span><br><span class="line">      <span class="comment">// 重置数据</span></span><br><span class="line">      category1Id: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      category2Id: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      category3Id: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      categoryName: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      ...query,</span><br><span class="line">      ...params</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.options = options</span><br><span class="line">    <span class="comment">// 分发 actions</span></span><br><span class="line">    <span class="built_in">this</span>.getProductList()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2><span id="p43-dian-ji-biao-qian-de-yi-chu-yi-ji-di-zhi-de-xiu-zheng">43 点击标签的移除以及地址的修正</span><a href="#p43-dian-ji-biao-qian-de-yi-chu-yi-ji-di-zhi-de-xiu-zheng" class="header-anchor">#</a></h2>
<p>Search 第13行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;fl sui-tag&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 分类信息的名字 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;with-x&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;options.categoryName&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;options.categoryName&#125;&#125;<span class="tag">&lt;<span class="name">i</span> @<span class="attr">click</span>=<span class="string">&quot;removeCategory&quot;</span>&gt;</span>×<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 搜索关键字 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;with-x&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;options.keyword&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;options.keyword&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> @<span class="attr">click</span>=<span class="string">&quot;removeKeyword&quot;</span>&gt;</span>×<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>更新 methods</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 移除分类信息的名字</span></span><br><span class="line">removeCategory() &#123;</span><br><span class="line">  <span class="built_in">this</span>.options.category1Id = <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="built_in">this</span>.options.category2Id = <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="built_in">this</span>.options.category3Id = <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="built_in">this</span>.options.categoryName = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">this</span>.$router.replace(<span class="built_in">this</span>.$route.path)</span><br><span class="line">&#125;,</span><br><span class="line">  </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>创建事件总线 main.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="comment">// 注册路由器</span></span><br><span class="line">  router,</span><br><span class="line">  <span class="comment">// 注册store</span></span><br><span class="line">  store,</span><br><span class="line">  <span class="comment">// 数据初始化之前</span></span><br><span class="line">  beforeCreate() &#123;</span><br><span class="line">    <span class="comment">// 事件总线</span></span><br><span class="line">    Vue.prototype.$bus = <span class="keyword">new</span> Vue()</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 渲染组件</span></span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App),</span><br></pre></td></tr></table></figure>
<p>Header 组件中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mounted() &#123;</span><br><span class="line">  <span class="built_in">this</span>.$bus.$on(<span class="string">&#x27;removeKeyword&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.keyword = <span class="string">&#x27;&#x27;</span> <span class="comment">// 清空文本框</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Search 组件 methods</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 移除搜索关键字</span></span><br><span class="line">removeKeyword() &#123;</span><br><span class="line">  <span class="built_in">this</span>.options.keyword = <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="comment">// 路由跳转</span></span><br><span class="line">  <span class="built_in">this</span>.$router.replace(&#123;</span><br><span class="line">    path: <span class="string">&#x27;/search&#x27;</span>,</span><br><span class="line">    query: <span class="built_in">this</span>.$route.query</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// 清理Header组件中的搜索框数据</span></span><br><span class="line">  <span class="built_in">this</span>.$bus.$emit(<span class="string">&#x27;removeKeyword&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p44-dian-ji-pin-pai-biao-qian-jin-xing-shai-xuan">44 点击品牌标签进行筛选</span><a href="#p44-dian-ji-pin-pai-biao-qian-jin-xing-shai-xuan" class="header-anchor">#</a></h2>
<p>Search组件中 methods 加</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 更新品牌的参数数据</span></span><br><span class="line">setTrademark(tmId, tmName) &#123;</span><br><span class="line">  <span class="built_in">this</span>.options.trademark = <span class="string">`<span class="subst">$&#123;tmId&#125;</span>:<span class="subst">$&#123;tmName&#125;</span>`</span></span><br><span class="line">  <span class="comment">// 重新发送请求，获取商品信息数据</span></span><br><span class="line">  <span class="built_in">this</span>.getProductList()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>26行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--selector--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">SearchSelector</span> <span class="attr">:setTrademark</span>=<span class="string">&quot;setTrademark&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>SearchSelector</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">name: <span class="string">&#x27;SearchSelector&#x27;</span>,</span><br><span class="line">props: &#123;</span><br><span class="line">  setTrademark: <span class="built_in">Function</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>7行 加点击事件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(tm) in trademarkList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;tm.tmId&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;setTrademark(tm.tmId, tm.tmName)&quot;</span>&gt;</span>&#123;&#123;tm.tmName&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Search 23行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 品牌关键字 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;with-x&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;options.trademark&quot;</span>&gt;</span></span><br><span class="line">  &#123;&#123;options.trademark&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">i</span> @<span class="attr">click</span>=<span class="string">&quot;removeTrademark&quot;</span>&gt;</span>×<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>methods 新增</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 移除品牌的名字</span></span><br><span class="line">removeTrademark()&#123;</span><br><span class="line">  <span class="built_in">this</span>.options.trademark = <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="comment">// 重新发送请求，获取商品信息数据</span></span><br><span class="line">  <span class="built_in">this</span>.getProductList()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p45-ping-tai-shu-xing-xiang-guan">45 平台属性相关</span><a href="#p45-ping-tai-shu-xing-xiang-guan" class="header-anchor">#</a></h2>
<p>Search methods 新增</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 更新平台属性数组的数据</span></span><br><span class="line">addProps(propId, propVal, propName) &#123;</span><br><span class="line">  <span class="comment">// 拼接平台属性的值</span></span><br><span class="line">  <span class="keyword">const</span> prop = <span class="string">`<span class="subst">$&#123;propId&#125;</span>:<span class="subst">$&#123;propVal&#125;</span>:<span class="subst">$&#123;propName&#125;</span>`</span></span><br><span class="line">  <span class="comment">// 判断这该数组中这个数据是否存在，不存在就则增加</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">this</span>.options.props.indexOf(prop) === <span class="number">-1</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.options.props.push(prop)</span><br><span class="line">    <span class="comment">// 重新获取数据</span></span><br><span class="line">    <span class="built_in">this</span>.getProductList()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>30行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--selector--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">SearchSelector</span> <span class="attr">:setTrademark</span>=<span class="string">&quot;setTrademark&quot;</span> <span class="attr">:addProps</span>=<span class="string">&quot;addProps&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>SearchSelector 更新 props</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">props: &#123;</span><br><span class="line">  setTrademark: <span class="built_in">Function</span>,</span><br><span class="line">  addProps: <span class="built_in">Function</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>13行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fl key&quot;</span>&gt;</span>&#123;&#123;attr.attrName&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span>		</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fl value&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;type-list&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(value,index) in attr.attrValueList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;addProps(attr.attrId,value, attr.attrName)&quot;</span>&gt;</span>&#123;&#123;value&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Search 28行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 平台属性关键字 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;with-x&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(prop, index) in options.props&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;prop&quot;</span>&gt;</span></span><br><span class="line">  &#123;&#123;prop&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">i</span> @<span class="attr">click</span>=<span class="string">&quot;removeProp(index)&quot;</span>&gt;</span>×<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>methods 新增</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 移除平台属性数据</span></span><br><span class="line">removeProp(index) &#123;</span><br><span class="line">  <span class="built_in">this</span>.options.props.splice(index, <span class="number">1</span>)</span><br><span class="line">  <span class="comment">// 重新获取数据</span></span><br><span class="line">  <span class="built_in">this</span>.getProductList()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p46-pai-xu">46 排序</span><a href="#p46-pai-xu" class="header-anchor">#</a></h2>
<p>Search 40行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot; details clearfix&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sui-navbar&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;navbar-inner filter&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;sui-nav&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;active:isActive(&#x27;1&#x27;)&#125;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;setOrder(&#x27;1&#x27;)&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span>&gt;</span>综合&#123;&#123;getOrderText(&#x27;1&#x27;)&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span>&gt;</span>销量<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span>&gt;</span>新品<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span>&gt;</span>评价<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;active:isActive(&#x27;2&#x27;)&#125;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> </span></span><br><span class="line"><span class="tag">            @<span class="attr">click</span>=<span class="string">&quot;setOrder(&#x27;2&#x27;)&quot;</span>&gt;</span>价格&#123;&#123;getOrderText(&#x27;2&#x27;)&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>methods 新增</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置排序的选项类样式</span></span><br><span class="line">isActive(flag) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.options.order.indexOf(flag) === <span class="number">0</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 改变排序的方式</span></span><br><span class="line">setOrder(flag) &#123;</span><br><span class="line">  <span class="comment">// 获取排序的标识和排序方式</span></span><br><span class="line">  <span class="keyword">let</span> [</span><br><span class="line">    orderFlag,</span><br><span class="line">    orderType</span><br><span class="line">  ] = <span class="built_in">this</span>.options.order.split(<span class="string">&#x27;:&#x27;</span>)</span><br><span class="line">  <span class="comment">// 判断排序的标识是否一致</span></span><br><span class="line">  <span class="keyword">if</span> (orderFlag === flag) &#123;</span><br><span class="line">    orderType = orderType === <span class="string">&#x27;desc&#x27;</span> ? <span class="string">&#x27;asc&#x27;</span> : <span class="string">&#x27;desc&#x27;</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    orderFlag = flag <span class="comment">// 标识已经改变</span></span><br><span class="line">    orderType = <span class="string">&#x27;desc&#x27;</span> <span class="comment">// 默认是降序</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 更新参数数据</span></span><br><span class="line">  <span class="built_in">this</span>.options.order = orderFlag + <span class="string">&quot;:&quot;</span> + orderType</span><br><span class="line">  <span class="comment">// 重新获取数据</span></span><br><span class="line">  <span class="built_in">this</span>.getProductList()</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 显示箭头</span></span><br><span class="line">getOrderText(flag) &#123;</span><br><span class="line">  <span class="comment">// 获取排序的标识和方式</span></span><br><span class="line">  <span class="keyword">let</span> [orderFlag, orderType] = <span class="built_in">this</span>.options.order.split(<span class="string">&#x27;:&#x27;</span>)</span><br><span class="line">  <span class="comment">// 判断标识符是否一致</span></span><br><span class="line">  <span class="keyword">if</span> (orderFlag === flag) &#123;</span><br><span class="line">    <span class="keyword">return</span> orderType === <span class="string">&#x27;desc&#x27;</span>? <span class="string">&quot;↓&quot;</span>: <span class="string">&quot;↑&quot;</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2><span id="p47-qing-li-kong-shu-ju">47 清理空数据</span><a href="#p47-qing-li-kong-shu-ju" class="header-anchor">#</a></h2>
<p>data 中的数据是响应式的，会触发视图更新</p>
<p>不能用常规方法增加或者删除</p>
<p>用 <code>Vue.get</code> <code>Vue.delete</code></p>
<p>Search 的 data 中 注释</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// trademark: &#x27;&#x27;, // 品牌的名字  &#x27;品牌的id:品牌的名字&#x27;</span></span><br></pre></td></tr></table></figure>
<p>setTrademark  和 removeTrademark 修改为</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">setTrademark(tmId, tmName) &#123;</span><br><span class="line">  <span class="comment">// 这种方式添加的属性属于非响应式属性数据,</span></span><br><span class="line">  <span class="comment">// 响应式数据:在data中定义的数据,该数据如果发生了变化,页面会自动的渲染</span></span><br><span class="line">  <span class="comment">// this.options.trademark = `$&#123;tmId&#125;:$&#123;tmName&#125;`</span></span><br><span class="line">  <span class="built_in">this</span>.$set(<span class="built_in">this</span>.options, <span class="string">&#x27;trademark&#x27;</span>, <span class="string">`<span class="subst">$&#123;tmId&#125;</span>:<span class="subst">$&#123;tmName&#125;</span>`</span>)</span><br><span class="line">  <span class="comment">// 重新发送请求，获取商品信息数据</span></span><br><span class="line">  <span class="built_in">this</span>.getProductList()</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 移除品牌的名字</span></span><br><span class="line">removeTrademark() &#123;</span><br><span class="line">  <span class="comment">// 是把数据清空,并不是删除</span></span><br><span class="line">  <span class="comment">// this.options.trademark = &#x27;&#x27;</span></span><br><span class="line">  <span class="comment">// 这种方式不是移除响应式数据的操作</span></span><br><span class="line">  <span class="comment">// delete this.options.trademark</span></span><br><span class="line">  <span class="comment">// 删除对象的 property。如果对象是响应式的，确保删除能触发更新视图</span></span><br><span class="line">  <span class="built_in">this</span>.$delete(<span class="built_in">this</span>.options, <span class="string">&#x27;trademark&#x27;</span>)</span><br><span class="line">  <span class="comment">// 重新发送请求，获取商品信息数据</span></span><br><span class="line">  <span class="built_in">this</span>.getProductList()</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>store 中的 search.js 的 actions 进行如下更新</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">actions: &#123;</span><br><span class="line">  <span class="comment">// 获取商品信息数据对象</span></span><br><span class="line">  <span class="keyword">async</span> getProductList(&#123;</span><br><span class="line">    commit</span><br><span class="line">  &#125;, searchParams) &#123;</span><br><span class="line">    <span class="comment">// 清理无用的参数数据</span></span><br><span class="line">    <span class="comment">// 浅拷贝</span></span><br><span class="line">    searchParams = &#123;</span><br><span class="line">      ...searchParams</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 优化参数处理</span></span><br><span class="line">    <span class="built_in">Object</span>.keys(searchParams).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 判断这里的数据是不是空的数据，或者是这里的数据</span></span><br><span class="line">        <span class="keyword">if</span> (searchParams[key] === <span class="string">&#x27;&#x27;</span> || searchParams[key] <span class="keyword">instanceof</span> <span class="built_in">Array</span> &amp;&amp; searchParams[key].length === <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">delete</span> searchParams[key]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqProductList(searchParams)</span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        commit(<span class="string">&#x27;RECEIVE_PRODUCT_LIST&#x27;</span>, result.data)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<h1><span id="9-yue-23-ri-day-5">9月23日（day 5）</span><a href="#9-yue-23-ri-day-5" class="header-anchor">#</a></h1>
<h2><span id="p48-fen-ye-zu-jian">48 分页组件</span><a href="#p48-fen-ye-zu-jian" class="header-anchor">#</a></h2>
<p>思路：分页组件（Pagination）要注册为公共组件（多次使用）</p>
<p>components  中新建 Pagination 目录 新建 index.vue （直接拷贝以下代码）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!--分页组件--&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;pagination&quot; v-if&#x3D;&quot;pageConfig.total&gt;0&quot;&gt;</span><br><span class="line">    &lt;!--上一页--&gt;</span><br><span class="line">    &lt;button :disabled&#x3D;&quot;currentPage&#x3D;&#x3D;&#x3D;1&quot; @click&#x3D;&quot;changeCurrentPage(currentPage-1)&quot;&gt;上一页&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- 第1页 --&gt;</span><br><span class="line">    &lt;button v-if&#x3D;&quot;startEnd.start&gt;1&quot; @click&#x3D;&quot;changeCurrentPage(1)&quot;&gt;1&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- 省略号 start&gt;2才显示 --&gt;</span><br><span class="line">    &lt;button disabled v-if&#x3D;&quot;startEnd.start&gt;2&quot;&gt;···&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- 连续页码 --&gt;</span><br><span class="line">    &lt;button v-for&#x3D;&quot;no in startEnd.end&quot; :key&#x3D;&quot;no&quot; v-if&#x3D;&quot;no&gt;&#x3D;startEnd.start&quot; :class&#x3D;&quot;&#123;active: currentPage&#x3D;&#x3D;&#x3D;no&#125;&quot;</span><br><span class="line">      @click&#x3D;&quot;changeCurrentPage(no)&quot;&gt;&#123;&#123;no&#125;&#125;&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- 34567 --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 省略号 end&lt;totalPages-1  --&gt;</span><br><span class="line">    &lt;button disabled v-if&#x3D;&quot;startEnd.end&lt;totalPages-1&quot;&gt;···&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- 最后一页 --&gt;</span><br><span class="line">    &lt;button v-if&#x3D;&quot;startEnd.end&lt;totalPages&quot; @click&#x3D;&quot;changeCurrentPage(totalPages)&quot;&gt;&#123;&#123;totalPages&#125;&#125;&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!--下一页--&gt;</span><br><span class="line">    &lt;button :disabled&#x3D;&quot;currentPage&#x3D;&#x3D;&#x3D;totalPages&quot; @click&#x3D;&quot;changeCurrentPage(currentPage+1)&quot;&gt;下一页&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- 总记录数 --&gt;</span><br><span class="line">    &lt;button disabled style&#x3D;&quot;margin-left: 30px&quot;&gt;共 &#123;&#123;pageConfig.total&#125;&#125; 条&lt;&#x2F;button&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#39;Pagination&#39;,</span><br><span class="line"></span><br><span class="line">    props: &#123;</span><br><span class="line">      pageConfig: &#123;</span><br><span class="line">        type: Object,</span><br><span class="line">        default: &#123;</span><br><span class="line">          total: 0, &#x2F;&#x2F; 总数据个数</span><br><span class="line">          showPageNo: 5, &#x2F;&#x2F; 连续显示的页码数</span><br><span class="line">          pageNo: 1, &#x2F;&#x2F; 当前页码</span><br><span class="line">          pageSize: 10 &#x2F;&#x2F; 每页的数据个数</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    data() &#123;</span><br><span class="line">      &#x2F;&#x2F; 在data中可以读取props和Vue原型对象上的属性</span><br><span class="line">      &#x2F;&#x2F; console.log(&#39;----&#39;, this.pageConfig, this.$bus)</span><br><span class="line">      &#x2F;&#x2F; 在data()中不可以直接读取data对象中的数据</span><br><span class="line">      &#x2F;&#x2F; console.log(&#39;++++&#39;, this.currentPage)</span><br><span class="line"></span><br><span class="line">      return &#123;</span><br><span class="line">        currentPage: this.pageConfig.pageNo &#x2F;&#x2F; 当前页码</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    computed: &#123;</span><br><span class="line">      &#x2F;* </span><br><span class="line">        总页码数</span><br><span class="line">        *&#x2F;</span><br><span class="line">      totalPages() &#123;</span><br><span class="line">        &#x2F;&#x2F; 取出总数量和每页记录数     36 &#x2F; 5  &#x3D;&#x3D;&gt; 8页</span><br><span class="line">        const &#123;</span><br><span class="line">          total,</span><br><span class="line">          pageSize</span><br><span class="line">        &#125; &#x3D; this.pageConfig</span><br><span class="line">        if (total &lt;&#x3D; 0 || pageSize &lt;&#x3D; 0) return 0</span><br><span class="line"></span><br><span class="line">        return Math.ceil(total &#x2F; pageSize) &#x2F;&#x2F; 需要向上取整</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#x2F;* </span><br><span class="line">        计算得到连续页码的start和end </span><br><span class="line">            连续页码数: pageConfig.showPageNo   5</span><br><span class="line">            当前页码: currentPage    4       23456</span><br><span class="line">            总页码数: totalPages 10&#x2F;5</span><br><span class="line">        *&#x2F;</span><br><span class="line">      startEnd() &#123;</span><br><span class="line">        let start &#x3D; 0</span><br><span class="line">        let end &#x3D; 0</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 取出相关数据</span><br><span class="line">        &#x2F;&#x2F; const &#123; showPageNo &#125; &#x3D; this.pageConfig</span><br><span class="line">        &#x2F;&#x2F; const &#123;totalPages, currentPage&#125; &#x3D; this</span><br><span class="line">        const &#123;</span><br><span class="line">          totalPages,</span><br><span class="line">          currentPage,</span><br><span class="line">          pageConfig: &#123;</span><br><span class="line">            showPageNo</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; &#x3D; this &#x2F;&#x2F; 多层级对象解构</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 计算后更新start和end</span><br><span class="line">        &#x2F;* </span><br><span class="line">          currentPage  showPageNo  totalPages</span><br><span class="line">            4             5             10     23456</span><br><span class="line">            2             5             10     123445</span><br><span class="line">            9             5             10     6789 10</span><br><span class="line">          *&#x2F;</span><br><span class="line">        &#x2F;&#x2F; 计算start</span><br><span class="line">        start &#x3D; currentPage - Math.floor(showPageNo &#x2F; 2)</span><br><span class="line">        &#x2F;&#x2F; 如果start页码小于1, 就为1</span><br><span class="line">        if (start &lt; 1) &#123;</span><br><span class="line">          start &#x3D; 1</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 计算end</span><br><span class="line">        &#x2F;* </span><br><span class="line">          9             5             10     </span><br><span class="line">          start &#x3D; 7  &#x3D;&#x3D;&#x3D;&gt; 6</span><br><span class="line">          end &#x3D;7 + 4 &#x3D; 11  &#x3D;&#x3D;&gt; end &#x3D; 10</span><br><span class="line"></span><br><span class="line">          2             5               3</span><br><span class="line">          start &#x3D; 1 </span><br><span class="line">          end &#x3D; 3</span><br><span class="line">          start &#x3D; -1 </span><br><span class="line">          *&#x2F;</span><br><span class="line">        end &#x3D; start + showPageNo - 1</span><br><span class="line">        &#x2F;&#x2F; 如果end大于了总页码数</span><br><span class="line">        if (end &gt; totalPages) &#123;</span><br><span class="line">          &#x2F;&#x2F; end值为总页码数</span><br><span class="line">          end &#x3D; totalPages</span><br><span class="line">          &#x2F;&#x2F; 修正start: 让start到end为showPageNo</span><br><span class="line">          start &#x3D; end - showPageNo + 1</span><br><span class="line">          &#x2F;&#x2F; 如果start小于1, 指定为1</span><br><span class="line">          if (start &lt; 1) &#123;</span><br><span class="line">            start &#x3D; 1</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return &#123;</span><br><span class="line">          start,</span><br><span class="line">          end</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#x2F;* </span><br><span class="line">        要根据已有数据计算出连续页码的start和end</span><br><span class="line">        *&#x2F;</span><br><span class="line">      startEnd2() &#123;</span><br><span class="line">        &#x2F;&#x2F; 得到已有依赖数据</span><br><span class="line">        &#x2F;&#x2F; 当前页码 &#x2F; 连续数码数 &#x2F; 总页码数</span><br><span class="line">        const currentPage &#x3D; this.currentPage</span><br><span class="line">        const showPageNo &#x3D; this.pageConfig.showPageNo</span><br><span class="line">        const totalPages &#x3D; this.totalPages</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 计算产生需要的数据</span><br><span class="line">        let start &#x3D; 0</span><br><span class="line">        let end &#x3D; 0</span><br><span class="line">        &#x2F;* </span><br><span class="line">          currentPage  showPageNo  totalPages</span><br><span class="line">            4             5             10     &#x3D;&#x3D;&gt; start &#x3D; 4 - 2</span><br><span class="line">          *&#x2F;</span><br><span class="line">        start &#x3D; currentPage - Math.floor(showPageNo &#x2F; 2)</span><br><span class="line"></span><br><span class="line">        &#x2F;* </span><br><span class="line">          currentPage  showPageNo  totalPages</span><br><span class="line">            2             5             10     &#x3D;&#x3D;&gt; start &#x3D; 2 - 2 不对  应该是1</span><br><span class="line">          *&#x2F;</span><br><span class="line">        if (start &lt; 1) &#123;</span><br><span class="line">          start &#x3D; 1</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;* </span><br><span class="line">          currentPage  showPageNo  totalPages</span><br><span class="line">            4             5             10     &#x3D;&#x3D;&gt;   start + 5 -1</span><br><span class="line">         *&#x2F;</span><br><span class="line">        &#x2F;&#x2F; end &#x3D; currentPage + Math.floor(showPageNo&#x2F;2)</span><br><span class="line">        &#x2F;&#x2F; start&#x3D;1 &#x3D;&#x3D;&gt; 1 + 5 -1   5</span><br><span class="line">        &#x2F;&#x2F; start&#x3D;4 &#x3D;&#x3D;&#x3D;&gt; 4 + 5 -1  8</span><br><span class="line">        end &#x3D; start + showPageNo - 1</span><br><span class="line">        &#x2F;* </span><br><span class="line">          currentPage  showPageNo  totalPages</span><br><span class="line">            9             5             10     &#x3D;&#x3D;&gt; end &#x3D; 11   9 + 2  超过了最大页码</span><br><span class="line">         *&#x2F;</span><br><span class="line">        if (end &gt; totalPages) &#123;</span><br><span class="line">          end &#x3D; totalPages &#x2F;&#x2F; 如果end超过了最大页码, 修正为最大页码</span><br><span class="line"></span><br><span class="line">          &#x2F;* </span><br><span class="line">             currentPage  showPageNo  totalPages</span><br><span class="line">              9             5             10</span><br><span class="line">              start &#x3D; 9 - 2  应该是6</span><br><span class="line">              end &#x3D; 10</span><br><span class="line">            *&#x2F;</span><br><span class="line">          start &#x3D; end - showPageNo + 1 &#x2F;&#x2F; 10 - 5 + 1</span><br><span class="line"></span><br><span class="line">          &#x2F;&#x2F; 如果start小于1, 指定为1</span><br><span class="line">          if (start &lt; 1) &#123;</span><br><span class="line">            start &#x3D; 1</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 返回数据</span><br><span class="line">        return &#123;</span><br><span class="line">          start,</span><br><span class="line">          end</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    watch: &#123;</span><br><span class="line">      &#x2F;*</span><br><span class="line">        当接收的pageConfig中的pageNo发生改变调用 </span><br><span class="line">         *&#x2F;</span><br><span class="line">      &#39;pageConfig.pageNo&#39;(value) &#123;</span><br><span class="line">        &#x2F;&#x2F; 将当前页码指定为外部传入的值</span><br><span class="line">        this.currentPage &#x3D; value</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    methods: &#123;</span><br><span class="line">      &#x2F;* </span><br><span class="line">        将当前页码改为指定页码</span><br><span class="line">        *&#x2F;</span><br><span class="line">      changeCurrentPage(page) &#123;</span><br><span class="line">        &#x2F;&#x2F; 修改当前页码</span><br><span class="line">        this.currentPage &#x3D; page</span><br><span class="line">        &#x2F;&#x2F; 通知外部父组件</span><br><span class="line">        this.$emit(&#39;changeCurrentPage&#39;, page)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    beforeCreate() &#123;</span><br><span class="line">      &#x2F;&#x2F; beforeCreate()在data()之前执行</span><br><span class="line">      &#x2F;&#x2F; console.log(&#39;beforeCreate()&#39;, this.currentPage) &#x2F;&#x2F; undefined</span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line">      &#x2F;&#x2F; created()在data()之后执行</span><br><span class="line">      &#x2F;&#x2F; console.log(&#39;created()&#39;, this.currentPage) &#x2F;&#x2F; 有值</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot; scoped&gt;</span><br><span class="line">  .pagination &#123;</span><br><span class="line">    button &#123;</span><br><span class="line">      margin: 0 5px;</span><br><span class="line">      background-color: #f4f4f5;</span><br><span class="line">      color: #606266;</span><br><span class="line">      outline: none;</span><br><span class="line">      border-radius: 2px;</span><br><span class="line">      padding: 0 4px;</span><br><span class="line">      vertical-align: top;</span><br><span class="line">      display: inline-block;</span><br><span class="line">      font-size: 13px;</span><br><span class="line">      min-width: 35.5px;</span><br><span class="line">      height: 28px;</span><br><span class="line">      line-height: 28px;</span><br><span class="line">      cursor: pointer;</span><br><span class="line">      box-sizing: border-box;</span><br><span class="line">      text-align: center;</span><br><span class="line">      border: 0;</span><br><span class="line"></span><br><span class="line">      &amp;[disabled] &#123;</span><br><span class="line">        color: #c0c4cc;</span><br><span class="line">        cursor: not-allowed;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;.active &#123;</span><br><span class="line">        cursor: not-allowed;</span><br><span class="line">        background-color: #409eff;</span><br><span class="line">        color: #fff;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
<p>main.js 中注册为公共组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入分页组件</span></span><br><span class="line"><span class="keyword">import</span> Pagination <span class="keyword">from</span> <span class="string">&#x27;@/components/Pagination&#x27;</span></span><br><span class="line">Vue.component(<span class="string">&#x27;Pagination&#x27;</span>, Pagination)</span><br></pre></td></tr></table></figure>
<p>Search 组件中使用 Pagination 需要传入一个对象 pageConfig</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 89行</span><br><span class="line">          <span class="comment">&lt;!-- 分页 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fr page&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Pagination</span></span></span><br><span class="line"><span class="tag">              <span class="attr">:pageConfig</span>=<span class="string">&quot;&#123;total:productList.total, pageNo:options.pageNo, pageSize:options.pageSize, showPageNo:5&#125;&quot;</span></span></span><br><span class="line"><span class="tag">              @<span class="attr">changeCurrentPage</span>=<span class="string">&quot;changeCurrentPage&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>methods 中新增一个自定义事件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自定义事件</span></span><br><span class="line">changeCurrentPage(pageNo) &#123;</span><br><span class="line">  <span class="built_in">this</span>.options.pageNo = pageNo</span><br><span class="line">  <span class="built_in">this</span>.getProductList()</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>此时可以实现分页效果。</p>
<h2><span id="p49-zi-ji-shi-xian-fen-ye-zu-jian">49 自己实现分页组件</span><a href="#p49-zi-ji-shi-xian-fen-ye-zu-jian" class="header-anchor">#</a></h2>
<p>开发通用组件的思路流程</p>
<ol>
<li>搭建结构和样式（html + css）</li>
<li>初始化数据（data）</li>
<li>接收调用该组件的时候传入的数据（props） - 考虑健壮性，要有默认值</li>
<li>考虑接收什么样的事件或者函数</li>
<li>制作组件</li>
<li>制作组件使用的文档</li>
</ol>
<p>分页组件，有数据才能使用，没有数据也不能报错</p>
<p>可以分成八块（上一页，第一页，省略号，连续页码，省略号，最后一页，下一页，共多少条）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!--分页组件 有数据才能使用，没有数据，也不能报错--&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;pagination&quot;&gt;</span><br><span class="line">    &lt;!-- 上一页 --&gt;</span><br><span class="line">    &lt;button disabled&gt;上一页&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- 第一页 --&gt;</span><br><span class="line">    &lt;button&gt;1&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- 省略号 --&gt;</span><br><span class="line">    &lt;button disabled&gt;···&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- 连续页码 --&gt;</span><br><span class="line">    &lt;button&gt;连续页码&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- 省略号 --&gt;</span><br><span class="line">    &lt;button disabled&gt;···&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- 最后一页 --&gt;</span><br><span class="line">    &lt;button&gt;200&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- 下一页 --&gt;</span><br><span class="line">    &lt;button disabled&gt;下一页&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;!-- 共多少条 --&gt;</span><br><span class="line">    &lt;button disabled key&#x3D;&quot;&quot; style&#x3D;&quot;margin-left: 30px&quot;&gt;共 1000 条&lt;&#x2F;button&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure>
<p>传入的数据</p>
<ul>
<li>总条数 total</li>
<li>默认选中的页码 pageNo</li>
<li>每页显示的条数 pageSize</li>
<li>连续的页码 showPageNo</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">props: &#123;</span><br><span class="line">  pageConfig: &#123;</span><br><span class="line">    type: <span class="built_in">Object</span>, <span class="comment">// 限制传入的数据的类型</span></span><br><span class="line">    <span class="keyword">default</span>: &#123; <span class="comment">// 设置默认的值</span></span><br><span class="line">      total: <span class="number">0</span>, <span class="comment">// 总条数</span></span><br><span class="line">      pageNo: <span class="number">1</span>, <span class="comment">// 默认的第一页</span></span><br><span class="line">      pageSize: <span class="number">5</span>, <span class="comment">// 每页显示多少条</span></span><br><span class="line">      showPageNo: <span class="number">5</span> <span class="comment">// 连续显示的页码数</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">data() &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">// 选中的页面 --&gt; 页码会随时变化</span></span><br><span class="line">    currentPage: <span class="built_in">this</span>.pageConfig.pageNo</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>计算总的页码数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  <span class="comment">// 计算总的页码数</span></span><br><span class="line">  totalPage() &#123;</span><br><span class="line">    <span class="comment">// 获取总条数和每页的数据条数</span></span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">      total,</span><br><span class="line">      pageSize</span><br><span class="line">    &#125; = <span class="built_in">this</span>.pageConfig</span><br><span class="line">    <span class="comment">// 判断</span></span><br><span class="line">    <span class="keyword">if</span> (total &lt; <span class="number">0</span> || pageSize &lt; <span class="number">0</span>) <span class="keyword">return</span></span><br><span class="line">    <span class="comment">// 计算总的页码数</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.ceil(total / pageSize)</span><br><span class="line">  &#125;, </span><br><span class="line">  <span class="comment">// 计算连续页码的开始页码和结束页码</span></span><br><span class="line">  startEnd() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">      currentPage,</span><br><span class="line">      totalPage,</span><br><span class="line">      pageConfig: &#123;</span><br><span class="line">        showPageNo</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; = <span class="built_in">this</span></span><br><span class="line">    <span class="comment">// 开始页码</span></span><br><span class="line">    <span class="keyword">let</span> start = <span class="number">0</span></span><br><span class="line">    <span class="comment">// 结束页码</span></span><br><span class="line">    <span class="keyword">let</span> end = <span class="number">0</span></span><br><span class="line">    <span class="comment">// 计算开始页码 当前页码 - 向下取整（连续页码/2）</span></span><br><span class="line">    start = currentPage - <span class="built_in">Math</span>.floor(showPageNo / <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">if</span> (start &lt; <span class="number">1</span>) start = <span class="number">1</span></span><br><span class="line">    <span class="comment">// 计算结束页码 当前页码 + 向下取整（连续页码/2）</span></span><br><span class="line">    <span class="comment">//             开始页码 + 连续页码 -1</span></span><br><span class="line">    <span class="comment">// end = currentPage + Math.floor(showPageNo / 2)</span></span><br><span class="line">    end = start + showPageNo - <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> (end &gt; totalPage) &#123;</span><br><span class="line">      end = totalPage</span><br><span class="line">      <span class="comment">// 修正一下开始页码</span></span><br><span class="line">      start = totalPage - showPageNo + <span class="number">1</span></span><br><span class="line">      <span class="keyword">if</span> (start &lt; <span class="number">1</span>) start = <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      start,</span><br><span class="line">      end</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<p>上一页</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 上一页 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">:disabled</span>=<span class="string">&quot;currentPage===1&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeCurrentPage(currentPage-1)&quot;</span>&gt;</span>上一页<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  changeCurrentPage(pageNo) &#123;</span><br><span class="line">    <span class="comment">// 更新当前的页码</span></span><br><span class="line">    <span class="built_in">this</span>.currentPage = pageNo</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>第一页</p>
<p>省略号</p>
<p>下一页</p>
<p>等等</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--分页组件 有数据才能使用，没有数据，也不能报错--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;pagination&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--上一页--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">:disabled</span>=<span class="string">&quot;currentPage===1&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeCurrentPage(currentPage-1)&quot;</span>&gt;</span>上一页<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--第一页--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-if</span>=<span class="string">&quot;startEnd.start&gt;1&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeCurrentPage(1)&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--第一个省略号--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">disabled</span> <span class="attr">v-if</span>=<span class="string">&quot;startEnd.start&gt;2&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--连续页码--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-if</span>=<span class="string">&quot;no&gt;=startEnd.start&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;no in startEnd.end&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;no&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeCurrentPage(no)&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:class</span>=<span class="string">&quot;&#123;active:currentPage===no&#125;&quot;</span>&gt;</span>&#123;&#123;no&#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--第二个省略号--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">disabled</span> <span class="attr">v-if</span>=<span class="string">&quot;startEnd.end&lt;totalPage-1&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--最后一页--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-if</span>=<span class="string">&quot;startEnd.end&lt;totalPage&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeCurrentPage(totalPage)&quot;</span>&gt;</span>&#123;&#123;totalPage&#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--下一页--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">:disabled</span>=<span class="string">&quot;currentPage===totalPage&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeCurrentPage(currentPage+1)&quot;</span>&gt;</span>下一页<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--共多少条--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">disabled</span> <span class="attr">style</span>=<span class="string">&quot;margin-left:30px&quot;</span>&gt;</span>共&#123;&#123;pageConfig.total&#125;&#125;条<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>更新methods</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  changeCurrentPage(pageNo) &#123;</span><br><span class="line">    <span class="comment">// 更新当前的页面</span></span><br><span class="line">    <span class="built_in">this</span>.currentPage = pageNo</span><br><span class="line">    <span class="comment">// 通知父级组件，页码改变了，父级组件需重新获取数据</span></span><br><span class="line">    <span class="built_in">this</span>.$emit(<span class="string">&#x27;changeCurrentPage&#x27;</span>, pageNo)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>Search 组件中 method</p>
<p>更新这个方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  <span class="comment">// 获取商品信息数据对象</span></span><br><span class="line">  getProductList(pageNo = <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.options.pageNo = pageNo</span><br><span class="line">    <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;getProductList&#x27;</span>, <span class="built_in">this</span>.options)</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>删除这个方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自定义事件</span></span><br><span class="line">changeCurrentPage(pageNo) &#123;</span><br><span class="line">  <span class="built_in">this</span>.options.pageNo = pageNo</span><br><span class="line">  <span class="built_in">this</span>.getProductList()</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>更新这里</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 分页 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fr page&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Pagination</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:pageConfig</span>=<span class="string">&quot;&#123;total:productList.total, pageNo:options.pageNo, pageSize:options.pageSize, showPageNo:5&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">changeCurrentPage</span>=<span class="string">&quot;getProductList&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Pagination 中新增一个 watch</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">watch:&#123;</span><br><span class="line">  <span class="comment">// 监视的是传入的页码值，如果变化了，立即更新当前的页码</span></span><br><span class="line">  <span class="string">&#x27;pageConfig.pageNo&#x27;</span>(val)&#123;</span><br><span class="line">    <span class="comment">// 立即更新当前的页码</span></span><br><span class="line">    <span class="built_in">this</span>.currentPage = val</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2><span id="p50-mei-you-shu-ju-de-shi-hou-fen-ye-zu-jian-de-xiang-guan-chu-li">50 没有数据的时候，分页组件的相关处理</span><a href="#p50-mei-you-shu-ju-de-shi-hou-fen-ye-zu-jian-de-xiang-guan-chu-li" class="header-anchor">#</a></h2>
<p>加个 v-if</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--分页组件,有数据才能使用,没有数据,也不能报错--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;pagination&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;pageConfig.total&gt;0&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p51-shang-pin-xiang-qing-ye">51 商品详情页</span><a href="#p51-shang-pin-xiang-qing-ye" class="header-anchor">#</a></h2>
<p>制作路由组件 Detail （直接搬运到pages）</p>
<p>routes.js 中注册</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Detail <span class="keyword">from</span> <span class="string">&#x27;@/pages/Detail&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 33行</span></span><br><span class="line">  <span class="comment">// Detail组件 -- 详情页 -- params</span></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/detail/:skuId&#x27;</span>,</span><br><span class="line">    component: Detail,</span><br><span class="line">    name: <span class="string">&#x27;detail&#x27;</span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>Search 组件中设置 图片和名称 的路由链接跳转</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">// 63行</span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;goods-list&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;yui3-g&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;yui3-u-1-5&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;goods in goodsList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;goods.id&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list-wrap&quot;</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;p-img&quot;</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 产品的图片 --&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- &lt;a href=&quot;item.html&quot; target=&quot;_blank&quot;&gt;</span></span><br><span class="line"><span class="comment">                      &lt;img :src=&quot;goods.defaultImg&quot; /&gt;</span></span><br><span class="line"><span class="comment">                    &lt;/a&gt; --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;`/detail/$&#123;goods.id&#125;`&quot;</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;goods.defaultImg&quot;</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;price&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">strong</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">em</span>&gt;</span>¥<span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">i</span>&gt;</span>&#123;&#123;goods.price&#125;&#125;<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;attr&quot;</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 产品的名字 --&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- &lt;a target=&quot;_blank&quot; href=&quot;item.html&quot; :title=&quot;goods.title&quot; v-html=&quot;goods.title&quot;&gt;&lt;/a&gt; --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;`/detail/$&#123;goods.id&#125;`&quot;</span> <span class="attr">:title</span>=<span class="string">&quot;goods.title&quot;</span> <span class="attr">v-html</span>=<span class="string">&quot;goods.title&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>点击跳转后，并不能在最上面，此时 scrollBehavior 来控制</p>
<p>更新 router/index 中这个部分</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实例化路由器对象,并暴露出去</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  mode: <span class="string">&#x27;history&#x27;</span>, <span class="comment">// 地址栏中不带#</span></span><br><span class="line">  routes,</span><br><span class="line">  <span class="comment">// 解决路由器跳转到滚动的位置的问题</span></span><br><span class="line">  scrollBehavior(to, <span class="keyword">from</span>, savedPosition) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      x: <span class="number">0</span>,</span><br><span class="line">      y: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2><span id="p52-shang-pin-xiang-qing-ye-jie-kou">52 商品详情页-接口</span><a href="#p52-shang-pin-xiang-qing-ye-jie-kou" class="header-anchor">#</a></h2>
<p>测试接口，在api/index.js 新增</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 商品详情页接口</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqDetailInfo = <span class="function">(<span class="params">skuId</span>) =&gt;</span> ajax.get(<span class="string">`/item/<span class="subst">$&#123;skuId&#125;</span>`</span>)</span><br></pre></td></tr></table></figure>
<h2><span id="p53-feng-zhuang-vuex">53 封装 Vuex</span><a href="#p53-feng-zhuang-vuex" class="header-anchor">#</a></h2>
<p>store/modules/detail.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入api</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  reqDetailInfo</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    <span class="comment">// 商品的详情信息对象</span></span><br><span class="line">    detailInfo: &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    <span class="comment">// 直接修改商品详情信息对象数据</span></span><br><span class="line">    RECEIVE_DETAIL_INFO(state, detailInfo) &#123;</span><br><span class="line">      state.detailInfo = detailInfo</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    <span class="comment">// 异步请求获取</span></span><br><span class="line">    <span class="keyword">async</span> getDetailInfo(&#123;</span><br><span class="line">      commit</span><br><span class="line">    &#125;, skuId) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqDetailInfo(skuId)</span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        commit(<span class="string">&#x27;RECEIVE_DETAIL_INFO&#x27;</span>, result.data)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;</span><br><span class="line">    <span class="comment">// 分类信息对象</span></span><br><span class="line">    categoryView(state) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.detailInfo.categoryView || []</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 销售属性数组</span></span><br><span class="line">    spuSaleAttrList(state) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.detailInfo.spuSaleAttrList || []</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 单个产品的信息对象</span></span><br><span class="line">    skuInfo(state) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.detailInfo.skuInfo || []</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 图片轮播图数组</span></span><br><span class="line">    skuImageList(state) &#123;</span><br><span class="line">      <span class="keyword">const</span> skuInfo = state.detailInfo.skuInfo</span><br><span class="line">      <span class="keyword">return</span> skuInfo ? skuInfo.skuImageList : []</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>index.js 引入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> home <span class="keyword">from</span> <span class="string">&#x27;./home&#x27;</span></span><br><span class="line"><span class="keyword">import</span> search <span class="keyword">from</span> <span class="string">&#x27;./search&#x27;</span></span><br><span class="line"><span class="keyword">import</span> detail <span class="keyword">from</span> <span class="string">&#x27;./detail&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  home,</span><br><span class="line">  search,</span><br><span class="line">  detail</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p54-xian-shi-ji-ben-xin-xi">54 显示基本信息</span><a href="#p54-xian-shi-ji-ben-xin-xi" class="header-anchor">#</a></h2>
<p>Detail 当详情页加载完毕根据id要获取当前商品信息数据对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="comment">// 引入图片轮播图组件</span></span><br><span class="line">  <span class="keyword">import</span> ImageList <span class="keyword">from</span> <span class="string">&#x27;./ImageList/ImageList&#x27;</span></span><br><span class="line">  <span class="comment">// 引入放大镜组件</span></span><br><span class="line">  <span class="keyword">import</span> Zoom <span class="keyword">from</span> <span class="string">&#x27;./Zoom/Zoom&#x27;</span></span><br><span class="line">  <span class="comment">// 引入 Vuex 辅助函数</span></span><br><span class="line">  <span class="keyword">import</span> &#123;</span><br><span class="line">    mapGetters</span><br><span class="line">  &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    name: <span class="string">&#x27;Detail&#x27;</span>,</span><br><span class="line">    components: &#123;</span><br><span class="line">      ImageList,</span><br><span class="line">      Zoom</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 组件界面渲染完毕后的生命周期回调</span></span><br><span class="line">    <span class="keyword">async</span> mounted() &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123;</span><br><span class="line">        skuId</span><br><span class="line">      &#125; = <span class="built_in">this</span>.$route.params</span><br><span class="line">      <span class="comment">// 调用接口 -- 分发actions</span></span><br><span class="line">      <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;getDetailInfo&#x27;</span>, skuId)</span><br><span class="line">    &#125;,</span><br><span class="line">    computed: &#123;</span><br><span class="line">      ...mapGetters([<span class="string">&#x27;categoryView&#x27;</span>, <span class="string">&#x27;spuSaleAttrList&#x27;</span>, <span class="string">&#x27;skuInfo&#x27;</span>])</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 8</span><br><span class="line">      &lt;!-- 导航路径区域 --&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;conPoin&quot;&gt;</span><br><span class="line">        &lt;span&gt;&#123;&#123;categoryView.category1Name&#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">        &lt;span&gt;&#123;&#123;categoryView.category2Name&#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">        &lt;span&gt;&#123;&#123;categoryView.category3Name&#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 23</span><br><span class="line">        &lt;!-- 右侧选择区域布局 --&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;InfoWrap&quot;&gt;</span><br><span class="line">          &lt;div class&#x3D;&quot;goodsDetail&quot;&gt;</span><br><span class="line">            &lt;h3 class&#x3D;&quot;InfoName&quot;&gt;&#123;&#123;skuInfo.skuName&#125;&#125;&lt;&#x2F;h3&gt;</span><br><span class="line">            &lt;p class&#x3D;&quot;news&quot;&gt;&#123;&#123;skuInfo.skuDesc&#125;&#125;&lt;&#x2F;p&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;priceArea&quot;&gt;</span><br><span class="line">              &lt;div class&#x3D;&quot;priceArea1&quot;&gt;</span><br><span class="line">                &lt;div class&#x3D;&quot;title&quot;&gt;价&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;格&lt;&#x2F;div&gt;</span><br><span class="line">                &lt;div class&#x3D;&quot;price&quot;&gt;</span><br><span class="line">                  &lt;i&gt;¥&lt;&#x2F;i&gt;</span><br><span class="line">                  &lt;em&gt;&#123;&#123;skuInfo.price&#125;&#125;&lt;&#x2F;em&gt;</span><br></pre></td></tr></table></figure>
<h2><span id="p55-bian-li-xiao-shou-shu-xing">55 遍历销售属性</span><a href="#p55-bian-li-xiao-shou-shu-xing" class="header-anchor">#</a></h2>
<p>Detail 63</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 销售属性 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;choose&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;chooseArea&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;choosed&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dl</span> <span class="attr">v-for</span>=<span class="string">&quot;(attr,index) in spuSaleAttrList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;attr.id&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dt</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>&#123;&#123;attr.saleAttrName&#125;&#125;<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span> <span class="attr">changepirce</span>=<span class="string">&quot;0&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;active:spuVal.isChecked===`1`&#125;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-for</span>=<span class="string">&quot;(spuVal, index) in attr.spuSaleAttrValueList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;spuVal.id&quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">click</span>=<span class="string">&quot;setChecked(spuVal, attr.spuSaleAttrValueList)&quot;</span>&gt;</span>&#123;&#123;spuVal.saleAttrValueName&#125;&#125;<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>添加 methods 及方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  setChecked(spuVal, valueList) &#123;</span><br><span class="line">    <span class="comment">// 排他效果，先把数组中每个销售属性值对象置0</span></span><br><span class="line">    valueList.forEach(<span class="function"><span class="params">v</span> =&gt;</span> v.isChecked = <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">    <span class="comment">// 只有当前点击的这个属性值为1</span></span><br><span class="line">    spuVal.isChecked = <span class="string">&quot;1&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1><span id="9-yue-24-ri-day-6">9月24日（day 6）</span><a href="#9-yue-24-ri-day-6" class="header-anchor">#</a></h1>
<h2><span id="p56-shu-liang-de-zeng-jia-he-jian-shao-cao-zuo">56 数量的增加和减少操作</span><a href="#p56-shu-liang-de-zeng-jia-he-jian-shao-cao-zuo" class="header-anchor">#</a></h2>
<p>默认值设为1，不能设置为0（减少用户的操作，更好的体验）</p>
<p>在 Detail  的 data 中创建 skuNum</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    skuNum: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>第75行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 75</span><br><span class="line">              <span class="comment">&lt;!-- 数量的增加和减少操作 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;controls&quot;</span>&gt;</span></span><br><span class="line">                                                       <span class="comment">&lt;!-- 这里 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">class</span>=<span class="string">&quot;itxt&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;skuNum&quot;</span> /&gt;</span></span><br><span class="line">                                                   <span class="comment">&lt;!-- 这里 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:&quot;</span> <span class="attr">class</span>=<span class="string">&quot;plus&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;skuNum++&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:&quot;</span> <span class="attr">class</span>=<span class="string">&quot;mins&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;skuNum&gt;1?skuNum--:</span></span></span><br><span class="line"><span class="tag"><span class="string">                  &#x27;&#x27;&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p57-xian-shi-xiang-qing-tu-pian-lun-bo">57 显示详情图片（轮播）</span><a href="#p57-xian-shi-xiang-qing-tu-pian-lun-bo" class="header-anchor">#</a></h2>
<p>ImageList 中更新</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-wrapper&quot;</span>&gt;</span></span><br><span class="line">                              <span class="comment">&lt;!-- 这里 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(skuImg, index) in skuImageList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;skuImg.id&quot;</span>&gt;</span></span><br><span class="line">              <span class="comment">&lt;!-- 这里 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;skuImg.imgUrl&quot;</span> <span class="attr">:class:</span>=<span class="string">&quot;&#123;active:currentIndex===index&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 剩下的img都删除 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line">    <span class="keyword">import</span> Swiper <span class="keyword">from</span> <span class="string">&#x27;swiper&#x27;</span></span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">        name: <span class="string">&quot;ImageList&quot;</span>,</span><br><span class="line">        data() &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                currentIndex: <span class="number">0</span>, <span class="comment">// 储存某个图片索引</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        computed:&#123;</span><br><span class="line">          ...mapGetters([<span class="string">&#x27;skuImageList&#x27;</span>])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2><span id="p58-yin-ru-lun-bo-tu-zu-jian">58 引入轮播图组件</span><a href="#p58-yin-ru-lun-bo-tu-zu-jian" class="header-anchor">#</a></h2>
<p>ImageList 更新（直接CV）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-container&quot;</span> <span class="attr">id</span>=<span class="string">&quot;swL&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sw4&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 轮播图 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-wrapper&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(carousel,index) in skuImageList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;carousel.id&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;carousel.imgUrl&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;active:currentIndex===index&#125;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;currentIndex=index&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-button-next&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-button-prev&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Swiper <span class="keyword">from</span> <span class="string">&#x27;swiper&#x27;</span></span><br></pre></td></tr></table></figure>
<p>增加 watch</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">  skuImageList: &#123;</span><br><span class="line">    <span class="comment">// 该回调会在监听开始被立即调用</span></span><br><span class="line">    handler: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.skuImageList.length === <span class="number">0</span>) <span class="keyword">return</span></span><br><span class="line">      <span class="built_in">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="built_in">this</span>.$refs.sw4, &#123;</span><br><span class="line">          <span class="comment">// 每一屏中显示图片的数量</span></span><br><span class="line">          slidesPerView: <span class="number">5</span>,</span><br><span class="line">          <span class="comment">// 每次移动图片的数量</span></span><br><span class="line">          slidesPerGroup: <span class="number">2</span>,</span><br><span class="line">          <span class="comment">// 如果需要分页器</span></span><br><span class="line">          pagination: &#123;</span><br><span class="line">            el: <span class="string">&#x27;.swiper-pagination&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="comment">// 如果需要前进后退按钮</span></span><br><span class="line">          navigation: &#123;</span><br><span class="line">            nextEl: <span class="string">&#x27;.swiper-button-next&#x27;</span>,</span><br><span class="line">            prevEl: <span class="string">&#x27;.swiper-button-prev&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// immediate</span></span><br><span class="line">    immediate: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2><span id="p59-fang-da-jing-1">59 放大镜1</span><a href="#p59-fang-da-jing-1" class="header-anchor">#</a></h2>
<p>ImageList</p>
<p>更新点击事件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-container&quot;</span> <span class="attr">id</span>=<span class="string">&quot;swL&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sw4&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 轮播图 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-wrapper&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(carousel,index) in skuImageList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;carousel.id&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 更新点击事件 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;carousel.imgUrl&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;active:currentIndex===index&#125;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeCurrentIndex(index)&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-button-next&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-button-prev&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>methods 更新</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">  changeCurrentIndex(index)&#123;</span><br><span class="line">    <span class="comment">// 修改当前图片的选中的索引</span></span><br><span class="line">    <span class="built_in">this</span>.currentIndex = index</span><br><span class="line">    <span class="comment">// 分发父级组件的事件</span></span><br><span class="line">    <span class="built_in">this</span>.$emit(<span class="string">&#x27;changeCurrentIndex&#x27;</span>, index)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>Detail 15行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 左侧放大镜区域 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;previewWrap&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--放大镜效果--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Zoom</span> <span class="attr">v-if</span>=<span class="string">&quot;skuImageList.length&gt;0&quot;</span> <span class="attr">:imgUrl</span>=<span class="string">&quot;skuImageList[currentImageIndex].imgUrl&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:bigImgUrl</span>=<span class="string">&quot;skuImageList[currentImageIndex].imgUrl&quot;</span> /&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 小图列表 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ImageList</span> @<span class="attr">changeCurrentIndex</span>=<span class="string">&quot;changeCurrentIndex&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>更新data</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    skuNum: <span class="number">1</span>, <span class="comment">// 该产品默认的数量</span></span><br><span class="line">    currentImageIndex: <span class="number">0</span> <span class="comment">// 储存轮播图选择索引</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>更新computed</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  ...mapGetters([<span class="string">&#x27;categoryView&#x27;</span>, <span class="string">&#x27;spuSaleAttrList&#x27;</span>, <span class="string">&#x27;skuInfo&#x27;</span>, <span class="string">&#x27;skuImageList&#x27;</span>])</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>methods 新增</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 子级组件 imageList中点击某个小图 该图的索引 传递过来</span></span><br><span class="line">changeCurrentIndex(index) &#123;</span><br><span class="line">  <span class="built_in">this</span>.currentImageIndex = index</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>Zoom 中更新</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;spec-preview&quot;&gt;</span><br><span class="line">    &lt;img :src&#x3D;&quot;imgUrl&quot; &#x2F;&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;mask&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;big&quot;&gt;</span><br><span class="line">      &lt;img src&#x3D;&quot;bigImgUrl&quot; &#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;small&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &quot;Zoom&quot;,</span><br><span class="line">    props: &#123;</span><br><span class="line">      imgUrl: String,</span><br><span class="line">      bigImgUrl: String</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<h2><span id="p60-fang-da-jing-2">60 放大镜2</span><a href="#p60-fang-da-jing-2" class="header-anchor">#</a></h2>
<p>Zoom 替换</p>
<ul>
<li>mask --&gt; event</li>
<li>small --&gt; mask</li>
</ul>
<p>加 ref 和点击事件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;spec-preview&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;imgUrl&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;event&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;event&quot;</span> @<span class="attr">mousemove</span>=<span class="string">&quot;handleMove&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;big&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;bigImgUrl&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bigImg&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mask&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;mask&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>mounted 和 methods 更新</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    <span class="comment">// 获取当前遮挡层的宽度</span></span><br><span class="line">    <span class="built_in">this</span>.maskWidth = <span class="built_in">this</span>.$refs.event.clientWidth / <span class="number">2</span></span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="comment">// 鼠标移动事件</span></span><br><span class="line">    handleMove(e) &#123;</span><br><span class="line">      <span class="comment">// 获取鼠标移动的横纵坐标</span></span><br><span class="line">      <span class="keyword">const</span> &#123;</span><br><span class="line">        offsetX,</span><br><span class="line">        offsetY</span><br><span class="line">      &#125; = e</span><br><span class="line">      <span class="comment">// 获取当前遮挡层的宽度</span></span><br><span class="line">      <span class="keyword">const</span> maskWidth = <span class="built_in">this</span>.maskWidth</span><br><span class="line">      <span class="comment">// 获取遮挡层对象</span></span><br><span class="line">      <span class="keyword">const</span> maskDiv = <span class="built_in">this</span>.$refs.mask</span><br><span class="line">      <span class="comment">// 获取大图</span></span><br><span class="line">      <span class="keyword">const</span> bigImg = <span class="built_in">this</span>.$refs.bigImg</span><br><span class="line">      <span class="comment">// 横纵坐标</span></span><br><span class="line">      <span class="keyword">let</span> left = <span class="number">0</span></span><br><span class="line">      <span class="keyword">let</span> top = <span class="number">0</span></span><br><span class="line">      <span class="comment">// 计算鼠标的遮挡层中间的位置</span></span><br><span class="line">      left = offsetX - maskWidth / <span class="number">2</span></span><br><span class="line">      top = offsetY - maskWidth / <span class="number">2</span></span><br><span class="line">      <span class="comment">// 限制</span></span><br><span class="line">      left: left &lt; <span class="number">0</span> ? <span class="number">0</span> : left &gt; maskWidth ? maskWidth : left</span><br><span class="line">      top: top &lt; <span class="number">0</span> ? <span class="number">0</span> : top &gt; maskWidth ? maskWidth : top</span><br><span class="line">      <span class="comment">// 设置遮挡层的移动的位置</span></span><br><span class="line">      maskDiv.style.left = left + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">      maskDiv.style.top = top + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">      <span class="comment">// 设置大图的移动</span></span><br><span class="line">      bigImg.style.left = -left * <span class="number">2</span> + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">      bigImg.style.top = -top * <span class="number">2</span> + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>less 中 .big 加</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background</span>: <span class="number">#fff</span>;</span><br></pre></td></tr></table></figure>
<h2><span id="p61-tian-jia-gou-wu-che-cheng-gong">61 添加购物车成功</span><a href="#p61-tian-jia-gou-wu-che-cheng-gong" class="header-anchor">#</a></h2>
<p>AddCartSuccess 拷贝到 pages</p>
<p>routes.js 注册路由组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> AddCartSuccess <span class="keyword">from</span> <span class="string">&#x27;@/pages/AddCartSuccess&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 40</span></span><br><span class="line">  <span class="comment">// AddCartSuccess -- query</span></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/addcartsuccess&#x27;</span>,</span><br><span class="line">    component: AddCartSuccess</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>在 Detail 详情页中 找到 加入购物车 84</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;addToCart&quot;</span>&gt;</span>加入购物车<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>methods 新增</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点击加入购物车，跳转到添加购物车成功界面</span></span><br><span class="line">addToCart() &#123;</span><br><span class="line">  <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">    path: <span class="string">&#x27;/addcartsuccess&#x27;</span>,</span><br><span class="line">    query: &#123;</span><br><span class="line">      skuId: <span class="built_in">this</span>.skuInfo.id,</span><br><span class="line">      skuNum: <span class="built_in">this</span>.skuNum</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>AddCartSuccess 8 对应的图片</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/s3.png&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p62-feng-zhuang-api-jie-kou-han-shu">62 封装api接口函数</span><a href="#p62-feng-zhuang-api-jie-kou-han-shu" class="header-anchor">#</a></h2>
<p>添加 api 接口函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加购物车接口函数</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqAddToCart = <span class="function">(<span class="params">skuId, skuNum</span>) =&gt;</span> ajax.post(<span class="string">`/cart/addToCart/<span class="subst">$&#123;skuId&#125;</span>/<span class="subst">$&#123;skuNum&#125;</span>`</span>)</span><br></pre></td></tr></table></figure>
<p>store/modules/ 新建 shopcart.js 在 index.js 注册</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> home <span class="keyword">from</span> <span class="string">&#x27;./home&#x27;</span></span><br><span class="line"><span class="keyword">import</span> search <span class="keyword">from</span> <span class="string">&#x27;./search&#x27;</span></span><br><span class="line"><span class="keyword">import</span> detail <span class="keyword">from</span> <span class="string">&#x27;./detail&#x27;</span></span><br><span class="line"><span class="keyword">import</span> shopcart <span class="keyword">from</span> <span class="string">&#x27;./shopcart&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  home,</span><br><span class="line">  search,</span><br><span class="line">  detail,</span><br><span class="line">  shopcart</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入api</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  reqAddToCart</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    shopList: [] <span class="comment">// 购物车中的商品信息按钮</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;&#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    <span class="comment">// 添加购物车操作</span></span><br><span class="line">    <span class="keyword">async</span> addToCart1(&#123;</span><br><span class="line">      commit</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      skuId,</span><br><span class="line">      skuNum</span><br><span class="line">    &#125;) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqAddToCart(skuId, skuNum)</span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;添加成功&quot;</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;添加失败&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Detail</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// 点击加入购物车，跳转到添加购物车成功界面</span></span><br><span class="line">  addToCart() &#123;</span><br><span class="line">    <span class="keyword">const</span> query = &#123;</span><br><span class="line">      skuId: <span class="built_in">this</span>.skuInfo.id,</span><br><span class="line">      skuNum: <span class="built_in">this</span>.skuNum</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;addToCart1&#x27;</span>, query)</span><br><span class="line">    <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">        path: <span class="string">&#x27;/addcartsuccess&#x27;</span>,</span><br><span class="line">        query</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2><span id="p63-hui-diao-han-shu">63 回调函数</span><a href="#p63-hui-diao-han-shu" class="header-anchor">#</a></h2>
<p>shopcart.js 更新</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">actions: &#123;</span><br><span class="line">  <span class="comment">// 添加购物车操作</span></span><br><span class="line">  <span class="keyword">async</span> addToCart1(&#123;</span><br><span class="line">    commit</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    skuId,</span><br><span class="line">    skuNum,</span><br><span class="line">    callback</span><br><span class="line">  &#125;) &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> reqAddToCart(skuId, skuNum, callback)</span><br><span class="line">    <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">      callback(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      callback(result.message || <span class="string">&#x27;添加失败&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>Detail 更新</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点击加入购物车，跳转到添加购物车成功界面</span></span><br><span class="line">addToCart() &#123;</span><br><span class="line">  <span class="keyword">const</span> query = &#123;</span><br><span class="line">    skuId: <span class="built_in">this</span>.skuInfo.id,</span><br><span class="line">    skuNum: <span class="built_in">this</span>.skuNum</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 分发 有可能不成功</span></span><br><span class="line">  <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;addToCart1&#x27;</span>, &#123;</span><br><span class="line">    ...query,</span><br><span class="line">    callback: <span class="built_in">this</span>.callback</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 回调函数</span></span><br><span class="line">callback(error) &#123;</span><br><span class="line">  <span class="comment">// 成功</span></span><br><span class="line">  <span class="keyword">if</span> (!error) &#123;</span><br><span class="line">    <span class="keyword">const</span> query = &#123;</span><br><span class="line">      skuId: <span class="built_in">this</span>.skuInfo.id,</span><br><span class="line">      skuNum: <span class="built_in">this</span>.skuNum</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">      path: <span class="string">&#x27;/addcartsuccess&#x27;</span>,</span><br><span class="line">      query</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 失败</span></span><br><span class="line">    alert(error)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2><span id="p64-dispatch-fan-hui-promise">64 dispatch 返回 Promise</span><a href="#p64-dispatch-fan-hui-promise" class="header-anchor">#</a></h2>
<p>shopcart.js 更新 actions</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> addToCart2(&#123;</span><br><span class="line">    commit</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    skuId,</span><br><span class="line">    skuNum</span><br><span class="line">  &#125;) &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> reqAddToCart(skuId, skuNum)</span><br><span class="line">    <span class="keyword">return</span> result.code === <span class="number">200</span> ? <span class="string">&#x27;&#x27;</span> : result.message || <span class="string">&#x27;添加失败&#x27;</span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>Detail 更新 addToCart 删除callback</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// 点击加入购物车，跳转到添加购物车成功界面</span></span><br><span class="line">  <span class="comment">// + async</span></span><br><span class="line">  <span class="keyword">async</span> addToCart() &#123;</span><br><span class="line">    <span class="keyword">const</span> query = &#123;</span><br><span class="line">      skuId: <span class="built_in">this</span>.$route.params.skuId,</span><br><span class="line">      skuNum: <span class="built_in">this</span>.skuNum</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 分发 有可能不成功</span></span><br><span class="line">    <span class="keyword">const</span> errorMsg = <span class="keyword">await</span> <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;addToCart2&#x27;</span>, &#123;</span><br><span class="line">      ...query</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 成功</span></span><br><span class="line">    <span class="keyword">if</span> (!errorMsg) &#123;</span><br><span class="line">      <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">        path: <span class="string">&#x27;/addcartsuccess&#x27;</span>,</span><br><span class="line">        query</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 失败</span></span><br><span class="line">      alert(errorMsg)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>AddCartSuccess 更新 16行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">class</span>=<span class="string">&quot;sui-btn btn-xlarge&quot;</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;name:&#x27;detail&#x27;, params:&#123;skuId:this.$route.query.skuId&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">  查看商品详情</span><br><span class="line"><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p65-addcartsuccess-geng-xin">65 AddCartSuccess 更新</span><a href="#p65-addcartsuccess-geng-xin" class="header-anchor">#</a></h2>
<p>Detail 更新 addToCart</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!errorMsg) &#123;</span><br><span class="line">  <span class="comment">// 通过浏览器缓存当前商品信息数据对象</span></span><br><span class="line">  <span class="built_in">window</span>.localStorage.setItem(<span class="string">&#x27;SKU_INFO&#x27;</span>, <span class="built_in">JSON</span>.stringify(<span class="built_in">this</span>.skuInfo))</span><br><span class="line">  <span class="comment">// 路由跳转</span></span><br></pre></td></tr></table></figure>
<p>AddCartSuccess 更新 8行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">&lt;!-- 1 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;skuInfo.skuDefaultImg&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right-info&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>&#123;&#123;skuInfo.skuName&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;attr&quot;</span>&gt;</span>颜色：24K金 数量：&#123;&#123;this.$route.query.skuNum&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    skuInfo: &#123;&#125; <span class="comment">// 响应式数据对象</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">mounted() &#123;</span><br><span class="line">  <span class="comment">// 浏览器的缓存读取</span></span><br><span class="line">  <span class="built_in">this</span>.skuInfo = <span class="built_in">JSON</span>.parse(<span class="built_in">window</span>.localStorage.getItem(<span class="string">&#x27;SKU_INFO&#x27;</span>) || &#123;&#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2><span id="p66-gou-wu-che">66 购物车</span><a href="#p66-gou-wu-che" class="header-anchor">#</a></h2>
<p>新建购物车组件 ShopCart 在 pages里面（直接拷贝）</p>
<p>routes.js 注册为路由组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ShopCart <span class="keyword">from</span> <span class="string">&#x27;@/pages/ShopCart&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 46</span></span><br><span class="line">  <span class="comment">// ShopCart</span></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/shopcart&#x27;</span>,</span><br><span class="line">    component: ShopCart</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>AddCartSuccess 21行</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- <span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:&quot;</span>&gt;</span>去购物车结算 &gt; <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span> --&gt;</span><br><span class="line">&lt;router-link to=<span class="string">&quot;/shopcart&quot;</span>&gt;去购物车结算&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>
<h2><span id="p67-sheng-cheng-lin-shi-yong-hu-id">67 生成临时用户id</span><a href="#p67-sheng-cheng-lin-shi-yong-hu-id" class="header-anchor">#</a></h2>
<p>生成临时用户id</p>
<p>uuidjs <code>npm i uuidjs</code></p>
<p>utils 中新建 storageUtils.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 暴露出去一个函数，用户生成用户的临时id凭证</span></span><br><span class="line"><span class="comment">// 引入 uuid</span></span><br><span class="line"><span class="keyword">import</span> UUID <span class="keyword">from</span> <span class="string">&#x27;uuidjs&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getUUID</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 先从浏览器的缓存中读取用户的临时凭证</span></span><br><span class="line">  <span class="keyword">let</span> uuid = <span class="built_in">localStorage</span>.getItem(<span class="string">&#x27;UUID_KEY&#x27;</span>)</span><br><span class="line">  <span class="comment">// 判断是否存在</span></span><br><span class="line">  <span class="keyword">if</span> (!uuid) &#123;</span><br><span class="line">    <span class="comment">// 产生临时用户id</span></span><br><span class="line">    uuid = UUID.generate()</span><br><span class="line">    <span class="comment">// 保存到浏览器</span></span><br><span class="line">    <span class="built_in">localStorage</span>.setItem(<span class="string">&#x27;UUID_KEY&#x27;</span>, uuid)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 返回</span></span><br><span class="line">  <span class="keyword">return</span> uuid</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>store/modules 中新建一个 user.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用户模块</span></span><br><span class="line"><span class="comment">// 引入 生成uuid 工具</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  getUUID</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/storageUtils&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    userInfo: &#123;&#125;, <span class="comment">// 用户信息对象</span></span><br><span class="line">    userTempId: getUUID() <span class="comment">// 用户的临时id</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;&#125;,</span><br><span class="line">  actions: &#123;&#125;,</span><br><span class="line">  getters: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在index.js中注册</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> home <span class="keyword">from</span> <span class="string">&#x27;./home&#x27;</span></span><br><span class="line"><span class="keyword">import</span> search <span class="keyword">from</span> <span class="string">&#x27;./search&#x27;</span></span><br><span class="line"><span class="keyword">import</span> detail <span class="keyword">from</span> <span class="string">&#x27;./detail&#x27;</span></span><br><span class="line"><span class="keyword">import</span> shopcart <span class="keyword">from</span> <span class="string">&#x27;./shopcart&#x27;</span></span><br><span class="line"><span class="keyword">import</span> user <span class="keyword">from</span> <span class="string">&#x27;./user&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  home,</span><br><span class="line">  search,</span><br><span class="line">  detail,</span><br><span class="line">  shopcart,</span><br><span class="line">  user</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>api/ajax.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span></span><br></pre></td></tr></table></figure>
<p>更新请求拦截器</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请求拦截器</span></span><br><span class="line">ajax.interceptors.request.use(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">  Nprogress.start() <span class="comment">// 显示进度条</span></span><br><span class="line">  <span class="comment">// 在请求头中携带用户的临时凭证id</span></span><br><span class="line">  config.headers[<span class="string">&#x27;userTempId&#x27;</span>] = store.state.user.userTempId</span><br><span class="line">  <span class="keyword">return</span> config</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>调用接口发请求的时候，在请求头携带用户临时id</p>
<h1><span id="9-yue-25-ri-day-7">9月25日（day 7）</span><a href="#9-yue-25-ri-day-7" class="header-anchor">#</a></h1>
<h2><span id="p68-huo-qu-gou-wu-che-shu-ju-feng-zhuang-api-vuex">68 获取购物车数据（封装api + vuex）</span><a href="#p68-huo-qu-gou-wu-che-shu-ju-feng-zhuang-api-vuex" class="header-anchor">#</a></h2>
<p>api +</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取购物车中的商品信息列表</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqShopCartList = <span class="function">() =&gt;</span> ajax.get(<span class="string">&#x27;/cart/cartList&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>store/modules/shopcart.js +</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入api</span></span><br><span class="line"><span class="keyword">import</span> &#123; reqAddToCart, reqShopCartList &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mutations: &#123;</span><br><span class="line">  <span class="comment">// 直接修改 shopList 数据</span></span><br><span class="line">  RECEIVE_SHOP_LIST(state, shopList) &#123;</span><br><span class="line">    state.shopList = shopList</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>actions 中 +</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取购物车中的商品信息对象</span></span><br><span class="line"><span class="keyword">async</span> getShopList(&#123; commit &#125;) &#123;</span><br><span class="line">  <span class="comment">// 调用 api 接口，发送异步请求</span></span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> reqShopCartList()</span><br><span class="line">  <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="comment">// 更新数据</span></span><br><span class="line">    commit(<span class="string">&#x27;RECEIVE_SHOP_LIST&#x27;</span>, result.data)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>ShopCart 更新</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;ShopCart&#x27;</span>,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    <span class="comment">// 获取购物车中的商品数据</span></span><br><span class="line">    <span class="built_in">this</span>.getShopCartList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    getShopCartList() &#123;</span><br><span class="line">      <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;getShopList&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2><span id="p69-xuan-ran-gou-wu-che-nei-rong">69 渲染购物车内容</span><a href="#p69-xuan-ran-gou-wu-che-nei-rong" class="header-anchor">#</a></h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  ...mapState(&#123; <span class="attr">shopList</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.shopcart.shopList &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>14行 <code>&lt;ul class=&quot;cart-list&quot;&gt;</code> 删掉留一个</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 选中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;cart-list-con1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;chk_list&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 图片和名字 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;cart-list-con2&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;item.imgUrl&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item-msg&quot;</span>&gt;</span>&#123;&#123; item.skuName &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;cart-list-con3&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item-txt&quot;</span>&gt;</span>绝版<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 价格 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;cart-list-con4&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;price&quot;</span>&gt;</span>&#123;&#123; item.skuPrice &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 加减 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;cart-list-con5&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span> <span class="attr">class</span>=<span class="string">&quot;mins&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">    <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">minnum</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;itxt&quot;</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span> <span class="attr">class</span>=<span class="string">&quot;plus&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 总价 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;cart-list-con6&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sum&quot;</span>&gt;</span>&#123;&#123; item.skuPrice * item.skuNum &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 删除 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;cart-list-con7&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p69-xuan-ran-gou-wu-che-jie-mian-2">69 渲染购物车界面2</span><a href="#p69-xuan-ran-gou-wu-che-jie-mian-2" class="header-anchor">#</a></h2>
<p>store 更新 shopcart 中的 getters</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 总数量</span></span><br><span class="line">totalCount(state) &#123;</span><br><span class="line">  <span class="keyword">return</span> state.shopList.reduce(<span class="function">(<span class="params">pre, item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> item.isChecked === <span class="number">1</span> ? pre + item.skuNum : pre</span><br><span class="line">  &#125;, <span class="number">0</span>)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 总价格</span></span><br><span class="line">totalPrice(state) &#123;</span><br><span class="line">  <span class="keyword">return</span> state.shopList.reduce(<span class="function">(<span class="params">pre, item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> item.isChecked === <span class="number">1</span> ? pre + item.skuNum * item.skuPrice : pre</span><br><span class="line">  &#125;, <span class="number">0</span>)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 是否全部选中</span></span><br><span class="line">isCheckAll(state) &#123;</span><br><span class="line">  <span class="comment">// 数组中要有数据,并且每个数据都是选中的,才有意义</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    state.shopList.length &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">    state.shopList.every(<span class="function"><span class="params">item</span> =&gt;</span> item.isChecked === <span class="number">1</span>)</span><br><span class="line">  )</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>ShopCart</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapState, mapGetters &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  ...mapState(&#123; <span class="attr">shopList</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.shopcart.shopList &#125;),</span><br><span class="line">  ...mapGetters([<span class="string">&#x27;totalCount&#x27;</span>, <span class="string">&#x27;totalPrice&#x27;</span>, <span class="string">&#x27;isChecked&#x27;</span>])</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>61行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;money-box&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;chosed&quot;</span>&gt;</span></span><br><span class="line">    已选择 <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; totalCount &#125;&#125;<span class="tag">&lt;/<span class="name">span</span></span></span><br><span class="line"><span class="tag">    &gt;</span>件商品</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sumprice&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">em</span>&gt;</span>总价（不含运费） ：<span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">    &lt;i class=&quot;summoney&quot;&#123;&#123; totalPrice &#125;&#125;&lt;/i&gt;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sumbtn&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p70-gou-wu-che-shan-chu">70 购物车删除</span><a href="#p70-gou-wu-che-shan-chu" class="header-anchor">#</a></h2>
<p>api +</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 购物车删除操作</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqDeleteCartItem = <span class="function">(<span class="params">skuId</span>) =&gt;</span> ajax.delete(<span class="string">`/cart/deleteCart/<span class="subst">$&#123;skuId&#125;</span>`</span>)</span><br></pre></td></tr></table></figure>
<p>shopcart.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reqAddToCart, reqShopCartList,reqDeleteCartItem &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br></pre></td></tr></table></figure>
<p>actions+</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 删除购物车的商品信息对象</span></span><br><span class="line"><span class="keyword">async</span> deleteCartItem1(&#123; commit &#125;, skuId) &#123;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> reqDeleteCartItem(skuId)</span><br><span class="line">  <span class="keyword">return</span> result.code === <span class="number">200</span> ? <span class="string">&#x27;&#x27;</span> : result.message || <span class="string">&#x27;删除失败&#x27;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>ShopCart  methods+</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 删除</span></span><br><span class="line"><span class="keyword">async</span> deleteCartItem(skuId) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.confirm(<span class="string">&#x27;你确定要删除吗？&#x27;</span>)) &#123;</span><br><span class="line">    <span class="keyword">const</span> error = <span class="keyword">await</span> <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;deleteCartItem1&#x27;</span>, skuId)</span><br><span class="line">    <span class="comment">// 删除成功</span></span><br><span class="line">    <span class="keyword">if</span> (!error) &#123;</span><br><span class="line">      <span class="built_in">this</span>.getShopCartList()</span><br><span class="line">      <span class="comment">// 删除失败</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      alert(error)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>ShopCart</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 删除 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;cart-list-con7&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;sindelet&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;deleteCartItem(item.skuId)&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span>删除<span class="tag">&lt;/<span class="name">a</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>移到收藏<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p71-qing-kong-gou-wu-che">71 清空购物车</span><a href="#p71-qing-kong-gou-wu-che" class="header-anchor">#</a></h2>
<p>shopcart.js 中 getters +</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取所有选中的购物项</span></span><br><span class="line">selectedCartItems(state) &#123;</span><br><span class="line">  <span class="keyword">return</span> state.shopList.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.isChecked === <span class="number">1</span>)</span><br><span class="line">  <span class="comment">// return state.shopList.reduce((pre, item) =&gt; &#123;</span></span><br><span class="line">  <span class="comment">//   判断是否选中</span></span><br><span class="line">  <span class="comment">//   if (item.isChecked === 1) &#123;</span></span><br><span class="line">  <span class="comment">//     pre.push(item)</span></span><br><span class="line">  <span class="comment">//   &#125;</span></span><br><span class="line">  <span class="comment">//   return pre</span></span><br><span class="line">  <span class="comment">// &#125;, [])</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>actions +</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> deleteCartItem2(&#123; commit &#125;, skuId) &#123;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> reqDeleteCartItem(skuId)</span><br><span class="line">  <span class="keyword">if</span> (result.code !== <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="comment">// 抛出一个异常</span></span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(result.message)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>ShopCart 64行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;option&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;deleteCartItems&quot;</span>&gt;</span>删除选中的商品<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>computed 更新</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  ...mapState(&#123; <span class="attr">shopList</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.shopcart.shopList &#125;),</span><br><span class="line">  ...mapGetters([</span><br><span class="line">    <span class="string">&#x27;totalCount&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;totalPrice&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;isCheckAll&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;selectedCartItems&#x27;</span>  <span class="comment">// 新增</span></span><br><span class="line">  ])</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>methods +</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 删除所有选中的购物项</span></span><br><span class="line"><span class="keyword">async</span> deleteCartItems(skuId) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; selectedCartItems &#125; = <span class="built_in">this</span></span><br><span class="line">  <span class="comment">// 如果该数组中的数据是没有的，那么也没有必要删除</span></span><br><span class="line">  <span class="keyword">if</span> (selectedCartItems.length === <span class="number">0</span>) <span class="keyword">return</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.confirm(<span class="string">&#x27;你确定要删除所有选中的购物项吗&#x27;</span>)) &#123;</span><br><span class="line">    <span class="comment">// 定义一个储存Promise的数组</span></span><br><span class="line">    <span class="keyword">const</span> promises = []</span><br><span class="line">    <span class="comment">// 遍历数组，一个一个删除</span></span><br><span class="line">    selectedCartItems.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 分发action</span></span><br><span class="line">      <span class="keyword">const</span> promise = <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;deleteCartItem2&#x27;</span>, item.skuId)</span><br><span class="line">      promises.push(promise)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 统一的处理 Promise</span></span><br><span class="line">    <span class="built_in">Promise</span>.all(promises).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 成功了</span></span><br><span class="line">      <span class="built_in">this</span>.getShopCartList()</span><br><span class="line">    &#125;),</span><br><span class="line">      error =&gt; &#123;</span><br><span class="line">        <span class="comment">// 失败了</span></span><br><span class="line">        alert(error.message)</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2><span id="p72-qie-huan-xuan-zhong-zhuang-tai">72 切换选中状态</span><a href="#p72-qie-huan-xuan-zhong-zhuang-tai" class="header-anchor">#</a></h2>
<p>api +</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 切换商品选中状态</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqCheckCartItem = <span class="function">(<span class="params">skuId, isChecked</span>) =&gt;</span></span><br><span class="line">  ajax.get(<span class="string">`/cart/checkCart/<span class="subst">$&#123;skuId&#125;</span>/<span class="subst">$&#123;isChecked&#125;</span>`</span>)</span><br></pre></td></tr></table></figure>
<p>store shopcart.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入api</span></span><br><span class="line"><span class="keyword">import</span> &#123; reqAddToCart, reqShopCartList, reqDeleteCartItem,reqCheckCartItem &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 切换购物选中状态</span></span><br><span class="line"><span class="keyword">async</span> checkCartItem1(&#123; commit &#125;, &#123; skuId, isChecked &#125;) &#123;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> reqCheckCartItem(skuId, isChecked)</span><br><span class="line">  <span class="comment">// 失败的问题</span></span><br><span class="line">  <span class="keyword">if</span> (result.code !== <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(result.message || <span class="string">&#x27;切换勾选状态失败&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ShopCart methods +</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置购物项商品的选中状态</span></span><br><span class="line"><span class="keyword">async</span> checkCartItem(item) &#123;</span><br><span class="line">  <span class="keyword">const</span> isChecked = item.isChecked === <span class="number">1</span> ? <span class="number">0</span> : <span class="number">1</span></span><br><span class="line">  <span class="comment">// 分发</span></span><br><span class="line">  <span class="built_in">this</span>.$store</span><br><span class="line">    .dispatch(<span class="string">&#x27;checkCartItem1&#x27;</span>, &#123; <span class="attr">skuId</span>: item.skuId, isChecked &#125;)</span><br><span class="line">    .then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 成功了，重新获取购物车的数据</span></span><br><span class="line">      <span class="built_in">this</span>.getShopCartList()</span><br><span class="line">    &#125;),</span><br><span class="line">    error =&gt; &#123;</span><br><span class="line">      <span class="comment">// 失败了</span></span><br><span class="line">      alert(error.message)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>更新html 15行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 是否选中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;cart-list-con1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">    <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">name</span>=<span class="string">&quot;chk_list&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:checked</span>=<span class="string">&quot;item.isChecked&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">change</span>=<span class="string">&quot;checkCartItem(item)&quot;</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p73-quan-xuan-quan-bu-xuan">73 全选/全不选</span><a href="#p73-quan-xuan-quan-bu-xuan" class="header-anchor">#</a></h2>
<p>shopcart.js actions+</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 切换购物选中状态</span></span><br><span class="line"> <span class="keyword">async</span> checkCartItem1(&#123; commit &#125;, &#123; skuId, isChecked &#125;) &#123;</span><br><span class="line">   <span class="keyword">const</span> result = <span class="keyword">await</span> reqCheckCartItem(skuId, isChecked)</span><br><span class="line">   <span class="comment">// 失败的问题</span></span><br><span class="line">   <span class="keyword">if</span> (result.code !== <span class="number">200</span>) &#123;</span><br><span class="line">     <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(result.message || <span class="string">&#x27;切换勾选状态失败&#x27;</span>)</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>ShopCart methods+</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 切换全选/全不选择操作</span></span><br><span class="line"><span class="keyword">async</span> checkCartItems(e) &#123;</span><br><span class="line">  <span class="comment">// 获取当前复选框的选中状态</span></span><br><span class="line">  <span class="keyword">const</span> isChecked = e.target.checked * <span class="number">1</span></span><br><span class="line">  <span class="comment">// const promises = []</span></span><br><span class="line">  <span class="comment">// 遍历购物车中所有的购物项,统一修改选中状态</span></span><br><span class="line">  <span class="comment">// this.shopList.forEach((item) =&gt; &#123;</span></span><br><span class="line">  <span class="comment">//   // 分发action</span></span><br><span class="line">  <span class="comment">//   const promise = this.$store.dispatch(&#x27;checkCartItem1&#x27;, &#123;</span></span><br><span class="line">  <span class="comment">//     skuId: item.skuId,</span></span><br><span class="line">  <span class="comment">//     isChecked,</span></span><br><span class="line">  <span class="comment">//   &#125;)</span></span><br><span class="line">  <span class="comment">//   // 放在promises数组中</span></span><br><span class="line">  <span class="comment">//   promises.push(promise)</span></span><br><span class="line">  <span class="comment">// &#125;)</span></span><br><span class="line">  <span class="comment">// 使用reduce</span></span><br><span class="line">  <span class="comment">// const promises = this.shopList.reduce((pre, item) =&gt; &#123;</span></span><br><span class="line">  <span class="comment">//   const promise = this.$store.dispatch(&#x27;checkCartItem1&#x27;, &#123;</span></span><br><span class="line">  <span class="comment">//     skuId: item.skuId,</span></span><br><span class="line">  <span class="comment">//     isChecked,</span></span><br><span class="line">  <span class="comment">//   &#125;)</span></span><br><span class="line">  <span class="comment">//   pre.push(promise)</span></span><br><span class="line">  <span class="comment">//   return pre</span></span><br><span class="line">  <span class="comment">// &#125;, [])</span></span><br><span class="line">  <span class="comment">// 使用map</span></span><br><span class="line">  <span class="keyword">const</span> promises = <span class="built_in">this</span>.shopList.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;checkCartItem1&#x27;</span>, &#123;</span><br><span class="line">      skuId: item.skuId,</span><br><span class="line">      isChecked</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// 统一处理</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="built_in">Promise</span>.all(promises)</span><br><span class="line">    <span class="comment">// 成功了,重新获取数据</span></span><br><span class="line">    <span class="built_in">this</span>.getShopCartList()</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    alert(error.message)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>79行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 全选 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;select-all&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;chooseAll&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:checked</span>=<span class="string">&quot;isCheckAll&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">change</span>=<span class="string">&quot;checkCartItems&quot;</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>全选<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p74-shu-liang-cao-zuo">74 数量操作</span><a href="#p74-shu-liang-cao-zuo" class="header-anchor">#</a></h2>
<p>shopcart.js actions+</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> addToCart3(&#123; commit, dispatch &#125;, &#123; skuId, skuNum &#125;) &#123;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> reqAddToCart(skuId, skuNum)</span><br><span class="line">  <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="comment">// 成功了</span></span><br><span class="line">    dispatch(<span class="string">&#x27;getShopList&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 失败了</span></span><br><span class="line">    alert(result.message)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>ShopCart methods+</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 修改商品购物项的数量</span></span><br><span class="line"><span class="keyword">async</span> changeCount(item, changeNum) &#123;</span><br><span class="line">  <span class="comment">// 获取skuId</span></span><br><span class="line">  <span class="keyword">const</span> &#123; skuId &#125; = item</span><br><span class="line">  <span class="comment">// 判断当前商品的数量和传入进来的修改的数量相加,要大于0</span></span><br><span class="line">  <span class="keyword">if</span> (item.skuNum + changeNum &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// 分发action</span></span><br><span class="line">    <span class="keyword">const</span> errorMsg = <span class="keyword">await</span> <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;addToCart2&#x27;</span>, &#123;</span><br><span class="line">      skuId,</span><br><span class="line">      skuNum: changeNum</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">if</span> (!errorMsg) &#123;</span><br><span class="line">      <span class="comment">// 成功了</span></span><br><span class="line">      <span class="built_in">this</span>.getShopCartList()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 失败了</span></span><br><span class="line">      alert(errorMsg)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">changeCount2(item, changeNum) &#123;</span><br><span class="line">  <span class="comment">// 获取skuId</span></span><br><span class="line">  <span class="keyword">const</span> &#123; skuId &#125; = item</span><br><span class="line">  <span class="comment">// 判断当前商品的数量和传入进来的修改的数量相加,要大于0</span></span><br><span class="line">  <span class="keyword">if</span> (item.skuNum + changeNum &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// 分发action</span></span><br><span class="line">    <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;addToCart3&#x27;</span>, &#123;</span><br><span class="line">      skuId,</span><br><span class="line">      skuNum: changeNum</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">/</span><br></pre></td></tr></table></figure>
<p>37行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 数量操作 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;cart-list-con5&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 减 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span></span></span><br><span class="line"><span class="tag">    <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;mins&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">click</span>=<span class="string">&quot;changeCount2(item, -1)&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span>-<span class="tag">&lt;/<span class="name">a</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 直接输入 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">    <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">minnum</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;itxt&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:value</span>=<span class="string">&quot;item.skuNum&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">change</span>=<span class="string">&quot;changeCount2(item, $event.target.value * 1 - item.skuNum)&quot;</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 加 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span></span></span><br><span class="line"><span class="tag">    <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;plus&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">click</span>=<span class="string">&quot;changeCount2(item, 1)&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span>+<span class="tag">&lt;/<span class="name">a</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>至此</p>
<p>ShopCart</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;cart&quot;&gt;</span><br><span class="line">    &lt;h4&gt;全部商品&lt;&#x2F;h4&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;cart-main&quot;&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;cart-th&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;cart-th1&quot;&gt;全部&lt;&#x2F;div&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;cart-th2&quot;&gt;商品&lt;&#x2F;div&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;cart-th3&quot;&gt;单价（元）&lt;&#x2F;div&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;cart-th4&quot;&gt;数量&lt;&#x2F;div&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;cart-th5&quot;&gt;小计（元）&lt;&#x2F;div&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;cart-th6&quot;&gt;操作&lt;&#x2F;div&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;cart-body&quot;&gt;</span><br><span class="line">        &lt;ul class&#x3D;&quot;cart-list&quot; v-for&#x3D;&quot;item in shopList&quot; :key&#x3D;&quot;item.id&quot;&gt;</span><br><span class="line">          &lt;!-- 是否选中 --&gt;</span><br><span class="line">          &lt;li class&#x3D;&quot;cart-list-con1&quot;&gt;</span><br><span class="line">            &lt;input</span><br><span class="line">              type&#x3D;&quot;checkbox&quot;</span><br><span class="line">              name&#x3D;&quot;chk_list&quot;</span><br><span class="line">              :checked&#x3D;&quot;item.isChecked&quot;</span><br><span class="line">              @change&#x3D;&quot;checkCartItem(item)&quot;</span><br><span class="line">            &#x2F;&gt;</span><br><span class="line">          &lt;&#x2F;li&gt;</span><br><span class="line">          &lt;!-- 图片和名字 --&gt;</span><br><span class="line">          &lt;li class&#x3D;&quot;cart-list-con2&quot;&gt;</span><br><span class="line">            &lt;img :src&#x3D;&quot;item.imgUrl&quot; &#x2F;&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;item-msg&quot;&gt;&#123;&#123; item.skuName &#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">          &lt;&#x2F;li&gt;</span><br><span class="line">          &lt;!-- 无用 --&gt;</span><br><span class="line">          &lt;li class&#x3D;&quot;cart-list-con3&quot;&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;item-txt&quot;&gt;绝版&lt;&#x2F;div&gt;</span><br><span class="line">          &lt;&#x2F;li&gt;</span><br><span class="line">          &lt;!-- 单价 --&gt;</span><br><span class="line">          &lt;li class&#x3D;&quot;cart-list-con4&quot;&gt;</span><br><span class="line">            &lt;span class&#x3D;&quot;price&quot;&gt;&#123;&#123; item.skuPrice &#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">          &lt;&#x2F;li&gt;</span><br><span class="line">          &lt;!-- 数量操作 --&gt;</span><br><span class="line">          &lt;li class&#x3D;&quot;cart-list-con5&quot;&gt;</span><br><span class="line">            &lt;!-- 减 --&gt;</span><br><span class="line">            &lt;a</span><br><span class="line">              href&#x3D;&quot;javascript:void(0)&quot;</span><br><span class="line">              class&#x3D;&quot;mins&quot;</span><br><span class="line">              @click&#x3D;&quot;changeCount2(item, -1)&quot;</span><br><span class="line">              &gt;-&lt;&#x2F;a</span><br><span class="line">            &gt;</span><br><span class="line">            &lt;!-- 直接输入 --&gt;</span><br><span class="line">            &lt;input</span><br><span class="line">              autocomplete&#x3D;&quot;off&quot;</span><br><span class="line">              type&#x3D;&quot;text&quot;</span><br><span class="line">              minnum&#x3D;&quot;1&quot;</span><br><span class="line">              class&#x3D;&quot;itxt&quot;</span><br><span class="line">              :value&#x3D;&quot;item.skuNum&quot;</span><br><span class="line">              @change&#x3D;&quot;changeCount2(item, $event.target.value * 1 - item.skuNum)&quot;</span><br><span class="line">            &#x2F;&gt;</span><br><span class="line">            &lt;!-- 加 --&gt;</span><br><span class="line">            &lt;a</span><br><span class="line">              href&#x3D;&quot;javascript:void(0)&quot;</span><br><span class="line">              class&#x3D;&quot;plus&quot;</span><br><span class="line">              @click&#x3D;&quot;changeCount2(item, 1)&quot;</span><br><span class="line">              &gt;+&lt;&#x2F;a</span><br><span class="line">            &gt;</span><br><span class="line">          &lt;&#x2F;li&gt;</span><br><span class="line">          &lt;!-- 总价 --&gt;</span><br><span class="line">          &lt;li class&#x3D;&quot;cart-list-con6&quot;&gt;</span><br><span class="line">            &lt;span class&#x3D;&quot;sum&quot;&gt;&#123;&#123; item.skuPrice * item.skuNum &#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">          &lt;&#x2F;li&gt;</span><br><span class="line">          &lt;!-- 删除 --&gt;</span><br><span class="line">          &lt;li class&#x3D;&quot;cart-list-con7&quot;&gt;</span><br><span class="line">            &lt;a href&#x3D;&quot;#&quot; class&#x3D;&quot;sindelet&quot; @click&#x3D;&quot;deleteCartItem(item.skuId)&quot;</span><br><span class="line">              &gt;删除&lt;&#x2F;a</span><br><span class="line">            &gt;</span><br><span class="line">            &lt;br &#x2F;&gt;</span><br><span class="line">            &lt;a href&#x3D;&quot;#&quot;&gt;移到收藏&lt;&#x2F;a&gt;</span><br><span class="line">          &lt;&#x2F;li&gt;</span><br><span class="line">        &lt;&#x2F;ul&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;cart-tool&quot;&gt;</span><br><span class="line">      &lt;!-- 全选 --&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;select-all&quot;&gt;</span><br><span class="line">        &lt;input</span><br><span class="line">          class&#x3D;&quot;chooseAll&quot;</span><br><span class="line">          type&#x3D;&quot;checkbox&quot;</span><br><span class="line">          :checked&#x3D;&quot;isCheckAll&quot;</span><br><span class="line">          @change&#x3D;&quot;checkCartItems&quot;</span><br><span class="line">        &#x2F;&gt;</span><br><span class="line">        &lt;span&gt;全选&lt;&#x2F;span&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;!-- 删除选择的商品 --&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;option&quot;&gt;</span><br><span class="line">        &lt;a href&#x3D;&quot;javascript:;&quot; @click&#x3D;&quot;deleteCartItems&quot;&gt;删除选中的商品&lt;&#x2F;a&gt;</span><br><span class="line">        &lt;a href&#x3D;&quot;javascript:;&quot;&gt;移到我的关注&lt;&#x2F;a&gt;</span><br><span class="line">        &lt;a href&#x3D;&quot;javascript:;&quot;&gt;清除下柜商品&lt;&#x2F;a&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;money-box&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;chosed&quot;&gt;</span><br><span class="line">          已选择 &lt;span&gt;&#123;&#123; totalCount &#125;&#125;&lt;&#x2F;span</span><br><span class="line">          &gt;件商品</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;sumprice&quot;&gt;</span><br><span class="line">          &lt;em&gt;总价（不含运费） ：&lt;&#x2F;em&gt;</span><br><span class="line">          &lt;i class&#x3D;&quot;summoney&quot;&gt;&#123;&#123; totalPrice &#125;&#125;&lt;&#x2F;i&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;sumbtn&quot;&gt;</span><br><span class="line">          &lt;a class&#x3D;&quot;sum-btn&quot; href&#x3D;&quot;###&quot; target&#x3D;&quot;_blank&quot;&gt;结算&lt;&#x2F;a&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; mapState, mapGetters &#125; from &#39;vuex&#39;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#39;ShopCart&#39;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    &#x2F;&#x2F; 获取购物车中的商品数据</span><br><span class="line">    this.getShopCartList()</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    ...mapState(&#123; shopList: state &#x3D;&gt; state.shopcart.shopList &#125;),</span><br><span class="line">    ...mapGetters([</span><br><span class="line">      &#39;totalCount&#39;,</span><br><span class="line">      &#39;totalPrice&#39;,</span><br><span class="line">      &#39;isCheckAll&#39;,</span><br><span class="line">      &#39;selectedCartItems&#39;</span><br><span class="line">    ])</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    &#x2F;&#x2F; 获取购物车</span><br><span class="line">    getShopCartList() &#123;</span><br><span class="line">      this.$store.dispatch(&#39;getShopList&#39;)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; 删除</span><br><span class="line">    async deleteCartItem(skuId) &#123;</span><br><span class="line">      if (window.confirm(&#39;你确定要删除吗？&#39;)) &#123;</span><br><span class="line">        const error &#x3D; await this.$store.dispatch(&#39;deleteCartItem1&#39;, skuId)</span><br><span class="line">        &#x2F;&#x2F; 删除成功</span><br><span class="line">        if (!error) &#123;</span><br><span class="line">          this.getShopCartList()</span><br><span class="line">          &#x2F;&#x2F; 删除失败</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          alert(error)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; 删除所有选中的购物项</span><br><span class="line">    async deleteCartItems(skuId) &#123;</span><br><span class="line">      const &#123; selectedCartItems &#125; &#x3D; this</span><br><span class="line">      &#x2F;&#x2F; 如果该数组中的数据是没有的，那么也没有必要删除</span><br><span class="line">      if (selectedCartItems.length &#x3D;&#x3D;&#x3D; 0) return</span><br><span class="line">      if (window.confirm(&#39;你确定要删除所有选中的购物项吗&#39;)) &#123;</span><br><span class="line">        &#x2F;&#x2F; 定义一个储存Promise的数组</span><br><span class="line">        const promises &#x3D; []</span><br><span class="line">        &#x2F;&#x2F; 遍历数组，一个一个删除</span><br><span class="line">        selectedCartItems.forEach(item &#x3D;&gt; &#123;</span><br><span class="line">          &#x2F;&#x2F; 分发action</span><br><span class="line">          const promise &#x3D; this.$store.dispatch(&#39;deleteCartItem2&#39;, item.skuId)</span><br><span class="line">          promises.push(promise)</span><br><span class="line">        &#125;)</span><br><span class="line">        &#x2F;&#x2F; 统一的处理 Promise</span><br><span class="line">        Promise.all(promises).then(() &#x3D;&gt; &#123;</span><br><span class="line">          &#x2F;&#x2F; 成功了</span><br><span class="line">          this.getShopCartList()</span><br><span class="line">        &#125;),</span><br><span class="line">          error &#x3D;&gt; &#123;</span><br><span class="line">            &#x2F;&#x2F; 失败了</span><br><span class="line">            alert(error.message)</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; 设置购物项商品的选中状态</span><br><span class="line">    async checkCartItem(item) &#123;</span><br><span class="line">      const isChecked &#x3D; item.isChecked &#x3D;&#x3D;&#x3D; 1 ? 0 : 1</span><br><span class="line">      &#x2F;&#x2F; 分发</span><br><span class="line">      this.$store</span><br><span class="line">        .dispatch(&#39;checkCartItem1&#39;, &#123; skuId: item.skuId, isChecked &#125;)</span><br><span class="line">        .then(value &#x3D;&gt; &#123;</span><br><span class="line">          &#x2F;&#x2F; 成功了，重新获取购物车的数据</span><br><span class="line">          this.getShopCartList()</span><br><span class="line">        &#125;),</span><br><span class="line">        error &#x3D;&gt; &#123;</span><br><span class="line">          &#x2F;&#x2F; 失败了</span><br><span class="line">          alert(error.message)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; 切换全选&#x2F;全不选择操作</span><br><span class="line">    async checkCartItems(e) &#123;</span><br><span class="line">      &#x2F;&#x2F; 获取当前复选框的选中状态</span><br><span class="line">      const isChecked &#x3D; e.target.checked * 1</span><br><span class="line">      &#x2F;&#x2F; const promises &#x3D; []</span><br><span class="line">      &#x2F;&#x2F; 遍历购物车中所有的购物项,统一修改选中状态</span><br><span class="line">      &#x2F;&#x2F; this.shopList.forEach((item) &#x3D;&gt; &#123;</span><br><span class="line">      &#x2F;&#x2F;   &#x2F;&#x2F; 分发action</span><br><span class="line">      &#x2F;&#x2F;   const promise &#x3D; this.$store.dispatch(&#39;checkCartItem1&#39;, &#123;</span><br><span class="line">      &#x2F;&#x2F;     skuId: item.skuId,</span><br><span class="line">      &#x2F;&#x2F;     isChecked,</span><br><span class="line">      &#x2F;&#x2F;   &#125;)</span><br><span class="line">      &#x2F;&#x2F;   &#x2F;&#x2F; 放在promises数组中</span><br><span class="line">      &#x2F;&#x2F;   promises.push(promise)</span><br><span class="line">      &#x2F;&#x2F; &#125;)</span><br><span class="line">      &#x2F;&#x2F; 使用reduce</span><br><span class="line">      &#x2F;&#x2F; const promises &#x3D; this.shopList.reduce((pre, item) &#x3D;&gt; &#123;</span><br><span class="line">      &#x2F;&#x2F;   const promise &#x3D; this.$store.dispatch(&#39;checkCartItem1&#39;, &#123;</span><br><span class="line">      &#x2F;&#x2F;     skuId: item.skuId,</span><br><span class="line">      &#x2F;&#x2F;     isChecked,</span><br><span class="line">      &#x2F;&#x2F;   &#125;)</span><br><span class="line">      &#x2F;&#x2F;   pre.push(promise)</span><br><span class="line">      &#x2F;&#x2F;   return pre</span><br><span class="line">      &#x2F;&#x2F; &#125;, [])</span><br><span class="line">      &#x2F;&#x2F; 使用map</span><br><span class="line">      const promises &#x3D; this.shopList.map(item &#x3D;&gt; &#123;</span><br><span class="line">        return this.$store.dispatch(&#39;checkCartItem1&#39;, &#123;</span><br><span class="line">          skuId: item.skuId,</span><br><span class="line">          isChecked</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">      &#x2F;&#x2F; 统一处理</span><br><span class="line">      try &#123;</span><br><span class="line">        await Promise.all(promises)</span><br><span class="line">        &#x2F;&#x2F; 成功了,重新获取数据</span><br><span class="line">        this.getShopCartList()</span><br><span class="line">      &#125; catch (error) &#123;</span><br><span class="line">        alert(error.message)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; 修改商品购物项的数量</span><br><span class="line">    async changeCount(item, changeNum) &#123;</span><br><span class="line">      &#x2F;&#x2F; 获取skuId</span><br><span class="line">      const &#123; skuId &#125; &#x3D; item</span><br><span class="line">      &#x2F;&#x2F; 判断当前商品的数量和传入进来的修改的数量相加,要大于0</span><br><span class="line">      if (item.skuNum + changeNum &gt; 0) &#123;</span><br><span class="line">        &#x2F;&#x2F; 分发action</span><br><span class="line">        const errorMsg &#x3D; await this.$store.dispatch(&#39;addToCart2&#39;, &#123;</span><br><span class="line">          skuId,</span><br><span class="line">          skuNum: changeNum</span><br><span class="line">        &#125;)</span><br><span class="line">        if (!errorMsg) &#123;</span><br><span class="line">          &#x2F;&#x2F; 成功了</span><br><span class="line">          this.getShopCartList()</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          &#x2F;&#x2F; 失败了</span><br><span class="line">          alert(errorMsg)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    changeCount2(item, changeNum) &#123;</span><br><span class="line">      &#x2F;&#x2F; 获取skuId</span><br><span class="line">      const &#123; skuId &#125; &#x3D; item</span><br><span class="line">      &#x2F;&#x2F; 判断当前商品的数量和传入进来的修改的数量相加,要大于0</span><br><span class="line">      if (item.skuNum + changeNum &gt; 0) &#123;</span><br><span class="line">        &#x2F;&#x2F; 分发action</span><br><span class="line">        this.$store.dispatch(&#39;addToCart3&#39;, &#123;</span><br><span class="line">          skuId,</span><br><span class="line">          skuNum: changeNum</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F; end</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<p>shopcart.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入api</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  reqAddToCart,</span><br><span class="line">  reqShopCartList,</span><br><span class="line">  reqDeleteCartItem,</span><br><span class="line">  reqCheckCartItem</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    shopList: [] <span class="comment">// 购物车中的商品信息按钮</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    <span class="comment">// 直接修改 shopList 数据</span></span><br><span class="line">    RECEIVE_SHOP_LIST(state, shopList) &#123;</span><br><span class="line">      state.shopList = shopList</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    <span class="comment">// 添加购物车操作</span></span><br><span class="line">    <span class="keyword">async</span> addToCart1(&#123; commit &#125;, &#123; skuId, skuNum, callback &#125;) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqAddToCart(skuId, skuNum, callback)</span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        callback(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        callback(result.message || <span class="string">&#x27;添加失败&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">async</span> addToCart2(&#123; commit &#125;, &#123; skuId, skuNum &#125;) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqAddToCart(skuId, skuNum)</span><br><span class="line">      <span class="keyword">return</span> result.code === <span class="number">200</span> ? <span class="string">&#x27;&#x27;</span> : result.message || <span class="string">&#x27;添加失败&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">async</span> addToCart3(&#123; commit, dispatch &#125;, &#123; skuId, skuNum &#125;) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqAddToCart(skuId, skuNum)</span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="comment">// 成功了</span></span><br><span class="line">        dispatch(<span class="string">&#x27;getShopList&#x27;</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 失败了</span></span><br><span class="line">        alert(result.message)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 获取购物车中的商品信息对象</span></span><br><span class="line">    <span class="keyword">async</span> getShopList(&#123; commit &#125;) &#123;</span><br><span class="line">      <span class="comment">// 调用 api 接口，发送异步请求</span></span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqShopCartList()</span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="comment">// 更新数据</span></span><br><span class="line">        commit(<span class="string">&#x27;RECEIVE_SHOP_LIST&#x27;</span>, result.data)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 删除购物车的商品信息对象</span></span><br><span class="line">    <span class="keyword">async</span> deleteCartItem1(&#123; commit &#125;, skuId) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqDeleteCartItem(skuId)</span><br><span class="line">      <span class="keyword">return</span> result.code === <span class="number">200</span> ? <span class="string">&#x27;&#x27;</span> : result.message || <span class="string">&#x27;删除失败&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">async</span> deleteCartItem2(&#123; commit &#125;, skuId) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqDeleteCartItem(skuId)</span><br><span class="line">      <span class="keyword">if</span> (result.code !== <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="comment">// 抛出一个异常</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(result.message)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 切换购物选中状态</span></span><br><span class="line">    <span class="keyword">async</span> checkCartItem1(&#123; commit &#125;, &#123; skuId, isChecked &#125;) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqCheckCartItem(skuId, isChecked)</span><br><span class="line">      <span class="comment">// 失败的问题</span></span><br><span class="line">      <span class="keyword">if</span> (result.code !== <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(result.message || <span class="string">&#x27;切换勾选状态失败&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// end</span></span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;</span><br><span class="line">    <span class="comment">// 总数量</span></span><br><span class="line">    totalCount(state) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.shopList.reduce(<span class="function">(<span class="params">pre, item</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> item.isChecked === <span class="number">1</span> ? pre + item.skuNum : pre</span><br><span class="line">      &#125;, <span class="number">0</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 总价格</span></span><br><span class="line">    totalPrice(state) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.shopList.reduce(<span class="function">(<span class="params">pre, item</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> item.isChecked === <span class="number">1</span> ? pre + item.skuNum * item.skuPrice : pre</span><br><span class="line">      &#125;, <span class="number">0</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 是否全部选中</span></span><br><span class="line">    isCheckAll(state) &#123;</span><br><span class="line">      <span class="comment">// 数组中要有数据,并且每个数据都是选中的,才有意义</span></span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        state.shopList.length &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">        state.shopList.every(<span class="function"><span class="params">item</span> =&gt;</span> item.isChecked === <span class="number">1</span>)</span><br><span class="line">      )</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 获取所有选中的购物项</span></span><br><span class="line">    selectedCartItems(state) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.shopList.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.isChecked === <span class="number">1</span>)</span><br><span class="line">      <span class="comment">// return state.shopList.reduce((pre, item) =&gt; &#123;</span></span><br><span class="line">      <span class="comment">//   判断是否选中</span></span><br><span class="line">      <span class="comment">//   if (item.isChecked === 1) &#123;</span></span><br><span class="line">      <span class="comment">//     pre.push(item)</span></span><br><span class="line">      <span class="comment">//   &#125;</span></span><br><span class="line">      <span class="comment">//   return pre</span></span><br><span class="line">      <span class="comment">// &#125;, [])</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2><span id="p75-deng-lu-zhu-ce-tui-chu-api-jie-kou">75 登陆/注册/退出 api接口</span><a href="#p75-deng-lu-zhu-ce-tui-chu-api-jie-kou" class="header-anchor">#</a></h2>
<p>api +</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 登录接口</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqLogin = <span class="function">(<span class="params">mobile, password</span>) =&gt;</span></span><br><span class="line">  ajax.post(<span class="string">`/user/passport/login`</span>, &#123; mobile, password &#125;)</span><br><span class="line"><span class="comment">// 注册接口</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqRegister = <span class="function"><span class="params">userInfo</span> =&gt;</span></span><br><span class="line">  ajax.post(<span class="string">`/user/passport/register`</span>, userInfo)</span><br><span class="line"><span class="comment">// 退出接口</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqLogout = <span class="function">() =&gt;</span> ajax.get(<span class="string">`/user/passport/logout`</span>)</span><br></pre></td></tr></table></figure>
<p>13700000000</p>
<p>111111</p>
<h1><span id="9-yue-27-ri-day-8">9月27日（day 8）</span><a href="#9-yue-27-ri-day-8" class="header-anchor">#</a></h1>
<h2><span id="p76-vuex-feng-zhuang">76 vuex封装</span><a href="#p76-vuex-feng-zhuang" class="header-anchor">#</a></h2>
<p>user.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用户模块</span></span><br><span class="line"><span class="comment">// 引入 生成uuid 工具</span></span><br><span class="line"><span class="keyword">import</span> &#123; getUUID &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/storageUtils&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; reqLogin, reqRegister, reqLogout &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    userInfo: &#123;&#125;, <span class="comment">// 用户信息对象</span></span><br><span class="line">    userTempId: getUUID() <span class="comment">// 用户的临时id</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    <span class="comment">// 直接更新用户信息数据（登陆成功）</span></span><br><span class="line">    RECEIVE_USER_INFO(state, userInfo) &#123;</span><br><span class="line">      state.userInfo = userInfo</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 清空用户信息数据（退出）</span></span><br><span class="line">    RESET_USER_INFO(state) &#123;</span><br><span class="line">      state.userInfo = &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    <span class="comment">// 登陆</span></span><br><span class="line">    <span class="keyword">async</span> login(&#123; commit &#125;, &#123; mobile, password &#125;) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqLogin(mobile, password)</span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> userInfo = result.data</span><br><span class="line">        commit(<span class="string">&#x27;RECEIVE_USER_INFO&#x27;</span>, userInfo)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;登陆失败了&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 注册</span></span><br><span class="line">    <span class="keyword">async</span> register(&#123; commit &#125;, userInfo) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqRegister(userInfo)</span><br><span class="line">      <span class="keyword">if</span> (result.code !== <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;注册失败了&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 退出</span></span><br><span class="line">    <span class="keyword">async</span> logout(&#123; commit &#125;) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqLogout()</span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="comment">// 清空用户信息数组（坑）</span></span><br><span class="line">        commit(<span class="string">&#x27;RESET_USER_INFO&#x27;</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;退出失败了&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2><span id="p77-zhu-ce-1">77 注册1</span><a href="#p77-zhu-ce-1" class="header-anchor">#</a></h2>
<p>Register 12行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span>手机号:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入你的手机号&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;mobile&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span>验证码:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入验证码&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;code&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">    <span class="attr">ref</span>=<span class="string">&quot;code&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">src</span>=<span class="string">&quot;/api/user/passport/code&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">alt</span>=<span class="string">&quot;code&quot;</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span>登录密码:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入你的登录密码&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;password&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span>确认密码:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入确认密码&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;password2&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;controls&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;m1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;isAgree&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>同意协议并注册《尚品汇用户协议》<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>第16行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span>验证码:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入验证码&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;code&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">    <span class="attr">ref</span>=<span class="string">&quot;code&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">src</span>=<span class="string">&quot;http://182.92.128.115/api/user/passport/code&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">alt</span>=<span class="string">&quot;code&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">click</span>=<span class="string">&quot;updateCode&quot;</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>第38行</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;btn&quot;</span>&gt;</span><br><span class="line">  &lt;a href=<span class="string">&quot;javascript:&quot;</span> @click=<span class="string">&quot;register&quot;</span>&gt;完成注册&lt;/a&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>点图形验证码可以切换</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;Register&#x27;</span>,</span><br><span class="line">  data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      mobile: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 手机号</span></span><br><span class="line">      password: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 收集密码</span></span><br><span class="line">      password2: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 确认密码</span></span><br><span class="line">      code: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 保存验证码信息</span></span><br><span class="line">      isAgree: <span class="literal">true</span> <span class="comment">// 控制是否同意</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods:&#123;</span><br><span class="line">    <span class="comment">// 更新图形验证码</span></span><br><span class="line">    updateCode()&#123;</span><br><span class="line">      <span class="built_in">this</span>.$refs.code.src = <span class="string">&#x27;/api/user/passport/code?time=&#x27;</span>+<span class="built_in">Date</span>.now()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 注册</span></span><br><span class="line">    register()&#123;</span><br><span class="line">      <span class="comment">// 获取所需要的验证码</span></span><br><span class="line">      <span class="keyword">const</span> &#123;mobile, password, password2, code, isAgree&#125; = <span class="built_in">this</span></span><br><span class="line">      <span class="comment">// 验证</span></span><br><span class="line">      <span class="keyword">if</span>(!isAgree)&#123;</span><br><span class="line">        alert(<span class="string">&#x27;请勾选是否同意&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span>(password!==password2)&#123;</span><br><span class="line">        alert(<span class="string">&quot;密码不一致&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;OK&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p78-biao-dan-yan-zheng">78 表单验证</span><a href="#p78-biao-dan-yan-zheng" class="header-anchor">#</a></h2>
<p>npm install vee-validate@2.2.13</p>
<p>utils 新建 validate.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> VeeValidate <span class="keyword">from</span> <span class="string">&#x27;vee-validate&#x27;</span></span><br><span class="line"><span class="keyword">import</span> zh_CN <span class="keyword">from</span> <span class="string">&#x27;vee-validate/dist/locale/zh_CN&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.use(VeeValidate)</span><br><span class="line"></span><br><span class="line">VeeValidate.Validator.localize(<span class="string">&#x27;zh_CN&#x27;</span>, &#123;</span><br><span class="line">  messages: zh_CN.messages,</span><br><span class="line">  attributes: &#123;</span><br><span class="line">    mobile: <span class="string">&#x27;手机号码&#x27;</span>,</span><br><span class="line">    code: <span class="string">&#x27;图形验证码&#x27;</span>,</span><br><span class="line">    password: <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">    password2: <span class="string">&#x27;确认密码&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">VeeValidate.Validator.extend(<span class="string">&#x27;phone&#x27;</span>, &#123;</span><br><span class="line">  getMessage: <span class="function"><span class="params">field</span> =&gt;</span> <span class="string">&#x27;清输入正确的&#x27;</span> + field,</span><br><span class="line">  validate: <span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="regexp">/^[1]\d&#123;10&#125;$/</span>.test(value)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">VeeValidate.Validator.extend(<span class="string">&#x27;code1&#x27;</span>, &#123;</span><br><span class="line">  getMessage: <span class="function"><span class="params">field</span> =&gt;</span> <span class="string">&#x27;请输入正确的&#x27;</span> + field,</span><br><span class="line">  <span class="comment">// 文本框输入的内容</span></span><br><span class="line">  validate: <span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="regexp">/^\d&#123;4&#125;$/</span>.test(value)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Register</p>
<p>引入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@/utils/validate&#x27;</span></span><br></pre></td></tr></table></figure>
<p>更新</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 注册 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;register&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">      注册新用户</span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;go&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span>我有账号，去</span><br><span class="line">        <span class="comment">&lt;!-- &lt;a href=&quot;login.html&quot; target=&quot;_blank&quot;&gt;登陆&lt;/a&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/login&quot;</span>&gt;</span>登陆<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>手机号:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">placeholder</span>=<span class="string">&quot;请输入你的手机号&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model</span>=<span class="string">&quot;mobile&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-validate</span>=<span class="string">&quot;&#x27;required|phone&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">&quot;mobile&quot;</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span>&#123;&#123; errors.first(&#x27;mobile&#x27;) &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>验证码:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">placeholder</span>=<span class="string">&quot;请输入验证码&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model</span>=<span class="string">&quot;code&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-validate</span>=<span class="string">&quot;&#x27;required|code1&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">&quot;code&quot;</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ref</span>=<span class="string">&quot;code&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">src</span>=<span class="string">&quot;/api/user/passport/code&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">alt</span>=<span class="string">&quot;code&quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">click</span>=<span class="string">&quot;updateCode&quot;</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span>&#123;&#123; errors.first(&#x27;code&#x27;) &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>登录密码:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">placeholder</span>=<span class="string">&quot;请输入你的登录密码&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model</span>=<span class="string">&quot;password&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-validate</span>=<span class="string">&quot;&#x27;required&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">&quot;password&quot;</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span>&#123;&#123; errors.first(&#x27;password&#x27;) &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>确认密码:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">placeholder</span>=<span class="string">&quot;请输入确认密码&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model</span>=<span class="string">&quot;password2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-validate</span>=<span class="string">&quot;&#x27;required&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">&quot;password2&quot;</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span>&#123;&#123; errors.first(&#x27;password2&#x27;) &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;controls&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;m1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;isAgree&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>同意协议并注册《尚品汇用户协议》<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;register&quot;</span>&gt;</span>完成注册<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p79-biao-dan-yan-zheng-2">79 表单验证2</span><a href="#p79-biao-dan-yan-zheng-2" class="header-anchor">#</a></h2>
<p>register 更新</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注册</span></span><br><span class="line">    <span class="keyword">async</span> register() &#123;</span><br><span class="line">      <span class="comment">// 获取所需要的验证码</span></span><br><span class="line">      <span class="keyword">const</span> &#123; mobile, password, password2, code, isAgree &#125; = <span class="built_in">this</span></span><br><span class="line">      <span class="comment">// 验证</span></span><br><span class="line">      <span class="keyword">if</span> (!isAgree) &#123;</span><br><span class="line">        alert(<span class="string">&#x27;请勾选是否同意&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (password !== password2) &#123;</span><br><span class="line">        alert(<span class="string">&#x27;密码不一致&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 表单的验证</span></span><br><span class="line">      <span class="comment">// -- 准备字段数组</span></span><br><span class="line">      <span class="keyword">const</span> names = [<span class="string">&#x27;mobile&#x27;</span>, <span class="string">&#x27;password&#x27;</span>, <span class="string">&#x27;code&#x27;</span>]</span><br><span class="line">      <span class="comment">// -- 仅当所有表单验证通过才是 true</span></span><br><span class="line">      <span class="keyword">const</span> success = <span class="keyword">await</span> <span class="built_in">this</span>.$validator.validateAll(names)</span><br><span class="line">      <span class="keyword">if</span> (success) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="comment">// 实现 注册</span></span><br><span class="line">          <span class="keyword">await</span> <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;register&#x27;</span>, &#123; mobile, password, code &#125;)</span><br><span class="line">          <span class="comment">// 路由跳转 -- 登录界面</span></span><br><span class="line">          <span class="built_in">this</span>.$router.replace(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          alert(error.message)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p80-deng-lu">80 登录</span><a href="#p80-deng-lu" class="header-anchor">#</a></h2>
<p>Login</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">  &lt;div class&#x3D;&quot;input-text clearFix&quot;&gt;</span><br><span class="line">    &lt;span class&#x3D;&quot;pwd&quot;&gt;&lt;&#x2F;span&gt;</span><br><span class="line">    &lt;input type&#x3D;&quot;text&quot; placeholder&#x3D;&quot;请输入密码&quot; v-model&#x3D;&quot;password&quot; &#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;setting clearFix&quot;&gt;</span><br><span class="line">    &lt;label class&#x3D;&quot;checkbox inline&quot;&gt;</span><br><span class="line">      &lt;input name&#x3D;&quot;m1&quot; type&#x3D;&quot;checkbox&quot; value&#x3D;&quot;2&quot; checked&#x3D;&quot;&quot; &#x2F;&gt;</span><br><span class="line">      自动登录</span><br><span class="line">    &lt;&#x2F;label&gt;</span><br><span class="line">    &lt;span class&#x3D;&quot;forget&quot;&gt;忘记密码？&lt;&#x2F;span&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;button class&#x3D;&quot;btn&quot; @click.prevent&#x3D;&quot;login&quot;&gt;登&amp;nbsp;&amp;nbsp;录&lt;&#x2F;button&gt;</span><br><span class="line">&lt;&#x2F;form&gt;</span><br></pre></td></tr></table></figure>
<p>script</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;Login&#x27;</span>,</span><br><span class="line">  data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      mobile: <span class="string">&#x27;13700000000&#x27;</span>,</span><br><span class="line">      password: <span class="string">&#x27;123456&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="comment">// 登录</span></span><br><span class="line">    <span class="keyword">async</span> login() &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; mobile, password &#125; = <span class="built_in">this</span></span><br><span class="line">      <span class="comment">// 简单的验证</span></span><br><span class="line">      <span class="keyword">if</span> (mobile === <span class="string">&#x27;&#x27;</span> || password === <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">        alert(<span class="string">&#x27;请输入手机号码或者密码&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 手机号码和密码都已经收到</span></span><br><span class="line">      <span class="comment">// 分发action</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">await</span> <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;login&#x27;</span>, &#123; mobile, password &#125;)</span><br><span class="line">        <span class="built_in">this</span>.$router.replace(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        alert(error)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p81-deng-lu-zhi-hou-xian-shi-yong-hu-ming">81 登录之后显示用户名</span><a href="#p81-deng-lu-zhi-hou-xian-shi-yong-hu-ming" class="header-anchor">#</a></h2>
<p>Header 7</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>商城欢迎您！<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">&quot;userInfo.name&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; userInfo.name &#125;&#125;<span class="tag">&lt;/<span class="name">span</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="symbol">&amp;nbsp;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span>&gt;</span>退出<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>请<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  ...mapState(&#123;</span><br><span class="line">    userInfo: <span class="function"><span class="params">state</span> =&gt;</span> state.user.userInfo</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>保存登录信息 user.js 刷新不会掉线</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">state: &#123;</span><br><span class="line">  <span class="comment">// 1 将token放在缓存中</span></span><br><span class="line">  userInfo: <span class="built_in">JSON</span>.parse(<span class="built_in">localStorage</span>.getItem(<span class="string">&#x27;user_info_key&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>),</span><br><span class="line">    </span><br><span class="line">actions: &#123;</span><br><span class="line">  <span class="comment">// 登陆</span></span><br><span class="line">  <span class="keyword">async</span> login(&#123; commit &#125;, &#123; mobile, password &#125;) &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> reqLogin(mobile, password)</span><br><span class="line">    <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> userInfo = result.data</span><br><span class="line">      commit(<span class="string">&#x27;RECEIVE_USER_INFO&#x27;</span>, userInfo)</span><br><span class="line">      <span class="comment">// 2 缓存</span></span><br><span class="line">      <span class="built_in">localStorage</span>.setItem(<span class="string">&#x27;user_info_key&#x27;</span>, <span class="built_in">JSON</span>.stringify(userInfo))</span><br></pre></td></tr></table></figure>
<h2><span id="p82-token">82 token</span><a href="#p82-token" class="header-anchor">#</a></h2>
<p>user.js +</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// state</span></span><br><span class="line">userInfo: <span class="built_in">JSON</span>.parse(<span class="built_in">localStorage</span>.getItem(<span class="string">&#x27;user_info_key&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>ajax 请求拦截器</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取 token</span></span><br><span class="line"><span class="keyword">const</span> token = store.state.user.userInfo.token</span><br><span class="line"><span class="comment">// 判断 token 是否存在</span></span><br><span class="line"><span class="keyword">if</span> (token) &#123;</span><br><span class="line">  config.headers[<span class="string">&#x27;token&#x27;</span>] = token</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p83-deng-chu">83 登出</span><a href="#p83-deng-chu" class="header-anchor">#</a></h2>
<p>Header 13</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;logout&quot;</span>&gt;</span>退出<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>methods</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">logout()&#123;</span><br><span class="line">  this.$store.dispatch(&#39;logout&#39;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>store/modules/user.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 清空用户信息数据（退出）</span></span><br><span class="line">RESET_USER_INFO(state) &#123;</span><br><span class="line">  state.userInfo = &#123;&#125;</span><br><span class="line">  <span class="comment">// 清空浏览器中缓存信息中的用户信息</span></span><br><span class="line">  <span class="built_in">localStorage</span>.removeItem(<span class="string">&#x27;user_info_key&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1><span id="9-yue-28-ri-day-9">9月28日（day 9）</span><a href="#9-yue-28-ri-day-9" class="header-anchor">#</a></h1>
<h2><span id="p84-da-jian-lu-you-he-tiao-zhuan">84 搭建路由和跳转</span><a href="#p84-da-jian-lu-you-he-tiao-zhuan" class="header-anchor">#</a></h2>
<p>拷贝四个路由组件到 pages</p>
<p><code>@\router\routes.js</code> 引入四路由组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Trade <span class="keyword">from</span> <span class="string">&#x27;@/pages/Trade&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Pay <span class="keyword">from</span> <span class="string">&#x27;@/pages/Pay&#x27;</span></span><br><span class="line"><span class="keyword">import</span> PaySuccess <span class="keyword">from</span> <span class="string">&#x27;@/pages/PaySuccess&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Center <span class="keyword">from</span> <span class="string">&#x27;@/pages/Center&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Trade</span></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/trade&#x27;</span>,</span><br><span class="line">    component: Trade</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// Pay</span></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/pay&#x27;</span>,</span><br><span class="line">    component: Pay</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// PaySuccess</span></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/paysuccess&#x27;</span>,</span><br><span class="line">    component: PaySuccess</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// Center</span></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/center&#x27;</span>,</span><br><span class="line">    component: Center</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>Header 修改跳转链接（路由链接）  我的订单 21行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;typeList&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/center&quot;</span>&gt;</span>我的订单<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/shopcart&quot;</span>&gt;</span>我的购物车<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p85-wo-de-ding-dan-xie-jie-kou">85 我的订单写接口</span><a href="#p85-wo-de-ding-dan-xie-jie-kou" class="header-anchor">#</a></h2>
<p>写接口 <code>api/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取订单的详情信息数据</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqTradeInfo = <span class="function">() =&gt;</span> ajax.get(<span class="string">&#x27;/order/auth/trade&#x27;</span>)</span><br><span class="line"><span class="comment">// 获取订单的列表信息数据</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqOrderList = <span class="function">(<span class="params">page, limit</span>) =&gt;</span></span><br><span class="line">  ajax.get(<span class="string">`/order/auth/<span class="subst">$&#123;page&#125;</span>/<span class="subst">$&#123;limit&#125;</span>`</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 提交订单</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqSubmitOrder = <span class="function">(<span class="params">tradeNo, orderInfo</span>) =&gt;</span></span><br><span class="line">  ajax(&#123;</span><br><span class="line">    method: <span class="string">&#x27;POST&#x27;</span>, <span class="comment">// 请求方式</span></span><br><span class="line">    url: <span class="string">&#x27;/order/auth/submitOrder&#x27;</span>, <span class="comment">// 请求地址</span></span><br><span class="line">    params: &#123; tradeNo &#125;, <span class="comment">// 参数</span></span><br><span class="line">    data: orderInfo <span class="comment">// 数据参数</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取订单支付信息</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqPayInfo = <span class="function"><span class="params">orderId</span> =&gt;</span></span><br><span class="line">  ajax.get(<span class="string">`/payment/weixin/createNative/<span class="subst">$&#123;orderId&#125;</span>`</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询支付状态</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> reqPayStatus = <span class="function"><span class="params">orderId</span> =&gt;</span></span><br><span class="line">  ajax.get(<span class="string">`/payment/weixin/queryPayStatus/<span class="subst">$&#123;orderId&#125;</span>`</span>)</span><br></pre></td></tr></table></figure>
<h2><span id="p86-er-ji-lu-you">86 二级路由</span><a href="#p86-er-ji-lu-you" class="header-anchor">#</a></h2>
<p>结构和样式一起带走，图片</p>
<p>pages/Center 新建 MyOrder 和 GroupBuy 新建 index.vue</p>
<p>MyOrder</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;order-content&quot;&gt;</span><br><span class="line">...</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#39;MyOrder&#39;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot; scoped&gt;</span><br><span class="line">&#x2F;&#x2F;订单部分</span><br><span class="line">.order-content &#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
<p>GroupBuy</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;111111&lt;&#x2F;h2&gt;</span><br><span class="line">    &lt;h2&gt;111111&lt;&#x2F;h2&gt;</span><br><span class="line">    &lt;h2&gt;111111&lt;&#x2F;h2&gt;</span><br><span class="line">    &lt;h2&gt;111111&lt;&#x2F;h2&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#39;GroupBuy&#39;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot; scoped&gt;&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
<p>Center 58行 剪切（加路由视图） ，以及下面样式 以及图片 到 MyOrder</p>
<p>第9行加路由链接</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dd&gt;</span><br><span class="line">  &lt;router-link to&#x3D;&quot;&#x2F;center&#x2F;myorder&quot;&gt;我的订单&lt;&#x2F;router-link&gt;</span><br><span class="line">&lt;&#x2F;dd&gt;</span><br><span class="line">&lt;dd&gt;</span><br><span class="line">  &lt;router-link to&#x3D;&quot;&#x2F;center&#x2F;groupbuy&quot;&gt;团购订单&lt;&#x2F;router-link&gt;</span><br></pre></td></tr></table></figure>
<p>路由中引入并创建二级路由</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Center <span class="keyword">from</span> <span class="string">&#x27;@/pages/Center&#x27;</span></span><br><span class="line"><span class="keyword">import</span> MyOrder <span class="keyword">from</span> <span class="string">&#x27;@/pages/Center/MyOrder&#x27;</span></span><br><span class="line"><span class="keyword">import</span> GroupBuy <span class="keyword">from</span> <span class="string">&#x27;@/pages/Center/GroupBuy&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Center</span></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/center&#x27;</span>,</span><br><span class="line">    component: Center,</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">&#x27;/center/myorder&#x27;</span>,</span><br><span class="line">        component: MyOrder</span><br><span class="line">      &#125;,&#123;</span><br><span class="line">        path: <span class="string">&#x27;/center/groupbuy&#x27;</span>,</span><br><span class="line">        component: GroupBuy</span><br><span class="line">      &#125;,&#123;</span><br><span class="line">        path: <span class="string">&#x27;/center&#x27;</span>,</span><br><span class="line">        redirect: <span class="string">&#x27;/center/myorder&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<h2><span id="p87-xian-shi-ding-dan">87 显示订单</span><a href="#p87-xian-shi-ding-dan" class="header-anchor">#</a></h2>
<p>main.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入api接口并绑定在Vue原型对象上</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> API <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br><span class="line">Vue.prototype.$API = API</span><br></pre></td></tr></table></figure>
<p>MyOrder</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;MyOrder&#x27;</span>,</span><br><span class="line">  data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      pageNo: <span class="number">1</span>, <span class="comment">// 默认第一页</span></span><br><span class="line">      limit: <span class="number">10</span>, <span class="comment">// 每页的条数</span></span><br><span class="line">      total: <span class="number">0</span>, <span class="comment">// 总条数数据</span></span><br><span class="line">      orders: [] <span class="comment">// 存储当前每页的订单信息数据</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    <span class="built_in">this</span>.getMyOrderList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="comment">// 获取订单信息数据列表</span></span><br><span class="line">    <span class="keyword">async</span> getMyOrderList() &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="built_in">this</span>.$API.reqOrderList(<span class="built_in">this</span>.pageNo, <span class="built_in">this</span>.limit)</span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; records, total &#125; = result.data</span><br><span class="line">        <span class="comment">// 更新数据</span></span><br><span class="line">        <span class="built_in">this</span>.total = total</span><br><span class="line">        <span class="built_in">this</span>.orders = records</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>20行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;orders&quot;&gt;</span><br><span class="line">  &lt;!-- 这是订单 --&gt;</span><br><span class="line">  &lt;table class&#x3D;&quot;order-item&quot; v-for&#x3D;&quot;(item, index) in orders&quot; :key&#x3D;&quot;item.id&quot;&gt;</span><br><span class="line">    &lt;thead&gt;</span><br><span class="line">      &lt;tr&gt;</span><br><span class="line">        &lt;th colspan&#x3D;&quot;5&quot;&gt;</span><br><span class="line">          &lt;span class&#x3D;&quot;ordertitle&quot;</span><br><span class="line">            &gt;&#123;&#123; item.createTime &#125;&#125; 订单编号：&#123;&#123; item.outTradeNo &#125;&#125;</span><br><span class="line">            &lt;span class&#x3D;&quot;pull-right delete&quot;</span><br><span class="line">              &gt;&lt;img src&#x3D;&quot;.&#x2F;images&#x2F;delete.png&quot;&#x2F;&gt;&lt;&#x2F;span</span><br><span class="line">          &gt;&lt;&#x2F;span&gt;</span><br><span class="line">        &lt;&#x2F;th&gt;</span><br><span class="line">      &lt;&#x2F;tr&gt;</span><br><span class="line">    &lt;&#x2F;thead&gt;</span><br><span class="line">    &lt;tbody&gt;</span><br><span class="line">      &lt;tr v-for&#x3D;&quot;(goods, index) in item.orderDetailList&quot; :key&#x3D;&quot;goods.id&quot;&gt;</span><br><span class="line">        &lt;td width&#x3D;&quot;60%&quot;&gt;</span><br><span class="line">          &lt;div class&#x3D;&quot;typographic&quot;&gt;</span><br><span class="line">            &lt;img :src&#x3D;&quot;goods.imgUrl&quot; &#x2F;&gt;</span><br><span class="line">            &lt;a href&#x3D;&quot;#&quot; class&#x3D;&quot;block-text&quot;&gt;&#123;&#123; goods.skuName &#125;&#125;&lt;&#x2F;a&gt;</span><br><span class="line">            &lt;span&gt;x&#123;&#123; goods.skuNum &#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">            &lt;a href&#x3D;&quot;#&quot; class&#x3D;&quot;service&quot;&gt;售后申请&lt;&#x2F;a&gt;</span><br><span class="line">          &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;&#x2F;td&gt;</span><br><span class="line">        &lt;template v-if&#x3D;&quot;index &#x3D;&#x3D;&#x3D; 0&quot;&gt;</span><br><span class="line">          &lt;td</span><br><span class="line">            :rowspan&#x3D;&quot;item.orderDetailList.length&quot;</span><br><span class="line">            width&#x3D;&quot;8%&quot;</span><br><span class="line">            class&#x3D;&quot;center&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            &#123;&#123; item.consignee &#125;&#125;</span><br><span class="line">          &lt;&#x2F;td&gt;</span><br><span class="line">          &lt;td</span><br><span class="line">            :rowspan&#x3D;&quot;item.orderDetailList.length&quot;</span><br><span class="line">            width&#x3D;&quot;13%&quot;</span><br><span class="line">            class&#x3D;&quot;center&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            &lt;ul class&#x3D;&quot;unstyled&quot;&gt;</span><br><span class="line">              &lt;li&gt;总金额¥&#123;&#123; item.totalAmount &#125;&#125;&lt;&#x2F;li&gt;</span><br><span class="line">              &lt;li&gt;</span><br><span class="line">                &#123;&#123; item.paymentWay &#x3D;&#x3D;&#x3D; &#39;ONLINE&#39; ? &#39;在线支付&#39; : &#39;货到付款&#39; &#125;&#125;</span><br><span class="line">              &lt;&#x2F;li&gt;</span><br><span class="line">            &lt;&#x2F;ul&gt;</span><br><span class="line">          &lt;&#x2F;td&gt;</span><br><span class="line">          &lt;td</span><br><span class="line">            :rowspan&#x3D;&quot;item.orderDetailList.length&quot;</span><br><span class="line">            width&#x3D;&quot;8%&quot;</span><br><span class="line">            class&#x3D;&quot;center&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            &lt;a href&#x3D;&quot;#&quot; class&#x3D;&quot;btn&quot;</span><br><span class="line">              &gt;&#123;&#123; item.orderStatus &#x3D;&#x3D;&#x3D; &#39;UNPAID&#39; ? &#39;未支付&#39; : &#39;已完成&#39; &#125;&#125;</span><br><span class="line">            &lt;&#x2F;a&gt;</span><br><span class="line">          &lt;&#x2F;td&gt;</span><br><span class="line">          &lt;td</span><br><span class="line">            :rowspan&#x3D;&quot;item.orderDetailList.length&quot;</span><br><span class="line">            width&#x3D;&quot;13%&quot;</span><br><span class="line">            class&#x3D;&quot;center&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            &lt;ul class&#x3D;&quot;unstyled&quot;&gt;</span><br><span class="line">              &lt;li&gt;</span><br><span class="line">                &lt;a href&#x3D;&quot;mycomment.html&quot; target&#x3D;&quot;_blank&quot;&gt;评价|晒单&lt;&#x2F;a&gt;</span><br><span class="line">              &lt;&#x2F;li&gt;</span><br><span class="line">            &lt;&#x2F;ul&gt;</span><br><span class="line">          &lt;&#x2F;td&gt;</span><br><span class="line">        &lt;&#x2F;template&gt;</span><br><span class="line">      &lt;&#x2F;tr&gt;</span><br><span class="line">    &lt;&#x2F;tbody&gt;</span><br><span class="line">  &lt;&#x2F;table&gt;</span><br></pre></td></tr></table></figure>
<p>样式修改</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.typographic &#123;</span><br><span class="line">  img &#123;</span><br><span class="line">    float: left;</span><br><span class="line">    margin-right: 10px;</span><br><span class="line">    width: 100px;</span><br><span class="line">    height: 100px;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p88-fen-ye">88 分页</span><a href="#p88-fen-ye" class="header-anchor">#</a></h2>
<p>MyOrder 89行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 分页 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Pagination</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:pageConfig</span>=<span class="string">&quot;&#123;</span></span></span><br><span class="line"><span class="tag"><span class="string">    total,</span></span></span><br><span class="line"><span class="tag"><span class="string">    pageNo,</span></span></span><br><span class="line"><span class="tag"><span class="string">    pageSize: limit,</span></span></span><br><span class="line"><span class="tag"><span class="string">    showPageNo: 5</span></span></span><br><span class="line"><span class="tag"><span class="string">  &#125;&quot;</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">changeCurrentPage</span>=<span class="string">&quot;getMyOrderList&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure>
<p>修改 117行</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取订单信息数据列表</span></span><br><span class="line"><span class="keyword">async</span> getMyOrderList(pageNo = <span class="number">1</span>) &#123;</span><br><span class="line">  <span class="built_in">this</span>.pageNo = pageNo</span><br></pre></td></tr></table></figure>
<p>去掉后面的样式 <code>.choose-order</code></p>
<h2><span id="p89-jie-suan-zhi-qian">89 结算之前</span><a href="#p89-jie-suan-zhi-qian" class="header-anchor">#</a></h2>
<p>ShopCart 105行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 结算 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/trade&quot;</span> <span class="attr">class</span>=<span class="string">&quot;sum-btn&quot;</span>&gt;</span>结算<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>store新建order.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reqPayInfo, reqTradeInfo &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    tradeInfo: &#123;&#125;, <span class="comment">// 订单信息数据对象</span></span><br><span class="line">    payInfo: &#123;&#125; <span class="comment">// 支付信息数据对象</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    <span class="comment">// 直接更新订单数据</span></span><br><span class="line">    RECEIVE_TRADE_INFO(state, &#123; tradeInfo &#125;) &#123;</span><br><span class="line">      state.tradeInfo = tradeInfo</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 直接更新支付数据</span></span><br><span class="line">    RECEIVE_PAY_INFO(state, &#123; payInfo &#125;) &#123;</span><br><span class="line">      state.payInfo = payInfo</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    <span class="comment">// 获取订单的数据</span></span><br><span class="line">    <span class="keyword">async</span> getTradeInfo(&#123; commit &#125;) &#123;</span><br><span class="line">      <span class="comment">// 调用接口获取数据</span></span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqTradeInfo()</span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> tradeInfo = result.data</span><br><span class="line">        commit(<span class="string">&#x27;RECEIVE_TRADE_INFO&#x27;</span>, &#123; tradeInfo &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 抛错处理</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(result.message || <span class="string">&#x27;获取订单失败了&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 获取支付的数据</span></span><br><span class="line">    <span class="keyword">async</span> getPayInfo(&#123; commit &#125;, orderId) &#123;</span><br><span class="line">      <span class="comment">// 调用接口获取数据</span></span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> reqPayInfo(orderId)</span><br><span class="line">      <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> payInfo = result.data</span><br><span class="line">        commit(<span class="string">&#x27;RECEIVE_PAY_INFO&#x27;</span>, &#123; payInfo &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 抛错处理</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(result.message || <span class="string">&#x27;获取支付信息失败了&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>在index中引入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> home <span class="keyword">from</span> <span class="string">&#x27;./home&#x27;</span></span><br><span class="line"><span class="keyword">import</span> search <span class="keyword">from</span> <span class="string">&#x27;./search&#x27;</span></span><br><span class="line"><span class="keyword">import</span> detail <span class="keyword">from</span> <span class="string">&#x27;./detail&#x27;</span></span><br><span class="line"><span class="keyword">import</span> shopcart <span class="keyword">from</span> <span class="string">&#x27;./shopcart&#x27;</span></span><br><span class="line"><span class="keyword">import</span> user <span class="keyword">from</span> <span class="string">&#x27;./user&#x27;</span></span><br><span class="line"><span class="keyword">import</span> order <span class="keyword">from</span> <span class="string">&#x27;./order&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  home,</span><br><span class="line">  search,</span><br><span class="line">  detail,</span><br><span class="line">  shopcart,</span><br><span class="line">  user,</span><br><span class="line">  order</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2><span id="p90-bian-li-shou-jian-ren-xiang-guan-xin-xi">90 遍历收件人相关信息</span><a href="#p90-bian-li-shou-jian-ren-xiang-guan-xin-xi" class="header-anchor">#</a></h2>
<p>Trade 6</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">&quot;address clearFix&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-for</span>=<span class="string">&quot;(addr, index) in tradeInfo.userAddressList&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:key</span>=<span class="string">&quot;addr.id&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;username&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:class</span>=<span class="string">&quot;&#123; selected: selectedAddress === addr &#125;&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span>&#123;&#123; addr.consignee &#125;&#125;<span class="tag">&lt;/<span class="name">span</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">p</span> @<span class="attr">click</span>=<span class="string">&quot;selectedAddress = addr&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;s1&quot;</span>&gt;</span>&#123;&#123; addr.userAddress &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;s2&quot;</span>&gt;</span>&#123;&#123; addr.phoneNum &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;s3&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;addr.isDefault === &#x27;1&#x27;&quot;</span>&gt;</span>默认地址<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;Trade&#x27;</span>,</span><br><span class="line">  data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      selectedAddress: &#123;&#125; <span class="comment">// 用来储存选中是收件人的用户信息地址对象</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    <span class="comment">// 获取当前订单信息</span></span><br><span class="line">    <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;getTradeInfo&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    ...mapState(&#123;</span><br><span class="line">      tradeInfo: <span class="function"><span class="params">state</span> =&gt;</span> state.order.tradeInfo</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    <span class="comment">// 监视的是收件人信息数组</span></span><br><span class="line">    <span class="string">&#x27;tradeInfo.userAddressList&#x27;</span>: <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 从数组中查找isDefault属性为1的对象</span></span><br><span class="line">      <span class="keyword">const</span> defaultAddr = value.find(<span class="function"><span class="params">addr</span> =&gt;</span> addr.isDefault === <span class="string">&#x27;1&#x27;</span>)</span><br><span class="line">      <span class="comment">// 判断这个对象是否存在</span></span><br><span class="line">      <span class="keyword">if</span> (defaultAddr) &#123;</span><br><span class="line">        <span class="comment">// 保存起来</span></span><br><span class="line">        <span class="built_in">this</span>.selectedAddress = defaultAddr</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p91-bian-li-shang-pin-lie-biao">91 遍历商品列表</span><a href="#p91-bian-li-shang-pin-lie-biao" class="header-anchor">#</a></h2>
<p>Trade 37</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;detail&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h5</span>&gt;</span>商品清单<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;list clearFix&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-for</span>=<span class="string">&quot;(goods, index) in tradeInfo.detailArrayList&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:key</span>=<span class="string">&quot;goods.skuId&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;goods.imgUrl&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">              &#123;&#123; goods.skuName &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h4</span>&gt;</span>7天无理由退货<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h3</span>&gt;</span>￥&#123;&#123; goods.orderPrice &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span>X&#123;&#123; goods.skuNum &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span>有货<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bbs&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h5</span>&gt;</span>买家留言：<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">textarea</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">&quot;建议留言前先与商家沟通确认&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;remarks-cont&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;line&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bill&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h5</span>&gt;</span>发票信息：<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>普通发票（电子） 个人 明细<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h5</span>&gt;</span>使用优惠/抵用<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;money clearFix&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">b</span></span></span><br><span class="line"><span class="tag">            &gt;</span><span class="tag">&lt;<span class="name">i</span>&gt;</span>&#123;&#123; tradeInfo.totalNum &#125;&#125;<span class="tag">&lt;/<span class="name">i</span></span></span><br><span class="line"><span class="tag">            &gt;</span>件商品，总商品金额<span class="tag">&lt;/<span class="name">b</span></span></span><br><span class="line"><span class="tag">          &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>¥&#123;&#123; tradeInfo.totalAmount &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">b</span>&gt;</span>返现：<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>0.00<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">b</span>&gt;</span>运费：<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>0.00<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;trade&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;price&quot;</span>&gt;</span></span><br><span class="line">        应付金额: <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; tradeInfo.totalAmount &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;receiveInfo&quot;</span>&gt;</span></span><br><span class="line">        寄送至:</span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; selectedAddress.userAddress &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        收货人：<span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; selectedAddress.consignee &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; selectedAddress.phoneNum &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sub clearFix&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- &lt;router-link class=&quot;subBtn&quot; to=&quot;/pay&quot;&gt;提交订单&lt;/router-link&gt; --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;subBtn&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;pay&quot;</span>&gt;</span>提交订单<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Trade 263</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.list &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">  background-color: #feedef;</span><br><span class="line">  margin: <span class="number">5</span>px <span class="number">0</span>;</span><br><span class="line">  li &#123;</span><br><span class="line">    line-height: <span class="number">30</span>px;</span><br><span class="line">    img&#123;</span><br><span class="line">      width: <span class="number">100</span>px;</span><br><span class="line">      height: <span class="number">100</span>px;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p92-lu-you-props-chuan-can">92 路由props传参</span><a href="#p92-lu-you-props-chuan-can" class="header-anchor">#</a></h2>
<p>Trade</p>
<p>更新 pay</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  <span class="comment">// 支付</span></span><br><span class="line">  pay() &#123;</span><br><span class="line">    <span class="comment">// 获取订单编号，商品列表数据</span></span><br><span class="line">    <span class="keyword">const</span> &#123; tradeNo, detailArrayList &#125; = <span class="built_in">this</span>.tradeInfo</span><br><span class="line">    <span class="comment">// 收件人名字，电话，地址</span></span><br><span class="line">    <span class="keyword">const</span> &#123; consignee, phoneNum, userAddress &#125; = <span class="built_in">this</span>.selectedAddress</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> orderInfo = &#123;</span><br><span class="line">      consignee, <span class="comment">// 收件人</span></span><br><span class="line">      consigneeTel: phoneNum, <span class="comment">// 收件人的电话</span></span><br><span class="line">      deliveryAddress: userAddress, <span class="comment">// 收件人的地址</span></span><br><span class="line">      paymentWay: <span class="string">&#x27;ONLINE&#x27;</span>, <span class="comment">// 支付方式</span></span><br><span class="line">      orderComment: <span class="built_in">this</span>.orderComment, <span class="comment">// 订单的备注</span></span><br><span class="line">      orderDetailList: detailArrayList <span class="comment">// 商品列表数据</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">this</span>.$API</span><br><span class="line">      .reqSubmitOrder(tradeNo, orderInfo)</span><br><span class="line">      .then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 接口调用成功，路由跳转，并传参，query的方式传参</span></span><br><span class="line">        <span class="comment">// 订单提交成功后，返回的是订单的id</span></span><br><span class="line">        <span class="keyword">const</span> orderId = result.data</span><br><span class="line">        <span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&#x27;/pay&#x27;</span>, <span class="attr">query</span>: &#123; orderId &#125; &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        alert(error.mess)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>新增 <code>orderComment</code> 数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    selectedAddress: &#123;&#125;, <span class="comment">// 用来储存选中是收件人的用户信息地址对象</span></span><br><span class="line">    orderComment: <span class="string">&#x27;这是文本&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>66行 新增 v-model</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;bbs&quot;</span>&gt;</span><br><span class="line">  &lt;h5&gt;买家留言：&lt;/h5&gt;</span><br><span class="line">  &lt;textarea</span><br><span class="line">    placeholder=<span class="string">&quot;建议留言前先与商家沟通确认&quot;</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;remarks-cont&quot;</span></span><br><span class="line">    v-model=<span class="string">&quot;orderComment&quot;</span></span><br><span class="line">  &gt;&lt;/textarea&gt;</span><br></pre></td></tr></table></figure>
<p>Pay 更新</p>
<p>11行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;paymark&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;fl&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span>请您在提交订单<span class="tag">&lt;<span class="name">em</span> <span class="attr">class</span>=<span class="string">&quot;orange time&quot;</span>&gt;</span>4小时<span class="tag">&lt;/<span class="name">em</span></span></span><br><span class="line">    &gt;之内完成支付，超时订单会自动取消。订单号：&lt;em&gt;&#123;&#123;payInfo.orderId&#125;&#125;&lt;&lt;/em&gt;&lt;/span</span><br><span class="line">  &gt;</span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;fr&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;<span class="name">em</span> <span class="attr">class</span>=<span class="string">&quot;lead&quot;</span>&gt;</span>应付金额：&#123;&#123;payInfo.totalFee&#125;&#125;<span class="tag">&lt;/<span class="name">em</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;Pay&#x27;</span>,</span><br><span class="line">  props: [<span class="string">&#x27;orderId&#x27;</span>],</span><br><span class="line">  computed: &#123;</span><br><span class="line">    ...mapState(&#123;</span><br><span class="line">      payInfo: <span class="function"><span class="params">state</span> =&gt;</span> state.order.payInfo</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    <span class="comment">// 分发action</span></span><br><span class="line">    <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;getPayInfo&#x27;</span>, <span class="built_in">this</span>.orderId)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>routes.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Pay</span></span><br><span class="line">&#123;</span><br><span class="line">  path: <span class="string">&#x27;/pay&#x27;</span>,</span><br><span class="line">  component: Pay,</span><br><span class="line">  <span class="comment">// 通过props的方式来进行参数的传递,让组件和$route之间的关闭不那么的密切(解耦)</span></span><br><span class="line">  props:<span class="function">(<span class="params">route</span>)=&gt;</span>(&#123;<span class="attr">orderId</span>:route.query.orderId&#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h1><span id="9-yue-29-ri-day-10">9月29日（day 10）</span><a href="#9-yue-29-ri-day-10" class="header-anchor">#</a></h1>
<p>需求</p>
<ul>
<li>
<p>只有在登录的情况下才能访问 /trade /pay /center及其子目录</p>
</li>
<li>
<p>只有在没登录的情况下才能进入登录界面，如果登录了自动进入首页</p>
</li>
<li>
<p>只有 skuId /skuNum / skuInfo 数据都存在的情况下才能进入 /addsuccess</p>
</li>
<li>
<p>只有从 /shopcart 才能进入 /trade</p>
</li>
<li>
<p>只有从 /trade 才能进入 /pay</p>
</li>
<li>
<p>只有从 /pay 才能进入 /paysucces</p>
</li>
<li>
<p>如果访问的是 /center 但是没有登录，先跳转到登录界面 登录成功自动进入 /center</p>
</li>
<li>
<p>如果退出，直接进入首页</p>
</li>
</ul>
<p>路由守卫（导航守卫）</p>
<ul>
<li>
<p>全局导航守卫（在实例化路由器对象的时候进行设置）</p>
<p>全局前置导航守卫 beforeEach △</p>
<p>全局解析导航守卫 beforeResolve</p>
<p>全局后置导航守卫 afterEach</p>
</li>
<li>
<p>路由独享守卫（在注册路由组件对象中进行设置）</p>
<p>boforeEnter △</p>
</li>
<li>
<p>组件内的守卫（在组件对象中进行设置）</p>
<p>beforeRouterEnter △</p>
<p>beforeRouteUpdate</p>
<p>beforeRouteLeave</p>
</li>
</ul>
<p>参数</p>
<ul>
<li>to — 目标路由对象</li>
<li>from — 离开前的对象</li>
<li>next — 函数</li>
</ul>
<h2><span id="p93-zhi-you-zai-deng-lu-de-qing-kuang-xia-cai-neng-jin-ru">93 只有在登录的情况下才能进入…</span><a href="#p93-zhi-you-zai-deng-lu-de-qing-kuang-xia-cai-neng-jin-ru" class="header-anchor">#</a></h2>
<p>router/index.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明使用路由器插件</span></span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实例化路由对象</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  mode: <span class="string">&#x27;history&#x27;</span>, <span class="comment">// 地址栏中不带#</span></span><br><span class="line">  routes,</span><br><span class="line">  <span class="comment">// 解决路由器跳转到滚动的位置的问题</span></span><br><span class="line">  scrollBehavior(to, <span class="keyword">from</span>, savedPosition) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      x: <span class="number">0</span>,</span><br><span class="line">      y: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局前置路由守卫</span></span><br><span class="line"><span class="comment">// router.beforeEach((to, from, next) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//   访问的地址不是登录页面，让其跳转到登录页面</span></span><br><span class="line"><span class="comment">//   if (to.path !== &#x27;/login&#x27;) &#123;</span></span><br><span class="line"><span class="comment">//     next(&#x27;/login&#x27;)</span></span><br><span class="line"><span class="comment">//   &#125; else &#123;</span></span><br><span class="line"><span class="comment">//     next()</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局前置路由守卫</span></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 只有在登录的情况下才能访问 /trade /pay / center //</span></span><br><span class="line">  <span class="comment">// 获取目标路由中的访问地址</span></span><br><span class="line">  <span class="keyword">const</span> targetPath = to.path</span><br><span class="line">  <span class="comment">// 准备一个需要检测的路由的数组</span></span><br><span class="line">  <span class="keyword">const</span> checkPath = [<span class="string">&#x27;/trade&#x27;</span>, <span class="string">&#x27;/pay&#x27;</span>, <span class="string">&#x27;/center&#x27;</span>]</span><br><span class="line">  <span class="comment">// if (checkPath.indexOf(targetPath) !== -1) &#123;</span></span><br><span class="line">  <span class="keyword">if</span> (checkPath.find(<span class="function"><span class="params">path</span> =&gt;</span> targetPath.indexOf(path) !== <span class="number">-1</span>)) &#123;</span><br><span class="line">    <span class="comment">// 判断是否已经登录</span></span><br><span class="line">    <span class="keyword">if</span> (store.state.user.userInfo.token) &#123;</span><br><span class="line">      <span class="comment">// 放行</span></span><br><span class="line">      next()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 跳转到登录界面</span></span><br><span class="line">      next(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 正常的放行</span></span><br><span class="line">    next()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实例化路由器对象,并暴露出去</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2><span id="p94-zhi-you-zai-mei-deng-lu-de-qing-kuang-xia-cai-neng-jin-ru-deng-lu-jie-mian-ru-guo-deng-lu-liao-zi-dong-jin-ru-shou-ye">94 只有在没登录的情况下才能进入登录界面，如果登录了自动进入首页</span><a href="#p94-zhi-you-zai-mei-deng-lu-de-qing-kuang-xia-cai-neng-jin-ru-deng-lu-jie-mian-ru-guo-deng-lu-liao-zi-dong-jin-ru-shou-ye" class="header-anchor">#</a></h2>
<p>router/routes.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入vuex</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    component: Login,</span><br><span class="line">    <span class="comment">// 参数数据</span></span><br><span class="line">    meta: &#123;</span><br><span class="line">      isHideFooter: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ? 只有在没有登录的情况下才能进入登录页面，已经登录，就进入首页</span></span><br><span class="line">    <span class="comment">// 路由独享守卫</span></span><br><span class="line">    beforeEnter: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 判断有没有登录</span></span><br><span class="line">      <span class="keyword">if</span> (store.state.user.userInfo.name) &#123;</span><br><span class="line">        next(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        next()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>或者在 Login 中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// 组件内的路由前置守卫</span></span><br><span class="line">  beforeRouteEnter(to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    next(<span class="function"><span class="params">vm</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 先判断是否登录</span></span><br><span class="line">      <span class="comment">// ! 不能用 this</span></span><br><span class="line">      <span class="keyword">if</span> (vm.$store.state.user.userInfo.name) &#123;</span><br><span class="line">        next(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        next()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2><span id="p95-zhi-you-shu-ju-du-cun-zai-de-qing-kuang-xia-cai-neng-jin-ru-addsuccess">95 只有数据都存在的情况下才能进入 /addsuccess</span><a href="#p95-zhi-you-shu-ju-du-cun-zai-de-qing-kuang-xia-cai-neng-jin-ru-addsuccess" class="header-anchor">#</a></h2>
<p>只有 skuId /skuNum / skuInfo 数据都存在的情况下才能进入 /addsuccess</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AddCartSuccess -- query</span></span><br><span class="line">&#123;</span><br><span class="line">  path: <span class="string">&#x27;/addcartsuccess&#x27;</span>,</span><br><span class="line">  component: AddCartSuccess,</span><br><span class="line">  <span class="comment">// ? 只有参数存在的情况下才能进入这个页面</span></span><br><span class="line">  beforeEnter: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 先获取参数数据</span></span><br><span class="line">    <span class="keyword">const</span> &#123; skuId, skuNum &#125; = to.query</span><br><span class="line">    <span class="keyword">const</span> skuInfo = <span class="built_in">localStorage</span>.getItem(<span class="string">&#x27;SKU_INFO&#x27;</span>)</span><br><span class="line">    <span class="comment">// 判断这三个数据是否存在</span></span><br><span class="line">    <span class="keyword">if</span> (skuId &amp;&amp; skuNum &amp;&amp; skuInfo) &#123;</span><br><span class="line">      next()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 从哪里来，哪里去</span></span><br><span class="line">      next(<span class="keyword">from</span>.path)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2><span id="p96-zhi-you-cong-cai-neng-jin-ru">96 只有从…才能进入…</span><a href="#p96-zhi-you-cong-cai-neng-jin-ru" class="header-anchor">#</a></h2>
<ul>
<li>只有从 /shopcart 才能进入 /trade</li>
<li>只有从 /trade 才能进入 /pay</li>
<li>只有从 /pay 才能进入 /paysucces</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Pay</span></span><br><span class="line">&#123;</span><br><span class="line">  path: <span class="string">&#x27;/pay&#x27;</span>,</span><br><span class="line">  component: Pay,</span><br><span class="line">  <span class="comment">// 通过props的方式来进行参数的传递,让组件和$route之间的关闭不那么的密切(解耦)</span></span><br><span class="line">  props: <span class="function"><span class="params">route</span> =&gt;</span> (&#123; <span class="attr">orderId</span>: route.query.orderId &#125;),</span><br><span class="line">  <span class="comment">// ? 只有从/trade才能进入/pay</span></span><br><span class="line">  beforeEnter: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">from</span>.path === <span class="string">&#x27;/trade&#x27;</span>) &#123;</span><br><span class="line">      next()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      next(<span class="string">&#x27;/trade&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// PaySuccess</span></span><br><span class="line">&#123;</span><br><span class="line">  path: <span class="string">&#x27;/paysuccess&#x27;</span>,</span><br><span class="line">  component: PaySuccess,</span><br><span class="line">  <span class="comment">// ? 只有从 /pay 才能进入 / PaySuccess</span></span><br><span class="line">  beforeEnter: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">from</span>.path === <span class="string">&#x27;/pay&#x27;</span>) &#123;</span><br><span class="line">      next()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      next(<span class="string">&#x27;/pay&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2><span id="p97-ru-guo-fang-wen-de-shi-center-dan-shi-mei-you-deng-lu">97 如果访问的是 /center 但是没有登录…</span><a href="#p97-ru-guo-fang-wen-de-shi-center-dan-shi-mei-you-deng-lu" class="header-anchor">#</a></h2>
<p>如果访问的是 /center 但是没有登录，先跳转到登录界面 登录成功自动进入 /center</p>
<p>router / index.js 60</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (store.state.user.userInfo.token) &#123;</span><br><span class="line">  <span class="comment">// 放行</span></span><br><span class="line">  next()</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// 跳转到登录界面</span></span><br><span class="line">  <span class="comment">// ? 如果我访问的是 /center ，但是没有登录，先跳转到登录界面</span></span><br><span class="line">  <span class="comment">// ? 登录成功之后自动进入到 /center 中</span></span><br><span class="line">  next(<span class="string">&#x27;/login?redirect=&#x27;</span> + targetPath)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Login 72</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 手机号码和密码都已经收到</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="comment">// 分发action</span></span><br><span class="line">  <span class="keyword">await</span> <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;login&#x27;</span>, &#123; mobile, password &#125;)</span><br><span class="line">  <span class="comment">// 从query中获取储存的参数</span></span><br><span class="line">  <span class="keyword">const</span> &#123; redirect &#125; = <span class="built_in">this</span>.$route.query</span><br><span class="line">  <span class="comment">// 如果query中的redirect中有数据（有目标路径），那么就像这个路径中跳转</span></span><br><span class="line">  <span class="comment">// 如果没有，则直接进入到首页</span></span><br><span class="line">  <span class="built_in">this</span>.$router.replace(redirect || <span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">  alert(error.message)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Header</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">logout() &#123;</span><br><span class="line">  <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;logout&#x27;</span>)</span><br><span class="line">  <span class="comment">// 如果退出，则直接进入首页</span></span><br><span class="line">  <span class="built_in">this</span>.$router.replace(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p98-an-zhuang-element-ui-bing-yin-ru">98 安装element-ui并引入</span><a href="#p98-an-zhuang-element-ui-bing-yin-ru" class="header-anchor">#</a></h2>
<p>支付需使用组件库</p>
<p>安装 按需引入</p>
<p>npm i element-ui</p>
<p>npm i babel-plugin-component -D</p>
<p><code>babel.config.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  presets: [</span><br><span class="line">    <span class="string">&#x27;@vue/cli-plugin-babel/preset&#x27;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;plugins&quot;</span>: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&quot;component&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;libraryName&quot;</span>: <span class="string">&quot;element-ui&quot;</span>,</span><br><span class="line">        <span class="string">&quot;styleLibraryName&quot;</span>: <span class="string">&quot;theme-chalk&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>utils / elementui.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入Vue</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">// 引入element-ui中的部分组件</span></span><br><span class="line"><span class="keyword">import</span> &#123;  MessageBox, Message &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="comment">// 把相关的组件绑定到Vue的原想上, 组件的实例对象可以直接使用</span></span><br><span class="line">Vue.prototype.$msgbox = MessageBox <span class="comment">// 弹框</span></span><br><span class="line">Vue.prototype.$alert = MessageBox.alert</span><br><span class="line">Vue.prototype.$message = Message</span><br></pre></td></tr></table></figure>
<p>main.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@/utils/elementui&#x27;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p99-zhi-fu-yu-er-wei-ma-gong-ju">99 支付与二维码工具</span><a href="#p99-zhi-fu-yu-er-wei-ma-gong-ju" class="header-anchor">#</a></h2>
<p>安装二维码工具（产生二维码）</p>
<p>npm i qrcode</p>
<p>Pay</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入QRCode</span></span><br><span class="line"><span class="keyword">import</span> QRCode <span class="keyword">from</span> <span class="string">&#x27;qrcode&#x27;</span></span><br></pre></td></tr></table></figure>
<p>76</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &lt;router-link class=&quot;btn&quot; to=&quot;/paysuccess&quot;&gt;立即支付&lt;/router-link&gt; --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;pay&quot;</span>&gt;</span>立即支付<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">pay() &#123;</span><br><span class="line">  QRCode.toDataURL(<span class="built_in">this</span>.payInfo.codeUrl)</span><br><span class="line">    .then(<span class="function"><span class="params">imgURL</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 这个对话框返回 Promise 对象</span></span><br><span class="line">      <span class="built_in">this</span>.$alert(<span class="string">`&lt;img src=&quot;<span class="subst">$&#123;imgURL&#125;</span>&quot;&gt;`</span>, <span class="string">&#x27;请使用微信扫码字符&#x27;</span>, &#123;</span><br><span class="line">        dangerouslyUseHTMLString: <span class="literal">true</span>, <span class="comment">// 是否第一个参数用html解析</span></span><br><span class="line">        showClose: <span class="literal">false</span>, <span class="comment">// 是否显示关闭小图标（右上角）</span></span><br><span class="line">        showCancelButton: <span class="literal">true</span>, <span class="comment">// 是否显示取消按钮</span></span><br><span class="line">        showConfirmButton: <span class="literal">true</span>, <span class="comment">// 是否显示确定按钮</span></span><br><span class="line">        cancelButtonText: <span class="string">&#x27;支付中遇到问题&#x27;</span>, <span class="comment">// 取消按钮的文本</span></span><br><span class="line">        confirmButtonText: <span class="string">&#x27;我已成功支付&#x27;</span>, <span class="comment">// 确定按钮的文本</span></span><br><span class="line">        center: <span class="literal">true</span> <span class="comment">// 是否居中显示</span></span><br><span class="line">      &#125;)</span><br><span class="line">        .then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// 清理定时器</span></span><br><span class="line">          <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.timeId)</span><br><span class="line">          <span class="comment">// 关闭当前对话框</span></span><br><span class="line">          <span class="built_in">this</span>.$msgbox.close()</span><br><span class="line">          <span class="comment">// 提示信息</span></span><br><span class="line">          <span class="built_in">this</span>.$message.success(<span class="string">&#x27;恭喜支付成功&#x27;</span>)</span><br><span class="line">          <span class="comment">// 路由跳转</span></span><br><span class="line">          <span class="built_in">this</span>.$router.push(<span class="string">&#x27;/paysuccess&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.$message.warning(<span class="string">&#x27;请迅速联系破晓小姐姐退钱！&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="built_in">this</span>.timeId = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.$API</span><br><span class="line">          .reqPayStatus(<span class="built_in">this</span>.orderId)</span><br><span class="line">          .then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// 是否支付成功</span></span><br><span class="line">            <span class="keyword">if</span> (result.code === <span class="number">200</span>) &#123;</span><br><span class="line">              <span class="comment">// 清理定时器</span></span><br><span class="line">              <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.timeId)</span><br><span class="line">              <span class="comment">// 关闭当前对话框</span></span><br><span class="line">              <span class="built_in">this</span>.$msgbox.close()</span><br><span class="line">              <span class="comment">// 提示信息</span></span><br><span class="line">              <span class="built_in">this</span>.$message.success(<span class="string">&#x27;恭喜支付成功&#x27;</span>)</span><br><span class="line">              <span class="comment">// 路由跳转</span></span><br><span class="line">              <span class="built_in">this</span>.$router.push(<span class="string">&#x27;/paysuccess&#x27;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">          .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// 清理定时器</span></span><br><span class="line">            <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.timeId)</span><br><span class="line">            <span class="built_in">this</span>.$message.error(error.message || <span class="string">&#x27;支付失败&#x27;</span>)</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;, <span class="number">2000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.$message.error(<span class="string">&#x27;支付二维码生成失败&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;, </span><br><span class="line"><span class="comment">// end</span></span><br></pre></td></tr></table></figure>
<h2><span id="p100-lie-biao-guo-du-xiao-guo">100 列表过渡效果</span><a href="#p100-lie-biao-guo-du-xiao-guo" class="header-anchor">#</a></h2>
<p>TypeNav 7</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">&quot;move&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 这里加了一个点击事件（事件委托） --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sort&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;toSearch&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;isShowFirst&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>less</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.sort</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">45px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">210px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">461px</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fafafa</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">999</span>;</span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-class">.move-enter-active</span>,</span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-class">.move-leave-active</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.5s</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-class">.move-enter</span>,</span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-class">.move-leave-to</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p101-tu-pian-lan-jia-zai">101 图片懒加载</span><a href="#p101-tu-pian-lan-jia-zai" class="header-anchor">#</a></h2>
<p>安装 懒加载 插件</p>
<p><code>npm install vue-lazyload --save-dev</code></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/rachelch/p/9802227.html">https://www.cnblogs.com/rachelch/p/9802227.html</a></p>
<p>找个 图片放 assets/ljz.gif 目录</p>
<p>main.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入懒加载的插件</span></span><br><span class="line"><span class="keyword">import</span> VueLazyload <span class="keyword">from</span> <span class="string">&#x27;vue-lazyload&#x27;</span></span><br><span class="line"><span class="keyword">import</span> loading <span class="keyword">from</span> <span class="string">&#x27;./assets/ljz.gif&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.use(VueLazyload, &#123;</span><br><span class="line">  loading</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Search 78</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;`/detail/$&#123;goods.id&#125;`&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">v-lazy</span>=<span class="string">&quot;goods.defaultImg&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p102-lu-you-lan-jia-zai">102  路由懒加载</span><a href="#p102-lu-you-lan-jia-zai" class="header-anchor">#</a></h2>
<p>router / routes.js</p>
<pre class="line-numbers language-language-js"><code class="language-language-js">// 路由的懒加载
// import GroupBuy from '@/pages/Center/GroupBuy'
const GroupBuy =() => import('@/pages/Center/GroupBuy')
`
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/182001/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#ddd; font-size:20px; font-weight: 888; ">182001</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/182001/" class="post-title-link" itemprop="url">Kindle 使用教程</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-02 16:22:59" itemprop="dateCreated datePublished" datetime="2021-02-02T16:22:59+08:00">2021-02-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-04 18:04:46" itemprop="dateModified" datetime="2021-02-04T18:04:46+08:00">2021-02-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/1820%EF%BC%9A%E5%90%84%E7%A7%8D%E7%94%B5%E5%AD%90%E8%AE%BE%E5%A4%87/" itemprop="url" rel="index"><span itemprop="name">1820：各种电子设备</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>345</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Kindle 是亚马逊出的一款电子书阅读器，使用的是电子墨水屏幕。电子墨水屏幕只有在像素变化的时候才耗电。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/182001/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/220820/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#ddd; font-size:20px; font-weight: 888; ">220820</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/220820/" class="post-title-link" itemprop="url">CSS Hack</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-02 16:12:53 / 修改时间：16:13:56" itemprop="dateCreated datePublished" datetime="2021-02-02T16:12:53+08:00">2021-02-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2208%EF%BC%9ACSS/" itemprop="url" rel="index"><span itemprop="name">2208：CSS</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>214</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>CSS hack 是什么<br>
由于不同的厂商的浏览器，或者是同一个浏览器不同的版本（IE），对 css 的解析和认识不完全一样,可能会导致不同浏览器显示的效果不相同,那么我们需要针对某个浏览器，去写不同的样式，让代码能够兼容所有的浏览器。</p>
<p>为什么要用 CSS hack</p>
<p>第一种理解：让我们 CSS 的代码兼容不同的浏览器</p>
<p>第二种理解：我们可以为不同的浏览器定制不同的样式</p>
<p>表现方式：</p>
<ul>
<li>CSS 属性前缀法</li>
<li>选择器前缀法</li>
<li><strong>IE 条件注释法</strong>: iE10、11 不再使用条件注释。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/220802/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#ddd; font-size:20px; font-weight: 888; ">220802</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/220802/" class="post-title-link" itemprop="url">个人封装函数库</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-02 16:08:13 / 修改时间：16:11:41" itemprop="dateCreated datePublished" datetime="2021-02-02T16:08:13+08:00">2021-02-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2208%EF%BC%9AJS%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">2208：JS库</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.4k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>基本格式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+(<span class="function"><span class="keyword">function</span> (<span class="params">w</span>) </span>&#123;</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">   * xxxx方法：xxxx</span></span><br><span class="line"><span class="comment">   * @pargm &#123;x:[type],y:[type]&#125; （参数</span></span><br><span class="line"><span class="comment">   * @return &#123;object&#125; x:xxx y:xxx （返回值</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">&#125;)(windows);</span><br></pre></td></tr></table></figure>
<ol>
<li><code>;</code>是为了防止其他库末尾不加分号，引起错误</li>
<li><code>+</code>等一元运算符代表把匿名函数括起来</li>
<li>在匿名函数中定义一个对象，把所有方法</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 作者：xxx</span></span><br><span class="line"><span class="comment"> * 时间：2020-7-18</span></span><br><span class="line"><span class="comment"> * 内容：个人封装函数库</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *   ;是为了防止其他库末尾不加分号 引起错误</span></span><br><span class="line"><span class="comment"> *   + - ~ ！ 等一元运算符 代表把匿名函数括起来</span></span><br><span class="line"><span class="comment"> *   在匿名函数中定义一个对象，把所有的方法放到这个对象上，方便识别和管理</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"></span><br><span class="line">+(<span class="function"><span class="keyword">function</span> (<span class="params">w</span>) </span>&#123;</span><br><span class="line">  w.my = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">   *   getDocScroll方法：获取系统滚动条的位置</span></span><br><span class="line"><span class="comment">   *   @param &#123;&#125; 无</span></span><br><span class="line"><span class="comment">   *   @return &#123;Object&#125; x：横向滚动条  y：竖向滚动条</span></span><br><span class="line"><span class="comment">   * */</span></span><br><span class="line">  w.my.getDocScroll = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> h = <span class="built_in">document</span>.documentElement;</span><br><span class="line">    <span class="keyword">var</span> b = <span class="built_in">document</span>.body;</span><br><span class="line">    <span class="keyword">var</span> y = self.pageYOffset || h.scrollTop || b.scrollTop;</span><br><span class="line">    <span class="keyword">var</span> x = self.pageXOffset || h.scrollLeft || b.scrollLeft;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      x: x,</span><br><span class="line">      y: y,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">   *   getDocScroll方法：获取系统滚动条的位置</span></span><br><span class="line"><span class="comment">   *   @param &#123;x:[number],y:[number]&#125;  x：横向滚动条  y：竖向滚动条</span></span><br><span class="line"><span class="comment">   *   @return &#123;&#125; 无</span></span><br><span class="line"><span class="comment">   * */</span></span><br><span class="line">  w.my.setDocScroll = <span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">arguments</span>.length === <span class="number">1</span> &amp;&amp; <span class="keyword">typeof</span> x === <span class="string">&quot;number&quot;</span>) &#123;</span><br><span class="line">      <span class="built_in">window</span>.scrollTo(x, <span class="number">0</span>);</span><br><span class="line">      <span class="built_in">document</span>.documentElement.scrollLeft = x;</span><br><span class="line">      <span class="built_in">document</span>.body.scrollLeft = x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">      <span class="built_in">arguments</span>.length === <span class="number">2</span> &amp;&amp;</span><br><span class="line">      <span class="keyword">typeof</span> x === <span class="string">&quot;number&quot;</span> &amp;&amp;</span><br><span class="line">      <span class="keyword">typeof</span> y === <span class="string">&quot;number&quot;</span></span><br><span class="line">    ) &#123;</span><br><span class="line">      <span class="built_in">window</span>.scrollTo(x, y);</span><br><span class="line">      <span class="built_in">document</span>.documentElement.scrollLeft = x;</span><br><span class="line">      <span class="built_in">document</span>.documentElement.scrollTop = y;</span><br><span class="line">      <span class="built_in">document</span>.body.scrollLeft = x;</span><br><span class="line">      <span class="built_in">document</span>.body.scrollTop = y;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  w.my.log = <span class="function"><span class="keyword">function</span> (<span class="params">con</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(con);</span><br><span class="line">    <span class="built_in">console</span>.dir(con);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)(<span class="built_in">window</span>);</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/181808/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#ddd; font-size:20px; font-weight: 888; ">181808</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/181808/" class="post-title-link" itemprop="url">Hexo 和 Typora 本地图片路径兼容问题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-02 15:20:37 / 修改时间：16:03:47" itemprop="dateCreated datePublished" datetime="2021-02-02T15:20:37+08:00">2021-02-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/1818%EF%BC%9AHexo/" itemprop="url" rel="index"><span itemprop="name">1818：Hexo</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>179</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>目标是使 <code>Typora </code>和 <code>Hexo</code> 能正常的渲染本地图片<br>
假设图片目录是 <code>yourBlog/source/images/test.jpg</code><br>
在<code>_post/test.md</code> 使用该图片就需要加 <code>typora-root-url: ..</code><br>
在<code>_post/文件夹/test.md</code> 使用该图片就需要加 <code>typora-root-url: ..\..</code><br>
以此类推<br>
图片的路径则为 <code>/images/test.jpg</code></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/220210/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#ddd; font-size:20px; font-weight: 888; ">220210</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/220210/" class="post-title-link" itemprop="url">JavaScript 函数执行过程</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-02 15:11:29 / 修改时间：15:58:41" itemprop="dateCreated datePublished" datetime="2021-02-02T15:11:29+08:00">2021-02-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2202%EF%BC%9AES%E9%AB%98%E7%BA%A7/" itemprop="url" rel="index"><span itemprop="name">2202：ES高级</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.5k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2><span id="p1-zhan-nei-cun-he-dui-nei-cun">1、栈内存和堆内存</span><a href="#p1-zhan-nei-cun-he-dui-nei-cun" class="header-anchor">#</a></h2>
<p>内存根据程序运行时候的逻辑分为<strong>栈内存</strong>和<strong>堆内存</strong>。在 JS 中，并没有严格意义区分。大部分的数据都保存在堆内存中，但是在某些场景，仍需要用栈（有时候也叫堆栈）的数据结构的思路进行处理，如<strong>执行上下文</strong>。</p>
<table>
<thead>
<tr>
<th>栈内存</th>
<th>堆内存</th>
</tr>
</thead>
<tbody>
<tr>
<td>栈结构</td>
<td>链表结构</td>
</tr>
<tr>
<td>占内存小，速度快</td>
<td>占内存大，速度慢</td>
</tr>
<tr>
<td>自动分配，自动回收</td>
<td>自己申请，手动释放</td>
</tr>
</tbody>
</table>
<h2><span id="p2-zhi-xing-shang-xia-wen">2、执行上下文</span><a href="#p2-zhi-xing-shang-xia-wen" class="header-anchor">#</a></h2>
<p>JS 引擎并不是逐行解析代码，而是逐段去分析和执行，当开始解析一段代码时，会先进行<strong>预处理</strong>（声明提升和创建作用域链）。生成一个<strong>执行上下文</strong>。</p>
<p><strong>执行上下文</strong>（执行环境）分为两种<strong>变量对象</strong>（VO）：</p>
<ul>
<li><code>Global</code> | <code>Window</code>，默认的<strong>全局执行环境</strong>。</li>
<li><code>Function</code>，调用函数时会进入的<strong>函数执行环境</strong>。</li>
</ul>
<p>代码执行时会开辟一个栈空间来说明程序的执行顺序，这个执行上下文堆栈称为<strong>执行栈</strong>。开始执行时先将全局执行环境压入栈底（压栈），执行到函数时会创建对应的函数执行环境，并将函数执行环境压入栈底。在函数执行完成后将函数执行环境弹出并销毁。直到所有代码执行完成销毁全局执行环境。</p>
<p>可以把执行栈认为是一个存储函数调用的<strong>栈结构</strong>，遵循先进后出的原则。</p>
<p><img src="/images/2020/%E6%89%A7%E8%A1%8C%E6%A0%88.gif" alt="执行栈"></p>
<p>当我们使用递归的时候，因为栈可存放的函数是有<strong>限制</strong>的，一旦存放了过多的函数且没有得到释放的话，就会出现爆栈的问题。</p>
<h2><span id="p3-bian-liang-dui-xiang">3、变量对象</span><a href="#p3-bian-liang-dui-xiang" class="header-anchor">#</a></h2>
<p><strong>全局变量对象</strong> windows</p>
<p><strong>函数变量对象</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> b = <span class="number">2</span>;</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">	<span class="keyword">var</span> d = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">	b = <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line">foo(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 模拟上面代码的变量对象</span></span><br><span class="line"><span class="keyword">var</span> VO = &#123;</span><br><span class="line">    argument:&#123;</span><br><span class="line">        <span class="number">0</span>:<span class="number">1</span>,</span><br><span class="line">        <span class="number">1</span>:<span class="number">2</span>,</span><br><span class="line">        length:<span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">    a:<span class="number">1</span>,</span><br><span class="line">    c:<span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>)</span>&#123;&#125;,</span><br><span class="line">    b:<span class="literal">undefined</span>,</span><br><span class="line">	d:<span class="literal">undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="p4-zuo-yong-yu">4、作用域</span><a href="#p4-zuo-yong-yu" class="header-anchor">#</a></h2>
<p><strong>作用域 scope</strong> 是变量在程序中可以访问的有效访问，也被称为变量的可见性。作用域在进入全局执行环境或者函数执行环境时就已经确定好了。在<code>ES5</code>中，作用域分为两种：</p>
<ul>
<li>全局作用域</li>
<li>函数作用域</li>
</ul>
<p><strong>同一个函数的多次调用都会生成不同的执行环境，每次调用都会生成。</strong></p>
<p><strong>全局变量</strong> 是定义在全局作用域中的变量，一般在函外部定义。在程序的所有地方都可以使用和操作。</p>
<p><strong>局部变量</strong> 是在函数内部定义的，在函数执行域中。只能在自己的作用域中起作用，只能在函数内部使用。外部无法使用和操作局部变量。</p>
<h2><span id="p5-zuo-yong-yu-lian">5、作用域链</span><a href="#p5-zuo-yong-yu-lian" class="header-anchor">#</a></h2>
<p><strong>作用域链</strong> 是用来查找变量的这样一系列的过程。一个函数在定义时会生成一个属性<code>[[scope]]</code>，这个属性存储的是函数定义时作用域的层级关系。作用域链是函数执行时创建的，是当前函数作用域链 -&gt; <code>[[scope]]</code>属性作用域组成的。函数当前执行的作用域是作用域链的顶端，全局作用域在作用域链的最后。执行环境销毁时，作用域链也会销毁。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 全局作用域</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// test -&gt; 全局作用域</span></span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// test2 -&gt; test -&gt; 全局作用域</span></span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">100</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(a); <span class="comment">//100</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a); <span class="comment">//10</span></span><br><span class="line">  &#125;</span><br><span class="line">  f1();</span><br><span class="line">  f2();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f();</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br></pre></td></tr></table></figure>
<p>当执行 f1 时，创建函数 f1 的执行环境，并将该对象置于链表开头，然后将函数 f 的调用对象放在第二位，最后是全局对象，作用域链的链表的结构是 f1-&gt;f-&gt;window 。从链表的开头寻找变量 a，即 f1 函数内部找变量 a，找到了，结果是 20。同样，执行 f2 时，作用域链的链表的结构是 f2-&gt;f-&gt;window 。从链表的开头寻找变量 a，即 f2 函数内部找变量 a，找不到，于是从 f 内部找变量 a，找到了，结果是 10。最后在最外层打印出变量 a，直接从变量 a 的作用域即全局作用域内寻找，结果为 1。</p>
<h2><span id="p6-nei-cun-zhong-de-bian-liang-cun-chu">6、内存中的变量存储</span><a href="#p6-nei-cun-zhong-de-bian-liang-cun-chu" class="header-anchor">#</a></h2>
<p>变量如果是基本数据类型，会在直接在栈内存开辟一段存储空间标识符。然后将基本数据类型的值也存储在栈内存中和标识符对应起来。要求变量名不能重名，重名就会覆盖。</p>
<p>如果是引用数据类型，值储存在堆内存中，存储引用类型的时候标识符是储存在栈内存中的。（JS 不允许直接访问堆内存中的数据，只能通过引用访问，差不多就是在变量对象中存储一个指向对象的句柄，可以理解成是一个地址，要访问这个对象，就要通过这个引用句柄来访问）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">var</span> b = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> c = b;</span><br><span class="line">c[<span class="number">0</span>] = <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// [1000,2,3]</span></span><br></pre></td></tr></table></figure>
<p>程序一开始执行，进入全局环境，首先会创建全局环境并且压栈（执行栈），全局代码执行的时候依赖的是全局环境中的东西。全局变量如果是基本类型，那么这个值直接存在栈当中，如果这个变量的值是引用类型，那么引用类型会在堆内存中开辟自己的空间专门存储（数据本身）。然后里面的这块空间的地址存在栈当中对应的变量。</p>
<p>当函数执行碰到函数调用，函数执行时也要有自己的环境去依赖。函数执行也是创建自己的函数环境进行压栈（函数执行环境一定压在全局执行环境的上面）。局部变量，是在函数环境当中存在的，只有函数执行，局部变量才会出现，函数执行完成之后，函数环境要弹出栈（销毁归还内存），局部变量也就不存在了。</p>
<p>当函数调用完成之后，会继续执行全局代码，一直到所有的全局代码执行完成，代表程序执行结束，程序执行结束的时候，全局环境最后出栈（销毁）。</p>
<h2><span id="p7-sheng-ming-ti-sheng">7、声明提升</span><a href="#p7-sheng-ming-ti-sheng" class="header-anchor">#</a></h2>
<p>也称为预解析。在执行环境的第一步（创建阶段），会将带 var 的变量声明和函数声明，放到作用域中。在执行阶段时，它的相关逻辑还是放在原来的位置进行赋值和其他的逻辑处理。函数表达式和函数构造器不会被提升。函数声明和变量都会提升，但是函数声明会先提升，然后是变量。</p>
<p><strong>变量声明提升</strong> 通过 <code>var</code> 声明的变量，在定义语句之前就能访问到，值为 <code>undefined</code>。</p>
<p><strong>函数声明提升</strong> 通过 <code>function</code> 声明的函数，在前面就可以直接调用，值为函数定义（对象）。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/220209/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#ddd; font-size:20px; font-weight: 888; ">220209</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/220209/" class="post-title-link" itemprop="url">JavaScript 模块化</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-02 15:08:34 / 修改时间：16:04:40" itemprop="dateCreated datePublished" datetime="2021-02-02T15:08:34+08:00">2021-02-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2202%EF%BC%9AES%E9%AB%98%E7%BA%A7/" itemprop="url" rel="index"><span itemprop="name">2202：ES高级</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.3k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2><span id="p1-es6-module">1、ES6 Module</span><a href="#p1-es6-module" class="header-anchor">#</a></h2>
<blockquote>
<p>简称 <code>ESM</code></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> test <span class="keyword">from</span> <span class="string">&quot;./test&quot;</span>;</span><br></pre></td></tr></table></figure>
<h2><span id="p2-nodejs-mo-kuai-hua">2、NodeJS 模块化</span><a href="#p2-nodejs-mo-kuai-hua" class="header-anchor">#</a></h2>
<h3><span id="pcommonjs">CommonJS</span><a href="#pcommonjs" class="header-anchor">#</a></h3>
<p>NodeJS 借鉴了 Common 规范实现了一套模块系统，称为 <strong>CommonJS</strong> 模块化系统。</p>
<h2><span id="p1-mo-kuai-bao-lu">1、模块暴露</span><a href="#p1-mo-kuai-bao-lu" class="header-anchor">#</a></h2>
<p>默认情况下模块内部代码对于外部来说都是不可见的，可以通过以下方式向外部暴露变量和函数。</p>
<p>（1）通过 <code>module.exports</code> 来向外部暴露变量和函数</p>
<p><code>module.exports</code> 是导出的对象。</p>
<p>无论添加还是直接覆盖，他永远都是导出的对象。</p>
<p>如果是导出一个对象，可以写</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports.obj = obj;</span><br><span class="line"><span class="comment">//或者</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123; <span class="attr">obj</span>: obj &#125;;</span><br></pre></td></tr></table></figure>
<p>如果导出一组对象，可以写</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">moudle.exports.obj = &#123; <span class="attr">obj</span>: obj, <span class="attr">obj2</span>: obj2 &#125;;</span><br></pre></td></tr></table></figure>
<p>如果直接导出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; fun;</span><br><span class="line">&#x2F;&#x2F; 导出的对象是 fun 函数</span><br></pre></td></tr></table></figure>
<p>例子</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 暴露出去</span></span><br><span class="line"><span class="built_in">module</span>.exports = add;</span><br></pre></td></tr></table></figure>
<p>（2）将变量和函数设置为 <code>exports</code> 的属性来暴露变量和函数为了方便，Node 为每个模块提供一个 exports 变量，指向 module.exports，例如： <code>module.exports.fun = …</code>，相当于<code>exports.fun = ...</code>。</p>
<p><code>exports</code> 本身不具备导出功能，但是修改它的时候，其实是修改了<code>module.exports</code> 。<code>exports</code> 是指向 <code>moudlue.exports</code> 的对象地址的一个新对象。（<code>exports = xxx</code> 的用法是错误的，这样使其不再绑定。正确的用法是 <code>exports.xxx = xxx</code> ）</p>
<p>不能将一个值赋值给<code>exports</code>，而是使用<code>exports.XXX</code>来暴露。否则这样它将不再绑定到<code>module.exports</code>。如果 exports 导出的变量类型是引用类型如函数，则会断开与<code>module.exports</code>的地址指向，导致变量导出失败。因为最终还是要靠<code>module.exports</code>来导出变量的。</p>
<p>例子</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 暴露出去</span></span><br><span class="line"><span class="built_in">exports</span>.add = add; <span class="comment">// &#123; add: [Function: add] &#125;</span></span><br></pre></td></tr></table></figure>
<h2><span id="p2-mo-kuai-dao-ru">2、模块导入</span><a href="#p2-mo-kuai-dao-ru" class="header-anchor">#</a></h2>
<p>通过 <code>require()</code> 来引入外部的模块</p>
<p>模块分为三种类型。</p>
<p>（1）系统模块</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>（2）第三方模块</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// npm install express -save</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>（3）自定义模块</p>
<p>可以不书写后缀名：默认按照 js json node 顺序解析</p>
<p>一定要加上<code>./</code> 或者 <code>../</code> 之类的路径 否则可能解析错误</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// f1,f2 是 函数 o1,o2 是对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// (1)</span></span><br><span class="line"><span class="built_in">module</span>.exports.f1 = f1;</span><br><span class="line">==&gt;</span><br><span class="line"><span class="keyword">const</span> &#123;f1&#125; = <span class="built_in">require</span>(<span class="string">&quot;./mod/test&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports.o1 = o1;</span><br><span class="line">==&gt;</span><br><span class="line"><span class="keyword">const</span> &#123;o1&#125; = <span class="built_in">require</span>(<span class="string">&quot;./mod/test&quot;</span>);</span><br><span class="line">==&gt;</span><br><span class="line"><span class="keyword">const</span> obj = <span class="built_in">require</span>(<span class="string">&quot;./mod/test&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(obj) <span class="comment">// &#123; o1: &#123;...&#125;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// (2)</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;<span class="attr">f1</span>:f1, <span class="attr">f2</span>:f2&#125;</span><br><span class="line">==&gt;</span><br><span class="line"><span class="keyword">const</span> obj = <span class="built_in">require</span>(<span class="string">&quot;./mod/test&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(obj) <span class="comment">// &#123; o1: &#123;...&#125;, o2: &#123;...&#125; &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// (3)</span></span><br><span class="line"><span class="built_in">exports</span>.f1 = f1;</span><br><span class="line"><span class="built_in">exports</span>.f2 = f2;</span><br><span class="line">==&gt;</span><br><span class="line"><span class="keyword">const</span> &#123;f1&#125; = <span class="built_in">require</span>(<span class="string">&quot;./mod/test&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123;f1, f2&#125; = <span class="built_in">require</span>(<span class="string">&quot;./mod/test&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// (4)</span></span><br><span class="line"><span class="built_in">module</span>.exports = f = <span class="function">() =&gt;</span> &#123;&#125;</span><br><span class="line">==&gt;</span><br><span class="line"><span class="keyword">const</span> fn = <span class="built_in">require</span>(<span class="string">&quot;./xxx/xxx&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(fn); <span class="comment">// [Function: f]</span></span><br><span class="line">fn();</span><br></pre></td></tr></table></figure>
<p>！实际使用例子</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// (1)</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="keyword">async</span> (req, res) =&gt; &#123;...&#125;</span><br><span class="line">==&gt;</span><br><span class="line"><span class="keyword">const</span> xxx = <span class="built_in">require</span>(<span class="string">&quot;./xxx&quot;</span>);</span><br></pre></td></tr></table></figure>
<h2><span id="p3-lu-jing-fen-xi-he-wen-jian-ding-wei">3、路径分析和文件定位</span><a href="#p3-lu-jing-fen-xi-he-wen-jian-ding-wei" class="header-anchor">#</a></h2>
<p>路径形式的文件模块：以<code>./</code> <code>../</code>路径形式的文件模块，将其转化为真实路径，根据真实路径索引去查找。</p>
<p>第三方模块会从 <code>node_modules</code> 逐层往上找，直到根目录的<code>node_modules</code>。</p>
<p><code>require()</code>中的文件，如果没有后缀名，会以<code>.js .json .node</code>次序补充扩展名，依次尝试。</p>
<h2><span id="p3-qi-ta-mo-kuai-hua">3、其他模块化</span><a href="#p3-qi-ta-mo-kuai-hua" class="header-anchor">#</a></h2>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/240301/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#ddd; font-size:20px; font-weight: 888; ">240301</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/240301/" class="post-title-link" itemprop="url">RollupJS</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-02 15:00:06 / 修改时间：15:04:02" itemprop="dateCreated datePublished" datetime="2021-02-02T15:00:06+08:00">2021-02-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/2403%EF%BC%9ARollupJS/" itemprop="url" rel="index"><span itemprop="name">2403：RollupJS</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>214</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Rollup 是一个 JavaScript 模块打包器，可以将小块代码编译成大块复杂的代码。<br>
Rollup 对代码模块使用新的标准化格式，这些标准都包含在 JavaScript 的 ES6 版本中，而不是以前的特殊解决方案，如 CommonJS 和 AMD。ES6 模块可以使你自由、无缝地使用你最喜爱的 library 中那些最有用独立函数，而你的项目不必携带其他未使用的代码。ES6 模块最终还是要由浏览器原生实现，但当前 Rollup 可以使你提前体验。</p>
<p><a target="_blank" rel="noopener" href="https://www.rollupjs.com/">文档</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/181807/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#ddd; font-size:20px; font-weight: 888; ">181807</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/181807/" class="post-title-link" itemprop="url">Hexo 渲染 mathjax</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-02 14:49:42 / 修改时间：14:51:49" itemprop="dateCreated datePublished" datetime="2021-02-02T14:49:42+08:00">2021-02-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/1818%EF%BC%9AHexo/" itemprop="url" rel="index"><span itemprop="name">1818：Hexo</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>79</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1><span id="1-xiu-gai-next-zhu-ti-pei-zhi-wen-jian">1、修改 <code>NexT</code> 主题配置文件</span><a href="#1-xiu-gai-next-zhu-ti-pei-zhi-wen-jian" class="header-anchor">#</a></h1>
<p>搜索 <code>mathjax</code>，把 <code>enable</code> 修改为 <code>true</code></p>
<h1><span id="2-zai-xu-yao-shi-yong-de-wen-zhang-tian-jia-shu-xing">2、在需要使用的文章添加属性</span><a href="#2-zai-xu-yao-shi-yong-de-wen-zhang-tian-jia-shu-xing" class="header-anchor">#</a></h1>
<p>在 <code>Front Matter</code> 里添加 <code>mathjax: true</code></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/181806/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#ddd; font-size:20px; font-weight: 888; ">181806</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/181806/" class="post-title-link" itemprop="url">Hexo 渲染 mermaid</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-02 14:38:16 / 修改时间：14:40:11" itemprop="dateCreated datePublished" datetime="2021-02-02T14:38:16+08:00">2021-02-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/1818%EF%BC%9AHexo/" itemprop="url" rel="index"><span itemprop="name">1818：Hexo</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>114</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1><span id="1-an-zhuang">1、安装</span><a href="#1-an-zhuang" class="header-anchor">#</a></h1>
<p><code>npm install hexo-filter-mermaid-diagrams --save</code></p>
<h1><span id="2-zai-next-zhu-ti-zhong-pei-zhi">2、在 <code>NexT</code> 主题中配置</span><a href="#2-zai-next-zhu-ti-zhong-pei-zhi" class="header-anchor">#</a></h1>
<p>搜索关键字 <code>mermaid</code>，把 <code>enable</code> 改成 <code>true</code></p>
<h1><span id="3-chong-xin-bu-shu">3、重新部署</span><a href="#3-chong-xin-bu-shu" class="header-anchor">#</a></h1>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/181805/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#ddd; font-size:20px; font-weight: 888; ">181805</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/181805/" class="post-title-link" itemprop="url">Hexo 渲染 emoji 表情</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-02 14:25:29 / 修改时间：14:46:37" itemprop="dateCreated datePublished" datetime="2021-02-02T14:25:29+08:00">2021-02-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/1818%EF%BC%9AHexo/" itemprop="url" rel="index"><span itemprop="name">1818：Hexo</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>232</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1><span id="1-an-zhuang-xin-de-xuan-ran-qi">1、安装新的渲染器</span><a href="#1-an-zhuang-xin-de-xuan-ran-qi" class="header-anchor">#</a></h1>
<p>如果已经安装，请跳过</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> yourBlog</span><br><span class="line">npm uninstall hexo-render-marked --save</span><br><span class="line">npm i hexo-renderer-markdown-it --save</span><br></pre></td></tr></table></figure>
<h1><span id="2-an-zhuang-cha-jian">2、安装插件</span><a href="#2-an-zhuang-cha-jian" class="header-anchor">#</a></h1>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install markdown-it-emoji --save</span><br></pre></td></tr></table></figure>
<h1><span id="3-bian-ji-zhan-dian-pei-zhi-wen-jian">3、编辑站点配置文件</span><a href="#3-bian-ji-zhan-dian-pei-zhi-wen-jian" class="header-anchor">#</a></h1>
<p>在博客根目录的 <code>_config.yml</code><br>
在 <code>markdown --&gt; plugins</code> 中添加一项：<code>markdown-it-emoji</code></p>
<h1><span id="can-kao">参考</span><a href="#can-kao" class="header-anchor">#</a></h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/fsong/p/5929773.html">Hexo中添加emoji表情</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://nigelkeel.gitee.io/181004/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop= "name" content="KEEL">
      <meta itemprop="description" content="这个人很懒，什么都没留下。 ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永远的伊尔瓦">
    </span>
      <header class="post-header">
        <!-- 自定义id -->
        <span style="color:#ddd; font-size:20px; font-weight: 888; ">181004</span>
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/181004/" class="post-title-link" itemprop="url">Markdown 扩展语法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-02 14:15:02 / 修改时间：14:22:26" itemprop="dateCreated datePublished" datetime="2021-02-02T14:15:02+08:00">2021-02-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/1810%EF%BC%9AMarkdown/" itemprop="url" rel="index"><span itemprop="name">1810：Markdown</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>607</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1><span id="1-mu-lu">1、目录</span><a href="#1-mu-lu" class="header-anchor">#</a></h1>
<p>用<code>[TOC]</code>生成目录。</p>
<h1><span id="2-shu-xue-gong-shi">2、数学公式</span><a href="#2-shu-xue-gong-shi" class="header-anchor">#</a></h1>
<p>通过一个<code>$</code>插入行内公式，通过两个<code>$$</code>插入整行居中的公式。<br>
具体看 <a href="/181007">MathJax</a>。</p>
<h1><span id="3-jiao-zhu">3、角注</span><a href="#3-jiao-zhu" class="header-anchor">#</a></h1>
<p>使用<code>^</code>来定义脚注。如：</p>
<figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">这是一个脚注的例子[^1]</span><br><span class="line">[<span class="symbol">^1</span>]: <span class="link">这里是脚注</span></span><br></pre></td></tr></table></figure>
<h1><span id="4-to-do-list">4、TO-DO LIST</span><a href="#4-to-do-list" class="header-anchor">#</a></h1>
<p>在 <strong>Markdown</strong> 中可以插入TO-DO 列表，如：</p>
<figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> [ ] 未完成</span><br><span class="line"><span class="bullet">-</span> [x] 完成</span><br></pre></td></tr></table></figure>
<h1><span id="5-emoji-biao-qing">5、Emoji 表情</span><a href="#5-emoji-biao-qing" class="header-anchor">#</a></h1>
<p>用冒号包起来，如<code>:link:</code>。</p>
<h1><span id="6-liu-cheng-tu">6、流程图</span><a href="#6-liu-cheng-tu" class="header-anchor">#</a></h1>
<p>流程图在代码块的基础上加关键字<code>flow</code>来生成。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">st&#x3D;&gt;start: Start</span><br><span class="line">e&#x3D;&gt;end: End</span><br><span class="line">op1&#x3D;&gt;operation: My Operation</span><br><span class="line">sub1&#x3D;&gt;subroutine: My Subroutine</span><br><span class="line">cond&#x3D;&gt;condition: Yes or No?</span><br><span class="line">io&#x3D;&gt;inputoutput: catch something...</span><br><span class="line">st-&gt;op1-&gt;cond</span><br><span class="line">cond(yes)-&gt;io-&gt;e</span><br><span class="line">cond(no)-&gt;sub1(right)-&gt;op1</span><br></pre></td></tr></table></figure>
<h1><span id="7-shi-xu-tu">7、时序图</span><a href="#7-shi-xu-tu" class="header-anchor">#</a></h1>
<p>时序图在代码块的基础上加关键字<code>sequence</code>来生成。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Alice-&gt;Bob: Hello Bob, how are you?</span><br><span class="line">Note right of Bob: Bob thinks</span><br><span class="line">Bob--&gt;Alice: I am good thanks!</span><br></pre></td></tr></table></figure>
<h1><span id="can-kao">参考</span><a href="#can-kao" class="header-anchor">#</a></h1>
<p><a target="_blank" rel="noopener" href="http://www.wiz.cn/feature-markdown.html" title="为知笔记 Markdown 新手指南">为知笔记 Markdown 新手指南</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">KEEL</p>
  <div class="site-description" itemprop="description">这个人很懒，什么都没留下。 </div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">219</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">86</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">47</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">KEEL</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">385k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">5:50</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>




  




  
<script src="/js/local-search.js"></script>











<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

  

</body>
</html>
